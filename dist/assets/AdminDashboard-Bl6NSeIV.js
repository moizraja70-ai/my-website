import{c as m,a as l,b as f,j as e,L as x,C as g,u as N}from"./index-CTZXckdp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],w=m("circle-x",v);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_=m("search",y),C=()=>{const[p,h]=l.useState([]),[u,n]=l.useState(!0),[r,b]=l.useState(""),[c,d]=l.useState(null);l.useEffect(()=>{i()},[]);const i=async()=>{n(!0);const{data:s,error:t}=await f();s?h(s):console.error("Failed to fetch users:",t),n(!1)},j=async s=>{if(!confirm(`Are you sure you want to ${s.is_subscribed?"REMOVE":"GRANT"} subscription for ${s.email}?`))return;d(s.id);const t=s.is_subscribed?{is_subscribed:!1,subscription_plan:null,subscription_end_date:null}:{is_subscribed:!0,subscription_plan:"manual-admin",subscription_end_date:new Date(Date.now()+4320*60*60*1e3).toISOString()},{error:a}=await N(s.id,t);a?alert("Failed to update: "+a.message):await i(),d(null)},o=p.filter(s=>{var t,a;return((t=s.email)==null?void 0:t.toLowerCase().includes(r.toLowerCase()))||((a=s.full_name)==null?void 0:a.toLowerCase().includes(r.toLowerCase()))});return e.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-200 font-sans p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Manage users and subscriptions"})]}),e.jsx("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm transition-colors",children:"Back to App"})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4 mb-6 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search by email or name...",value:r,onChange:s=>b(s.target.value),className:"w-full bg-slate-950 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-purple-500"})]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-purple-600/20 text-purple-300 hover:bg-purple-600/30 rounded-lg text-sm font-medium transition-colors",children:"Refresh List"})]}),e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-2xl",children:u?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(x,{className:"w-8 h-8 animate-spin text-purple-500"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-800/50 text-slate-400 text-xs uppercase tracking-wider",children:[e.jsx("th",{className:"p-4 font-medium",children:"User"}),e.jsx("th",{className:"p-4 font-medium",children:"Role"}),e.jsx("th",{className:"p-4 font-medium",children:"Status"}),e.jsx("th",{className:"p-4 font-medium",children:"Plan"}),e.jsx("th",{className:"p-4 font-medium text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800",children:[o.map(s=>e.jsxs("tr",{className:"hover:bg-slate-800/30 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-white",children:s.email}),e.jsx("div",{className:"text-xs text-slate-500",children:s.full_name||"No Name"}),e.jsx("div",{className:"text-[10px] text-slate-600 font-mono mt-0.5",children:s.id})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.role==="admin"?"bg-purple-500/20 text-purple-300":"bg-slate-700/50 text-slate-400"}`,children:s.role||"user"})}),e.jsx("td",{className:"p-4",children:s.is_subscribed?e.jsxs("div",{className:"flex items-center gap-1.5 text-green-400 text-sm",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Active"})]}):e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-sm",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Free"})]})}),e.jsxs("td",{className:"p-4 text-sm text-slate-400",children:[s.subscription_plan||"-",s.subscription_end_date&&e.jsxs("div",{className:"text-[10px] text-slate-600",children:["Ends: ",new Date(s.subscription_end_date).toLocaleDateString()]})]}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>j(s),disabled:c===s.id,className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${s.is_subscribed?"bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20":"bg-green-500/10 text-green-400 hover:bg-green-500/20 border border-green-500/20"}`,children:c===s.id?e.jsx(x,{className:"w-4 h-4 animate-spin"}):s.is_subscribed?"Revoke Access":"Grant Access"})})]},s.id)),o.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:['No users found matching "',r,'"']})})]})]})})})]})})};export{C as default};
