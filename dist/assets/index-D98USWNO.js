(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Xc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oh={exports:{}},uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function gC(){if(G0)return uo;G0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:e,type:i,key:l,ref:a!==void 0?a:null,props:o}}return uo.Fragment=t,uo.jsx=n,uo.jsxs=n,uo}var z0;function yC(){return z0||(z0=1,Oh.exports=gC()),Oh.exports}var w=yC(),qh={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function bC(){if(V0)return He;V0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function I(D,W,N){this.props=D,this.context=W,this.refs=S,this.updater=N||A}I.prototype.isReactComponent={},I.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},I.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function L(){}L.prototype=I.prototype;function P(D,W,N){this.props=D,this.context=W,this.refs=S,this.updater=N||A}var G=P.prototype=new L;G.constructor=P,C(G,I.prototype),G.isPureReactComponent=!0;var J=Array.isArray;function q(){}var V={H:null,A:null,T:null,S:null},ve=Object.prototype.hasOwnProperty;function ne(D,W,N){var te=N.ref;return{$$typeof:e,type:D,key:W,ref:te!==void 0?te:null,props:N}}function F(D,W){return ne(D.type,W,D.props)}function de(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function me(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(N){return W[N]})}var ke=/\/+/g;function xe(D,W){return typeof D=="object"&&D!==null&&D.key!=null?me(""+D.key):W.toString(36)}function be(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(q,q):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function j(D,W,N,te,pe){var ge=typeof D;(ge==="undefined"||ge==="boolean")&&(D=null);var ue=!1;if(D===null)ue=!0;else switch(ge){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(D.$$typeof){case e:case t:ue=!0;break;case p:return ue=D._init,j(ue(D._payload),W,N,te,pe)}}if(ue)return pe=pe(D),ue=te===""?"."+xe(D,0):te,J(pe)?(N="",ue!=null&&(N=ue.replace(ke,"$&/")+"/"),j(pe,W,N,"",function(fe){return fe})):pe!=null&&(de(pe)&&(pe=F(pe,N+(pe.key==null||D&&D.key===pe.key?"":(""+pe.key).replace(ke,"$&/")+"/")+ue)),W.push(pe)),1;ue=0;var Ce=te===""?".":te+":";if(J(D))for(var _e=0;_e<D.length;_e++)te=D[_e],ge=Ce+xe(te,_e),ue+=j(te,W,N,ge,pe);else if(_e=E(D),typeof _e=="function")for(D=_e.call(D),_e=0;!(te=D.next()).done;)te=te.value,ge=Ce+xe(te,_e++),ue+=j(te,W,N,ge,pe);else if(ge==="object"){if(typeof D.then=="function")return j(be(D),W,N,te,pe);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ce(D,W,N){if(D==null)return D;var te=[],pe=0;return j(D,te,"","",function(ge){return W.call(N,ge,pe++)}),te}function Ee(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(N){(D._status===0||D._status===-1)&&(D._status=1,D._result=N)},function(N){(D._status===0||D._status===-1)&&(D._status=2,D._result=N)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var X=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},R={map:ce,forEach:function(D,W,N){ce(D,function(){W.apply(this,arguments)},N)},count:function(D){var W=0;return ce(D,function(){W++}),W},toArray:function(D){return ce(D,function(W){return W})||[]},only:function(D){if(!de(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return He.Activity=y,He.Children=R,He.Component=I,He.Fragment=n,He.Profiler=a,He.PureComponent=P,He.StrictMode=i,He.Suspense=m,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,He.__COMPILER_RUNTIME={__proto__:null,c:function(D){return V.H.useMemoCache(D)}},He.cache=function(D){return function(){return D.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(D,W,N){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var te=C({},D.props),pe=D.key;if(W!=null)for(ge in W.key!==void 0&&(pe=""+W.key),W)!ve.call(W,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&W.ref===void 0||(te[ge]=W[ge]);var ge=arguments.length-2;if(ge===1)te.children=N;else if(1<ge){for(var ue=Array(ge),Ce=0;Ce<ge;Ce++)ue[Ce]=arguments[Ce+2];te.children=ue}return ne(D.type,pe,te)},He.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},He.createElement=function(D,W,N){var te,pe={},ge=null;if(W!=null)for(te in W.key!==void 0&&(ge=""+W.key),W)ve.call(W,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(pe[te]=W[te]);var ue=arguments.length-2;if(ue===1)pe.children=N;else if(1<ue){for(var Ce=Array(ue),_e=0;_e<ue;_e++)Ce[_e]=arguments[_e+2];pe.children=Ce}if(D&&D.defaultProps)for(te in ue=D.defaultProps,ue)pe[te]===void 0&&(pe[te]=ue[te]);return ne(D,ge,pe)},He.createRef=function(){return{current:null}},He.forwardRef=function(D){return{$$typeof:u,render:D}},He.isValidElement=de,He.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:Ee}},He.memo=function(D,W){return{$$typeof:d,type:D,compare:W===void 0?null:W}},He.startTransition=function(D){var W=V.T,N={};V.T=N;try{var te=D(),pe=V.S;pe!==null&&pe(N,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(q,X)}catch(ge){X(ge)}finally{W!==null&&N.types!==null&&(W.types=N.types),V.T=W}},He.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},He.use=function(D){return V.H.use(D)},He.useActionState=function(D,W,N){return V.H.useActionState(D,W,N)},He.useCallback=function(D,W){return V.H.useCallback(D,W)},He.useContext=function(D){return V.H.useContext(D)},He.useDebugValue=function(){},He.useDeferredValue=function(D,W){return V.H.useDeferredValue(D,W)},He.useEffect=function(D,W){return V.H.useEffect(D,W)},He.useEffectEvent=function(D){return V.H.useEffectEvent(D)},He.useId=function(){return V.H.useId()},He.useImperativeHandle=function(D,W,N){return V.H.useImperativeHandle(D,W,N)},He.useInsertionEffect=function(D,W){return V.H.useInsertionEffect(D,W)},He.useLayoutEffect=function(D,W){return V.H.useLayoutEffect(D,W)},He.useMemo=function(D,W){return V.H.useMemo(D,W)},He.useOptimistic=function(D,W){return V.H.useOptimistic(D,W)},He.useReducer=function(D,W,N){return V.H.useReducer(D,W,N)},He.useRef=function(D){return V.H.useRef(D)},He.useState=function(D){return V.H.useState(D)},He.useSyncExternalStore=function(D,W,N){return V.H.useSyncExternalStore(D,W,N)},He.useTransition=function(){return V.H.useTransition()},He.version="19.2.3",He}var W0;function lf(){return W0||(W0=1,qh.exports=bC()),qh.exports}var oe=lf();const cf=Xc(oe);var Bh={exports:{}},ho={},Hh={exports:{}},Uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function vC(){return j0||(j0=1,(function(e){function t(j,ce){var Ee=j.length;j.push(ce);e:for(;0<Ee;){var X=Ee-1>>>1,R=j[X];if(0<a(R,ce))j[X]=ce,j[Ee]=R,Ee=X;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var ce=j[0],Ee=j.pop();if(Ee!==ce){j[0]=Ee;e:for(var X=0,R=j.length,D=R>>>1;X<D;){var W=2*(X+1)-1,N=j[W],te=W+1,pe=j[te];if(0>a(N,Ee))te<R&&0>a(pe,N)?(j[X]=pe,j[te]=Ee,X=te):(j[X]=N,j[W]=Ee,X=W);else if(te<R&&0>a(pe,Ee))j[X]=pe,j[te]=Ee,X=te;else break e}}return ce}function a(j,ce){var Ee=j.sortIndex-ce.sortIndex;return Ee!==0?Ee:j.id-ce.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var m=[],d=[],p=1,y=null,v=3,E=!1,A=!1,C=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function G(j){for(var ce=n(d);ce!==null;){if(ce.callback===null)i(d);else if(ce.startTime<=j)i(d),ce.sortIndex=ce.expirationTime,t(m,ce);else break;ce=n(d)}}function J(j){if(C=!1,G(j),!A)if(n(m)!==null)A=!0,q||(q=!0,me());else{var ce=n(d);ce!==null&&be(J,ce.startTime-j)}}var q=!1,V=-1,ve=5,ne=-1;function F(){return S?!0:!(e.unstable_now()-ne<ve)}function de(){if(S=!1,q){var j=e.unstable_now();ne=j;var ce=!0;try{e:{A=!1,C&&(C=!1,L(V),V=-1),E=!0;var Ee=v;try{t:{for(G(j),y=n(m);y!==null&&!(y.expirationTime>j&&F());){var X=y.callback;if(typeof X=="function"){y.callback=null,v=y.priorityLevel;var R=X(y.expirationTime<=j);if(j=e.unstable_now(),typeof R=="function"){y.callback=R,G(j),ce=!0;break t}y===n(m)&&i(m),G(j)}else i(m);y=n(m)}if(y!==null)ce=!0;else{var D=n(d);D!==null&&be(J,D.startTime-j),ce=!1}}break e}finally{y=null,v=Ee,E=!1}ce=void 0}}finally{ce?me():q=!1}}}var me;if(typeof P=="function")me=function(){P(de)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,xe=ke.port2;ke.port1.onmessage=de,me=function(){xe.postMessage(null)}}else me=function(){I(de,0)};function be(j,ce){V=I(function(){j(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(j){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var Ee=v;v=ce;try{return j()}finally{v=Ee}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(j,ce){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Ee=v;v=j;try{return ce()}finally{v=Ee}},e.unstable_scheduleCallback=function(j,ce,Ee){var X=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?X+Ee:X):Ee=X,j){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=Ee+R,j={id:p++,callback:ce,priorityLevel:j,startTime:Ee,expirationTime:R,sortIndex:-1},Ee>X?(j.sortIndex=Ee,t(d,j),n(m)===null&&j===n(d)&&(C?(L(V),V=-1):C=!0,be(J,Ee-X))):(j.sortIndex=R,t(m,j),A||E||(A=!0,q||(q=!0,me()))),j},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(j){var ce=v;return function(){var Ee=v;v=ce;try{return j.apply(this,arguments)}finally{v=Ee}}}})(Uh)),Uh}var Y0;function wC(){return Y0||(Y0=1,Hh.exports=vC()),Hh.exports}var Fh={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function xC(){if($0)return Jt;$0=1;var e=lf();function t(m){var d="https://react.dev/errors/"+m;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+m+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:m,containerInfo:d,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,d){if(m==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jt.createPortal=function(m,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(m,d,null,p)},Jt.flushSync=function(m){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,m)return m()}finally{l.T=d,i.p=p,i.d.f()}},Jt.preconnect=function(m,d){typeof m=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(m,d))},Jt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Jt.preinit=function(m,d){if(typeof m=="string"&&d&&typeof d.as=="string"){var p=d.as,y=u(p,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(m,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:E}):p==="script"&&i.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Jt.preinitModule=function(m,d){if(typeof m=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(m)},Jt.preload=function(m,d){if(typeof m=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=u(p,d.crossOrigin);i.d.L(m,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Jt.preloadModule=function(m,d){if(typeof m=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(m,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(m)},Jt.requestFormReset=function(m){i.d.r(m)},Jt.unstable_batchedUpdates=function(m,d){return m(d)},Jt.useFormState=function(m,d,p){return l.H.useFormState(m,d,p)},Jt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var K0;function Sx(){if(K0)return Fh.exports;K0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fh.exports=xC(),Fh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function TC(){if(Q0)return ho;Q0=1;var e=wC(),t=lf(),n=Sx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function l(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function u(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(o(r)!==r)throw Error(i(188))}function d(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,h=s;;){var b=c.return;if(b===null)break;var x=b.alternate;if(x===null){if(h=b.return,h!==null){c=h;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===c)return m(b),r;if(x===h)return m(b),s;x=x.sibling}throw Error(i(188))}if(c.return!==h.return)c=b,h=x;else{for(var _=!1,k=b.child;k;){if(k===c){_=!0,c=b,h=x;break}if(k===h){_=!0,h=b,c=x;break}k=k.sibling}if(!_){for(k=x.child;k;){if(k===c){_=!0,c=x,h=b;break}if(k===h){_=!0,h=x,c=b;break}k=k.sibling}if(!_)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),P=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function me(r){return r===null||typeof r!="object"?null:(r=de&&r[de]||r["@@iterator"],typeof r=="function"?r:null)}var ke=Symbol.for("react.client.reference");function xe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ke?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case I:return"Profiler";case S:return"StrictMode";case J:return"Suspense";case q:return"SuspenseList";case ne:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case P:return r.displayName||"Context";case L:return(r._context.displayName||"Context")+".Consumer";case G:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return s=r.displayName||null,s!==null?s:xe(r.type)||"Memo";case ve:s=r._payload,r=r._init;try{return xe(r(s))}catch{}}return null}var be=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},X=[],R=-1;function D(r){return{current:r}}function W(r){0>R||(r.current=X[R],X[R]=null,R--)}function N(r,s){R++,X[R]=r.current,r.current=s}var te=D(null),pe=D(null),ge=D(null),ue=D(null);function Ce(r,s){switch(N(ge,s),N(pe,r),N(te,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?d0(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=d0(s),r=h0(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}W(te),N(te,r)}function _e(){W(te),W(pe),W(ge)}function fe(r){r.memoizedState!==null&&N(ue,r);var s=te.current,c=h0(s,r.type);s!==c&&(N(pe,r),N(te,c))}function Ae(r){pe.current===r&&(W(te),W(pe)),ue.current===r&&(W(ue),so._currentValue=Ee)}var ze,st;function ot(r){if(ze===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ze=s&&s[1]||"",st=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+r+st}var cn=!1;function Kt(r,s){if(!r||cn)return"";cn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var Q=Z}Reflect.construct(r,[],le)}else{try{le.call()}catch(Z){Q=Z}r.call(le.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),_=x[0],k=x[1];if(_&&k){var H=_.split(`
`),K=k.split(`
`);for(b=h=0;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;for(;b<K.length&&!K[b].includes("DetermineComponentFrameRoot");)b++;if(h===H.length||b===K.length)for(h=H.length-1,b=K.length-1;1<=h&&0<=b&&H[h]!==K[b];)b--;for(;1<=h&&0<=b;h--,b--)if(H[h]!==K[b]){if(h!==1||b!==1)do if(h--,b--,0>b||H[h]!==K[b]){var re=`
`+H[h].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=h&&0<=b);break}}}finally{cn=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?ot(c):""}function Pn(r,s){switch(r.tag){case 26:case 27:case 5:return ot(r.type);case 16:return ot("Lazy");case 13:return r.child!==s&&s!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return Kt(r.type,!1);case 11:return Kt(r.type.render,!1);case 1:return Kt(r.type,!0);case 31:return ot("Activity");default:return""}}function si(r){try{var s="",c=null;do s+=Pn(r,c),c=r,r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Qt=Object.prototype.hasOwnProperty,ea=e.unstable_scheduleCallback,bs=e.unstable_cancelCallback,xu=e.unstable_shouldYield,Tu=e.unstable_requestPaint,nn=e.unstable_now,Eu=e.unstable_getCurrentPriorityLevel,ae=e.unstable_ImmediatePriority,Te=e.unstable_UserBlockingPriority,qe=e.unstable_NormalPriority,We=e.unstable_LowPriority,it=e.unstable_IdlePriority,xn=e.log,pi=e.unstable_setDisableYieldValue,rn=null,Dt=null;function un(r){if(typeof xn=="function"&&pi(r),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(rn,r)}catch{}}var dt=Math.clz32?Math.clz32:n_,Fi=Math.log,$n=Math.LN2;function n_(r){return r>>>=0,r===0?32:31-(Fi(r)/$n|0)|0}var el=256,tl=262144,nl=4194304;function Tr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function il(r,s,c){var h=r.pendingLanes;if(h===0)return 0;var b=0,x=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var k=h&134217727;return k!==0?(h=k&~x,h!==0?b=Tr(h):(_&=k,_!==0?b=Tr(_):c||(c=k&~r,c!==0&&(b=Tr(c))))):(k=h&~x,k!==0?b=Tr(k):_!==0?b=Tr(_):c||(c=h&~r,c!==0&&(b=Tr(c)))),b===0?0:s!==0&&s!==b&&(s&x)===0&&(x=b&-b,c=s&-s,x>=c||x===32&&(c&4194048)!==0)?s:b}function vs(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function i_(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(){var r=nl;return nl<<=1,(nl&62914560)===0&&(nl=4194304),r}function _u(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function ws(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function r_(r,s,c,h,b,x){var _=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var k=r.entanglements,H=r.expirationTimes,K=r.hiddenUpdates;for(c=_&~c;0<c;){var re=31-dt(c),le=1<<re;k[re]=0,H[re]=-1;var Q=K[re];if(Q!==null)for(K[re]=null,re=0;re<Q.length;re++){var Z=Q[re];Z!==null&&(Z.lane&=-536870913)}c&=~le}h!==0&&Yf(r,h,0),x!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=x&~(_&~s))}function Yf(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var h=31-dt(s);r.entangledLanes|=s,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function $f(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var h=31-dt(c),b=1<<h;b&s|r[h]&s&&(r[h]|=s),c&=~b}}function Kf(r,s){var c=s&-s;return c=(c&42)!==0?1:Au(c),(c&(r.suspendedLanes|s))!==0?0:c}function Au(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Cu(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Qf(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:L0(r.type))}function Jf(r,s){var c=ce.p;try{return ce.p=r,s()}finally{ce.p=c}}var Gi=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Gi,dn="__reactProps$"+Gi,ta="__reactContainer$"+Gi,Su="__reactEvents$"+Gi,a_="__reactListeners$"+Gi,s_="__reactHandles$"+Gi,Xf="__reactResources$"+Gi,xs="__reactMarker$"+Gi;function ku(r){delete r[Gt],delete r[dn],delete r[Su],delete r[a_],delete r[s_]}function na(r){var s=r[Gt];if(s)return s;for(var c=r.parentNode;c;){if(s=c[ta]||c[Gt]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=v0(r);r!==null;){if(c=r[Gt])return c;r=v0(r)}return s}r=c,c=r.parentNode}return null}function ia(r){if(r=r[Gt]||r[ta]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Ts(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ra(r){var s=r[Xf];return s||(s=r[Xf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function qt(r){r[xs]=!0}var Zf=new Set,ep={};function Er(r,s){aa(r,s),aa(r+"Capture",s)}function aa(r,s){for(ep[r]=s,r=0;r<s.length;r++)Zf.add(s[r])}var o_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tp={},np={};function l_(r){return Qt.call(np,r)?!0:Qt.call(tp,r)?!1:o_.test(r)?np[r]=!0:(tp[r]=!0,!1)}function rl(r,s,c){if(l_(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function al(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function gi(r,s,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+h)}}function Dn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ip(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function c_(r,s,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,x=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return b.call(this)},set:function(_){c=""+_,x.call(this,_)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Iu(r){if(!r._valueTracker){var s=ip(r)?"checked":"value";r._valueTracker=c_(r,s,""+r[s])}}function rp(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return r&&(h=ip(r)?r.checked?"true":"false":r.value),r=h,r!==c?(s.setValue(r),!0):!1}function sl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var u_=/[\n"\\]/g;function Ln(r){return r.replace(u_,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Nu(r,s,c,h,b,x,_,k){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),s!=null?_==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Dn(s)):r.value!==""+Dn(s)&&(r.value=""+Dn(s)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),s!=null?Ru(r,_,Dn(s)):c!=null?Ru(r,_,Dn(c)):h!=null&&r.removeAttribute("value"),b==null&&x!=null&&(r.defaultChecked=!!x),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+Dn(k):r.removeAttribute("name")}function ap(r,s,c,h,b,x,_,k){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),s!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){Iu(r);return}c=c!=null?""+Dn(c):"",s=s!=null?""+Dn(s):c,k||s===r.value||(r.value=s),r.defaultValue=s}h=h??b,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=k?r.checked:!!h,r.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),Iu(r)}function Ru(r,s,c){s==="number"&&sl(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function sa(r,s,c,h){if(r=r.options,s){s={};for(var b=0;b<c.length;b++)s["$"+c[b]]=!0;for(c=0;c<r.length;c++)b=s.hasOwnProperty("$"+r[c].value),r[c].selected!==b&&(r[c].selected=b),b&&h&&(r[c].defaultSelected=!0)}else{for(c=""+Dn(c),s=null,b=0;b<r.length;b++){if(r[b].value===c){r[b].selected=!0,h&&(r[b].defaultSelected=!0);return}s!==null||r[b].disabled||(s=r[b])}s!==null&&(s.selected=!0)}}function sp(r,s,c){if(s!=null&&(s=""+Dn(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+Dn(c):""}function op(r,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(i(92));if(be(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=Dn(s),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),Iu(r)}function oa(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var d_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(r,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":h?r.setProperty(s,c):typeof c!="number"||c===0||d_.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function cp(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var b in s)h=s[b],s.hasOwnProperty(b)&&c[b]!==h&&lp(r,b,h)}else for(var x in s)s.hasOwnProperty(x)&&lp(r,x,s[x])}function Mu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),m_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ol(r){return m_.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function yi(){}var Pu=null;function Du(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var la=null,ca=null;function up(r){var s=ia(r);if(s&&(r=s.stateNode)){var c=r[dn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Nu(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ln(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==r&&h.form===r.form){var b=h[dn]||null;if(!b)throw Error(i(90));Nu(h,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===r.form&&rp(h)}break e;case"textarea":sp(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&sa(r,!!c.multiple,s,!1)}}}var Lu=!1;function dp(r,s,c){if(Lu)return r(s,c);Lu=!0;try{var h=r(s);return h}finally{if(Lu=!1,(la!==null||ca!==null)&&($l(),la&&(s=la,r=ca,ca=la=null,up(s),r)))for(s=0;s<r.length;s++)up(r[s])}}function Es(r,s){var c=r.stateNode;if(c===null)return null;var h=c[dn]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ou=!1;if(bi)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Ou=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Ou=!1}var zi=null,qu=null,ll=null;function hp(){if(ll)return ll;var r,s=qu,c=s.length,h,b="value"in zi?zi.value:zi.textContent,x=b.length;for(r=0;r<c&&s[r]===b[r];r++);var _=c-r;for(h=1;h<=_&&s[c-h]===b[x-h];h++);return ll=b.slice(r,1<h?1-h:void 0)}function cl(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ul(){return!0}function mp(){return!1}function hn(r){function s(c,h,b,x,_){this._reactName=c,this._targetInst=b,this.type=h,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(c=r[k],this[k]=c?c(x):x[k]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ul:mp,this.isPropagationStopped=mp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),s}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=hn(_r),As=y({},_r,{view:0,detail:0}),f_=hn(As),Bu,Hu,Cs,hl=y({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cs&&(Cs&&r.type==="mousemove"?(Bu=r.screenX-Cs.screenX,Hu=r.screenY-Cs.screenY):Hu=Bu=0,Cs=r),Bu)},movementY:function(r){return"movementY"in r?r.movementY:Hu}}),fp=hn(hl),p_=y({},hl,{dataTransfer:0}),g_=hn(p_),y_=y({},As,{relatedTarget:0}),Uu=hn(y_),b_=y({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),v_=hn(b_),w_=y({},_r,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),x_=hn(w_),T_=y({},_r,{data:0}),pp=hn(T_),E_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},__={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C_(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=A_[r])?!!s[r]:!1}function Fu(){return C_}var S_=y({},As,{key:function(r){if(r.key){var s=E_[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=cl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?__[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(r){return r.type==="keypress"?cl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?cl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),k_=hn(S_),I_=y({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=hn(I_),N_=y({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),R_=hn(N_),M_=y({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),P_=hn(M_),D_=y({},hl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),L_=hn(D_),O_=y({},_r,{newState:0,oldState:0}),q_=hn(O_),B_=[9,13,27,32],Gu=bi&&"CompositionEvent"in window,Ss=null;bi&&"documentMode"in document&&(Ss=document.documentMode);var H_=bi&&"TextEvent"in window&&!Ss,yp=bi&&(!Gu||Ss&&8<Ss&&11>=Ss),bp=" ",vp=!1;function wp(r,s){switch(r){case"keyup":return B_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ua=!1;function U_(r,s){switch(r){case"compositionend":return xp(s);case"keypress":return s.which!==32?null:(vp=!0,bp);case"textInput":return r=s.data,r===bp&&vp?null:r;default:return null}}function F_(r,s){if(ua)return r==="compositionend"||!Gu&&wp(r,s)?(r=hp(),ll=qu=zi=null,ua=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yp&&s.locale!=="ko"?null:s.data;default:return null}}var G_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!G_[r.type]:s==="textarea"}function Ep(r,s,c,h){la?ca?ca.push(h):ca=[h]:la=h,s=tc(s,"onChange"),0<s.length&&(c=new dl("onChange","change",null,c,h),r.push({event:c,listeners:s}))}var ks=null,Is=null;function z_(r){a0(r,0)}function ml(r){var s=Ts(r);if(rp(s))return r}function _p(r,s){if(r==="change")return s}var Ap=!1;if(bi){var zu;if(bi){var Vu="oninput"in document;if(!Vu){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),Vu=typeof Cp.oninput=="function"}zu=Vu}else zu=!1;Ap=zu&&(!document.documentMode||9<document.documentMode)}function Sp(){ks&&(ks.detachEvent("onpropertychange",kp),Is=ks=null)}function kp(r){if(r.propertyName==="value"&&ml(Is)){var s=[];Ep(s,Is,r,Du(r)),dp(z_,s)}}function V_(r,s,c){r==="focusin"?(Sp(),ks=s,Is=c,ks.attachEvent("onpropertychange",kp)):r==="focusout"&&Sp()}function W_(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ml(Is)}function j_(r,s){if(r==="click")return ml(s)}function Y_(r,s){if(r==="input"||r==="change")return ml(s)}function $_(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Tn=typeof Object.is=="function"?Object.is:$_;function Ns(r,s){if(Tn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var b=c[h];if(!Qt.call(s,b)||!Tn(r[b],s[b]))return!1}return!0}function Ip(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Np(r,s){var c=Ip(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=s&&h>=s)return{node:c,offset:s-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ip(c)}}function Rp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Rp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Mp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=sl(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=sl(r.document)}return s}function Wu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var K_=bi&&"documentMode"in document&&11>=document.documentMode,da=null,ju=null,Rs=null,Yu=!1;function Pp(r,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yu||da==null||da!==sl(h)||(h=da,"selectionStart"in h&&Wu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Rs&&Ns(Rs,h)||(Rs=h,h=tc(ju,"onSelect"),0<h.length&&(s=new dl("onSelect","select",null,s,c),r.push({event:s,listeners:h}),s.target=da)))}function Ar(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var ha={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},$u={},Dp={};bi&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Cr(r){if($u[r])return $u[r];if(!ha[r])return r;var s=ha[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in Dp)return $u[r]=s[c];return r}var Lp=Cr("animationend"),Op=Cr("animationiteration"),qp=Cr("animationstart"),Q_=Cr("transitionrun"),J_=Cr("transitionstart"),X_=Cr("transitioncancel"),Bp=Cr("transitionend"),Hp=new Map,Ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ku.push("scrollEnd");function Kn(r,s){Hp.set(r,s),Er(s,[r])}var fl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},On=[],ma=0,Qu=0;function pl(){for(var r=ma,s=Qu=ma=0;s<r;){var c=On[s];On[s++]=null;var h=On[s];On[s++]=null;var b=On[s];On[s++]=null;var x=On[s];if(On[s++]=null,h!==null&&b!==null){var _=h.pending;_===null?b.next=b:(b.next=_.next,_.next=b),h.pending=b}x!==0&&Up(c,b,x)}}function gl(r,s,c,h){On[ma++]=r,On[ma++]=s,On[ma++]=c,On[ma++]=h,Qu|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Ju(r,s,c,h){return gl(r,s,c,h),yl(r)}function Sr(r,s){return gl(r,null,null,s),yl(r)}function Up(r,s,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var b=!1,x=r.return;x!==null;)x.childLanes|=c,h=x.alternate,h!==null&&(h.childLanes|=c),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(b=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,b&&s!==null&&(b=31-dt(c),r=x.hiddenUpdates,h=r[b],h===null?r[b]=[s]:h.push(s),s.lane=c|536870912),x):null}function yl(r){if(50<Zs)throw Zs=0,sh=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var fa={};function Z_(r,s,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(r,s,c,h){return new Z_(r,s,c,h)}function Xu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function vi(r,s){var c=r.alternate;return c===null?(c=En(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Fp(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function bl(r,s,c,h,b,x){var _=0;if(h=r,typeof r=="function")Xu(r)&&(_=1);else if(typeof r=="string")_=rC(r,c,te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ne:return r=En(31,c,s,b),r.elementType=ne,r.lanes=x,r;case C:return kr(c.children,b,x,s);case S:_=8,b|=24;break;case I:return r=En(12,c,s,b|2),r.elementType=I,r.lanes=x,r;case J:return r=En(13,c,s,b),r.elementType=J,r.lanes=x,r;case q:return r=En(19,c,s,b),r.elementType=q,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:_=10;break e;case L:_=9;break e;case G:_=11;break e;case V:_=14;break e;case ve:_=16,h=null;break e}_=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return s=En(_,c,s,b),s.elementType=r,s.type=h,s.lanes=x,s}function kr(r,s,c,h){return r=En(7,r,h,s),r.lanes=c,r}function Zu(r,s,c){return r=En(6,r,null,s),r.lanes=c,r}function Gp(r){var s=En(18,null,null,0);return s.stateNode=r,s}function ed(r,s,c){return s=En(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var zp=new WeakMap;function qn(r,s){if(typeof r=="object"&&r!==null){var c=zp.get(r);return c!==void 0?c:(s={value:r,source:s,stack:si(s)},zp.set(r,s),s)}return{value:r,source:s,stack:si(s)}}var pa=[],ga=0,vl=null,Ms=0,Bn=[],Hn=0,Vi=null,oi=1,li="";function wi(r,s){pa[ga++]=Ms,pa[ga++]=vl,vl=r,Ms=s}function Vp(r,s,c){Bn[Hn++]=oi,Bn[Hn++]=li,Bn[Hn++]=Vi,Vi=r;var h=oi;r=li;var b=32-dt(h)-1;h&=~(1<<b),c+=1;var x=32-dt(s)+b;if(30<x){var _=b-b%5;x=(h&(1<<_)-1).toString(32),h>>=_,b-=_,oi=1<<32-dt(s)+b|c<<b|h,li=x+r}else oi=1<<x|c<<b|h,li=r}function td(r){r.return!==null&&(wi(r,1),Vp(r,1,0))}function nd(r){for(;r===vl;)vl=pa[--ga],pa[ga]=null,Ms=pa[--ga],pa[ga]=null;for(;r===Vi;)Vi=Bn[--Hn],Bn[Hn]=null,li=Bn[--Hn],Bn[Hn]=null,oi=Bn[--Hn],Bn[Hn]=null}function Wp(r,s){Bn[Hn++]=oi,Bn[Hn++]=li,Bn[Hn++]=Vi,oi=s.id,li=s.overflow,Vi=r}var zt=null,gt=null,Je=!1,Wi=null,Un=!1,id=Error(i(519));function ji(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ps(qn(s,r)),id}function jp(r){var s=r.stateNode,c=r.type,h=r.memoizedProps;switch(s[Gt]=r,s[dn]=h,c){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(c=0;c<to.length;c++)Ye(to[c],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),ap(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),op(s,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||c0(s.textContent,c)?(h.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),h.onScroll!=null&&Ye("scroll",s),h.onScrollEnd!=null&&Ye("scrollend",s),h.onClick!=null&&(s.onclick=yi),s=!0):s=!1,s||ji(r,!0)}function Yp(r){for(zt=r.return;zt;)switch(zt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:zt=zt.return}}function ya(r){if(r!==zt)return!1;if(!Je)return Yp(r),Je=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||xh(r.type,r.memoizedProps)),c=!c),c&&gt&&ji(r),Yp(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=b0(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));gt=b0(r)}else s===27?(s=gt,sr(r.type)?(r=Ch,Ch=null,gt=r):gt=s):gt=zt?Gn(r.stateNode.nextSibling):null;return!0}function Ir(){gt=zt=null,Je=!1}function rd(){var r=Wi;return r!==null&&(gn===null?gn=r:gn.push.apply(gn,r),Wi=null),r}function Ps(r){Wi===null?Wi=[r]:Wi.push(r)}var ad=D(null),Nr=null,xi=null;function Yi(r,s,c){N(ad,s._currentValue),s._currentValue=c}function Ti(r){r._currentValue=ad.current,W(ad)}function sd(r,s,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===c)break;r=r.return}}function od(r,s,c,h){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var x=b.dependencies;if(x!==null){var _=b.child;x=x.firstContext;e:for(;x!==null;){var k=x;x=b;for(var H=0;H<s.length;H++)if(k.context===s[H]){x.lanes|=c,k=x.alternate,k!==null&&(k.lanes|=c),sd(x.return,c,r),h||(_=null);break e}x=k.next}}else if(b.tag===18){if(_=b.return,_===null)throw Error(i(341));_.lanes|=c,x=_.alternate,x!==null&&(x.lanes|=c),sd(_,c,r),_=null}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===r){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}}function ba(r,s,c,h){r=null;for(var b=s,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var _=b.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var k=b.type;Tn(b.pendingProps.value,_.value)||(r!==null?r.push(k):r=[k])}}else if(b===ue.current){if(_=b.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(so):r=[so])}b=b.return}r!==null&&od(s,r,c,h),s.flags|=262144}function wl(r){for(r=r.firstContext;r!==null;){if(!Tn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Rr(r){Nr=r,xi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Vt(r){return $p(Nr,r)}function xl(r,s){return Nr===null&&Rr(r),$p(r,s)}function $p(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},xi===null){if(r===null)throw Error(i(308));xi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else xi=xi.next=s;return c}var eA=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},tA=e.unstable_scheduleCallback,nA=e.unstable_NormalPriority,kt={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new eA,data:new Map,refCount:0}}function Ds(r){r.refCount--,r.refCount===0&&tA(nA,function(){r.controller.abort()})}var Ls=null,cd=0,va=0,wa=null;function iA(r,s){if(Ls===null){var c=Ls=[];cd=0,va=hh(),wa={status:"pending",value:void 0,then:function(h){c.push(h)}}}return cd++,s.then(Kp,Kp),s}function Kp(){if(--cd===0&&Ls!==null){wa!==null&&(wa.status="fulfilled");var r=Ls;Ls=null,va=0,wa=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function rA(r,s){var c=[],h={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return r.then(function(){h.status="fulfilled",h.value=s;for(var b=0;b<c.length;b++)(0,c[b])(s)},function(b){for(h.status="rejected",h.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),h}var Qp=j.S;j.S=function(r,s){Py=nn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&iA(r,s),Qp!==null&&Qp(r,s)};var Mr=D(null);function ud(){var r=Mr.current;return r!==null?r:ht.pooledCache}function Tl(r,s){s===null?N(Mr,Mr.current):N(Mr,s.pool)}function Jp(){var r=ud();return r===null?null:{parent:kt._currentValue,pool:r}}var xa=Error(i(460)),dd=Error(i(474)),El=Error(i(542)),_l={then:function(){}};function Xp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Zp(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(yi,yi),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tg(r),r;default:if(typeof s.status=="string")s.then(yi,yi);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(h){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=h}},function(h){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tg(r),r}throw Dr=s,xa}}function Pr(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Dr=c,xa):c}}var Dr=null;function eg(){if(Dr===null)throw Error(i(459));var r=Dr;return Dr=null,r}function tg(r){if(r===xa||r===El)throw Error(i(483))}var Ta=null,Os=0;function Al(r){var s=Os;return Os+=1,Ta===null&&(Ta=[]),Zp(Ta,r,s)}function qs(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Cl(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function ng(r){function s(z,U){if(r){var $=z.deletions;$===null?(z.deletions=[U],z.flags|=16):$.push(U)}}function c(z,U){if(!r)return null;for(;U!==null;)s(z,U),U=U.sibling;return null}function h(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function b(z,U){return z=vi(z,U),z.index=0,z.sibling=null,z}function x(z,U,$){return z.index=$,r?($=z.alternate,$!==null?($=$.index,$<U?(z.flags|=67108866,U):$):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function _(z){return r&&z.alternate===null&&(z.flags|=67108866),z}function k(z,U,$,se){return U===null||U.tag!==6?(U=Zu($,z.mode,se),U.return=z,U):(U=b(U,$),U.return=z,U)}function H(z,U,$,se){var Me=$.type;return Me===C?re(z,U,$.props.children,se,$.key):U!==null&&(U.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ve&&Pr(Me)===U.type)?(U=b(U,$.props),qs(U,$),U.return=z,U):(U=bl($.type,$.key,$.props,null,z.mode,se),qs(U,$),U.return=z,U)}function K(z,U,$,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=ed($,z.mode,se),U.return=z,U):(U=b(U,$.children||[]),U.return=z,U)}function re(z,U,$,se,Me){return U===null||U.tag!==7?(U=kr($,z.mode,se,Me),U.return=z,U):(U=b(U,$),U.return=z,U)}function le(z,U,$){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Zu(""+U,z.mode,$),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return $=bl(U.type,U.key,U.props,null,z.mode,$),qs($,U),$.return=z,$;case A:return U=ed(U,z.mode,$),U.return=z,U;case ve:return U=Pr(U),le(z,U,$)}if(be(U)||me(U))return U=kr(U,z.mode,$,null),U.return=z,U;if(typeof U.then=="function")return le(z,Al(U),$);if(U.$$typeof===P)return le(z,xl(z,U),$);Cl(z,U)}return null}function Q(z,U,$,se){var Me=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Me!==null?null:k(z,U,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return $.key===Me?H(z,U,$,se):null;case A:return $.key===Me?K(z,U,$,se):null;case ve:return $=Pr($),Q(z,U,$,se)}if(be($)||me($))return Me!==null?null:re(z,U,$,se,null);if(typeof $.then=="function")return Q(z,U,Al($),se);if($.$$typeof===P)return Q(z,U,xl(z,$),se);Cl(z,$)}return null}function Z(z,U,$,se,Me){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return z=z.get($)||null,k(U,z,""+se,Me);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return z=z.get(se.key===null?$:se.key)||null,H(U,z,se,Me);case A:return z=z.get(se.key===null?$:se.key)||null,K(U,z,se,Me);case ve:return se=Pr(se),Z(z,U,$,se,Me)}if(be(se)||me(se))return z=z.get($)||null,re(U,z,se,Me,null);if(typeof se.then=="function")return Z(z,U,$,Al(se),Me);if(se.$$typeof===P)return Z(z,U,$,xl(U,se),Me);Cl(U,se)}return null}function Ie(z,U,$,se){for(var Me=null,Ze=null,Ne=U,Fe=U=0,Qe=null;Ne!==null&&Fe<$.length;Fe++){Ne.index>Fe?(Qe=Ne,Ne=null):Qe=Ne.sibling;var et=Q(z,Ne,$[Fe],se);if(et===null){Ne===null&&(Ne=Qe);break}r&&Ne&&et.alternate===null&&s(z,Ne),U=x(et,U,Fe),Ze===null?Me=et:Ze.sibling=et,Ze=et,Ne=Qe}if(Fe===$.length)return c(z,Ne),Je&&wi(z,Fe),Me;if(Ne===null){for(;Fe<$.length;Fe++)Ne=le(z,$[Fe],se),Ne!==null&&(U=x(Ne,U,Fe),Ze===null?Me=Ne:Ze.sibling=Ne,Ze=Ne);return Je&&wi(z,Fe),Me}for(Ne=h(Ne);Fe<$.length;Fe++)Qe=Z(Ne,z,Fe,$[Fe],se),Qe!==null&&(r&&Qe.alternate!==null&&Ne.delete(Qe.key===null?Fe:Qe.key),U=x(Qe,U,Fe),Ze===null?Me=Qe:Ze.sibling=Qe,Ze=Qe);return r&&Ne.forEach(function(dr){return s(z,dr)}),Je&&wi(z,Fe),Me}function De(z,U,$,se){if($==null)throw Error(i(151));for(var Me=null,Ze=null,Ne=U,Fe=U=0,Qe=null,et=$.next();Ne!==null&&!et.done;Fe++,et=$.next()){Ne.index>Fe?(Qe=Ne,Ne=null):Qe=Ne.sibling;var dr=Q(z,Ne,et.value,se);if(dr===null){Ne===null&&(Ne=Qe);break}r&&Ne&&dr.alternate===null&&s(z,Ne),U=x(dr,U,Fe),Ze===null?Me=dr:Ze.sibling=dr,Ze=dr,Ne=Qe}if(et.done)return c(z,Ne),Je&&wi(z,Fe),Me;if(Ne===null){for(;!et.done;Fe++,et=$.next())et=le(z,et.value,se),et!==null&&(U=x(et,U,Fe),Ze===null?Me=et:Ze.sibling=et,Ze=et);return Je&&wi(z,Fe),Me}for(Ne=h(Ne);!et.done;Fe++,et=$.next())et=Z(Ne,z,Fe,et.value,se),et!==null&&(r&&et.alternate!==null&&Ne.delete(et.key===null?Fe:et.key),U=x(et,U,Fe),Ze===null?Me=et:Ze.sibling=et,Ze=et);return r&&Ne.forEach(function(pC){return s(z,pC)}),Je&&wi(z,Fe),Me}function ut(z,U,$,se){if(typeof $=="object"&&$!==null&&$.type===C&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E:e:{for(var Me=$.key;U!==null;){if(U.key===Me){if(Me=$.type,Me===C){if(U.tag===7){c(z,U.sibling),se=b(U,$.props.children),se.return=z,z=se;break e}}else if(U.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ve&&Pr(Me)===U.type){c(z,U.sibling),se=b(U,$.props),qs(se,$),se.return=z,z=se;break e}c(z,U);break}else s(z,U);U=U.sibling}$.type===C?(se=kr($.props.children,z.mode,se,$.key),se.return=z,z=se):(se=bl($.type,$.key,$.props,null,z.mode,se),qs(se,$),se.return=z,z=se)}return _(z);case A:e:{for(Me=$.key;U!==null;){if(U.key===Me)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){c(z,U.sibling),se=b(U,$.children||[]),se.return=z,z=se;break e}else{c(z,U);break}else s(z,U);U=U.sibling}se=ed($,z.mode,se),se.return=z,z=se}return _(z);case ve:return $=Pr($),ut(z,U,$,se)}if(be($))return Ie(z,U,$,se);if(me($)){if(Me=me($),typeof Me!="function")throw Error(i(150));return $=Me.call($),De(z,U,$,se)}if(typeof $.then=="function")return ut(z,U,Al($),se);if($.$$typeof===P)return ut(z,U,xl(z,$),se);Cl(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,U!==null&&U.tag===6?(c(z,U.sibling),se=b(U,$),se.return=z,z=se):(c(z,U),se=Zu($,z.mode,se),se.return=z,z=se),_(z)):c(z,U)}return function(z,U,$,se){try{Os=0;var Me=ut(z,U,$,se);return Ta=null,Me}catch(Ne){if(Ne===xa||Ne===El)throw Ne;var Ze=En(29,Ne,null,z.mode);return Ze.lanes=se,Ze.return=z,Ze}finally{}}}var Lr=ng(!0),ig=ng(!1),$i=!1;function hd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ki(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Qi(r,s,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(nt&2)!==0){var b=h.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),h.pending=s,s=yl(r),Up(r,null,c),s}return gl(r,h,s,c),yl(r)}function Bs(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,$f(r,c)}}function fd(r,s){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var b=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?b=x=_:x=x.next=_,c=c.next}while(c!==null);x===null?b=x=s:x=x.next=s}else b=x=s;c={baseState:h.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var pd=!1;function Hs(){if(pd){var r=wa;if(r!==null)throw r}}function Us(r,s,c,h){pd=!1;var b=r.updateQueue;$i=!1;var x=b.firstBaseUpdate,_=b.lastBaseUpdate,k=b.shared.pending;if(k!==null){b.shared.pending=null;var H=k,K=H.next;H.next=null,_===null?x=K:_.next=K,_=H;var re=r.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==_&&(k===null?re.firstBaseUpdate=K:k.next=K,re.lastBaseUpdate=H))}if(x!==null){var le=b.baseState;_=0,re=K=H=null,k=x;do{var Q=k.lane&-536870913,Z=Q!==k.lane;if(Z?(Ke&Q)===Q:(h&Q)===Q){Q!==0&&Q===va&&(pd=!0),re!==null&&(re=re.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ie=r,De=k;Q=s;var ut=c;switch(De.tag){case 1:if(Ie=De.payload,typeof Ie=="function"){le=Ie.call(ut,le,Q);break e}le=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=De.payload,Q=typeof Ie=="function"?Ie.call(ut,le,Q):Ie,Q==null)break e;le=y({},le,Q);break e;case 2:$i=!0}}Q=k.callback,Q!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=b.callbacks,Z===null?b.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(K=re=Z,H=le):re=re.next=Z,_|=Q;if(k=k.next,k===null){if(k=b.shared.pending,k===null)break;Z=k,k=Z.next,Z.next=null,b.lastBaseUpdate=Z,b.shared.pending=null}}while(!0);re===null&&(H=le),b.baseState=H,b.firstBaseUpdate=K,b.lastBaseUpdate=re,x===null&&(b.shared.lanes=0),tr|=_,r.lanes=_,r.memoizedState=le}}function rg(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function ag(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)rg(c[r],s)}var Ea=D(null),Sl=D(0);function sg(r,s){r=Ri,N(Sl,r),N(Ea,s),Ri=r|s.baseLanes}function gd(){N(Sl,Ri),N(Ea,Ea.current)}function yd(){Ri=Sl.current,W(Ea),W(Sl)}var _n=D(null),Fn=null;function Ji(r){var s=r.alternate;N(_t,_t.current&1),N(_n,r),Fn===null&&(s===null||Ea.current!==null||s.memoizedState!==null)&&(Fn=r)}function bd(r){N(_t,_t.current),N(_n,r),Fn===null&&(Fn=r)}function og(r){r.tag===22?(N(_t,_t.current),N(_n,r),Fn===null&&(Fn=r)):Xi()}function Xi(){N(_t,_t.current),N(_n,_n.current)}function An(r){W(_n),Fn===r&&(Fn=null),W(_t)}var _t=D(0);function kl(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||_h(c)||Ah(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ei=0,Ue=null,lt=null,It=null,Il=!1,_a=!1,Or=!1,Nl=0,Fs=0,Aa=null,aA=0;function xt(){throw Error(i(321))}function vd(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Tn(r[c],s[c]))return!1;return!0}function wd(r,s,c,h,b,x){return Ei=x,Ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=r===null||r.memoizedState===null?Vg:Ld,Or=!1,x=c(h,b),Or=!1,_a&&(x=cg(s,c,h,b)),lg(r),x}function lg(r){j.H=Vs;var s=lt!==null&&lt.next!==null;if(Ei=0,It=lt=Ue=null,Il=!1,Fs=0,Aa=null,s)throw Error(i(300));r===null||Nt||(r=r.dependencies,r!==null&&wl(r)&&(Nt=!0))}function cg(r,s,c,h){Ue=r;var b=0;do{if(_a&&(Aa=null),Fs=0,_a=!1,25<=b)throw Error(i(301));if(b+=1,It=lt=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}j.H=Wg,x=s(c,h)}while(_a);return x}function sA(){var r=j.H,s=r.useState()[0];return s=typeof s.then=="function"?Gs(s):s,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(Ue.flags|=1024),s}function xd(){var r=Nl!==0;return Nl=0,r}function Td(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Ed(r){if(Il){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Il=!1}Ei=0,It=lt=Ue=null,_a=!1,Fs=Nl=0,Aa=null}function an(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ue.memoizedState=It=r:It=It.next=r,It}function At(){if(lt===null){var r=Ue.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var s=It===null?Ue.memoizedState:It.next;if(s!==null)It=s,lt=r;else{if(r===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},It===null?Ue.memoizedState=It=r:It=It.next=r}return It}function Rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gs(r){var s=Fs;return Fs+=1,Aa===null&&(Aa=[]),r=Zp(Aa,r,s),s=Ue,(It===null?s.memoizedState:It.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?Vg:Ld),r}function Ml(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Gs(r);if(r.$$typeof===P)return Vt(r)}throw Error(i(438,String(r)))}function _d(r){var s=null,c=Ue.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=Ue.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Rl(),Ue.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),h=0;h<r;h++)c[h]=F;return s.index++,c}function _i(r,s){return typeof s=="function"?s(r):s}function Pl(r){var s=At();return Ad(s,lt,r)}function Ad(r,s,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var b=r.baseQueue,x=h.pending;if(x!==null){if(b!==null){var _=b.next;b.next=x.next,x.next=_}s.baseQueue=b=x,h.pending=null}if(x=r.baseState,b===null)r.memoizedState=x;else{s=b.next;var k=_=null,H=null,K=s,re=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(Ke&le)===le:(Ei&le)===le){var Q=K.revertLane;if(Q===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===va&&(re=!0);else if((Ei&Q)===Q){K=K.next,Q===va&&(re=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(k=H=le,_=x):H=H.next=le,Ue.lanes|=Q,tr|=Q;le=K.action,Or&&c(x,le),x=K.hasEagerState?K.eagerState:c(x,le)}else Q={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},H===null?(k=H=Q,_=x):H=H.next=Q,Ue.lanes|=le,tr|=le;K=K.next}while(K!==null&&K!==s);if(H===null?_=x:H.next=k,!Tn(x,r.memoizedState)&&(Nt=!0,re&&(c=wa,c!==null)))throw c;r.memoizedState=x,r.baseState=_,r.baseQueue=H,h.lastRenderedState=x}return b===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Cd(r){var s=At(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,b=c.pending,x=s.memoizedState;if(b!==null){c.pending=null;var _=b=b.next;do x=r(x,_.action),_=_.next;while(_!==b);Tn(x,s.memoizedState)||(Nt=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),c.lastRenderedState=x}return[x,h]}function ug(r,s,c){var h=Ue,b=At(),x=Je;if(x){if(c===void 0)throw Error(i(407));c=c()}else c=s();var _=!Tn((lt||b).memoizedState,c);if(_&&(b.memoizedState=c,Nt=!0),b=b.queue,Id(mg.bind(null,h,b,r),[r]),b.getSnapshot!==s||_||It!==null&&It.memoizedState.tag&1){if(h.flags|=2048,Ca(9,{destroy:void 0},hg.bind(null,h,b,c,s),null),ht===null)throw Error(i(349));x||(Ei&127)!==0||dg(h,s,c)}return c}function dg(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=Ue.updateQueue,s===null?(s=Rl(),Ue.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function hg(r,s,c,h){s.value=c,s.getSnapshot=h,fg(s)&&pg(r)}function mg(r,s,c){return c(function(){fg(s)&&pg(r)})}function fg(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Tn(r,c)}catch{return!0}}function pg(r){var s=Sr(r,2);s!==null&&yn(s,r,2)}function Sd(r){var s=an();if(typeof r=="function"){var c=r;if(r=c(),Or){un(!0);try{c()}finally{un(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:r},s}function gg(r,s,c,h){return r.baseState=c,Ad(r,lt,typeof h=="function"?h:_i)}function oA(r,s,c,h,b){if(Ol(r))throw Error(i(485));if(r=s.action,r!==null){var x={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};j.T!==null?c(!0):x.isTransition=!1,h(x),c=s.pending,c===null?(x.next=s.pending=x,yg(s,x)):(x.next=c.next,s.pending=c.next=x)}}function yg(r,s){var c=s.action,h=s.payload,b=r.state;if(s.isTransition){var x=j.T,_={};j.T=_;try{var k=c(b,h),H=j.S;H!==null&&H(_,k),bg(r,s,k)}catch(K){kd(r,s,K)}finally{x!==null&&_.types!==null&&(x.types=_.types),j.T=x}}else try{x=c(b,h),bg(r,s,x)}catch(K){kd(r,s,K)}}function bg(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){vg(r,s,h)},function(h){return kd(r,s,h)}):vg(r,s,c)}function vg(r,s,c){s.status="fulfilled",s.value=c,wg(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,yg(r,c)))}function kd(r,s,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,wg(s),s=s.next;while(s!==h)}r.action=null}function wg(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function xg(r,s){return s}function Tg(r,s){if(Je){var c=ht.formState;if(c!==null){e:{var h=Ue;if(Je){if(gt){t:{for(var b=gt,x=Un;b.nodeType!==8;){if(!x){b=null;break t}if(b=Gn(b.nextSibling),b===null){b=null;break t}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){gt=Gn(b.nextSibling),h=b.data==="F!";break e}}ji(h)}h=!1}h&&(s=c[0])}}return c=an(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xg,lastRenderedState:s},c.queue=h,c=Fg.bind(null,Ue,h),h.dispatch=c,h=Sd(!1),x=Dd.bind(null,Ue,!1,h.queue),h=an(),b={state:s,dispatch:null,action:r,pending:null},h.queue=b,c=oA.bind(null,Ue,b,x,c),b.dispatch=c,h.memoizedState=r,[s,c,!1]}function Eg(r){var s=At();return _g(s,lt,r)}function _g(r,s,c){if(s=Ad(r,s,xg)[0],r=Pl(_i)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Gs(s)}catch(_){throw _===xa?El:_}else h=s;s=At();var b=s.queue,x=b.dispatch;return c!==s.memoizedState&&(Ue.flags|=2048,Ca(9,{destroy:void 0},lA.bind(null,b,c),null)),[h,x,r]}function lA(r,s){r.action=s}function Ag(r){var s=At(),c=lt;if(c!==null)return _g(s,c,r);At(),s=s.memoizedState,c=At();var h=c.queue.dispatch;return c.memoizedState=r,[s,h,!1]}function Ca(r,s,c,h){return r={tag:r,create:c,deps:h,inst:s,next:null},s=Ue.updateQueue,s===null&&(s=Rl(),Ue.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,s.lastEffect=r),r}function Cg(){return At().memoizedState}function Dl(r,s,c,h){var b=an();Ue.flags|=r,b.memoizedState=Ca(1|s,{destroy:void 0},c,h===void 0?null:h)}function Ll(r,s,c,h){var b=At();h=h===void 0?null:h;var x=b.memoizedState.inst;lt!==null&&h!==null&&vd(h,lt.memoizedState.deps)?b.memoizedState=Ca(s,x,c,h):(Ue.flags|=r,b.memoizedState=Ca(1|s,x,c,h))}function Sg(r,s){Dl(8390656,8,r,s)}function Id(r,s){Ll(2048,8,r,s)}function cA(r){Ue.flags|=4;var s=Ue.updateQueue;if(s===null)s=Rl(),Ue.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function kg(r){var s=At().memoizedState;return cA({ref:s,nextImpl:r}),function(){if((nt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Ig(r,s){return Ll(4,2,r,s)}function Ng(r,s){return Ll(4,4,r,s)}function Rg(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Mg(r,s,c){c=c!=null?c.concat([r]):null,Ll(4,4,Rg.bind(null,s,r),c)}function Nd(){}function Pg(r,s){var c=At();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&vd(s,h[1])?h[0]:(c.memoizedState=[r,s],r)}function Dg(r,s){var c=At();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&vd(s,h[1]))return h[0];if(h=r(),Or){un(!0);try{r()}finally{un(!1)}}return c.memoizedState=[h,s],h}function Rd(r,s,c){return c===void 0||(Ei&1073741824)!==0&&(Ke&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=Ly(),Ue.lanes|=r,tr|=r,c)}function Lg(r,s,c,h){return Tn(c,s)?c:Ea.current!==null?(r=Rd(r,c,h),Tn(r,s)||(Nt=!0),r):(Ei&42)===0||(Ei&1073741824)!==0&&(Ke&261930)===0?(Nt=!0,r.memoizedState=c):(r=Ly(),Ue.lanes|=r,tr|=r,s)}function Og(r,s,c,h,b){var x=ce.p;ce.p=x!==0&&8>x?x:8;var _=j.T,k={};j.T=k,Dd(r,!1,s,c);try{var H=b(),K=j.S;if(K!==null&&K(k,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var re=rA(H,h);zs(r,s,re,kn(r))}else zs(r,s,h,kn(r))}catch(le){zs(r,s,{then:function(){},status:"rejected",reason:le},kn())}finally{ce.p=x,_!==null&&k.types!==null&&(_.types=k.types),j.T=_}}function uA(){}function Md(r,s,c,h){if(r.tag!==5)throw Error(i(476));var b=qg(r).queue;Og(r,b,s,Ee,c===null?uA:function(){return Bg(r),c(h)})}function qg(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:Ee},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Bg(r){var s=qg(r);s.next===null&&(s=r.alternate.memoizedState),zs(r,s.next.queue,{},kn())}function Pd(){return Vt(so)}function Hg(){return At().memoizedState}function Ug(){return At().memoizedState}function dA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=kn();r=Ki(c);var h=Qi(s,r,c);h!==null&&(yn(h,s,c),Bs(h,s,c)),s={cache:ld()},r.payload=s;return}s=s.return}}function hA(r,s,c){var h=kn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ol(r)?Gg(s,c):(c=Ju(r,s,c,h),c!==null&&(yn(c,r,h),zg(c,s,h)))}function Fg(r,s,c){var h=kn();zs(r,s,c,h)}function zs(r,s,c,h){var b={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ol(r))Gg(s,b);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var _=s.lastRenderedState,k=x(_,c);if(b.hasEagerState=!0,b.eagerState=k,Tn(k,_))return gl(r,s,b,0),ht===null&&pl(),!1}catch{}finally{}if(c=Ju(r,s,b,h),c!==null)return yn(c,r,h),zg(c,s,h),!0}return!1}function Dd(r,s,c,h){if(h={lane:2,revertLane:hh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ol(r)){if(s)throw Error(i(479))}else s=Ju(r,c,h,2),s!==null&&yn(s,r,2)}function Ol(r){var s=r.alternate;return r===Ue||s!==null&&s===Ue}function Gg(r,s){_a=Il=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function zg(r,s,c){if((c&4194048)!==0){var h=s.lanes;h&=r.pendingLanes,c|=h,s.lanes=c,$f(r,c)}}var Vs={readContext:Vt,use:Ml,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};Vs.useEffectEvent=xt;var Vg={readContext:Vt,use:Ml,useCallback:function(r,s){return an().memoizedState=[r,s===void 0?null:s],r},useContext:Vt,useEffect:Sg,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,Dl(4194308,4,Rg.bind(null,s,r),c)},useLayoutEffect:function(r,s){return Dl(4194308,4,r,s)},useInsertionEffect:function(r,s){Dl(4,2,r,s)},useMemo:function(r,s){var c=an();s=s===void 0?null:s;var h=r();if(Or){un(!0);try{r()}finally{un(!1)}}return c.memoizedState=[h,s],h},useReducer:function(r,s,c){var h=an();if(c!==void 0){var b=c(s);if(Or){un(!0);try{c(s)}finally{un(!1)}}}else b=s;return h.memoizedState=h.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},h.queue=r,r=r.dispatch=hA.bind(null,Ue,r),[h.memoizedState,r]},useRef:function(r){var s=an();return r={current:r},s.memoizedState=r},useState:function(r){r=Sd(r);var s=r.queue,c=Fg.bind(null,Ue,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:Nd,useDeferredValue:function(r,s){var c=an();return Rd(c,r,s)},useTransition:function(){var r=Sd(!1);return r=Og.bind(null,Ue,r.queue,!0,!1),an().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var h=Ue,b=an();if(Je){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),ht===null)throw Error(i(349));(Ke&127)!==0||dg(h,s,c)}b.memoizedState=c;var x={value:c,getSnapshot:s};return b.queue=x,Sg(mg.bind(null,h,x,r),[r]),h.flags|=2048,Ca(9,{destroy:void 0},hg.bind(null,h,x,c,s),null),c},useId:function(){var r=an(),s=ht.identifierPrefix;if(Je){var c=li,h=oi;c=(h&~(1<<32-dt(h)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Nl++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=aA++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Pd,useFormState:Tg,useActionState:Tg,useOptimistic:function(r){var s=an();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Dd.bind(null,Ue,!0,c),c.dispatch=s,[r,s]},useMemoCache:_d,useCacheRefresh:function(){return an().memoizedState=dA.bind(null,Ue)},useEffectEvent:function(r){var s=an(),c={impl:r};return s.memoizedState=c,function(){if((nt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Ld={readContext:Vt,use:Ml,useCallback:Pg,useContext:Vt,useEffect:Id,useImperativeHandle:Mg,useInsertionEffect:Ig,useLayoutEffect:Ng,useMemo:Dg,useReducer:Pl,useRef:Cg,useState:function(){return Pl(_i)},useDebugValue:Nd,useDeferredValue:function(r,s){var c=At();return Lg(c,lt.memoizedState,r,s)},useTransition:function(){var r=Pl(_i)[0],s=At().memoizedState;return[typeof r=="boolean"?r:Gs(r),s]},useSyncExternalStore:ug,useId:Hg,useHostTransitionStatus:Pd,useFormState:Eg,useActionState:Eg,useOptimistic:function(r,s){var c=At();return gg(c,lt,r,s)},useMemoCache:_d,useCacheRefresh:Ug};Ld.useEffectEvent=kg;var Wg={readContext:Vt,use:Ml,useCallback:Pg,useContext:Vt,useEffect:Id,useImperativeHandle:Mg,useInsertionEffect:Ig,useLayoutEffect:Ng,useMemo:Dg,useReducer:Cd,useRef:Cg,useState:function(){return Cd(_i)},useDebugValue:Nd,useDeferredValue:function(r,s){var c=At();return lt===null?Rd(c,r,s):Lg(c,lt.memoizedState,r,s)},useTransition:function(){var r=Cd(_i)[0],s=At().memoizedState;return[typeof r=="boolean"?r:Gs(r),s]},useSyncExternalStore:ug,useId:Hg,useHostTransitionStatus:Pd,useFormState:Ag,useActionState:Ag,useOptimistic:function(r,s){var c=At();return lt!==null?gg(c,lt,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:_d,useCacheRefresh:Ug};Wg.useEffectEvent=kg;function Od(r,s,c,h){s=r.memoizedState,c=c(h,s),c=c==null?s:y({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var qd={enqueueSetState:function(r,s,c){r=r._reactInternals;var h=kn(),b=Ki(h);b.payload=s,c!=null&&(b.callback=c),s=Qi(r,b,h),s!==null&&(yn(s,r,h),Bs(s,r,h))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var h=kn(),b=Ki(h);b.tag=1,b.payload=s,c!=null&&(b.callback=c),s=Qi(r,b,h),s!==null&&(yn(s,r,h),Bs(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=kn(),h=Ki(c);h.tag=2,s!=null&&(h.callback=s),s=Qi(r,h,c),s!==null&&(yn(s,r,c),Bs(s,r,c))}};function jg(r,s,c,h,b,x,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,x,_):s.prototype&&s.prototype.isPureReactComponent?!Ns(c,h)||!Ns(b,x):!0}function Yg(r,s,c,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==r&&qd.enqueueReplaceState(s,s.state,null)}function qr(r,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(r=r.defaultProps){c===s&&(c=y({},c));for(var b in r)c[b]===void 0&&(c[b]=r[b])}return c}function $g(r){fl(r)}function Kg(r){console.error(r)}function Qg(r){fl(r)}function ql(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function Jg(r,s,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Bd(r,s,c){return c=Ki(c),c.tag=3,c.payload={element:null},c.callback=function(){ql(r,s)},c}function Xg(r){return r=Ki(r),r.tag=3,r}function Zg(r,s,c,h){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var x=h.value;r.payload=function(){return b(x)},r.callback=function(){Jg(s,c,h)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){Jg(s,c,h),typeof b!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function mA(r,s,c,h,b){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&ba(s,c,b,!0),c=_n.current,c!==null){switch(c.tag){case 31:case 13:return Fn===null?Kl():c.alternate===null&&Tt===0&&(Tt=3),c.flags&=-257,c.flags|=65536,c.lanes=b,h===_l?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),ch(r,h,b)),!1;case 22:return c.flags|=65536,h===_l?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),ch(r,h,b)),!1}throw Error(i(435,c.tag))}return ch(r,h,b),Kl(),!1}if(Je)return s=_n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,h!==id&&(r=Error(i(422),{cause:h}),Ps(qn(r,c)))):(h!==id&&(s=Error(i(423),{cause:h}),Ps(qn(s,c))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,h=qn(h,c),b=Bd(r.stateNode,h,b),fd(r,b),Tt!==4&&(Tt=2)),!1;var x=Error(i(520),{cause:h});if(x=qn(x,c),Xs===null?Xs=[x]:Xs.push(x),Tt!==4&&(Tt=2),s===null)return!0;h=qn(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=b&-b,c.lanes|=r,r=Bd(c.stateNode,h,r),fd(c,r),!1;case 1:if(s=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(nr===null||!nr.has(x))))return c.flags|=65536,b&=-b,c.lanes|=b,b=Xg(b),Zg(b,r,c,h),fd(c,b),!1}c=c.return}while(c!==null);return!1}var Hd=Error(i(461)),Nt=!1;function Wt(r,s,c,h){s.child=r===null?ig(s,null,c,h):Lr(s,r.child,c,h)}function ey(r,s,c,h,b){c=c.render;var x=s.ref;if("ref"in h){var _={};for(var k in h)k!=="ref"&&(_[k]=h[k])}else _=h;return Rr(s),h=wd(r,s,c,_,x,b),k=xd(),r!==null&&!Nt?(Td(r,s,b),Ai(r,s,b)):(Je&&k&&td(s),s.flags|=1,Wt(r,s,h,b),s.child)}function ty(r,s,c,h,b){if(r===null){var x=c.type;return typeof x=="function"&&!Xu(x)&&x.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=x,ny(r,s,x,h,b)):(r=bl(c.type,null,h,s,s.mode,b),r.ref=s.ref,r.return=s,s.child=r)}if(x=r.child,!Yd(r,b)){var _=x.memoizedProps;if(c=c.compare,c=c!==null?c:Ns,c(_,h)&&r.ref===s.ref)return Ai(r,s,b)}return s.flags|=1,r=vi(x,h),r.ref=s.ref,r.return=s,s.child=r}function ny(r,s,c,h,b){if(r!==null){var x=r.memoizedProps;if(Ns(x,h)&&r.ref===s.ref)if(Nt=!1,s.pendingProps=h=x,Yd(r,b))(r.flags&131072)!==0&&(Nt=!0);else return s.lanes=r.lanes,Ai(r,s,b)}return Ud(r,s,c,h,b)}function iy(r,s,c,h){var b=h.children,x=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|c:c,r!==null){for(h=s.child=r.child,b=0;h!==null;)b=b|h.lanes|h.childLanes,h=h.sibling;h=b&~x}else h=0,s.child=null;return ry(r,s,x,c,h)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Tl(s,x!==null?x.cachePool:null),x!==null?sg(s,x):gd(),og(s);else return h=s.lanes=536870912,ry(r,s,x!==null?x.baseLanes|c:c,c,h)}else x!==null?(Tl(s,x.cachePool),sg(s,x),Xi(),s.memoizedState=null):(r!==null&&Tl(s,null),gd(),Xi());return Wt(r,s,b,c),s.child}function Ws(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ry(r,s,c,h,b){var x=ud();return x=x===null?null:{parent:kt._currentValue,pool:x},s.memoizedState={baseLanes:c,cachePool:x},r!==null&&Tl(s,null),gd(),og(s),r!==null&&ba(r,s,h,!0),s.childLanes=b,null}function Bl(r,s){return s=Ul({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function ay(r,s,c){return Lr(s,r.child,null,c),r=Bl(s,s.pendingProps),r.flags|=2,An(s),s.memoizedState=null,r}function fA(r,s,c){var h=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Je){if(h.mode==="hidden")return r=Bl(s,h),s.lanes=536870912,Ws(null,r);if(bd(s),(r=gt)?(r=y0(r,Un),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Vi!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},c=Gp(r),c.return=s,s.child=c,zt=s,gt=null)):r=null,r===null)throw ji(s);return s.lanes=536870912,null}return Bl(s,h)}var x=r.memoizedState;if(x!==null){var _=x.dehydrated;if(bd(s),b)if(s.flags&256)s.flags&=-257,s=ay(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Nt||ba(r,s,c,!1),b=(c&r.childLanes)!==0,Nt||b){if(h=ht,h!==null&&(_=Kf(h,c),_!==0&&_!==x.retryLane))throw x.retryLane=_,Sr(r,_),yn(h,r,_),Hd;Kl(),s=ay(r,s,c)}else r=x.treeContext,gt=Gn(_.nextSibling),zt=s,Je=!0,Wi=null,Un=!1,r!==null&&Wp(s,r),s=Bl(s,h),s.flags|=4096;return s}return r=vi(r.child,{mode:h.mode,children:h.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Hl(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Ud(r,s,c,h,b){return Rr(s),c=wd(r,s,c,h,void 0,b),h=xd(),r!==null&&!Nt?(Td(r,s,b),Ai(r,s,b)):(Je&&h&&td(s),s.flags|=1,Wt(r,s,c,b),s.child)}function sy(r,s,c,h,b,x){return Rr(s),s.updateQueue=null,c=cg(s,h,c,b),lg(r),h=xd(),r!==null&&!Nt?(Td(r,s,x),Ai(r,s,x)):(Je&&h&&td(s),s.flags|=1,Wt(r,s,c,x),s.child)}function oy(r,s,c,h,b){if(Rr(s),s.stateNode===null){var x=fa,_=c.contextType;typeof _=="object"&&_!==null&&(x=Vt(_)),x=new c(h,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=qd,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=h,x.state=s.memoizedState,x.refs={},hd(s),_=c.contextType,x.context=typeof _=="object"&&_!==null?Vt(_):fa,x.state=s.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Od(s,c,_,h),x.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&qd.enqueueReplaceState(x,x.state,null),Us(s,h,x,b),Hs(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(r===null){x=s.stateNode;var k=s.memoizedProps,H=qr(c,k);x.props=H;var K=x.context,re=c.contextType;_=fa,typeof re=="object"&&re!==null&&(_=Vt(re));var le=c.getDerivedStateFromProps;re=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,re||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k||K!==_)&&Yg(s,x,h,_),$i=!1;var Q=s.memoizedState;x.state=Q,Us(s,h,x,b),Hs(),K=s.memoizedState,k||Q!==K||$i?(typeof le=="function"&&(Od(s,c,le,h),K=s.memoizedState),(H=$i||jg(s,c,H,h,Q,K,_))?(re||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=K),x.props=h,x.state=K,x.context=_,h=H):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{x=s.stateNode,md(r,s),_=s.memoizedProps,re=qr(c,_),x.props=re,le=s.pendingProps,Q=x.context,K=c.contextType,H=fa,typeof K=="object"&&K!==null&&(H=Vt(K)),k=c.getDerivedStateFromProps,(K=typeof k=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==le||Q!==H)&&Yg(s,x,h,H),$i=!1,Q=s.memoizedState,x.state=Q,Us(s,h,x,b),Hs();var Z=s.memoizedState;_!==le||Q!==Z||$i||r!==null&&r.dependencies!==null&&wl(r.dependencies)?(typeof k=="function"&&(Od(s,c,k,h),Z=s.memoizedState),(re=$i||jg(s,c,re,h,Q,Z,H)||r!==null&&r.dependencies!==null&&wl(r.dependencies))?(K||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,Z,H),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,Z,H)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Z),x.props=h,x.state=Z,x.context=H,h=re):(typeof x.componentDidUpdate!="function"||_===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),h=!1)}return x=h,Hl(r,s),h=(s.flags&128)!==0,x||h?(x=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,r!==null&&h?(s.child=Lr(s,r.child,null,b),s.child=Lr(s,null,c,b)):Wt(r,s,c,b),s.memoizedState=x.state,r=s.child):r=Ai(r,s,b),r}function ly(r,s,c,h){return Ir(),s.flags|=256,Wt(r,s,c,h),s.child}var Fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gd(r){return{baseLanes:r,cachePool:Jp()}}function zd(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=Sn),r}function cy(r,s,c){var h=s.pendingProps,b=!1,x=(s.flags&128)!==0,_;if((_=x)||(_=r!==null&&r.memoizedState===null?!1:(_t.current&2)!==0),_&&(b=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,r===null){if(Je){if(b?Ji(s):Xi(),(r=gt)?(r=y0(r,Un),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Vi!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},c=Gp(r),c.return=s,s.child=c,zt=s,gt=null)):r=null,r===null)throw ji(s);return Ah(r)?s.lanes=32:s.lanes=536870912,null}var k=h.children;return h=h.fallback,b?(Xi(),b=s.mode,k=Ul({mode:"hidden",children:k},b),h=kr(h,b,c,null),k.return=s,h.return=s,k.sibling=h,s.child=k,h=s.child,h.memoizedState=Gd(c),h.childLanes=zd(r,_,c),s.memoizedState=Fd,Ws(null,h)):(Ji(s),Vd(s,k))}var H=r.memoizedState;if(H!==null&&(k=H.dehydrated,k!==null)){if(x)s.flags&256?(Ji(s),s.flags&=-257,s=Wd(r,s,c)):s.memoizedState!==null?(Xi(),s.child=r.child,s.flags|=128,s=null):(Xi(),k=h.fallback,b=s.mode,h=Ul({mode:"visible",children:h.children},b),k=kr(k,b,c,null),k.flags|=2,h.return=s,k.return=s,h.sibling=k,s.child=h,Lr(s,r.child,null,c),h=s.child,h.memoizedState=Gd(c),h.childLanes=zd(r,_,c),s.memoizedState=Fd,s=Ws(null,h));else if(Ji(s),Ah(k)){if(_=k.nextSibling&&k.nextSibling.dataset,_)var K=_.dgst;_=K,h=Error(i(419)),h.stack="",h.digest=_,Ps({value:h,source:null,stack:null}),s=Wd(r,s,c)}else if(Nt||ba(r,s,c,!1),_=(c&r.childLanes)!==0,Nt||_){if(_=ht,_!==null&&(h=Kf(_,c),h!==0&&h!==H.retryLane))throw H.retryLane=h,Sr(r,h),yn(_,r,h),Hd;_h(k)||Kl(),s=Wd(r,s,c)}else _h(k)?(s.flags|=192,s.child=r.child,s=null):(r=H.treeContext,gt=Gn(k.nextSibling),zt=s,Je=!0,Wi=null,Un=!1,r!==null&&Wp(s,r),s=Vd(s,h.children),s.flags|=4096);return s}return b?(Xi(),k=h.fallback,b=s.mode,H=r.child,K=H.sibling,h=vi(H,{mode:"hidden",children:h.children}),h.subtreeFlags=H.subtreeFlags&65011712,K!==null?k=vi(K,k):(k=kr(k,b,c,null),k.flags|=2),k.return=s,h.return=s,h.sibling=k,s.child=h,Ws(null,h),h=s.child,k=r.child.memoizedState,k===null?k=Gd(c):(b=k.cachePool,b!==null?(H=kt._currentValue,b=b.parent!==H?{parent:H,pool:H}:b):b=Jp(),k={baseLanes:k.baseLanes|c,cachePool:b}),h.memoizedState=k,h.childLanes=zd(r,_,c),s.memoizedState=Fd,Ws(r.child,h)):(Ji(s),c=r.child,r=c.sibling,c=vi(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,r!==null&&(_=s.deletions,_===null?(s.deletions=[r],s.flags|=16):_.push(r)),s.child=c,s.memoizedState=null,c)}function Vd(r,s){return s=Ul({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ul(r,s){return r=En(22,r,null,s),r.lanes=0,r}function Wd(r,s,c){return Lr(s,r.child,null,c),r=Vd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function uy(r,s,c){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),sd(r.return,s,c)}function jd(r,s,c,h,b,x){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:b,treeForkCount:x}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=c,_.tailMode=b,_.treeForkCount=x)}function dy(r,s,c){var h=s.pendingProps,b=h.revealOrder,x=h.tail;h=h.children;var _=_t.current,k=(_&2)!==0;if(k?(_=_&1|2,s.flags|=128):_&=1,N(_t,_),Wt(r,s,h,c),h=Je?Ms:0,!k&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uy(r,c,s);else if(r.tag===19)uy(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(c=s.child,b=null;c!==null;)r=c.alternate,r!==null&&kl(r)===null&&(b=c),c=c.sibling;c=b,c===null?(b=s.child,s.child=null):(b=c.sibling,c.sibling=null),jd(s,!1,b,c,x,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=s.child,s.child=null;b!==null;){if(r=b.alternate,r!==null&&kl(r)===null){s.child=b;break}r=b.sibling,b.sibling=c,c=b,b=r}jd(s,!0,c,null,x,h);break;case"together":jd(s,!1,null,null,void 0,h);break;default:s.memoizedState=null}return s.child}function Ai(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),tr|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(ba(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=vi(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=vi(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Yd(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&wl(r)))}function pA(r,s,c){switch(s.tag){case 3:Ce(s,s.stateNode.containerInfo),Yi(s,kt,r.memoizedState.cache),Ir();break;case 27:case 5:fe(s);break;case 4:Ce(s,s.stateNode.containerInfo);break;case 10:Yi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,bd(s),null;break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Ji(s),s.flags|=128,null):(c&s.child.childLanes)!==0?cy(r,s,c):(Ji(s),r=Ai(r,s,c),r!==null?r.sibling:null);Ji(s);break;case 19:var b=(r.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(ba(r,s,c,!1),h=(c&s.childLanes)!==0),b){if(h)return dy(r,s,c);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),N(_t,_t.current),h)break;return null;case 22:return s.lanes=0,iy(r,s,c,s.pendingProps);case 24:Yi(s,kt,r.memoizedState.cache)}return Ai(r,s,c)}function hy(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)Nt=!0;else{if(!Yd(r,c)&&(s.flags&128)===0)return Nt=!1,pA(r,s,c);Nt=(r.flags&131072)!==0}else Nt=!1,Je&&(s.flags&1048576)!==0&&Vp(s,Ms,s.index);switch(s.lanes=0,s.tag){case 16:e:{var h=s.pendingProps;if(r=Pr(s.elementType),s.type=r,typeof r=="function")Xu(r)?(h=qr(r,h),s.tag=1,s=oy(null,s,r,h,c)):(s.tag=0,s=Ud(null,s,r,h,c));else{if(r!=null){var b=r.$$typeof;if(b===G){s.tag=11,s=ey(null,s,r,h,c);break e}else if(b===V){s.tag=14,s=ty(null,s,r,h,c);break e}}throw s=xe(r)||r,Error(i(306,s,""))}}return s;case 0:return Ud(r,s,s.type,s.pendingProps,c);case 1:return h=s.type,b=qr(h,s.pendingProps),oy(r,s,h,b,c);case 3:e:{if(Ce(s,s.stateNode.containerInfo),r===null)throw Error(i(387));h=s.pendingProps;var x=s.memoizedState;b=x.element,md(r,s),Us(s,h,null,c);var _=s.memoizedState;if(h=_.cache,Yi(s,kt,h),h!==x.cache&&od(s,[kt],c,!0),Hs(),h=_.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=ly(r,s,h,c);break e}else if(h!==b){b=qn(Error(i(424)),s),Ps(b),s=ly(r,s,h,c);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=Gn(r.firstChild),zt=s,Je=!0,Wi=null,Un=!0,c=ig(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ir(),h===b){s=Ai(r,s,c);break e}Wt(r,s,h,c)}s=s.child}return s;case 26:return Hl(r,s),r===null?(c=E0(s.type,null,s.pendingProps,null))?s.memoizedState=c:Je||(c=s.type,r=s.pendingProps,h=nc(ge.current).createElement(c),h[Gt]=s,h[dn]=r,jt(h,c,r),qt(h),s.stateNode=h):s.memoizedState=E0(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return fe(s),r===null&&Je&&(h=s.stateNode=w0(s.type,s.pendingProps,ge.current),zt=s,Un=!0,b=gt,sr(s.type)?(Ch=b,gt=Gn(h.firstChild)):gt=b),Wt(r,s,s.pendingProps.children,c),Hl(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Je&&((b=h=gt)&&(h=WA(h,s.type,s.pendingProps,Un),h!==null?(s.stateNode=h,zt=s,gt=Gn(h.firstChild),Un=!1,b=!0):b=!1),b||ji(s)),fe(s),b=s.type,x=s.pendingProps,_=r!==null?r.memoizedProps:null,h=x.children,xh(b,x)?h=null:_!==null&&xh(b,_)&&(s.flags|=32),s.memoizedState!==null&&(b=wd(r,s,sA,null,null,c),so._currentValue=b),Hl(r,s),Wt(r,s,h,c),s.child;case 6:return r===null&&Je&&((r=c=gt)&&(c=jA(c,s.pendingProps,Un),c!==null?(s.stateNode=c,zt=s,gt=null,r=!0):r=!1),r||ji(s)),null;case 13:return cy(r,s,c);case 4:return Ce(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Lr(s,null,h,c):Wt(r,s,h,c),s.child;case 11:return ey(r,s,s.type,s.pendingProps,c);case 7:return Wt(r,s,s.pendingProps,c),s.child;case 8:return Wt(r,s,s.pendingProps.children,c),s.child;case 12:return Wt(r,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Yi(s,s.type,h.value),Wt(r,s,h.children,c),s.child;case 9:return b=s.type._context,h=s.pendingProps.children,Rr(s),b=Vt(b),h=h(b),s.flags|=1,Wt(r,s,h,c),s.child;case 14:return ty(r,s,s.type,s.pendingProps,c);case 15:return ny(r,s,s.type,s.pendingProps,c);case 19:return dy(r,s,c);case 31:return fA(r,s,c);case 22:return iy(r,s,c,s.pendingProps);case 24:return Rr(s),h=Vt(kt),r===null?(b=ud(),b===null&&(b=ht,x=ld(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=c),b=x),s.memoizedState={parent:h,cache:b},hd(s),Yi(s,kt,b)):((r.lanes&c)!==0&&(md(r,s),Us(s,null,null,c),Hs()),b=r.memoizedState,x=s.memoizedState,b.parent!==h?(b={parent:h,cache:h},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),Yi(s,kt,h)):(h=x.cache,Yi(s,kt,h),h!==b.cache&&od(s,[kt],c,!0))),Wt(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ci(r){r.flags|=4}function $d(r,s,c,h,b){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(Hy())r.flags|=8192;else throw Dr=_l,dd}else r.flags&=-16777217}function my(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!k0(s))if(Hy())r.flags|=8192;else throw Dr=_l,dd}function Fl(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?jf():536870912,r.lanes|=s,Na|=s)}function js(r,s){if(!Je)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function yt(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(s)for(var b=r.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags&65011712,h|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)c|=b.lanes|b.childLanes,h|=b.subtreeFlags,h|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=h,r.childLanes=c,s}function gA(r,s,c){var h=s.pendingProps;switch(nd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(s),null;case 1:return yt(s),null;case 3:return c=s.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Ti(kt),_e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ya(s)?Ci(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rd())),yt(s),null;case 26:var b=s.type,x=s.memoizedState;return r===null?(Ci(s),x!==null?(yt(s),my(s,x)):(yt(s),$d(s,b,null,h,c))):x?x!==r.memoizedState?(Ci(s),yt(s),my(s,x)):(yt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==h&&Ci(s),yt(s),$d(s,b,r,h,c)),null;case 27:if(Ae(s),c=ge.current,b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Ci(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return yt(s),null}r=te.current,ya(s)?jp(s):(r=w0(b,h,c),s.stateNode=r,Ci(s))}return yt(s),null;case 5:if(Ae(s),b=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==h&&Ci(s);else{if(!h){if(s.stateNode===null)throw Error(i(166));return yt(s),null}if(x=te.current,ya(s))jp(s);else{var _=nc(ge.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?x.multiple=!0:h.size&&(x.size=h.size);break;default:x=typeof h.is=="string"?_.createElement(b,{is:h.is}):_.createElement(b)}}x[Gt]=s,x[dn]=h;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=x;e:switch(jt(x,b,h),b){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ci(s)}}return yt(s),$d(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==h&&Ci(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(i(166));if(r=ge.current,ya(s)){if(r=s.stateNode,c=s.memoizedProps,h=null,b=zt,b!==null)switch(b.tag){case 27:case 5:h=b.memoizedProps}r[Gt]=s,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||c0(r.nodeValue,c)),r||ji(s,!0)}else r=nc(r).createTextNode(h),r[Gt]=s,s.stateNode=r}return yt(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(h=ya(s),c!==null){if(r===null){if(!h)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Gt]=s}else Ir(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),r=!1}else c=rd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(An(s),s):(An(s),null);if((s.flags&128)!==0)throw Error(i(558))}return yt(s),null;case 13:if(h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=ya(s),h!==null&&h.dehydrated!==null){if(r===null){if(!b)throw Error(i(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[Gt]=s}else Ir(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),b=!1}else b=rd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?(An(s),s):(An(s),null)}return An(s),(s.flags&128)!==0?(s.lanes=c,s):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=s.child,b=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(b=h.alternate.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==b&&(h.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),Fl(s,s.updateQueue),yt(s),null);case 4:return _e(),r===null&&gh(s.stateNode.containerInfo),yt(s),null;case 10:return Ti(s.type),yt(s),null;case 19:if(W(_t),h=s.memoizedState,h===null)return yt(s),null;if(b=(s.flags&128)!==0,x=h.rendering,x===null)if(b)js(h,!1);else{if(Tt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(x=kl(r),x!==null){for(s.flags|=128,js(h,!1),r=x.updateQueue,s.updateQueue=r,Fl(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)Fp(c,r),c=c.sibling;return N(_t,_t.current&1|2),Je&&wi(s,h.treeForkCount),s.child}r=r.sibling}h.tail!==null&&nn()>jl&&(s.flags|=128,b=!0,js(h,!1),s.lanes=4194304)}else{if(!b)if(r=kl(x),r!==null){if(s.flags|=128,b=!0,r=r.updateQueue,s.updateQueue=r,Fl(s,r),js(h,!0),h.tail===null&&h.tailMode==="hidden"&&!x.alternate&&!Je)return yt(s),null}else 2*nn()-h.renderingStartTime>jl&&c!==536870912&&(s.flags|=128,b=!0,js(h,!1),s.lanes=4194304);h.isBackwards?(x.sibling=s.child,s.child=x):(r=h.last,r!==null?r.sibling=x:s.child=x,h.last=x)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=nn(),r.sibling=null,c=_t.current,N(_t,b?c&1|2:c&1),Je&&wi(s,h.treeForkCount),r):(yt(s),null);case 22:case 23:return An(s),yd(),h=s.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(yt(s),s.subtreeFlags&6&&(s.flags|=8192)):yt(s),c=s.updateQueue,c!==null&&Fl(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),r!==null&&W(Mr),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ti(kt),yt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function yA(r,s){switch(nd(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ti(kt),_e(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 31:if(s.memoizedState!==null){if(An(s),s.alternate===null)throw Error(i(340));Ir()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(An(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ir()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return W(_t),null;case 4:return _e(),null;case 10:return Ti(s.type),null;case 22:case 23:return An(s),yd(),r!==null&&W(Mr),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ti(kt),null;case 25:return null;default:return null}}function fy(r,s){switch(nd(s),s.tag){case 3:Ti(kt),_e();break;case 26:case 27:case 5:Ae(s);break;case 4:_e();break;case 31:s.memoizedState!==null&&An(s);break;case 13:An(s);break;case 19:W(_t);break;case 10:Ti(s.type);break;case 22:case 23:An(s),yd(),r!==null&&W(Mr);break;case 24:Ti(kt)}}function Ys(r,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var b=h.next;c=b;do{if((c.tag&r)===r){h=void 0;var x=c.create,_=c.inst;h=x(),_.destroy=h}c=c.next}while(c!==b)}}catch(k){at(s,s.return,k)}}function Zi(r,s,c){try{var h=s.updateQueue,b=h!==null?h.lastEffect:null;if(b!==null){var x=b.next;h=x;do{if((h.tag&r)===r){var _=h.inst,k=_.destroy;if(k!==void 0){_.destroy=void 0,b=s;var H=c,K=k;try{K()}catch(re){at(b,H,re)}}}h=h.next}while(h!==x)}}catch(re){at(s,s.return,re)}}function py(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{ag(s,c)}catch(h){at(r,r.return,h)}}}function gy(r,s,c){c.props=qr(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){at(r,s,h)}}function $s(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(b){at(r,s,b)}}function ci(r,s){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(b){at(r,s,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){at(r,s,b)}else c.current=null}function yy(r){var s=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(b){at(r,r.return,b)}}function Kd(r,s,c){try{var h=r.stateNode;HA(h,r.type,c,s),h[dn]=s}catch(b){at(r,r.return,b)}}function by(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&sr(r.type)||r.tag===4}function Qd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||by(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&sr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jd(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=yi));else if(h!==4&&(h===27&&sr(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(Jd(r,s,c),r=r.sibling;r!==null;)Jd(r,s,c),r=r.sibling}function Gl(r,s,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(h!==4&&(h===27&&sr(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Gl(r,s,c),r=r.sibling;r!==null;)Gl(r,s,c),r=r.sibling}function vy(r){var s=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);jt(s,h,c),s[Gt]=r,s[dn]=c}catch(x){at(r,r.return,x)}}var Si=!1,Rt=!1,Xd=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function bA(r,s){if(r=r.containerInfo,vh=cc,r=Mp(r),Wu(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var b=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var _=0,k=-1,H=-1,K=0,re=0,le=r,Q=null;t:for(;;){for(var Z;le!==c||b!==0&&le.nodeType!==3||(k=_+b),le!==x||h!==0&&le.nodeType!==3||(H=_+h),le.nodeType===3&&(_+=le.nodeValue.length),(Z=le.firstChild)!==null;)Q=le,le=Z;for(;;){if(le===r)break t;if(Q===c&&++K===b&&(k=_),Q===x&&++re===h&&(H=_),(Z=le.nextSibling)!==null)break;le=Q,Q=le.parentNode}le=Z}c=k===-1||H===-1?null:{start:k,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(wh={focusedElem:r,selectionRange:c},cc=!1,Bt=s;Bt!==null;)if(s=Bt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Bt=r;else for(;Bt!==null;){switch(s=Bt,x=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)b=r[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,c=s,b=x.memoizedProps,x=x.memoizedState,h=c.stateNode;try{var Ie=qr(c.type,b);r=h.getSnapshotBeforeUpdate(Ie,x),h.__reactInternalSnapshotBeforeUpdate=r}catch(De){at(c,c.return,De)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)Eh(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Eh(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Bt=r;break}Bt=s.return}}function xy(r,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ii(r,c),h&4&&Ys(5,c);break;case 1:if(Ii(r,c),h&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(_){at(c,c.return,_)}else{var b=qr(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(b,s,r.__reactInternalSnapshotBeforeUpdate)}catch(_){at(c,c.return,_)}}h&64&&py(c),h&512&&$s(c,c.return);break;case 3:if(Ii(r,c),h&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{ag(r,s)}catch(_){at(c,c.return,_)}}break;case 27:s===null&&h&4&&vy(c);case 26:case 5:Ii(r,c),s===null&&h&4&&yy(c),h&512&&$s(c,c.return);break;case 12:Ii(r,c);break;case 31:Ii(r,c),h&4&&_y(r,c);break;case 13:Ii(r,c),h&4&&Ay(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=SA.bind(null,c),YA(r,c))));break;case 22:if(h=c.memoizedState!==null||Si,!h){s=s!==null&&s.memoizedState!==null||Rt,b=Si;var x=Rt;Si=h,(Rt=s)&&!x?Ni(r,c,(c.subtreeFlags&8772)!==0):Ii(r,c),Si=b,Rt=x}break;case 30:break;default:Ii(r,c)}}function Ty(r){var s=r.alternate;s!==null&&(r.alternate=null,Ty(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ku(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,mn=!1;function ki(r,s,c){for(c=c.child;c!==null;)Ey(r,s,c),c=c.sibling}function Ey(r,s,c){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(rn,c)}catch{}switch(c.tag){case 26:Rt||ci(c,s),ki(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rt||ci(c,s);var h=bt,b=mn;sr(c.type)&&(bt=c.stateNode,mn=!1),ki(r,s,c),io(c.stateNode),bt=h,mn=b;break;case 5:Rt||ci(c,s);case 6:if(h=bt,b=mn,bt=null,ki(r,s,c),bt=h,mn=b,bt!==null)if(mn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(c.stateNode)}catch(x){at(c,s,x)}else try{bt.removeChild(c.stateNode)}catch(x){at(c,s,x)}break;case 18:bt!==null&&(mn?(r=bt,p0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Ba(r)):p0(bt,c.stateNode));break;case 4:h=bt,b=mn,bt=c.stateNode.containerInfo,mn=!0,ki(r,s,c),bt=h,mn=b;break;case 0:case 11:case 14:case 15:Zi(2,c,s),Rt||Zi(4,c,s),ki(r,s,c);break;case 1:Rt||(ci(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&gy(c,s,h)),ki(r,s,c);break;case 21:ki(r,s,c);break;case 22:Rt=(h=Rt)||c.memoizedState!==null,ki(r,s,c),Rt=h;break;default:ki(r,s,c)}}function _y(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ba(r)}catch(c){at(s,s.return,c)}}}function Ay(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ba(r)}catch(c){at(s,s.return,c)}}function vA(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new wy),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new wy),s;default:throw Error(i(435,r.tag))}}function zl(r,s){var c=vA(r);s.forEach(function(h){if(!c.has(h)){c.add(h);var b=kA.bind(null,r,h);h.then(b,b)}})}function fn(r,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var b=c[h],x=r,_=s,k=_;e:for(;k!==null;){switch(k.tag){case 27:if(sr(k.type)){bt=k.stateNode,mn=!1;break e}break;case 5:bt=k.stateNode,mn=!1;break e;case 3:case 4:bt=k.stateNode.containerInfo,mn=!0;break e}k=k.return}if(bt===null)throw Error(i(160));Ey(x,_,b),bt=null,mn=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cy(s,r),s=s.sibling}var Qn=null;function Cy(r,s){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:fn(s,r),pn(r),h&4&&(Zi(3,r,r.return),Ys(3,r),Zi(5,r,r.return));break;case 1:fn(s,r),pn(r),h&512&&(Rt||c===null||ci(c,c.return)),h&64&&Si&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var b=Qn;if(fn(s,r),pn(r),h&512&&(Rt||c===null||ci(c,c.return)),h&4){var x=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,b=b.ownerDocument||b;t:switch(h){case"title":x=b.getElementsByTagName("title")[0],(!x||x[xs]||x[Gt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(h),b.head.insertBefore(x,b.querySelector("head > title"))),jt(x,h,c),x[Gt]=r,qt(x),h=x;break e;case"link":var _=C0("link","href",b).get(h+(c.href||""));if(_){for(var k=0;k<_.length;k++)if(x=_[k],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(k,1);break t}}x=b.createElement(h),jt(x,h,c),b.head.appendChild(x);break;case"meta":if(_=C0("meta","content",b).get(h+(c.content||""))){for(k=0;k<_.length;k++)if(x=_[k],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(k,1);break t}}x=b.createElement(h),jt(x,h,c),b.head.appendChild(x);break;default:throw Error(i(468,h))}x[Gt]=r,qt(x),h=x}r.stateNode=h}else S0(b,r.type,r.stateNode);else r.stateNode=A0(b,h,r.memoizedProps);else x!==h?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,h===null?S0(b,r.type,r.stateNode):A0(b,h,r.memoizedProps)):h===null&&r.stateNode!==null&&Kd(r,r.memoizedProps,c.memoizedProps)}break;case 27:fn(s,r),pn(r),h&512&&(Rt||c===null||ci(c,c.return)),c!==null&&h&4&&Kd(r,r.memoizedProps,c.memoizedProps);break;case 5:if(fn(s,r),pn(r),h&512&&(Rt||c===null||ci(c,c.return)),r.flags&32){b=r.stateNode;try{oa(b,"")}catch(Ie){at(r,r.return,Ie)}}h&4&&r.stateNode!=null&&(b=r.memoizedProps,Kd(r,b,c!==null?c.memoizedProps:b)),h&1024&&(Xd=!0);break;case 6:if(fn(s,r),pn(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(Ie){at(r,r.return,Ie)}}break;case 3:if(ac=null,b=Qn,Qn=ic(s.containerInfo),fn(s,r),Qn=b,pn(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Ba(s.containerInfo)}catch(Ie){at(r,r.return,Ie)}Xd&&(Xd=!1,Sy(r));break;case 4:h=Qn,Qn=ic(r.stateNode.containerInfo),fn(s,r),pn(r),Qn=h;break;case 12:fn(s,r),pn(r);break;case 31:fn(s,r),pn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,zl(r,h)));break;case 13:fn(s,r),pn(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Wl=nn()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,zl(r,h)));break;case 22:b=r.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,K=Si,re=Rt;if(Si=K||b,Rt=re||H,fn(s,r),Rt=re,Si=K,pn(r),h&8192)e:for(s=r.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(c===null||H||Si||Rt||Br(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){H=c=s;try{if(x=H.stateNode,b)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{k=H.stateNode;var le=H.memoizedProps.style,Q=le!=null&&le.hasOwnProperty("display")?le.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ie){at(H,H.return,Ie)}}}else if(s.tag===6){if(c===null){H=s;try{H.stateNode.nodeValue=b?"":H.memoizedProps}catch(Ie){at(H,H.return,Ie)}}}else if(s.tag===18){if(c===null){H=s;try{var Z=H.stateNode;b?g0(Z,!0):g0(H.stateNode,!1)}catch(Ie){at(H,H.return,Ie)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,zl(r,c))));break;case 19:fn(s,r),pn(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,zl(r,h)));break;case 30:break;case 21:break;default:fn(s,r),pn(r)}}function pn(r){var s=r.flags;if(s&2){try{for(var c,h=r.return;h!==null;){if(by(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var b=c.stateNode,x=Qd(r);Gl(r,x,b);break;case 5:var _=c.stateNode;c.flags&32&&(oa(_,""),c.flags&=-33);var k=Qd(r);Gl(r,k,_);break;case 3:case 4:var H=c.stateNode.containerInfo,K=Qd(r);Jd(r,K,H);break;default:throw Error(i(161))}}catch(re){at(r,r.return,re)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Sy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Sy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Ii(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xy(r,s.alternate,s),s=s.sibling}function Br(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Zi(4,s,s.return),Br(s);break;case 1:ci(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&gy(s,s.return,c),Br(s);break;case 27:io(s.stateNode);case 26:case 5:ci(s,s.return),Br(s);break;case 22:s.memoizedState===null&&Br(s);break;case 30:Br(s);break;default:Br(s)}r=r.sibling}}function Ni(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,b=r,x=s,_=x.flags;switch(x.tag){case 0:case 11:case 15:Ni(b,x,c),Ys(4,x);break;case 1:if(Ni(b,x,c),h=x,b=h.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(K){at(h,h.return,K)}if(h=x,b=h.updateQueue,b!==null){var k=h.stateNode;try{var H=b.shared.hiddenCallbacks;if(H!==null)for(b.shared.hiddenCallbacks=null,b=0;b<H.length;b++)rg(H[b],k)}catch(K){at(h,h.return,K)}}c&&_&64&&py(x),$s(x,x.return);break;case 27:vy(x);case 26:case 5:Ni(b,x,c),c&&h===null&&_&4&&yy(x),$s(x,x.return);break;case 12:Ni(b,x,c);break;case 31:Ni(b,x,c),c&&_&4&&_y(b,x);break;case 13:Ni(b,x,c),c&&_&4&&Ay(b,x);break;case 22:x.memoizedState===null&&Ni(b,x,c),$s(x,x.return);break;case 30:break;default:Ni(b,x,c)}s=s.sibling}}function Zd(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Ds(c))}function eh(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ds(r))}function Jn(r,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ky(r,s,c,h),s=s.sibling}function ky(r,s,c,h){var b=s.flags;switch(s.tag){case 0:case 11:case 15:Jn(r,s,c,h),b&2048&&Ys(9,s);break;case 1:Jn(r,s,c,h);break;case 3:Jn(r,s,c,h),b&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ds(r)));break;case 12:if(b&2048){Jn(r,s,c,h),r=s.stateNode;try{var x=s.memoizedProps,_=x.id,k=x.onPostCommit;typeof k=="function"&&k(_,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(H){at(s,s.return,H)}}else Jn(r,s,c,h);break;case 31:Jn(r,s,c,h);break;case 13:Jn(r,s,c,h);break;case 23:break;case 22:x=s.stateNode,_=s.alternate,s.memoizedState!==null?x._visibility&2?Jn(r,s,c,h):Ks(r,s):x._visibility&2?Jn(r,s,c,h):(x._visibility|=2,Sa(r,s,c,h,(s.subtreeFlags&10256)!==0||!1)),b&2048&&Zd(_,s);break;case 24:Jn(r,s,c,h),b&2048&&eh(s.alternate,s);break;default:Jn(r,s,c,h)}}function Sa(r,s,c,h,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=r,_=s,k=c,H=h,K=_.flags;switch(_.tag){case 0:case 11:case 15:Sa(x,_,k,H,b),Ys(8,_);break;case 23:break;case 22:var re=_.stateNode;_.memoizedState!==null?re._visibility&2?Sa(x,_,k,H,b):Ks(x,_):(re._visibility|=2,Sa(x,_,k,H,b)),b&&K&2048&&Zd(_.alternate,_);break;case 24:Sa(x,_,k,H,b),b&&K&2048&&eh(_.alternate,_);break;default:Sa(x,_,k,H,b)}s=s.sibling}}function Ks(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,h=s,b=h.flags;switch(h.tag){case 22:Ks(c,h),b&2048&&Zd(h.alternate,h);break;case 24:Ks(c,h),b&2048&&eh(h.alternate,h);break;default:Ks(c,h)}s=s.sibling}}var Qs=8192;function ka(r,s,c){if(r.subtreeFlags&Qs)for(r=r.child;r!==null;)Iy(r,s,c),r=r.sibling}function Iy(r,s,c){switch(r.tag){case 26:ka(r,s,c),r.flags&Qs&&r.memoizedState!==null&&aC(c,Qn,r.memoizedState,r.memoizedProps);break;case 5:ka(r,s,c);break;case 3:case 4:var h=Qn;Qn=ic(r.stateNode.containerInfo),ka(r,s,c),Qn=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=Qs,Qs=16777216,ka(r,s,c),Qs=h):ka(r,s,c));break;default:ka(r,s,c)}}function Ny(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Js(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Bt=h,My(h,r)}Ny(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ry(r),r=r.sibling}function Ry(r){switch(r.tag){case 0:case 11:case 15:Js(r),r.flags&2048&&Zi(9,r,r.return);break;case 3:Js(r);break;case 12:Js(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Vl(r)):Js(r);break;default:Js(r)}}function Vl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];Bt=h,My(h,r)}Ny(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Zi(8,s,s.return),Vl(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Vl(s));break;default:Vl(s)}r=r.sibling}}function My(r,s){for(;Bt!==null;){var c=Bt;switch(c.tag){case 0:case 11:case 15:Zi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ds(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Bt=h;else e:for(c=r;Bt!==null;){h=Bt;var b=h.sibling,x=h.return;if(Ty(h),h===c){Bt=null;break e}if(b!==null){b.return=x,Bt=b;break e}Bt=x}}}var wA={getCacheForType:function(r){var s=Vt(kt),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return Vt(kt).controller.signal}},xA=typeof WeakMap=="function"?WeakMap:Map,nt=0,ht=null,je=null,Ke=0,rt=0,Cn=null,er=!1,Ia=!1,th=!1,Ri=0,Tt=0,tr=0,Hr=0,nh=0,Sn=0,Na=0,Xs=null,gn=null,ih=!1,Wl=0,Py=0,jl=1/0,Yl=null,nr=null,Lt=0,ir=null,Ra=null,Mi=0,rh=0,ah=null,Dy=null,Zs=0,sh=null;function kn(){return(nt&2)!==0&&Ke!==0?Ke&-Ke:j.T!==null?hh():Qf()}function Ly(){if(Sn===0)if((Ke&536870912)===0||Je){var r=tl;tl<<=1,(tl&3932160)===0&&(tl=262144),Sn=r}else Sn=536870912;return r=_n.current,r!==null&&(r.flags|=32),Sn}function yn(r,s,c){(r===ht&&(rt===2||rt===9)||r.cancelPendingCommit!==null)&&(Ma(r,0),rr(r,Ke,Sn,!1)),ws(r,c),((nt&2)===0||r!==ht)&&(r===ht&&((nt&2)===0&&(Hr|=c),Tt===4&&rr(r,Ke,Sn,!1)),ui(r))}function Oy(r,s,c){if((nt&6)!==0)throw Error(i(327));var h=!c&&(s&127)===0&&(s&r.expiredLanes)===0||vs(r,s),b=h?_A(r,s):lh(r,s,!0),x=h;do{if(b===0){Ia&&!h&&rr(r,s,0,!1);break}else{if(c=r.current.alternate,x&&!TA(c)){b=lh(r,s,!1),x=!1;continue}if(b===2){if(x=s,r.errorRecoveryDisabledLanes&x)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var k=r;b=Xs;var H=k.current.memoizedState.isDehydrated;if(H&&(Ma(k,_).flags|=256),_=lh(k,_,!1),_!==2){if(th&&!H){k.errorRecoveryDisabledLanes|=x,Hr|=x,b=4;break e}x=gn,gn=b,x!==null&&(gn===null?gn=x:gn.push.apply(gn,x))}b=_}if(x=!1,b!==2)continue}}if(b===1){Ma(r,0),rr(r,s,0,!0);break}e:{switch(h=r,x=b,x){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rr(h,s,Sn,!er);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(b=Wl+300-nn(),10<b)){if(rr(h,s,Sn,!er),il(h,0,!0)!==0)break e;Mi=s,h.timeoutHandle=m0(qy.bind(null,h,c,gn,Yl,ih,s,Sn,Hr,Na,er,x,"Throttled",-0,0),b);break e}qy(h,c,gn,Yl,ih,s,Sn,Hr,Na,er,x,null,-0,0)}}break}while(!0);ui(r)}function qy(r,s,c,h,b,x,_,k,H,K,re,le,Q,Z){if(r.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yi},Iy(s,x,le);var Ie=(x&62914560)===x?Wl-nn():(x&4194048)===x?Py-nn():0;if(Ie=sC(le,Ie),Ie!==null){Mi=x,r.cancelPendingCommit=Ie(Wy.bind(null,r,s,x,c,h,b,_,k,H,re,le,null,Q,Z)),rr(r,x,_,!K);return}}Wy(r,s,x,c,h,b,_,k,H)}function TA(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var b=c[h],x=b.getSnapshot;b=b.value;try{if(!Tn(x(),b))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rr(r,s,c,h){s&=~nh,s&=~Hr,r.suspendedLanes|=s,r.pingedLanes&=~s,h&&(r.warmLanes|=s),h=r.expirationTimes;for(var b=s;0<b;){var x=31-dt(b),_=1<<x;h[x]=-1,b&=~_}c!==0&&Yf(r,c,s)}function $l(){return(nt&6)===0?(eo(0),!1):!0}function oh(){if(je!==null){if(rt===0)var r=je.return;else r=je,xi=Nr=null,Ed(r),Ta=null,Os=0,r=je;for(;r!==null;)fy(r.alternate,r),r=r.return;je=null}}function Ma(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,GA(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Mi=0,oh(),ht=r,je=c=vi(r.current,null),Ke=s,rt=0,Cn=null,er=!1,Ia=vs(r,s),th=!1,Na=Sn=nh=Hr=tr=Tt=0,gn=Xs=null,ih=!1,(s&8)!==0&&(s|=s&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=s;0<h;){var b=31-dt(h),x=1<<b;s|=r[b],h&=~x}return Ri=s,pl(),c}function By(r,s){Ue=null,j.H=Vs,s===xa||s===El?(s=eg(),rt=3):s===dd?(s=eg(),rt=4):rt=s===Hd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,je===null&&(Tt=1,ql(r,qn(s,r.current)))}function Hy(){var r=_n.current;return r===null?!0:(Ke&4194048)===Ke?Fn===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?r===Fn:!1}function Uy(){var r=j.H;return j.H=Vs,r===null?Vs:r}function Fy(){var r=j.A;return j.A=wA,r}function Kl(){Tt=4,er||(Ke&4194048)!==Ke&&_n.current!==null||(Ia=!0),(tr&134217727)===0&&(Hr&134217727)===0||ht===null||rr(ht,Ke,Sn,!1)}function lh(r,s,c){var h=nt;nt|=2;var b=Uy(),x=Fy();(ht!==r||Ke!==s)&&(Yl=null,Ma(r,s)),s=!1;var _=Tt;e:do try{if(rt!==0&&je!==null){var k=je,H=Cn;switch(rt){case 8:oh(),_=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(s=!0);var K=rt;if(rt=0,Cn=null,Pa(r,k,H,K),c&&Ia){_=0;break e}break;default:K=rt,rt=0,Cn=null,Pa(r,k,H,K)}}EA(),_=Tt;break}catch(re){By(r,re)}while(!0);return s&&r.shellSuspendCounter++,xi=Nr=null,nt=h,j.H=b,j.A=x,je===null&&(ht=null,Ke=0,pl()),_}function EA(){for(;je!==null;)Gy(je)}function _A(r,s){var c=nt;nt|=2;var h=Uy(),b=Fy();ht!==r||Ke!==s?(Yl=null,jl=nn()+500,Ma(r,s)):Ia=vs(r,s);e:do try{if(rt!==0&&je!==null){s=je;var x=Cn;t:switch(rt){case 1:rt=0,Cn=null,Pa(r,s,x,1);break;case 2:case 9:if(Xp(x)){rt=0,Cn=null,zy(s);break}s=function(){rt!==2&&rt!==9||ht!==r||(rt=7),ui(r)},x.then(s,s);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Xp(x)?(rt=0,Cn=null,zy(s)):(rt=0,Cn=null,Pa(r,s,x,7));break;case 5:var _=null;switch(je.tag){case 26:_=je.memoizedState;case 5:case 27:var k=je;if(_?k0(_):k.stateNode.complete){rt=0,Cn=null;var H=k.sibling;if(H!==null)je=H;else{var K=k.return;K!==null?(je=K,Ql(K)):je=null}break t}}rt=0,Cn=null,Pa(r,s,x,5);break;case 6:rt=0,Cn=null,Pa(r,s,x,6);break;case 8:oh(),Tt=6;break e;default:throw Error(i(462))}}AA();break}catch(re){By(r,re)}while(!0);return xi=Nr=null,j.H=h,j.A=b,nt=c,je!==null?0:(ht=null,Ke=0,pl(),Tt)}function AA(){for(;je!==null&&!xu();)Gy(je)}function Gy(r){var s=hy(r.alternate,r,Ri);r.memoizedProps=r.pendingProps,s===null?Ql(r):je=s}function zy(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=sy(c,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=sy(c,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:Ed(s);default:fy(c,s),s=je=Fp(s,Ri),s=hy(c,s,Ri)}r.memoizedProps=r.pendingProps,s===null?Ql(r):je=s}function Pa(r,s,c,h){xi=Nr=null,Ed(s),Ta=null,Os=0;var b=s.return;try{if(mA(r,b,s,c,Ke)){Tt=1,ql(r,qn(c,r.current)),je=null;return}}catch(x){if(b!==null)throw je=b,x;Tt=1,ql(r,qn(c,r.current)),je=null;return}s.flags&32768?(Je||h===1?r=!0:Ia||(Ke&536870912)!==0?r=!1:(er=r=!0,(h===2||h===9||h===3||h===6)&&(h=_n.current,h!==null&&h.tag===13&&(h.flags|=16384))),Vy(s,r)):Ql(s)}function Ql(r){var s=r;do{if((s.flags&32768)!==0){Vy(s,er);return}r=s.return;var c=gA(s.alternate,s,Ri);if(c!==null){je=c;return}if(s=s.sibling,s!==null){je=s;return}je=s=r}while(s!==null);Tt===0&&(Tt=5)}function Vy(r,s){do{var c=yA(r.alternate,r);if(c!==null){c.flags&=32767,je=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){je=r;return}je=r=c}while(r!==null);Tt=6,je=null}function Wy(r,s,c,h,b,x,_,k,H){r.cancelPendingCommit=null;do Jl();while(Lt!==0);if((nt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(x=s.lanes|s.childLanes,x|=Qu,r_(r,c,x,_,k,H),r===ht&&(je=ht=null,Ke=0),Ra=s,ir=r,Mi=c,rh=x,ah=b,Dy=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,IA(qe,function(){return Qy(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=j.T,j.T=null,b=ce.p,ce.p=2,_=nt,nt|=4;try{bA(r,s,c)}finally{nt=_,ce.p=b,j.T=h}}Lt=1,jy(),Yy(),$y()}}function jy(){if(Lt===1){Lt=0;var r=ir,s=Ra,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=j.T,j.T=null;var h=ce.p;ce.p=2;var b=nt;nt|=4;try{Cy(s,r);var x=wh,_=Mp(r.containerInfo),k=x.focusedElem,H=x.selectionRange;if(_!==k&&k&&k.ownerDocument&&Rp(k.ownerDocument.documentElement,k)){if(H!==null&&Wu(k)){var K=H.start,re=H.end;if(re===void 0&&(re=K),"selectionStart"in k)k.selectionStart=K,k.selectionEnd=Math.min(re,k.value.length);else{var le=k.ownerDocument||document,Q=le&&le.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Ie=k.textContent.length,De=Math.min(H.start,Ie),ut=H.end===void 0?De:Math.min(H.end,Ie);!Z.extend&&De>ut&&(_=ut,ut=De,De=_);var z=Np(k,De),U=Np(k,ut);if(z&&U&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==U.node||Z.focusOffset!==U.offset)){var $=le.createRange();$.setStart(z.node,z.offset),Z.removeAllRanges(),De>ut?(Z.addRange($),Z.extend(U.node,U.offset)):($.setEnd(U.node,U.offset),Z.addRange($))}}}}for(le=[],Z=k;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<le.length;k++){var se=le[k];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}cc=!!vh,wh=vh=null}finally{nt=b,ce.p=h,j.T=c}}r.current=s,Lt=2}}function Yy(){if(Lt===2){Lt=0;var r=ir,s=Ra,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=j.T,j.T=null;var h=ce.p;ce.p=2;var b=nt;nt|=4;try{xy(r,s.alternate,s)}finally{nt=b,ce.p=h,j.T=c}}Lt=3}}function $y(){if(Lt===4||Lt===3){Lt=0,Tu();var r=ir,s=Ra,c=Mi,h=Dy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Lt=5:(Lt=0,Ra=ir=null,Ky(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(nr=null),Cu(c),s=s.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(rn,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=j.T,b=ce.p,ce.p=2,j.T=null;try{for(var x=r.onRecoverableError,_=0;_<h.length;_++){var k=h[_];x(k.value,{componentStack:k.stack})}}finally{j.T=s,ce.p=b}}(Mi&3)!==0&&Jl(),ui(r),b=r.pendingLanes,(c&261930)!==0&&(b&42)!==0?r===sh?Zs++:(Zs=0,sh=r):Zs=0,eo(0)}}function Ky(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ds(s)))}function Jl(){return jy(),Yy(),$y(),Qy()}function Qy(){if(Lt!==5)return!1;var r=ir,s=rh;rh=0;var c=Cu(Mi),h=j.T,b=ce.p;try{ce.p=32>c?32:c,j.T=null,c=ah,ah=null;var x=ir,_=Mi;if(Lt=0,Ra=ir=null,Mi=0,(nt&6)!==0)throw Error(i(331));var k=nt;if(nt|=4,Ry(x.current),ky(x,x.current,_,c),nt=k,eo(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(rn,x)}catch{}return!0}finally{ce.p=b,j.T=h,Ky(r,s)}}function Jy(r,s,c){s=qn(c,s),s=Bd(r.stateNode,s,2),r=Qi(r,s,2),r!==null&&(ws(r,2),ui(r))}function at(r,s,c){if(r.tag===3)Jy(r,r,c);else for(;s!==null;){if(s.tag===3){Jy(s,r,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(nr===null||!nr.has(h))){r=qn(c,r),c=Xg(2),h=Qi(s,c,2),h!==null&&(Zg(c,h,s,r),ws(h,2),ui(h));break}}s=s.return}}function ch(r,s,c){var h=r.pingCache;if(h===null){h=r.pingCache=new xA;var b=new Set;h.set(s,b)}else b=h.get(s),b===void 0&&(b=new Set,h.set(s,b));b.has(c)||(th=!0,b.add(c),r=CA.bind(null,r,s,c),s.then(r,r))}function CA(r,s,c){var h=r.pingCache;h!==null&&h.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ht===r&&(Ke&c)===c&&(Tt===4||Tt===3&&(Ke&62914560)===Ke&&300>nn()-Wl?(nt&2)===0&&Ma(r,0):nh|=c,Na===Ke&&(Na=0)),ui(r)}function Xy(r,s){s===0&&(s=jf()),r=Sr(r,s),r!==null&&(ws(r,s),ui(r))}function SA(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),Xy(r,c)}function kA(r,s){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,b=r.memoizedState;b!==null&&(c=b.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(s),Xy(r,c)}function IA(r,s){return ea(r,s)}var Xl=null,Da=null,uh=!1,Zl=!1,dh=!1,ar=0;function ui(r){r!==Da&&r.next===null&&(Da===null?Xl=Da=r:Da=Da.next=r),Zl=!0,uh||(uh=!0,RA())}function eo(r,s){if(!dh&&Zl){dh=!0;do for(var c=!1,h=Xl;h!==null;){if(r!==0){var b=h.pendingLanes;if(b===0)var x=0;else{var _=h.suspendedLanes,k=h.pingedLanes;x=(1<<31-dt(42|r)+1)-1,x&=b&~(_&~k),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,n0(h,x))}else x=Ke,x=il(h,h===ht?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||vs(h,x)||(c=!0,n0(h,x));h=h.next}while(c);dh=!1}}function NA(){Zy()}function Zy(){Zl=uh=!1;var r=0;ar!==0&&FA()&&(r=ar);for(var s=nn(),c=null,h=Xl;h!==null;){var b=h.next,x=e0(h,s);x===0?(h.next=null,c===null?Xl=b:c.next=b,b===null&&(Da=c)):(c=h,(r!==0||(x&3)!==0)&&(Zl=!0)),h=b}Lt!==0&&Lt!==5||eo(r),ar!==0&&(ar=0)}function e0(r,s){for(var c=r.suspendedLanes,h=r.pingedLanes,b=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var _=31-dt(x),k=1<<_,H=b[_];H===-1?((k&c)===0||(k&h)!==0)&&(b[_]=i_(k,s)):H<=s&&(r.expiredLanes|=k),x&=~k}if(s=ht,c=Ke,c=il(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===s&&(rt===2||rt===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&bs(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||vs(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(h!==null&&bs(h),Cu(c)){case 2:case 8:c=Te;break;case 32:c=qe;break;case 268435456:c=it;break;default:c=qe}return h=t0.bind(null,r),c=ea(c,h),r.callbackPriority=s,r.callbackNode=c,s}return h!==null&&h!==null&&bs(h),r.callbackPriority=2,r.callbackNode=null,2}function t0(r,s){if(Lt!==0&&Lt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Jl()&&r.callbackNode!==c)return null;var h=Ke;return h=il(r,r===ht?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Oy(r,h,s),e0(r,nn()),r.callbackNode!=null&&r.callbackNode===c?t0.bind(null,r):null)}function n0(r,s){if(Jl())return null;Oy(r,s,!0)}function RA(){zA(function(){(nt&6)!==0?ea(ae,NA):Zy()})}function hh(){if(ar===0){var r=va;r===0&&(r=el,el<<=1,(el&261888)===0&&(el=256)),ar=r}return ar}function i0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ol(""+r)}function r0(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function MA(r,s,c,h,b){if(s==="submit"&&c&&c.stateNode===b){var x=i0((b[dn]||null).action),_=h.submitter;_&&(s=(s=_[dn]||null)?i0(s.formAction):_.getAttribute("formAction"),s!==null&&(x=s,_=null));var k=new dl("action","action",null,h,b);r.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ar!==0){var H=_?r0(b,_):new FormData(b);Md(c,{pending:!0,data:H,method:b.method,action:x},null,H)}}else typeof x=="function"&&(k.preventDefault(),H=_?r0(b,_):new FormData(b),Md(c,{pending:!0,data:H,method:b.method,action:x},x,H))},currentTarget:b}]})}}for(var mh=0;mh<Ku.length;mh++){var fh=Ku[mh],PA=fh.toLowerCase(),DA=fh[0].toUpperCase()+fh.slice(1);Kn(PA,"on"+DA)}Kn(Lp,"onAnimationEnd"),Kn(Op,"onAnimationIteration"),Kn(qp,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(Q_,"onTransitionRun"),Kn(J_,"onTransitionStart"),Kn(X_,"onTransitionCancel"),Kn(Bp,"onTransitionEnd"),aa("onMouseEnter",["mouseout","mouseover"]),aa("onMouseLeave",["mouseout","mouseover"]),aa("onPointerEnter",["pointerout","pointerover"]),aa("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(to));function a0(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],b=h.event;h=h.listeners;e:{var x=void 0;if(s)for(var _=h.length-1;0<=_;_--){var k=h[_],H=k.instance,K=k.currentTarget;if(k=k.listener,H!==x&&b.isPropagationStopped())break e;x=k,b.currentTarget=K;try{x(b)}catch(re){fl(re)}b.currentTarget=null,x=H}else for(_=0;_<h.length;_++){if(k=h[_],H=k.instance,K=k.currentTarget,k=k.listener,H!==x&&b.isPropagationStopped())break e;x=k,b.currentTarget=K;try{x(b)}catch(re){fl(re)}b.currentTarget=null,x=H}}}}function Ye(r,s){var c=s[Su];c===void 0&&(c=s[Su]=new Set);var h=r+"__bubble";c.has(h)||(s0(s,r,2,!1),c.add(h))}function ph(r,s,c){var h=0;s&&(h|=4),s0(c,r,h,s)}var ec="_reactListening"+Math.random().toString(36).slice(2);function gh(r){if(!r[ec]){r[ec]=!0,Zf.forEach(function(c){c!=="selectionchange"&&(LA.has(c)||ph(c,!1,r),ph(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[ec]||(s[ec]=!0,ph("selectionchange",!1,s))}}function s0(r,s,c,h){switch(L0(s)){case 2:var b=cC;break;case 8:b=uC;break;default:b=Rh}c=b.bind(null,s,c,r),b=void 0,!Ou||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),h?b!==void 0?r.addEventListener(s,c,{capture:!0,passive:b}):r.addEventListener(s,c,!0):b!==void 0?r.addEventListener(s,c,{passive:b}):r.addEventListener(s,c,!1)}function yh(r,s,c,h,b){var x=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var k=h.stateNode.containerInfo;if(k===b)break;if(_===4)for(_=h.return;_!==null;){var H=_.tag;if((H===3||H===4)&&_.stateNode.containerInfo===b)return;_=_.return}for(;k!==null;){if(_=na(k),_===null)return;if(H=_.tag,H===5||H===6||H===26||H===27){h=x=_;continue e}k=k.parentNode}}h=h.return}dp(function(){var K=x,re=Du(c),le=[];e:{var Q=Hp.get(r);if(Q!==void 0){var Z=dl,Ie=r;switch(r){case"keypress":if(cl(c)===0)break e;case"keydown":case"keyup":Z=k_;break;case"focusin":Ie="focus",Z=Uu;break;case"focusout":Ie="blur",Z=Uu;break;case"beforeblur":case"afterblur":Z=Uu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=g_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=R_;break;case Lp:case Op:case qp:Z=v_;break;case Bp:Z=P_;break;case"scroll":case"scrollend":Z=f_;break;case"wheel":Z=L_;break;case"copy":case"cut":case"paste":Z=x_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=gp;break;case"toggle":case"beforetoggle":Z=q_}var De=(s&4)!==0,ut=!De&&(r==="scroll"||r==="scrollend"),z=De?Q!==null?Q+"Capture":null:Q;De=[];for(var U=K,$;U!==null;){var se=U;if($=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||$===null||z===null||(se=Es(U,z),se!=null&&De.push(no(U,se,$))),ut)break;U=U.return}0<De.length&&(Q=new Z(Q,Ie,null,c,re),le.push({event:Q,listeners:De}))}}if((s&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",Q&&c!==Pu&&(Ie=c.relatedTarget||c.fromElement)&&(na(Ie)||Ie[ta]))break e;if((Z||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Ie=c.relatedTarget||c.toElement,Z=K,Ie=Ie?na(Ie):null,Ie!==null&&(ut=o(Ie),De=Ie.tag,Ie!==ut||De!==5&&De!==27&&De!==6)&&(Ie=null)):(Z=null,Ie=K),Z!==Ie)){if(De=fp,se="onMouseLeave",z="onMouseEnter",U="mouse",(r==="pointerout"||r==="pointerover")&&(De=gp,se="onPointerLeave",z="onPointerEnter",U="pointer"),ut=Z==null?Q:Ts(Z),$=Ie==null?Q:Ts(Ie),Q=new De(se,U+"leave",Z,c,re),Q.target=ut,Q.relatedTarget=$,se=null,na(re)===K&&(De=new De(z,U+"enter",Ie,c,re),De.target=$,De.relatedTarget=ut,se=De),ut=se,Z&&Ie)t:{for(De=OA,z=Z,U=Ie,$=0,se=z;se;se=De(se))$++;se=0;for(var Me=U;Me;Me=De(Me))se++;for(;0<$-se;)z=De(z),$--;for(;0<se-$;)U=De(U),se--;for(;$--;){if(z===U||U!==null&&z===U.alternate){De=z;break t}z=De(z),U=De(U)}De=null}else De=null;Z!==null&&o0(le,Q,Z,De,!1),Ie!==null&&ut!==null&&o0(le,ut,Ie,De,!0)}}e:{if(Q=K?Ts(K):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ze=_p;else if(Tp(Q))if(Ap)Ze=Y_;else{Ze=W_;var Ne=V_}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Mu(K.elementType)&&(Ze=_p):Ze=j_;if(Ze&&(Ze=Ze(r,K))){Ep(le,Ze,c,re);break e}Ne&&Ne(r,Q,K),r==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Ru(Q,"number",Q.value)}switch(Ne=K?Ts(K):window,r){case"focusin":(Tp(Ne)||Ne.contentEditable==="true")&&(da=Ne,ju=K,Rs=null);break;case"focusout":Rs=ju=da=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Pp(le,c,re);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":Pp(le,c,re)}var Fe;if(Gu)e:{switch(r){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ua?wp(r,c)&&(Qe="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(yp&&c.locale!=="ko"&&(ua||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ua&&(Fe=hp()):(zi=re,qu="value"in zi?zi.value:zi.textContent,ua=!0)),Ne=tc(K,Qe),0<Ne.length&&(Qe=new pp(Qe,r,null,c,re),le.push({event:Qe,listeners:Ne}),Fe?Qe.data=Fe:(Fe=xp(c),Fe!==null&&(Qe.data=Fe)))),(Fe=H_?U_(r,c):F_(r,c))&&(Qe=tc(K,"onBeforeInput"),0<Qe.length&&(Ne=new pp("onBeforeInput","beforeinput",null,c,re),le.push({event:Ne,listeners:Qe}),Ne.data=Fe)),MA(le,r,K,c,re)}a0(le,s)})}function no(r,s,c){return{instance:r,listener:s,currentTarget:c}}function tc(r,s){for(var c=s+"Capture",h=[];r!==null;){var b=r,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=Es(r,c),b!=null&&h.unshift(no(r,b,x)),b=Es(r,s),b!=null&&h.push(no(r,b,x))),r.tag===3)return h;r=r.return}return[]}function OA(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function o0(r,s,c,h,b){for(var x=s._reactName,_=[];c!==null&&c!==h;){var k=c,H=k.alternate,K=k.stateNode;if(k=k.tag,H!==null&&H===h)break;k!==5&&k!==26&&k!==27||K===null||(H=K,b?(K=Es(c,x),K!=null&&_.unshift(no(c,K,H))):b||(K=Es(c,x),K!=null&&_.push(no(c,K,H)))),c=c.return}_.length!==0&&r.push({event:s,listeners:_})}var qA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function l0(r){return(typeof r=="string"?r:""+r).replace(qA,`
`).replace(BA,"")}function c0(r,s){return s=l0(s),l0(r)===s}function ct(r,s,c,h,b,x){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||oa(r,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&oa(r,""+h);break;case"className":al(r,"class",h);break;case"tabIndex":al(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":al(r,c,h);break;case"style":cp(r,h,x);break;case"data":if(s!=="object"){al(r,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ol(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(s!=="input"&&ct(r,s,"name",b.name,b,null),ct(r,s,"formEncType",b.formEncType,b,null),ct(r,s,"formMethod",b.formMethod,b,null),ct(r,s,"formTarget",b.formTarget,b,null)):(ct(r,s,"encType",b.encType,b,null),ct(r,s,"method",b.method,b,null),ct(r,s,"target",b.target,b,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=ol(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=yi);break;case"onScroll":h!=null&&Ye("scroll",r);break;case"onScrollEnd":h!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=ol(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),rl(r,"popover",h);break;case"xlinkActuate":gi(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":gi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":gi(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":gi(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":gi(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":gi(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":gi(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":gi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":gi(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":rl(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=h_.get(c)||c,rl(r,c,h))}}function bh(r,s,c,h,b,x){switch(c){case"style":cp(r,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?oa(r,h):(typeof h=="number"||typeof h=="bigint")&&oa(r,""+h);break;case"onScroll":h!=null&&Ye("scroll",r);break;case"onScrollEnd":h!=null&&Ye("scrollend",r);break;case"onClick":h!=null&&(r.onclick=yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ep.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),s=c.slice(2,b?c.length-7:void 0),x=r[dn]||null,x=x!=null?x[c]:null,typeof x=="function"&&r.removeEventListener(s,x,b),typeof h=="function")){typeof x!="function"&&x!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,h,b);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):rl(r,c,h)}}}function jt(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var h=!1,b=!1,x;for(x in c)if(c.hasOwnProperty(x)){var _=c[x];if(_!=null)switch(x){case"src":h=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(r,s,x,_,c,null)}}b&&ct(r,s,"srcSet",c.srcSet,c,null),h&&ct(r,s,"src",c.src,c,null);return;case"input":Ye("invalid",r);var k=x=_=b=null,H=null,K=null;for(h in c)if(c.hasOwnProperty(h)){var re=c[h];if(re!=null)switch(h){case"name":b=re;break;case"type":_=re;break;case"checked":H=re;break;case"defaultChecked":K=re;break;case"value":x=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:ct(r,s,h,re,c,null)}}ap(r,x,k,H,K,_,b,!1);return;case"select":Ye("invalid",r),h=_=x=null;for(b in c)if(c.hasOwnProperty(b)&&(k=c[b],k!=null))switch(b){case"value":x=k;break;case"defaultValue":_=k;break;case"multiple":h=k;default:ct(r,s,b,k,c,null)}s=x,c=_,r.multiple=!!h,s!=null?sa(r,!!h,s,!1):c!=null&&sa(r,!!h,c,!0);return;case"textarea":Ye("invalid",r),x=b=h=null;for(_ in c)if(c.hasOwnProperty(_)&&(k=c[_],k!=null))switch(_){case"value":h=k;break;case"defaultValue":b=k;break;case"children":x=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:ct(r,s,_,k,c,null)}op(r,h,b,x);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(h=c[H],h!=null))switch(H){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ct(r,s,H,h,c,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(h=0;h<to.length;h++)Ye(to[h],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in c)if(c.hasOwnProperty(K)&&(h=c[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ct(r,s,K,h,c,null)}return;default:if(Mu(s)){for(re in c)c.hasOwnProperty(re)&&(h=c[re],h!==void 0&&bh(r,s,re,h,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(h=c[k],h!=null&&ct(r,s,k,h,c,null))}function HA(r,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,_=null,k=null,H=null,K=null,re=null;for(Z in c){var le=c[Z];if(c.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":H=le;default:h.hasOwnProperty(Z)||ct(r,s,Z,null,h,le)}}for(var Q in h){var Z=h[Q];if(le=c[Q],h.hasOwnProperty(Q)&&(Z!=null||le!=null))switch(Q){case"type":x=Z;break;case"name":b=Z;break;case"checked":K=Z;break;case"defaultChecked":re=Z;break;case"value":_=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==le&&ct(r,s,Q,Z,h,le)}}Nu(r,_,k,H,K,re,x,b);return;case"select":Z=_=k=Q=null;for(x in c)if(H=c[x],c.hasOwnProperty(x)&&H!=null)switch(x){case"value":break;case"multiple":Z=H;default:h.hasOwnProperty(x)||ct(r,s,x,null,h,H)}for(b in h)if(x=h[b],H=c[b],h.hasOwnProperty(b)&&(x!=null||H!=null))switch(b){case"value":Q=x;break;case"defaultValue":k=x;break;case"multiple":_=x;default:x!==H&&ct(r,s,b,x,h,H)}s=k,c=_,h=Z,Q!=null?sa(r,!!c,Q,!1):!!h!=!!c&&(s!=null?sa(r,!!c,s,!0):sa(r,!!c,c?[]:"",!1));return;case"textarea":Z=Q=null;for(k in c)if(b=c[k],c.hasOwnProperty(k)&&b!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ct(r,s,k,null,h,b)}for(_ in h)if(b=h[_],x=c[_],h.hasOwnProperty(_)&&(b!=null||x!=null))switch(_){case"value":Q=b;break;case"defaultValue":Z=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==x&&ct(r,s,_,b,h,x)}sp(r,Q,Z);return;case"option":for(var Ie in c)if(Q=c[Ie],c.hasOwnProperty(Ie)&&Q!=null&&!h.hasOwnProperty(Ie))switch(Ie){case"selected":r.selected=!1;break;default:ct(r,s,Ie,null,h,Q)}for(H in h)if(Q=h[H],Z=c[H],h.hasOwnProperty(H)&&Q!==Z&&(Q!=null||Z!=null))switch(H){case"selected":r.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ct(r,s,H,Q,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)Q=c[De],c.hasOwnProperty(De)&&Q!=null&&!h.hasOwnProperty(De)&&ct(r,s,De,null,h,Q);for(K in h)if(Q=h[K],Z=c[K],h.hasOwnProperty(K)&&Q!==Z&&(Q!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:ct(r,s,K,Q,h,Z)}return;default:if(Mu(s)){for(var ut in c)Q=c[ut],c.hasOwnProperty(ut)&&Q!==void 0&&!h.hasOwnProperty(ut)&&bh(r,s,ut,void 0,h,Q);for(re in h)Q=h[re],Z=c[re],!h.hasOwnProperty(re)||Q===Z||Q===void 0&&Z===void 0||bh(r,s,re,Q,h,Z);return}}for(var z in c)Q=c[z],c.hasOwnProperty(z)&&Q!=null&&!h.hasOwnProperty(z)&&ct(r,s,z,null,h,Q);for(le in h)Q=h[le],Z=c[le],!h.hasOwnProperty(le)||Q===Z||Q==null&&Z==null||ct(r,s,le,Q,h,Z)}function u0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UA(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var b=c[h],x=b.transferSize,_=b.initiatorType,k=b.duration;if(x&&k&&u0(_)){for(_=0,k=b.responseEnd,h+=1;h<c.length;h++){var H=c[h],K=H.startTime;if(K>k)break;var re=H.transferSize,le=H.initiatorType;re&&u0(le)&&(H=H.responseEnd,_+=re*(H<k?1:(k-K)/(H-K)))}if(--h,s+=8*(x+_)/(b.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var vh=null,wh=null;function nc(r){return r.nodeType===9?r:r.ownerDocument}function d0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function xh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Th=null;function FA(){var r=window.event;return r&&r.type==="popstate"?r===Th?!1:(Th=r,!0):(Th=null,!1)}var m0=typeof setTimeout=="function"?setTimeout:void 0,GA=typeof clearTimeout=="function"?clearTimeout:void 0,f0=typeof Promise=="function"?Promise:void 0,zA=typeof queueMicrotask=="function"?queueMicrotask:typeof f0<"u"?function(r){return f0.resolve(null).then(r).catch(VA)}:m0;function VA(r){setTimeout(function(){throw r})}function sr(r){return r==="head"}function p0(r,s){var c=s,h=0;do{var b=c.nextSibling;if(r.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(b),Ba(s);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")io(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,io(c);for(var x=c.firstChild;x;){var _=x.nextSibling,k=x.nodeName;x[xs]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=_}}else c==="body"&&io(r.ownerDocument.body);c=b}while(c);Ba(s)}function g0(r,s){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function Eh(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Eh(c),ku(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function WA(r,s,c,h){for(;r.nodeType===1;){var b=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[xs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Gn(r.nextSibling),r===null)break}return null}function jA(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Gn(r.nextSibling),r===null))return null;return r}function y0(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Gn(r.nextSibling),r===null))return null;return r}function _h(r){return r.data==="$?"||r.data==="$~"}function Ah(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function YA(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Gn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Ch=null;function b0(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return Gn(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function v0(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function w0(r,s,c){switch(s=nc(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function io(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ku(r)}var zn=new Map,x0=new Set;function ic(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Pi=ce.d;ce.d={f:$A,r:KA,D:QA,C:JA,L:XA,m:ZA,X:tC,S:eC,M:nC};function $A(){var r=Pi.f(),s=$l();return r||s}function KA(r){var s=ia(r);s!==null&&s.tag===5&&s.type==="form"?Bg(s):Pi.r(r)}var La=typeof document>"u"?null:document;function T0(r,s,c){var h=La;if(h&&typeof s=="string"&&s){var b=Ln(s);b='link[rel="'+r+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),x0.has(b)||(x0.add(b),r={rel:r,crossOrigin:c,href:s},h.querySelector(b)===null&&(s=h.createElement("link"),jt(s,"link",r),qt(s),h.head.appendChild(s)))}}function QA(r){Pi.D(r),T0("dns-prefetch",r,null)}function JA(r,s){Pi.C(r,s),T0("preconnect",r,s)}function XA(r,s,c){Pi.L(r,s,c);var h=La;if(h&&r&&s){var b='link[rel="preload"][as="'+Ln(s)+'"]';s==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+Ln(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+Ln(c.imageSizes)+'"]')):b+='[href="'+Ln(r)+'"]';var x=b;switch(s){case"style":x=Oa(r);break;case"script":x=qa(r)}zn.has(x)||(r=y({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),zn.set(x,r),h.querySelector(b)!==null||s==="style"&&h.querySelector(ro(x))||s==="script"&&h.querySelector(ao(x))||(s=h.createElement("link"),jt(s,"link",r),qt(s),h.head.appendChild(s)))}}function ZA(r,s){Pi.m(r,s);var c=La;if(c&&r){var h=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+Ln(h)+'"][href="'+Ln(r)+'"]',x=b;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=qa(r)}if(!zn.has(x)&&(r=y({rel:"modulepreload",href:r},s),zn.set(x,r),c.querySelector(b)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ao(x)))return}h=c.createElement("link"),jt(h,"link",r),qt(h),c.head.appendChild(h)}}}function eC(r,s,c){Pi.S(r,s,c);var h=La;if(h&&r){var b=ra(h).hoistableStyles,x=Oa(r);s=s||"default";var _=b.get(x);if(!_){var k={loading:0,preload:null};if(_=h.querySelector(ro(x)))k.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},c),(c=zn.get(x))&&Sh(r,c);var H=_=h.createElement("link");qt(H),jt(H,"link",r),H._p=new Promise(function(K,re){H.onload=K,H.onerror=re}),H.addEventListener("load",function(){k.loading|=1}),H.addEventListener("error",function(){k.loading|=2}),k.loading|=4,rc(_,s,h)}_={type:"stylesheet",instance:_,count:1,state:k},b.set(x,_)}}}function tC(r,s){Pi.X(r,s);var c=La;if(c&&r){var h=ra(c).hoistableScripts,b=qa(r),x=h.get(b);x||(x=c.querySelector(ao(b)),x||(r=y({src:r,async:!0},s),(s=zn.get(b))&&kh(r,s),x=c.createElement("script"),qt(x),jt(x,"link",r),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(b,x))}}function nC(r,s){Pi.M(r,s);var c=La;if(c&&r){var h=ra(c).hoistableScripts,b=qa(r),x=h.get(b);x||(x=c.querySelector(ao(b)),x||(r=y({src:r,async:!0,type:"module"},s),(s=zn.get(b))&&kh(r,s),x=c.createElement("script"),qt(x),jt(x,"link",r),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(b,x))}}function E0(r,s,c,h){var b=(b=ge.current)?ic(b):null;if(!b)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Oa(c.href),c=ra(b).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Oa(c.href);var x=ra(b).hoistableStyles,_=x.get(r);if(_||(b=b.ownerDocument||b,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,_),(x=b.querySelector(ro(r)))&&!x._p&&(_.instance=x,_.state.loading=5),zn.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},zn.set(r,c),x||iC(b,r,c,_.state))),s&&h===null)throw Error(i(528,""));return _}if(s&&h!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qa(c),c=ra(b).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Oa(r){return'href="'+Ln(r)+'"'}function ro(r){return'link[rel="stylesheet"]['+r+"]"}function _0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function iC(r,s,c,h){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=r.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),jt(s,"link",c),qt(s),r.head.appendChild(s))}function qa(r){return'[src="'+Ln(r)+'"]'}function ao(r){return"script[async]"+r}function A0(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=r.querySelector('style[data-href~="'+Ln(c.href)+'"]');if(h)return s.instance=h,qt(h),h;var b=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),qt(h),jt(h,"style",b),rc(h,c.precedence,r),s.instance=h;case"stylesheet":b=Oa(c.href);var x=r.querySelector(ro(b));if(x)return s.state.loading|=4,s.instance=x,qt(x),x;h=_0(c),(b=zn.get(b))&&Sh(h,b),x=(r.ownerDocument||r).createElement("link"),qt(x);var _=x;return _._p=new Promise(function(k,H){_.onload=k,_.onerror=H}),jt(x,"link",h),s.state.loading|=4,rc(x,c.precedence,r),s.instance=x;case"script":return x=qa(c.src),(b=r.querySelector(ao(x)))?(s.instance=b,qt(b),b):(h=c,(b=zn.get(x))&&(h=y({},c),kh(h,b)),r=r.ownerDocument||r,b=r.createElement("script"),qt(b),jt(b,"link",h),r.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,rc(h,c.precedence,r));return s.instance}function rc(r,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=h.length?h[h.length-1]:null,x=b,_=0;_<h.length;_++){var k=h[_];if(k.dataset.precedence===s)x=k;else if(x!==b)break}x?x.parentNode.insertBefore(r,x.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function Sh(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function kh(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var ac=null;function C0(r,s,c){if(ac===null){var h=new Map,b=ac=new Map;b.set(c,h)}else b=ac,h=b.get(c),h||(h=new Map,b.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),b=0;b<c.length;b++){var x=c[b];if(!(x[xs]||x[Gt]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(s)||"";_=r+_;var k=h.get(_);k?k.push(x):h.set(_,[x])}}return h}function S0(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function rC(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function k0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function aC(r,s,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=Oa(h.href),x=s.querySelector(ro(b));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=sc.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=x,qt(x);return}x=s.ownerDocument||s,h=_0(h),(b=zn.get(b))&&Sh(h,b),x=x.createElement("link"),qt(x);var _=x;_._p=new Promise(function(k,H){_.onload=k,_.onerror=H}),jt(x,"link",h),c.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=sc.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var Ih=0;function sC(r,s){return r.stylesheets&&r.count===0&&lc(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&lc(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+s);0<r.imgBytes&&Ih===0&&(Ih=62500*UA());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&lc(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>Ih?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(b)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var oc=null;function lc(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,oc=new Map,s.forEach(oC,r),oc=null,sc.call(r))}function oC(r,s){if(!(s.state.loading&4)){var c=oc.get(r);if(c)var h=c.get(null);else{c=new Map,oc.set(r,c);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var _=b[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),h=_)}h&&c.set(null,h)}b=s.instance,_=b.getAttribute("data-precedence"),x=c.get(_)||h,x===h&&c.set(null,b),c.set(_,b),this.count++,h=sc.bind(this),b.addEventListener("load",h),b.addEventListener("error",h),x?x.parentNode.insertBefore(b,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),s.state.loading|=4}}var so={$$typeof:P,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function lC(r,s,c,h,b,x,_,k,H){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_u(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.hiddenUpdates=_u(null),this.identifierPrefix=h,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function I0(r,s,c,h,b,x,_,k,H,K,re,le){return r=new lC(r,s,c,_,H,K,re,le,k),s=1,x===!0&&(s|=24),x=En(3,null,null,s),r.current=x,x.stateNode=r,s=ld(),s.refCount++,r.pooledCache=s,s.refCount++,x.memoizedState={element:h,isDehydrated:c,cache:s},hd(x),r}function N0(r){return r?(r=fa,r):fa}function R0(r,s,c,h,b,x){b=N0(b),h.context===null?h.context=b:h.pendingContext=b,h=Ki(s),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=Qi(r,h,s),c!==null&&(yn(c,r,s),Bs(c,r,s))}function M0(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function Nh(r,s){M0(r,s),(r=r.alternate)&&M0(r,s)}function P0(r){if(r.tag===13||r.tag===31){var s=Sr(r,67108864);s!==null&&yn(s,r,67108864),Nh(r,67108864)}}function D0(r){if(r.tag===13||r.tag===31){var s=kn();s=Au(s);var c=Sr(r,s);c!==null&&yn(c,r,s),Nh(r,s)}}var cc=!0;function cC(r,s,c,h){var b=j.T;j.T=null;var x=ce.p;try{ce.p=2,Rh(r,s,c,h)}finally{ce.p=x,j.T=b}}function uC(r,s,c,h){var b=j.T;j.T=null;var x=ce.p;try{ce.p=8,Rh(r,s,c,h)}finally{ce.p=x,j.T=b}}function Rh(r,s,c,h){if(cc){var b=Mh(h);if(b===null)yh(r,s,h,uc,c),O0(r,h);else if(hC(b,r,s,c,h))h.stopPropagation();else if(O0(r,h),s&4&&-1<dC.indexOf(r)){for(;b!==null;){var x=ia(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=Tr(x.pendingLanes);if(_!==0){var k=x;for(k.pendingLanes|=2,k.entangledLanes|=2;_;){var H=1<<31-dt(_);k.entanglements[1]|=H,_&=~H}ui(x),(nt&6)===0&&(jl=nn()+500,eo(0))}}break;case 31:case 13:k=Sr(x,2),k!==null&&yn(k,x,2),$l(),Nh(x,2)}if(x=Mh(h),x===null&&yh(r,s,h,uc,c),x===b)break;b=x}b!==null&&h.stopPropagation()}else yh(r,s,h,null,c)}}function Mh(r){return r=Du(r),Ph(r)}var uc=null;function Ph(r){if(uc=null,r=na(r),r!==null){var s=o(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=l(s),r!==null)return r;r=null}else if(c===31){if(r=u(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return uc=r,null}function L0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Eu()){case ae:return 2;case Te:return 8;case qe:case We:return 32;case it:return 268435456;default:return 32}default:return 32}}var Dh=!1,or=null,lr=null,cr=null,oo=new Map,lo=new Map,ur=[],dC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O0(r,s){switch(r){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":oo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(s.pointerId)}}function co(r,s,c,h,b,x){return r===null||r.nativeEvent!==x?(r={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:x,targetContainers:[b]},s!==null&&(s=ia(s),s!==null&&P0(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),r)}function hC(r,s,c,h,b){switch(s){case"focusin":return or=co(or,r,s,c,h,b),!0;case"dragenter":return lr=co(lr,r,s,c,h,b),!0;case"mouseover":return cr=co(cr,r,s,c,h,b),!0;case"pointerover":var x=b.pointerId;return oo.set(x,co(oo.get(x)||null,r,s,c,h,b)),!0;case"gotpointercapture":return x=b.pointerId,lo.set(x,co(lo.get(x)||null,r,s,c,h,b)),!0}return!1}function q0(r){var s=na(r.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){r.blockedOn=s,Jf(r.priority,function(){D0(c)});return}}else if(s===31){if(s=u(c),s!==null){r.blockedOn=s,Jf(r.priority,function(){D0(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function dc(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=Mh(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);Pu=h,c.target.dispatchEvent(h),Pu=null}else return s=ia(c),s!==null&&P0(s),r.blockedOn=c,!1;s.shift()}return!0}function B0(r,s,c){dc(r)&&c.delete(s)}function mC(){Dh=!1,or!==null&&dc(or)&&(or=null),lr!==null&&dc(lr)&&(lr=null),cr!==null&&dc(cr)&&(cr=null),oo.forEach(B0),lo.forEach(B0)}function hc(r,s){r.blockedOn===s&&(r.blockedOn=null,Dh||(Dh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mC)))}var mc=null;function H0(r){mc!==r&&(mc=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mc===r&&(mc=null);for(var s=0;s<r.length;s+=3){var c=r[s],h=r[s+1],b=r[s+2];if(typeof h!="function"){if(Ph(h||c)===null)continue;break}var x=ia(c);x!==null&&(r.splice(s,3),s-=3,Md(x,{pending:!0,data:b,method:c.method,action:h},h,b))}}))}function Ba(r){function s(H){return hc(H,r)}or!==null&&hc(or,r),lr!==null&&hc(lr,r),cr!==null&&hc(cr,r),oo.forEach(s),lo.forEach(s);for(var c=0;c<ur.length;c++){var h=ur[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<ur.length&&(c=ur[0],c.blockedOn===null);)q0(c),c.blockedOn===null&&ur.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var b=c[h],x=c[h+1],_=b[dn]||null;if(typeof x=="function")_||H0(c);else if(_){var k=null;if(x&&x.hasAttribute("formAction")){if(b=x,_=x[dn]||null)k=_.formAction;else if(Ph(b)!==null)continue}else k=_.action;typeof k=="function"?c[h+1]=k:(c.splice(h,3),h-=3),H0(c)}}}function U0(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return b=_})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function Lh(r){this._internalRoot=r}fc.prototype.render=Lh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,h=kn();R0(c,h,r,s,null,null)},fc.prototype.unmount=Lh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;R0(r.current,2,null,r,null,null),$l(),s[ta]=null}};function fc(r){this._internalRoot=r}fc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Qf();r={blockedOn:null,target:r,priority:s};for(var c=0;c<ur.length&&s!==0&&s<ur[c].priority;c++);ur.splice(c,0,r),c===0&&q0(r)}};var F0=t.version;if(F0!=="19.2.3")throw Error(i(527,F0,"19.2.3"));ce.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var fC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{rn=pc.inject(fC),Dt=pc}catch{}}return ho.createRoot=function(r,s){if(!a(r))throw Error(i(299));var c=!1,h="",b=$g,x=Kg,_=Qg;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=I0(r,1,!1,null,null,c,h,null,b,x,_,U0),r[ta]=s.current,gh(r),new Lh(s)},ho.hydrateRoot=function(r,s,c){if(!a(r))throw Error(i(299));var h=!1,b="",x=$g,_=Kg,k=Qg,H=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(H=c.formState)),s=I0(r,1,!0,s,c??null,h,b,H,x,_,k,U0),s.context=N0(null),c=s.current,h=kn(),h=Au(h),b=Ki(h),b.callback=null,Qi(c,b,h),c=h,s.current.lanes=c,ws(s,c),ui(s),r[ta]=s.current,gh(r),new fc(s)},ho.version="19.2.3",ho}var J0;function EC(){if(J0)return Bh.exports;J0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Bh.exports=TC(),Bh.exports}var _C=EC();const AC=Xc(_C);var ie=(e=>(e.ANATOMY="Anatomy",e.PHYSIOLOGY="Physiology",e.BIOCHEMISTRY="Biochemistry",e.ORAL_HISTOLOGY="Oral Histology",e.TOOTH_MORPHOLOGY="Tooth Morphology",e.DENTAL_MATERIALS="Dental Materials",e.PHARMACOLOGY="Pharmacology",e.GENERAL_PATHOLOGY="General Pathology",e.COMMUNITY_MEDICINE="Community & Behavioural Sciences",e.MICROBIOLOGY="Microbiology",e.INTERNAL_MEDICINE="General Medicine",e.SURGERY="General Surgery",e.ORAL_PATHOLOGY="Oral Pathology",e.PERIODONTOLOGY="Periodontology",e.ORAL_MEDICINE_RADIOLOGY="Oral Medicine & Radiology",e.ORTHODONTICS="Orthodontics",e.PROSTHODONTICS="Prosthodontics",e.ORAL_SURGERY="Oral & Maxillofacial Surgery",e.OPERATIVE_ENDO="Operative Dentistry & Endodontics",e.OBGYN="Obstetrics & Gynecology",e.PEDIATRICS="Pediatrics",e))(ie||{});const X0={[ie.ANATOMY]:["Head & Neck: Triangles & Fascia","Head & Neck: Cranial Nerves","Head & Neck: TMJ & Muscles of Mastication","Neuroanatomy: Brainstem & Cerebellum","Neuroanatomy: Thalamus & Basal Ganglia","Thorax: Heart & Mediastinum","Upper Limb: Brachial Plexus","Histology: Epithelium & Connective Tissue","Embryology: Pharyngeal Arches"],[ie.PHYSIOLOGY]:["Cell Physiology & Membrane Transport","Nerve & Muscle Physiology","Cardiovascular: Cardiac Cycle & Output","Cardiovascular: Blood Pressure Regulation","Respiratory: Mechanics & Gas Exchange","Renal: GFR & Clearance","Endocrinology: Pituitary & Thyroid","Endocrinology: Adrenal & Pancreas","GIT: Secretions & Motility"],[ie.BIOCHEMISTRY]:["Carbohydrates: Glycolysis & Krebs Cycle","Lipids: Beta Oxidation & Synthesis","Proteins: Amino Acids & Urea Cycle","Vitamins & Minerals","Enzymes & Kinetics","Genetics: Replication, Transcription, Translation"],[ie.GENERAL_PATHOLOGY]:["Cell Injury & Adaptations","Acute & Chronic Inflammation","Tissue Repair & Healing","Hemodynamics: Shock & Thrombosis","Neoplasia: Oncogenes & Tumor Suppressors","Genetic Disorders"],[ie.PHARMACOLOGY]:["Pharmacokinetics & Dynamics","Autonomic Nervous System (ANS)","Cardiovascular Drugs","Diuretics","Antibiotics & Antifungals","Local Anesthetics (Detailed)"],[ie.ORAL_HISTOLOGY]:["Development of Tooth (Odontogenesis)","Enamel: Structure & Hypocalcification","Dentin & Pulp Complex","Periodontal Ligament (PDL)","Oral Mucosa Types"],[ie.TOOTH_MORPHOLOGY]:["Permanent Incisors","Permanent Canines","Premolars: Anatomy & Variations","Molars: Anatomy & Variations","Deciduous Dentition Differences"],[ie.DENTAL_MATERIALS]:[{parent:"Dental Material Properties",subtopics:["Properties - Summary","Properties - Mechanical","Properties - Thermal","Properties - Rheological","Properties - Chemical & Biological","Properties - Optical"]},"Physical & Mechanical Properties","Impression Materials","Gypsum Products","Investment","Casting",{parent:"Wax",subtopics:["Wax - Detailed Notes","Wax - Summary"]},{parent:"Composite Restorations",subtopics:[{parent:"Composite",subtopics:["Composite - Detailed Explanation","Composite - Summary"]},"Adhesion & Bonding"]},"Dental Resins & Polymers",{parent:"Glass Ionomer Cement (GIC)",subtopics:["GIC - Detailed Notes","GIC - Summary"]},"Dental Cements",{parent:"Dental Ceramics",subtopics:["Dental Ceramics - Detailed Notes","Dental Ceramics - Summary"]},{parent:"Amalgam",subtopics:["Amalgam - Detailed Explanation","Amalgam - Summary"]},{parent:"Metals",subtopics:["Metals Summary","Alloys","Base Metal Alloys","Wrought Alloys","Noble Metal Alloys"]}],default:["General Overview","Key Definitions","Clinical Classifications","Diagnosis & Management","Complications"]},CC={Anatomy:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10M12 21V3m0 0L9.5 5.5M12 3l2.5 2.5M7 8h10M7 14h10"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 6a2 2 0 012-2h10a2 2 0 012 2v12a2 2 0 01-2 2H7a2 2 0 01-2-2V6z",opacity:"0.5"})]}),Physiology:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 12h3l2-4 2 8 2-4h3"})]}),Biochemistry:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"}),w.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",opacity:"0.5"})]}),"Oral Histology":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 10a2 2 0 11-4 0 2 2 0 014 0z",opacity:"0.6"}),w.jsx("circle",{cx:"10",cy:"10",r:"1",fill:"currentColor"})]}),"Tooth Morphology":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 12l5 2 5-2M4 12c0 5 3 9 8 9s8-4 8-9"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4c-3 0-4 3-4 5v3h8V9c0-2-1-5-4-5z"})]}),"Dental Materials":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 2v20",opacity:"0.3"})]}),"General Pathology":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 10a2 2 0 11-4 0 2 2 0 014 0z",opacity:"0.6"})]}),Pharmacology:w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Community & Behavioural Sciences":w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"General Medicine":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 9h4"})]}),"General Surgery":w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})}),"Oral Pathology":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"}),w.jsx("circle",{cx:"15",cy:"15",r:"4",stroke:"currentColor",strokeWidth:1.5,fill:"none"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 18l3 3"})]}),Periodontology:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 12l5 2 5-2M4 12c0 5 3 9 8 9s8-4 8-9"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4c-3 0-4 3-4 5v3h8V9c0-2-1-5-4-5z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 14c2 2 4 1 8 1s6 1 8-1",strokeDasharray:"2 2"})]}),"Oral Medicine & Radiology":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"}),w.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"currentColor",strokeWidth:1.5,strokeDasharray:"4 4"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-4.35-4.35"}),w.jsx("rect",{x:"5",y:"5",width:"14",height:"14",rx:"2",stroke:"currentColor",strokeWidth:1.5,opacity:"0.5"})]}),Orthodontics:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 20s-3-4-3-10c0-3 2-6 8-6s8 3 8 6c0 6-3 10-3 10H7z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 10h16"}),w.jsx("rect",{x:"7",y:"8",width:"2",height:"4",fill:"currentColor",rx:"0.5"}),w.jsx("rect",{x:"11",y:"8",width:"2",height:"4",fill:"currentColor",rx:"0.5"}),w.jsx("rect",{x:"15",y:"8",width:"2",height:"4",fill:"currentColor",rx:"0.5"})]}),Prosthodontics:w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 2l-3 4h6l-3-4z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 6v6c0 2 1.5 3 3 3s3-1 3-3V6"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v7m-3 0h6"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 18h6"})]}),"Oral & Maxillofacial Surgery":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 5l-2 2-2-2 2-2 2 2zM15 7l-9 9 3 3 9-9"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 12l-2 2",opacity:"0.5"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 20l3-3"})]}),"Operative Dentistry & Endodontics":w.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 2v20"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5l6 2-6 2 6 2-6 2 6 2-6 2"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 22h4m-4 0H8"})]})},SC=({subject:e,onClick:t,isCompleted:n=!1,onToggleComplete:i})=>w.jsxs("div",{onClick:()=>t(e),className:`glass-panel p-6 rounded-[1.5rem] transition-all duration-300 group flex flex-col h-full relative overflow-hidden cursor-pointer ${n?"bg-slate-100/50 dark:bg-slate-900/20 border-slate-200 dark:border-white/5 grayscale-[0.8] hover:grayscale-0 opacity-70 hover:opacity-100":"bg-white/40 dark:bg-slate-800/20 hover:border-cyan-500/30"}`,children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i&&w.jsx("button",{onClick:a=>{a.stopPropagation(),i(e,a)},className:`absolute top-4 right-4 z-20 w-8 h-8 rounded-full flex items-center justify-center transition-all ${n?"bg-green-500 text-white shadow-lg":"bg-slate-200 dark:bg-slate-700/50 text-slate-400 dark:text-slate-500 hover:bg-slate-300 dark:hover:bg-slate-600"}`,title:n?"Mark as Incomplete":"Mark as Completed",children:n?w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7",className:"opacity-0 group-hover:opacity-50"})})}),w.jsxs("div",{className:"flex items-center gap-4 mb-4 relative z-10",children:[w.jsx("div",{className:`p-3.5 rounded-2xl transition-colors shadow-lg ring-1 ring-slate-200 dark:ring-white/5 ${n?"bg-slate-200 dark:bg-slate-800 text-slate-500":"bg-slate-100 dark:bg-slate-800/50 text-cyan-600 dark:text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white shadow-black/5 dark:shadow-black/20"}`,children:CC[e]||w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),w.jsx("h3",{className:`font-bold text-lg leading-tight tracking-wide ${n?"text-slate-500 dark:text-slate-400 line-through decoration-2 decoration-slate-400/50":"text-slate-800 dark:text-slate-100"}`,children:e})]}),w.jsx("div",{className:"mt-auto relative z-10",children:w.jsxs("span",{className:`text-sm font-medium transition-colors flex items-center gap-2 ${n?"text-green-600 dark:text-green-500":"text-slate-500 group-hover:text-cyan-600 dark:group-hover:text-cyan-400"}`,children:[n?"Completed":"View Topics & MCQs",!n&&w.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]});var kC=Sx(),IC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NC,RC;function MC(){return{geminiUrl:NC,vertexUrl:RC}}function PC(e,t,n,i){var a,o;if(!(e!=null&&e.baseUrl)){const l=MC();return t?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qi{}function Se(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(t,a)){const o=t[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(e,t,n){for(let o=0;o<t.length-1;o++){const l=t[o];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[u])){const m=e[u];if(Array.isArray(n))for(let d=0;d<m.length;d++){const p=m[d];g(p,t.slice(o+1),n[d])}else for(const d of m)g(d,t.slice(o+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in e||(e[u]=[{}]);const m=e[u];g(m[0],t.slice(o+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const i=t[t.length-1],a=e[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function f(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const a=t[i];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in e){const l=e[o];return Array.isArray(l)?l.map(u=>f(u,t.slice(i+1),n)):n}else return n}else e=e[a]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function DC(e,t){for(const[n,i]of Object.entries(t)){const a=n.split("."),o=i.split("."),l=new Set;let u=-1;for(let m=0;m<a.length;m++)if(a[m]==="*"){u=m;break}if(u!==-1&&o.length>u)for(let m=u;m<o.length;m++){const d=o[m];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}wm(e,a,o,0,l)}}function wm(e,t,n,i,a){if(i>=t.length||typeof e!="object"||e===null)return;const o=t[i];if(o.endsWith("[]")){const l=o.slice(0,-2),u=e;if(l in u&&Array.isArray(u[l]))for(const m of u[l])wm(m,t,n,i+1,a)}else if(o==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,u=Object.keys(l).filter(d=>!d.startsWith("_")&&!a.has(d)),m={};for(const d of u)m[d]=l[d];for(const[d,p]of Object.entries(m)){const y=[];for(const v of n.slice(i))v==="*"?y.push(d):y.push(v);g(l,y,p)}for(const d of u)delete l[d]}}else{const l=e;o in l&&wm(l[o],t,n,i+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uf(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(e){const t={},n=f(e,["operationName"]);n!=null&&g(t,["operationName"],n);const i=f(e,["resourceName"]);return i!=null&&g(t,["_url","resourceName"],i),t}function OC(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response","generateVideoResponse"]);return l!=null&&g(t,["response"],BC(l)),t}function qC(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response"]);return l!=null&&g(t,["response"],HC(l)),t}function BC(e){const t={},n=f(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>UC(l))),g(t,["generatedVideos"],o)}const i=f(e,["raiMediaFilteredCount"]);i!=null&&g(t,["raiMediaFilteredCount"],i);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&g(t,["raiMediaFilteredReasons"],a),t}function HC(e){const t={},n=f(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FC(l))),g(t,["generatedVideos"],o)}const i=f(e,["raiMediaFilteredCount"]);i!=null&&g(t,["raiMediaFilteredCount"],i);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&g(t,["raiMediaFilteredReasons"],a),t}function UC(e){const t={},n=f(e,["video"]);return n!=null&&g(t,["video"],YC(n)),t}function FC(e){const t={},n=f(e,["_self"]);return n!=null&&g(t,["video"],$C(n)),t}function GC(e){const t={},n=f(e,["operationName"]);return n!=null&&g(t,["_url","operationName"],n),t}function zC(e){const t={},n=f(e,["operationName"]);return n!=null&&g(t,["_url","operationName"],n),t}function VC(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response"]);return l!=null&&g(t,["response"],WC(l)),t}function WC(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["parent"]);i!=null&&g(t,["parent"],i);const a=f(e,["documentName"]);return a!=null&&g(t,["documentName"],a),t}function kx(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response"]);return l!=null&&g(t,["response"],jC(l)),t}function jC(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["parent"]);i!=null&&g(t,["parent"],i);const a=f(e,["documentName"]);return a!=null&&g(t,["documentName"],a),t}function YC(e){const t={},n=f(e,["uri"]);n!=null&&g(t,["uri"],n);const i=f(e,["encodedVideo"]);i!=null&&g(t,["videoBytes"],uf(i));const a=f(e,["encoding"]);return a!=null&&g(t,["mimeType"],a),t}function $C(e){const t={},n=f(e,["gcsUri"]);n!=null&&g(t,["uri"],n);const i=f(e,["bytesBase64Encoded"]);i!=null&&g(t,["videoBytes"],uf(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Z0;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Z0||(Z0={}));var eb;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(eb||(eb={}));var tb;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(tb||(tb={}));var Ct;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Ct||(Ct={}));var nb;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nb||(nb={}));var ib;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(ib||(ib={}));var rb;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(rb||(rb={}));var ab;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ab||(ab={}));var sb;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(sb||(sb={}));var ob;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ob||(ob={}));var lb;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(lb||(lb={}));var cb;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(cb||(cb={}));var ub;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ub||(ub={}));var db;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(db||(db={}));var hb;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(hb||(hb={}));var mb;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(mb||(mb={}));var fb;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(fb||(fb={}));var pb;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(pb||(pb={}));var gb;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gb||(gb={}));var yb;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(yb||(yb={}));var bb;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bb||(bb={}));var qc;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(qc||(qc={}));var vb;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vb||(vb={}));var wb;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wb||(wb={}));var xb;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xb||(xb={}));var xm;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xm||(xm={}));var Tb;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Tb||(Tb={}));var Eb;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Eb||(Eb={}));var Tm;(function(e){e.COLLECTION="COLLECTION"})(Tm||(Tm={}));var _b;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(_b||(_b={}));var Ab;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ab||(Ab={}));var Cb;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Cb||(Cb={}));var Sb;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Sb||(Sb={}));var kb;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(kb||(kb={}));var Ib;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ib||(Ib={}));var Nb;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Nb||(Nb={}));var Rb;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Rb||(Rb={}));var Mb;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mb||(Mb={}));var Pb;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Pb||(Pb={}));var Db;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Db||(Db={}));var Lb;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Lb||(Lb={}));var Ob;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Ob||(Ob={}));var qb;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qb||(qb={}));var Bb;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Bb||(Bb={}));var Hb;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Hb||(Hb={}));var Ub;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(Ub||(Ub={}));var Fb;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Fb||(Fb={}));var Gb;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Gb||(Gb={}));var zb;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(zb||(zb={}));var Vb;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(Vb||(Vb={}));var Wb;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Wb||(Wb={}));var jb;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jb||(jb={}));var Yb;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Yb||(Yb={}));var $b;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($b||($b={}));var Kb;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kb||(Kb={}));var Qb;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Qb||(Qb={}));var Xa;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Xa||(Xa={}));class Em{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class mo{get text(){var t,n,i,a,o,l,u,m;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const y=[];for(const v of(m=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&m!==void 0?m:[]){for(const[E,A]of Object.entries(v))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(A!==null||A!==void 0)&&y.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;p=!0,d+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var t,n,i,a,o,l,u,m;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const y of(m=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&m!==void 0?m:[]){for(const[v,E]of Object.entries(y))v!=="inlineData"&&(E!==null||E!==void 0)&&p.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,n,i,a,o,l,u,m;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(m=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||m===void 0?void 0:m.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,n,i,a,o,l,u,m,d;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(m=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||m===void 0?void 0:m.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,n,i,a,o,l,u,m,d;if(((a=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(m=(u=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||m===void 0?void 0:m.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class Jb{}class Xb{}class KC{}class QC{}class JC{}class XC{}class Zb{}class ev{}class tv{}class ZC{}class Bc{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Bc;let a;const o=t;return n?a=qC(o):a=OC(o),Object.assign(i,a),i}}class nv{}class iv{}class rv{}class av{}class eS{}class tS{}class nS{}class df{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new df,o=VC(t);return Object.assign(i,o),i}}class iS{}class rS{}class aS{}class sv{}class sS{get text(){var t,n,i;let a="",o=!1;const l=[];for(const u of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[m,d]of Object.entries(u))m!=="text"&&m!=="thought"&&d!==null&&l.push(m);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,a+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var t,n,i;let a="";const o=[];for(const l of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,m]of Object.entries(l))u!=="inlineData"&&m!==null&&o.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class oS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hf{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new hf,o=kx(t);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tt(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Ix(e,t){const n=tt(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Nx(e){return Array.isArray(e)?e.map(t=>Hc(t)):[Hc(e)]}function Hc(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Rx(e){const t=Hc(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Mx(e){const t=Hc(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ov(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Px(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ov(t)):[ov(e)]}function _m(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function lv(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function cv(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Xt(e){if(e==null)throw new Error("ContentUnion is required");return _m(e)?e:{role:"user",parts:Px(e)}}function mf(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=Xt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=Xt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Xt(n)):[Xt(t)]}function jn(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(lv(e)||cv(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Xt(e)]}const t=[],n=[],i=_m(e[0]);for(const a of e){const o=_m(a);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(a);else{if(lv(a)||cv(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||t.push({role:"user",parts:Px(n)}),t}function lS(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(Ct).includes(n[0].toUpperCase())?n[0].toUpperCase():Ct.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(Ct).includes(i.toUpperCase())?i.toUpperCase():Ct.TYPE_UNSPECIFIED})}}function ns(e){const t={},n=["items"],i=["anyOf"],a=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=e.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,e=o[1]):o[1].type==="null"&&(t.nullable=!0,e=o[0])),e.type instanceof Array&&lS(e.type,t);for(const[l,u]of Object.entries(e))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Ct).includes(u.toUpperCase())?u.toUpperCase():Ct.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=ns(u);else if(i.includes(l)){const m=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}m.push(ns(d))}t[l]=m}else if(a.includes(l)){const m={};for(const[d,p]of Object.entries(u))m[d]=ns(p);t[l]=m}else{if(l==="additionalProperties")continue;t[l]=u}return t}function ff(e){return ns(e)}function pf(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function gf(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function cs(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=ns(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=ns(t.response));return e}function us(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function cS(e,t,n,i=1){const a=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:a?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:a?`${n}/${t}`:t}function Bi(e,t){if(typeof t!="string")throw new Error("name must be a string");return cS(e,t,"cachedContents")}function Dx(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function br(e){return uf(e)}function uS(e){return e!=null&&typeof e=="object"&&"name"in e}function dS(e){return e!=null&&typeof e=="object"&&"video"in e}function hS(e){return e!=null&&typeof e=="object"&&"uri"in e}function Lx(e){var t;let n;if(uS(e)&&(n=e.name),!(hS(e)&&(n=e.uri,n===void 0))&&!(dS(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ox(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function qx(e){for(const t of["models","tunedModels","publisherModels"])if(mS(e,t))return e[t];return[]}function mS(e,t){return e!==null&&typeof e=="object"&&t in e}function fS(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function pS(e,t={}){const n=[],i=new Set;for(const a of e){const o=a.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=fS(a,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Bx(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function gS(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Hx(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return e;let o=!1;for(const l of a){if(typeof l!="object"||l===null)continue;const m=l.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function ds(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ux(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yS(e){const t={},n=f(e,["responsesFile"]);n!=null&&g(t,["fileName"],n);const i=f(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>JS(l))),g(t,["inlinedResponses"],o)}const a=f(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["inlinedEmbedContentResponses"],o)}return t}function bS(e){const t={},n=f(e,["predictionsFormat"]);n!=null&&g(t,["format"],n);const i=f(e,["gcsDestination","outputUriPrefix"]);i!=null&&g(t,["gcsUri"],i);const a=f(e,["bigqueryDestination","outputUri"]);return a!=null&&g(t,["bigqueryUri"],a),t}function vS(e){const t={},n=f(e,["format"]);n!=null&&g(t,["predictionsFormat"],n);const i=f(e,["gcsUri"]);i!=null&&g(t,["gcsDestination","outputUriPrefix"],i);const a=f(e,["bigqueryUri"]);if(a!=null&&g(t,["bigqueryDestination","outputUri"],a),f(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Mc(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata","displayName"]);i!=null&&g(t,["displayName"],i);const a=f(e,["metadata","state"]);a!=null&&g(t,["state"],Ux(a));const o=f(e,["metadata","createTime"]);o!=null&&g(t,["createTime"],o);const l=f(e,["metadata","endTime"]);l!=null&&g(t,["endTime"],l);const u=f(e,["metadata","updateTime"]);u!=null&&g(t,["updateTime"],u);const m=f(e,["metadata","model"]);m!=null&&g(t,["model"],m);const d=f(e,["metadata","output"]);return d!=null&&g(t,["dest"],yS(Hx(d))),t}function Am(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["displayName"]);i!=null&&g(t,["displayName"],i);const a=f(e,["state"]);a!=null&&g(t,["state"],Ux(a));const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["createTime"]);l!=null&&g(t,["createTime"],l);const u=f(e,["startTime"]);u!=null&&g(t,["startTime"],u);const m=f(e,["endTime"]);m!=null&&g(t,["endTime"],m);const d=f(e,["updateTime"]);d!=null&&g(t,["updateTime"],d);const p=f(e,["model"]);p!=null&&g(t,["model"],p);const y=f(e,["inputConfig"]);y!=null&&g(t,["src"],wS(y));const v=f(e,["outputConfig"]);v!=null&&g(t,["dest"],bS(Hx(v)));const E=f(e,["completionStats"]);return E!=null&&g(t,["completionStats"],E),t}function wS(e){const t={},n=f(e,["instancesFormat"]);n!=null&&g(t,["format"],n);const i=f(e,["gcsSource","uris"]);i!=null&&g(t,["gcsUri"],i);const a=f(e,["bigquerySource","inputUri"]);return a!=null&&g(t,["bigqueryUri"],a),t}function xS(e,t){const n={};if(f(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(t,["fileName"]);i!=null&&g(n,["fileName"],i);const a=f(t,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>QS(e,l))),g(n,["requests","requests"],o)}return n}function TS(e){const t={},n=f(e,["format"]);n!=null&&g(t,["instancesFormat"],n);const i=f(e,["gcsUri"]);i!=null&&g(t,["gcsSource","uris"],i);const a=f(e,["bigqueryUri"]);if(a!=null&&g(t,["bigquerySource","inputUri"],a),f(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function ES(e){const t={},n=f(e,["data"]);if(n!=null&&g(t,["data"],n),f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function _S(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function AS(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function CS(e){const t={},n=f(e,["content"]);n!=null&&g(t,["content"],n);const i=f(e,["citationMetadata"]);i!=null&&g(t,["citationMetadata"],SS(i));const a=f(e,["tokenCount"]);a!=null&&g(t,["tokenCount"],a);const o=f(e,["finishReason"]);o!=null&&g(t,["finishReason"],o);const l=f(e,["avgLogprobs"]);l!=null&&g(t,["avgLogprobs"],l);const u=f(e,["groundingMetadata"]);u!=null&&g(t,["groundingMetadata"],u);const m=f(e,["index"]);m!=null&&g(t,["index"],m);const d=f(e,["logprobsResult"]);d!=null&&g(t,["logprobsResult"],d);const p=f(e,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>E)),g(t,["safetyRatings"],v)}const y=f(e,["urlContextMetadata"]);return y!=null&&g(t,["urlContextMetadata"],y),t}function SS(e){const t={},n=f(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),g(t,["citations"],i)}return t}function Fx(e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>rk(o))),g(t,["parts"],a)}const i=f(e,["role"]);return i!=null&&g(t,["role"],i),t}function kS(e,t){const n={},i=f(e,["displayName"]);if(t!==void 0&&i!=null&&g(t,["batch","displayName"],i),f(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function IS(e,t){const n={},i=f(e,["displayName"]);t!==void 0&&i!=null&&g(t,["displayName"],i);const a=f(e,["dest"]);return t!==void 0&&a!=null&&g(t,["outputConfig"],vS(gS(a))),n}function uv(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["src"]);a!=null&&g(n,["batch","inputConfig"],xS(e,Bx(e,a)));const o=f(t,["config"]);return o!=null&&kS(o,n),n}function NS(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["model"],tt(e,i));const a=f(t,["src"]);a!=null&&g(n,["inputConfig"],TS(Bx(e,a)));const o=f(t,["config"]);return o!=null&&IS(o,n),n}function RS(e,t){const n={},i=f(e,["displayName"]);return t!==void 0&&i!=null&&g(t,["batch","displayName"],i),n}function MS(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["src"]);a!=null&&g(n,["batch","inputConfig"],HS(e,a));const o=f(t,["config"]);return o!=null&&RS(o,n),n}function PS(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function DS(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function LS(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["name"]);i!=null&&g(t,["name"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);return o!=null&&g(t,["error"],o),t}function OS(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["name"]);i!=null&&g(t,["name"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);return o!=null&&g(t,["error"],o),t}function qS(e,t){const n={},i=f(t,["contents"]);if(i!=null){let o=mf(e,i);Array.isArray(o)&&(o=o.map(l=>l)),g(n,["requests[]","request","content"],o)}const a=f(t,["config"]);return a!=null&&(g(n,["_self"],BS(a,n)),DC(n,{"requests[].*":"requests[].request.*"})),n}function BS(e,t){const n={},i=f(e,["taskType"]);t!==void 0&&i!=null&&g(t,["requests[]","taskType"],i);const a=f(e,["title"]);t!==void 0&&a!=null&&g(t,["requests[]","title"],a);const o=f(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&g(t,["requests[]","outputDimensionality"],o),f(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HS(e,t){const n={},i=f(t,["fileName"]);i!=null&&g(n,["file_name"],i);const a=f(t,["inlinedRequests"]);return a!=null&&g(n,["requests"],qS(e,a)),n}function US(e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&g(t,["fileUri"],n);const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function FS(e){const t={},n=f(e,["id"]);n!=null&&g(t,["id"],n);const i=f(e,["args"]);i!=null&&g(t,["args"],i);const a=f(e,["name"]);if(a!=null&&g(t,["name"],a),f(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function GS(e){const t={},n=f(e,["allowedFunctionNames"]);n!=null&&g(t,["allowedFunctionNames"],n);const i=f(e,["mode"]);if(i!=null&&g(t,["mode"],i),f(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function zS(e,t,n){const i={},a=f(t,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],Fx(Xt(a)));const o=f(t,["temperature"]);o!=null&&g(i,["temperature"],o);const l=f(t,["topP"]);l!=null&&g(i,["topP"],l);const u=f(t,["topK"]);u!=null&&g(i,["topK"],u);const m=f(t,["candidateCount"]);m!=null&&g(i,["candidateCount"],m);const d=f(t,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const p=f(t,["stopSequences"]);p!=null&&g(i,["stopSequences"],p);const y=f(t,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const v=f(t,["logprobs"]);v!=null&&g(i,["logprobs"],v);const E=f(t,["presencePenalty"]);E!=null&&g(i,["presencePenalty"],E);const A=f(t,["frequencyPenalty"]);A!=null&&g(i,["frequencyPenalty"],A);const C=f(t,["seed"]);C!=null&&g(i,["seed"],C);const S=f(t,["responseMimeType"]);S!=null&&g(i,["responseMimeType"],S);const I=f(t,["responseSchema"]);I!=null&&g(i,["responseSchema"],ff(I));const L=f(t,["responseJsonSchema"]);if(L!=null&&g(i,["responseJsonSchema"],L),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(t,["safetySettings"]);if(n!==void 0&&P!=null){let ke=P;Array.isArray(ke)&&(ke=ke.map(xe=>ak(xe))),g(n,["safetySettings"],ke)}const G=f(t,["tools"]);if(n!==void 0&&G!=null){let ke=us(G);Array.isArray(ke)&&(ke=ke.map(xe=>ok(cs(xe)))),g(n,["tools"],ke)}const J=f(t,["toolConfig"]);if(n!==void 0&&J!=null&&g(n,["toolConfig"],sk(J)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=f(t,["cachedContent"]);n!==void 0&&q!=null&&g(n,["cachedContent"],Bi(e,q));const V=f(t,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const ve=f(t,["mediaResolution"]);ve!=null&&g(i,["mediaResolution"],ve);const ne=f(t,["speechConfig"]);if(ne!=null&&g(i,["speechConfig"],pf(ne)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=f(t,["thinkingConfig"]);F!=null&&g(i,["thinkingConfig"],F);const de=f(t,["imageConfig"]);de!=null&&g(i,["imageConfig"],KS(de));const me=f(t,["enableEnhancedCivicAnswers"]);if(me!=null&&g(i,["enableEnhancedCivicAnswers"],me),f(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function VS(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(d=>CS(d))),g(t,["candidates"],m)}const a=f(e,["modelVersion"]);a!=null&&g(t,["modelVersion"],a);const o=f(e,["promptFeedback"]);o!=null&&g(t,["promptFeedback"],o);const l=f(e,["responseId"]);l!=null&&g(t,["responseId"],l);const u=f(e,["usageMetadata"]);return u!=null&&g(t,["usageMetadata"],u),t}function WS(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function jS(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],ds(e,i)),n}function YS(e){const t={};if(f(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(e,["enableWidget"]);return n!=null&&g(t,["enableWidget"],n),t}function $S(e){const t={};if(f(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(e,["timeRangeFilter"]);return n!=null&&g(t,["timeRangeFilter"],n),t}function KS(e){const t={},n=f(e,["aspectRatio"]);n!=null&&g(t,["aspectRatio"],n);const i=f(e,["imageSize"]);if(i!=null&&g(t,["imageSize"],i),f(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function QS(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["request","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let u=jn(a);Array.isArray(u)&&(u=u.map(m=>Fx(m))),g(n,["request","contents"],u)}const o=f(t,["metadata"]);o!=null&&g(n,["metadata"],o);const l=f(t,["config"]);return l!=null&&g(n,["request","generationConfig"],zS(e,l,f(n,["request"],{}))),n}function JS(e){const t={},n=f(e,["response"]);n!=null&&g(t,["response"],VS(n));const i=f(e,["error"]);return i!=null&&g(t,["error"],i),t}function XS(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);if(t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),f(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ZS(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const o=f(e,["filter"]);return t!==void 0&&o!=null&&g(t,["_query","filter"],o),n}function ek(e){const t={},n=f(e,["config"]);return n!=null&&XS(n,t),t}function tk(e){const t={},n=f(e,["config"]);return n!=null&&ZS(n,t),t}function nk(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Mc(l))),g(t,["batchJobs"],o)}return t}function ik(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>Am(l))),g(t,["batchJobs"],o)}return t}function rk(e){const t={},n=f(e,["mediaResolution"]);n!=null&&g(t,["mediaResolution"],n);const i=f(e,["codeExecutionResult"]);i!=null&&g(t,["codeExecutionResult"],i);const a=f(e,["executableCode"]);a!=null&&g(t,["executableCode"],a);const o=f(e,["fileData"]);o!=null&&g(t,["fileData"],US(o));const l=f(e,["functionCall"]);l!=null&&g(t,["functionCall"],FS(l));const u=f(e,["functionResponse"]);u!=null&&g(t,["functionResponse"],u);const m=f(e,["inlineData"]);m!=null&&g(t,["inlineData"],ES(m));const d=f(e,["text"]);d!=null&&g(t,["text"],d);const p=f(e,["thought"]);p!=null&&g(t,["thought"],p);const y=f(e,["thoughtSignature"]);y!=null&&g(t,["thoughtSignature"],y);const v=f(e,["videoMetadata"]);return v!=null&&g(t,["videoMetadata"],v),t}function ak(e){const t={},n=f(e,["category"]);if(n!=null&&g(t,["category"],n),f(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(e,["threshold"]);return i!=null&&g(t,["threshold"],i),t}function sk(e){const t={},n=f(e,["retrievalConfig"]);n!=null&&g(t,["retrievalConfig"],n);const i=f(e,["functionCallingConfig"]);return i!=null&&g(t,["functionCallingConfig"],GS(i)),t}function ok(e){const t={};if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(e,["computerUse"]);n!=null&&g(t,["computerUse"],n);const i=f(e,["fileSearch"]);i!=null&&g(t,["fileSearch"],i);const a=f(e,["codeExecution"]);if(a!=null&&g(t,["codeExecution"],a),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(e,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>y)),g(t,["functionDeclarations"],p)}const l=f(e,["googleMaps"]);l!=null&&g(t,["googleMaps"],YS(l));const u=f(e,["googleSearch"]);u!=null&&g(t,["googleSearch"],$S(u));const m=f(e,["googleSearchRetrieval"]);m!=null&&g(t,["googleSearchRetrieval"],m);const d=f(e,["urlContext"]);return d!=null&&g(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oi;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Oi||(Oi={}));class Jr{constructor(t,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,a)}init(t,n,i){var a,o;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lk extends qi{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jr(Oi.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=uv(this.apiClient,t),i=n._url,a=Se("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,m=u.requests,d=[];for(const p of m){const y=Object.assign({},p);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const E=y.request;E.systemInstruction=v,y.request=E}d.push(y)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const o=this.getGcsUri(t),l=this.getBigqueryUri(t);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${a}`;else if(l)i.dest=`${l}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=NS(this.apiClient,t);return u=Se("batchPredictionJobs",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Am(p))}else{const d=uv(this.apiClient,t);return u=Se("{model}:batchGenerateContent",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Mc(p))}}async createEmbeddingsInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=MS(this.apiClient,t);return o=Se("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>Mc(m))}}async get(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=jS(this.apiClient,t);return u=Se("batchPredictionJobs/{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Am(p))}else{const d=WS(this.apiClient,t);return u=Se("batches/{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Mc(p))}}async cancel(t){var n,i,a,o;let l="",u={};if(this.apiClient.isVertexAI()){const m=AS(this.apiClient,t);l=Se("batchPredictionJobs/{name}:cancel",m._url),u=m._query,delete m._url,delete m._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=_S(this.apiClient,t);l=Se("batches/{name}:cancel",m._url),u=m._query,delete m._url,delete m._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=tk(t);return u=Se("batchPredictionJobs",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=ik(p),v=new sv;return Object.assign(v,y),v})}else{const d=ek(t);return u=Se("batches",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=nk(p),v=new sv;return Object.assign(v,y),v})}}async delete(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=DS(this.apiClient,t);return u=Se("batchPredictionJobs/{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>OS(p))}else{const d=PS(this.apiClient,t);return u=Se("batches/{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>LS(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ck(e){const t={},n=f(e,["data"]);if(n!=null&&g(t,["data"],n),f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function dv(e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Mk(o))),g(t,["parts"],a)}const i=f(e,["role"]);return i!=null&&g(t,["role"],i),t}function uk(e,t){const n={},i=f(e,["ttl"]);t!==void 0&&i!=null&&g(t,["ttl"],i);const a=f(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const o=f(e,["displayName"]);t!==void 0&&o!=null&&g(t,["displayName"],o);const l=f(e,["contents"]);if(t!==void 0&&l!=null){let p=jn(l);Array.isArray(p)&&(p=p.map(y=>dv(y))),g(t,["contents"],p)}const u=f(e,["systemInstruction"]);t!==void 0&&u!=null&&g(t,["systemInstruction"],dv(Xt(u)));const m=f(e,["tools"]);if(t!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(y=>Dk(y))),g(t,["tools"],p)}const d=f(e,["toolConfig"]);if(t!==void 0&&d!=null&&g(t,["toolConfig"],Pk(d)),f(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function dk(e,t){const n={},i=f(e,["ttl"]);t!==void 0&&i!=null&&g(t,["ttl"],i);const a=f(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const o=f(e,["displayName"]);t!==void 0&&o!=null&&g(t,["displayName"],o);const l=f(e,["contents"]);if(t!==void 0&&l!=null){let y=jn(l);Array.isArray(y)&&(y=y.map(v=>v)),g(t,["contents"],y)}const u=f(e,["systemInstruction"]);t!==void 0&&u!=null&&g(t,["systemInstruction"],Xt(u));const m=f(e,["tools"]);if(t!==void 0&&m!=null){let y=m;Array.isArray(y)&&(y=y.map(v=>Lk(v))),g(t,["tools"],y)}const d=f(e,["toolConfig"]);t!==void 0&&d!=null&&g(t,["toolConfig"],d);const p=f(e,["kmsKeyName"]);return t!==void 0&&p!=null&&g(t,["encryption_spec","kmsKeyName"],p),n}function hk(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["model"],Ix(e,i));const a=f(t,["config"]);return a!=null&&uk(a,n),n}function mk(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["model"],Ix(e,i));const a=f(t,["config"]);return a!=null&&dk(a,n),n}function fk(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],Bi(e,i)),n}function pk(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],Bi(e,i)),n}function gk(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function yk(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function bk(e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&g(t,["fileUri"],n);const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function vk(e){const t={},n=f(e,["id"]);n!=null&&g(t,["id"],n);const i=f(e,["args"]);i!=null&&g(t,["args"],i);const a=f(e,["name"]);if(a!=null&&g(t,["name"],a),f(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function wk(e){const t={},n=f(e,["allowedFunctionNames"]);n!=null&&g(t,["allowedFunctionNames"],n);const i=f(e,["mode"]);if(i!=null&&g(t,["mode"],i),f(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function xk(e){const t={},n=f(e,["description"]);n!=null&&g(t,["description"],n);const i=f(e,["name"]);i!=null&&g(t,["name"],i);const a=f(e,["parameters"]);a!=null&&g(t,["parameters"],a);const o=f(e,["parametersJsonSchema"]);o!=null&&g(t,["parametersJsonSchema"],o);const l=f(e,["response"]);l!=null&&g(t,["response"],l);const u=f(e,["responseJsonSchema"]);if(u!=null&&g(t,["responseJsonSchema"],u),f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Tk(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],Bi(e,i)),n}function Ek(e,t){const n={},i=f(t,["name"]);return i!=null&&g(n,["_url","name"],Bi(e,i)),n}function _k(e){const t={};if(f(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(e,["enableWidget"]);return n!=null&&g(t,["enableWidget"],n),t}function Ak(e){const t={};if(f(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(e,["timeRangeFilter"]);return n!=null&&g(t,["timeRangeFilter"],n),t}function Ck(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),n}function Sk(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),n}function kk(e){const t={},n=f(e,["config"]);return n!=null&&Ck(n,t),t}function Ik(e){const t={},n=f(e,["config"]);return n!=null&&Sk(n,t),t}function Nk(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["cachedContents"],o)}return t}function Rk(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["cachedContents"],o)}return t}function Mk(e){const t={},n=f(e,["mediaResolution"]);n!=null&&g(t,["mediaResolution"],n);const i=f(e,["codeExecutionResult"]);i!=null&&g(t,["codeExecutionResult"],i);const a=f(e,["executableCode"]);a!=null&&g(t,["executableCode"],a);const o=f(e,["fileData"]);o!=null&&g(t,["fileData"],bk(o));const l=f(e,["functionCall"]);l!=null&&g(t,["functionCall"],vk(l));const u=f(e,["functionResponse"]);u!=null&&g(t,["functionResponse"],u);const m=f(e,["inlineData"]);m!=null&&g(t,["inlineData"],ck(m));const d=f(e,["text"]);d!=null&&g(t,["text"],d);const p=f(e,["thought"]);p!=null&&g(t,["thought"],p);const y=f(e,["thoughtSignature"]);y!=null&&g(t,["thoughtSignature"],y);const v=f(e,["videoMetadata"]);return v!=null&&g(t,["videoMetadata"],v),t}function Pk(e){const t={},n=f(e,["retrievalConfig"]);n!=null&&g(t,["retrievalConfig"],n);const i=f(e,["functionCallingConfig"]);return i!=null&&g(t,["functionCallingConfig"],wk(i)),t}function Dk(e){const t={};if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(e,["computerUse"]);n!=null&&g(t,["computerUse"],n);const i=f(e,["fileSearch"]);i!=null&&g(t,["fileSearch"],i);const a=f(e,["codeExecution"]);if(a!=null&&g(t,["codeExecution"],a),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(e,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>y)),g(t,["functionDeclarations"],p)}const l=f(e,["googleMaps"]);l!=null&&g(t,["googleMaps"],_k(l));const u=f(e,["googleSearch"]);u!=null&&g(t,["googleSearch"],Ak(u));const m=f(e,["googleSearchRetrieval"]);m!=null&&g(t,["googleSearchRetrieval"],m);const d=f(e,["urlContext"]);return d!=null&&g(t,["urlContext"],d),t}function Lk(e){const t={},n=f(e,["retrieval"]);n!=null&&g(t,["retrieval"],n);const i=f(e,["computerUse"]);if(i!=null&&g(t,["computerUse"],i),f(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(e,["codeExecution"]);a!=null&&g(t,["codeExecution"],a);const o=f(e,["enterpriseWebSearch"]);o!=null&&g(t,["enterpriseWebSearch"],o);const l=f(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>xk(v))),g(t,["functionDeclarations"],y)}const u=f(e,["googleMaps"]);u!=null&&g(t,["googleMaps"],u);const m=f(e,["googleSearch"]);m!=null&&g(t,["googleSearch"],m);const d=f(e,["googleSearchRetrieval"]);d!=null&&g(t,["googleSearchRetrieval"],d);const p=f(e,["urlContext"]);return p!=null&&g(t,["urlContext"],p),t}function Ok(e,t){const n={},i=f(e,["ttl"]);t!==void 0&&i!=null&&g(t,["ttl"],i);const a=f(e,["expireTime"]);return t!==void 0&&a!=null&&g(t,["expireTime"],a),n}function qk(e,t){const n={},i=f(e,["ttl"]);t!==void 0&&i!=null&&g(t,["ttl"],i);const a=f(e,["expireTime"]);return t!==void 0&&a!=null&&g(t,["expireTime"],a),n}function Bk(e,t){const n={},i=f(t,["name"]);i!=null&&g(n,["_url","name"],Bi(e,i));const a=f(t,["config"]);return a!=null&&Ok(a,n),n}function Hk(e,t){const n={},i=f(t,["name"]);i!=null&&g(n,["_url","name"],Bi(e,i));const a=f(t,["config"]);return a!=null&&qk(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uk extends qi{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jr(Oi.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=mk(this.apiClient,t);return u=Se("cachedContents",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=hk(this.apiClient,t);return u=Se("cachedContents",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=Ek(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=Tk(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=pk(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=yk(p),v=new rv;return Object.assign(v,y),v})}else{const d=fk(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=gk(p),v=new rv;return Object.assign(v,y),v})}}async update(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=Hk(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=Bk(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=Ik(t);return u=Se("cachedContents",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=Rk(p),v=new av;return Object.assign(v,y),v})}else{const d=kk(t);return u=Se("cachedContents",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=Nk(p),v=new av;return Object.assign(v,y),v})}}}function Uc(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function hv(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(e){return this instanceof Be?(this.v=e,this):new Be(e)}function ti(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(E){return function(A){return Promise.resolve(A).then(E,y)}}function u(E,A){i[E]&&(a[E]=function(C){return new Promise(function(S,I){o.push([E,C,S,I])>1||m(E,C)})},A&&(a[E]=A(a[E])))}function m(E,A){try{d(i[E](A))}catch(C){v(o[0][3],C)}}function d(E){E.value instanceof Be?Promise.resolve(E.value.v).then(p,y):v(o[0][2],E)}function p(E){m("next",E)}function y(E){m("throw",E)}function v(E,A){E(A),o.shift(),o.length&&m(o[0][0],o[0][1])}}function ni(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof hv=="function"?hv(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(l){return new Promise(function(u,m){l=e[o](l),a(u,m,l.done,l.value)})}}function a(o,l,u,m){Promise.resolve(m).then(function(d){o({value:d,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fk(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Gx(n)}function Gx(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Gk(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function mv(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const a=[];let o=!0;for(;i<n&&e[i].role==="model";)a.push(e[i]),o&&!Gx(e[i])&&(o=!1),i++;o?t.push(...a):t.pop()}return t}class zk{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Vk(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Vk{constructor(t,n,i,a={},o=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),Gk(o)}async sendMessage(t){var n;await this.sendPromise;const i=Xt(t.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,u;const m=await a,d=(l=(o=m.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=m.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];p!=null&&(v=(u=p.slice(y))!==null&&u!==void 0?u:[]);const E=d?[d]:[];this.recordHistory(i,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(t){var n;await this.sendPromise;const i=Xt(t.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(t=!1){const n=t?mv(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return ti(this,arguments,function*(){var a,o,l,u,m,d;const p=[];try{for(var y=!0,v=ni(t),E;E=yield Be(v.next()),a=E.done,!a;y=!0){u=E.value,y=!1;const A=u;if(Fk(A)){const C=(d=(m=A.candidates)===null||m===void 0?void 0:m[0])===null||d===void 0?void 0:d.content;C!==void 0&&p.push(C)}yield yield Be(A)}}catch(A){o={error:A}}finally{try{!y&&!a&&(l=v.return)&&(yield Be(l.call(v)))}finally{if(o)throw o.error}}this.recordHistory(n,p)})}recordHistory(t,n,i){let a=[];n.length>0&&n.every(o=>o.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...mv(i)):this.history.push(t),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oo extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Oo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(e){const t={},n=f(e,["file"]);return n!=null&&g(t,["file"],n),t}function jk(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function Yk(e){const t={},n=f(e,["name"]);return n!=null&&g(t,["_url","file"],Lx(n)),t}function $k(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function Kk(e){const t={},n=f(e,["name"]);return n!=null&&g(t,["_url","file"],Lx(n)),t}function Qk(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),n}function Jk(e){const t={},n=f(e,["config"]);return n!=null&&Qk(n,t),t}function Xk(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["files"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zk extends qi{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jr(Oi.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jk(t);return o=Se("files",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>{const d=Xk(m),p=new iS;return Object.assign(p,d),p})}}async createInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wk(t);return o=Se("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=jk(m),p=new rS;return Object.assign(p,d),p})}}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Kk(t);return o=Se("files/{file}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Yk(t);return o=Se("files/{file}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>{const d=$k(m),p=new aS;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pc(e){const t={},n=f(e,["data"]);if(n!=null&&g(t,["data"],n),f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function eI(e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>gI(o))),g(t,["parts"],a)}const i=f(e,["role"]);return i!=null&&g(t,["role"],i),t}function tI(e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&g(t,["fileUri"],n);const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function nI(e){const t={},n=f(e,["id"]);n!=null&&g(t,["id"],n);const i=f(e,["args"]);i!=null&&g(t,["args"],i);const a=f(e,["name"]);if(a!=null&&g(t,["name"],a),f(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function iI(e){const t={},n=f(e,["description"]);n!=null&&g(t,["description"],n);const i=f(e,["name"]);i!=null&&g(t,["name"],i);const a=f(e,["parameters"]);a!=null&&g(t,["parameters"],a);const o=f(e,["parametersJsonSchema"]);o!=null&&g(t,["parametersJsonSchema"],o);const l=f(e,["response"]);l!=null&&g(t,["response"],l);const u=f(e,["responseJsonSchema"]);if(u!=null&&g(t,["responseJsonSchema"],u),f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function rI(e){const t={},n=f(e,["modelSelectionConfig"]);n!=null&&g(t,["modelConfig"],n);const i=f(e,["responseJsonSchema"]);i!=null&&g(t,["responseJsonSchema"],i);const a=f(e,["audioTimestamp"]);a!=null&&g(t,["audioTimestamp"],a);const o=f(e,["candidateCount"]);o!=null&&g(t,["candidateCount"],o);const l=f(e,["enableAffectiveDialog"]);l!=null&&g(t,["enableAffectiveDialog"],l);const u=f(e,["frequencyPenalty"]);u!=null&&g(t,["frequencyPenalty"],u);const m=f(e,["logprobs"]);m!=null&&g(t,["logprobs"],m);const d=f(e,["maxOutputTokens"]);d!=null&&g(t,["maxOutputTokens"],d);const p=f(e,["mediaResolution"]);p!=null&&g(t,["mediaResolution"],p);const y=f(e,["presencePenalty"]);y!=null&&g(t,["presencePenalty"],y);const v=f(e,["responseLogprobs"]);v!=null&&g(t,["responseLogprobs"],v);const E=f(e,["responseMimeType"]);E!=null&&g(t,["responseMimeType"],E);const A=f(e,["responseModalities"]);A!=null&&g(t,["responseModalities"],A);const C=f(e,["responseSchema"]);C!=null&&g(t,["responseSchema"],C);const S=f(e,["routingConfig"]);S!=null&&g(t,["routingConfig"],S);const I=f(e,["seed"]);I!=null&&g(t,["seed"],I);const L=f(e,["speechConfig"]);L!=null&&g(t,["speechConfig"],L);const P=f(e,["stopSequences"]);P!=null&&g(t,["stopSequences"],P);const G=f(e,["temperature"]);G!=null&&g(t,["temperature"],G);const J=f(e,["thinkingConfig"]);J!=null&&g(t,["thinkingConfig"],J);const q=f(e,["topK"]);q!=null&&g(t,["topK"],q);const V=f(e,["topP"]);if(V!=null&&g(t,["topP"],V),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function aI(e){const t={};if(f(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(e,["enableWidget"]);return n!=null&&g(t,["enableWidget"],n),t}function sI(e){const t={};if(f(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(e,["timeRangeFilter"]);return n!=null&&g(t,["timeRangeFilter"],n),t}function oI(e,t){const n={},i=f(e,["generationConfig"]);t!==void 0&&i!=null&&g(t,["setup","generationConfig"],i);const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&g(t,["setup","generationConfig","responseModalities"],a);const o=f(e,["temperature"]);t!==void 0&&o!=null&&g(t,["setup","generationConfig","temperature"],o);const l=f(e,["topP"]);t!==void 0&&l!=null&&g(t,["setup","generationConfig","topP"],l);const u=f(e,["topK"]);t!==void 0&&u!=null&&g(t,["setup","generationConfig","topK"],u);const m=f(e,["maxOutputTokens"]);t!==void 0&&m!=null&&g(t,["setup","generationConfig","maxOutputTokens"],m);const d=f(e,["mediaResolution"]);t!==void 0&&d!=null&&g(t,["setup","generationConfig","mediaResolution"],d);const p=f(e,["seed"]);t!==void 0&&p!=null&&g(t,["setup","generationConfig","seed"],p);const y=f(e,["speechConfig"]);t!==void 0&&y!=null&&g(t,["setup","generationConfig","speechConfig"],gf(y));const v=f(e,["thinkingConfig"]);t!==void 0&&v!=null&&g(t,["setup","generationConfig","thinkingConfig"],v);const E=f(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&g(t,["setup","generationConfig","enableAffectiveDialog"],E);const A=f(e,["systemInstruction"]);t!==void 0&&A!=null&&g(t,["setup","systemInstruction"],eI(Xt(A)));const C=f(e,["tools"]);if(t!==void 0&&C!=null){let q=us(C);Array.isArray(q)&&(q=q.map(V=>bI(cs(V)))),g(t,["setup","tools"],q)}const S=f(e,["sessionResumption"]);t!==void 0&&S!=null&&g(t,["setup","sessionResumption"],yI(S));const I=f(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&g(t,["setup","inputAudioTranscription"],I);const L=f(e,["outputAudioTranscription"]);t!==void 0&&L!=null&&g(t,["setup","outputAudioTranscription"],L);const P=f(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&g(t,["setup","realtimeInputConfig"],P);const G=f(e,["contextWindowCompression"]);t!==void 0&&G!=null&&g(t,["setup","contextWindowCompression"],G);const J=f(e,["proactivity"]);if(t!==void 0&&J!=null&&g(t,["setup","proactivity"],J),f(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lI(e,t){const n={},i=f(e,["generationConfig"]);t!==void 0&&i!=null&&g(t,["setup","generationConfig"],rI(i));const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&g(t,["setup","generationConfig","responseModalities"],a);const o=f(e,["temperature"]);t!==void 0&&o!=null&&g(t,["setup","generationConfig","temperature"],o);const l=f(e,["topP"]);t!==void 0&&l!=null&&g(t,["setup","generationConfig","topP"],l);const u=f(e,["topK"]);t!==void 0&&u!=null&&g(t,["setup","generationConfig","topK"],u);const m=f(e,["maxOutputTokens"]);t!==void 0&&m!=null&&g(t,["setup","generationConfig","maxOutputTokens"],m);const d=f(e,["mediaResolution"]);t!==void 0&&d!=null&&g(t,["setup","generationConfig","mediaResolution"],d);const p=f(e,["seed"]);t!==void 0&&p!=null&&g(t,["setup","generationConfig","seed"],p);const y=f(e,["speechConfig"]);t!==void 0&&y!=null&&g(t,["setup","generationConfig","speechConfig"],gf(y));const v=f(e,["thinkingConfig"]);t!==void 0&&v!=null&&g(t,["setup","generationConfig","thinkingConfig"],v);const E=f(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&g(t,["setup","generationConfig","enableAffectiveDialog"],E);const A=f(e,["systemInstruction"]);t!==void 0&&A!=null&&g(t,["setup","systemInstruction"],Xt(A));const C=f(e,["tools"]);if(t!==void 0&&C!=null){let V=us(C);Array.isArray(V)&&(V=V.map(ve=>vI(cs(ve)))),g(t,["setup","tools"],V)}const S=f(e,["sessionResumption"]);t!==void 0&&S!=null&&g(t,["setup","sessionResumption"],S);const I=f(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&g(t,["setup","inputAudioTranscription"],I);const L=f(e,["outputAudioTranscription"]);t!==void 0&&L!=null&&g(t,["setup","outputAudioTranscription"],L);const P=f(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&g(t,["setup","realtimeInputConfig"],P);const G=f(e,["contextWindowCompression"]);t!==void 0&&G!=null&&g(t,["setup","contextWindowCompression"],G);const J=f(e,["proactivity"]);t!==void 0&&J!=null&&g(t,["setup","proactivity"],J);const q=f(e,["explicitVadSignal"]);return t!==void 0&&q!=null&&g(t,["setup","explicitVadSignal"],q),n}function cI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["setup","model"],tt(e,i));const a=f(t,["config"]);return a!=null&&g(n,["config"],oI(a,n)),n}function uI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["setup","model"],tt(e,i));const a=f(t,["config"]);return a!=null&&g(n,["config"],lI(a,n)),n}function dI(e){const t={},n=f(e,["musicGenerationConfig"]);return n!=null&&g(t,["musicGenerationConfig"],n),t}function hI(e){const t={},n=f(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),g(t,["weightedPrompts"],i)}return t}function mI(e){const t={},n=f(e,["media"]);if(n!=null){let d=Nx(n);Array.isArray(d)&&(d=d.map(p=>Pc(p))),g(t,["mediaChunks"],d)}const i=f(e,["audio"]);i!=null&&g(t,["audio"],Pc(Mx(i)));const a=f(e,["audioStreamEnd"]);a!=null&&g(t,["audioStreamEnd"],a);const o=f(e,["video"]);o!=null&&g(t,["video"],Pc(Rx(o)));const l=f(e,["text"]);l!=null&&g(t,["text"],l);const u=f(e,["activityStart"]);u!=null&&g(t,["activityStart"],u);const m=f(e,["activityEnd"]);return m!=null&&g(t,["activityEnd"],m),t}function fI(e){const t={},n=f(e,["media"]);if(n!=null){let d=Nx(n);Array.isArray(d)&&(d=d.map(p=>p)),g(t,["mediaChunks"],d)}const i=f(e,["audio"]);i!=null&&g(t,["audio"],Mx(i));const a=f(e,["audioStreamEnd"]);a!=null&&g(t,["audioStreamEnd"],a);const o=f(e,["video"]);o!=null&&g(t,["video"],Rx(o));const l=f(e,["text"]);l!=null&&g(t,["text"],l);const u=f(e,["activityStart"]);u!=null&&g(t,["activityStart"],u);const m=f(e,["activityEnd"]);return m!=null&&g(t,["activityEnd"],m),t}function pI(e){const t={},n=f(e,["setupComplete"]);n!=null&&g(t,["setupComplete"],n);const i=f(e,["serverContent"]);i!=null&&g(t,["serverContent"],i);const a=f(e,["toolCall"]);a!=null&&g(t,["toolCall"],a);const o=f(e,["toolCallCancellation"]);o!=null&&g(t,["toolCallCancellation"],o);const l=f(e,["usageMetadata"]);l!=null&&g(t,["usageMetadata"],wI(l));const u=f(e,["goAway"]);u!=null&&g(t,["goAway"],u);const m=f(e,["sessionResumptionUpdate"]);m!=null&&g(t,["sessionResumptionUpdate"],m);const d=f(e,["voiceActivityDetectionSignal"]);d!=null&&g(t,["voiceActivityDetectionSignal"],d);const p=f(e,["voiceActivity"]);return p!=null&&g(t,["voiceActivity"],xI(p)),t}function gI(e){const t={},n=f(e,["mediaResolution"]);n!=null&&g(t,["mediaResolution"],n);const i=f(e,["codeExecutionResult"]);i!=null&&g(t,["codeExecutionResult"],i);const a=f(e,["executableCode"]);a!=null&&g(t,["executableCode"],a);const o=f(e,["fileData"]);o!=null&&g(t,["fileData"],tI(o));const l=f(e,["functionCall"]);l!=null&&g(t,["functionCall"],nI(l));const u=f(e,["functionResponse"]);u!=null&&g(t,["functionResponse"],u);const m=f(e,["inlineData"]);m!=null&&g(t,["inlineData"],Pc(m));const d=f(e,["text"]);d!=null&&g(t,["text"],d);const p=f(e,["thought"]);p!=null&&g(t,["thought"],p);const y=f(e,["thoughtSignature"]);y!=null&&g(t,["thoughtSignature"],y);const v=f(e,["videoMetadata"]);return v!=null&&g(t,["videoMetadata"],v),t}function yI(e){const t={},n=f(e,["handle"]);if(n!=null&&g(t,["handle"],n),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function bI(e){const t={};if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(e,["computerUse"]);n!=null&&g(t,["computerUse"],n);const i=f(e,["fileSearch"]);i!=null&&g(t,["fileSearch"],i);const a=f(e,["codeExecution"]);if(a!=null&&g(t,["codeExecution"],a),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(e,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>y)),g(t,["functionDeclarations"],p)}const l=f(e,["googleMaps"]);l!=null&&g(t,["googleMaps"],aI(l));const u=f(e,["googleSearch"]);u!=null&&g(t,["googleSearch"],sI(u));const m=f(e,["googleSearchRetrieval"]);m!=null&&g(t,["googleSearchRetrieval"],m);const d=f(e,["urlContext"]);return d!=null&&g(t,["urlContext"],d),t}function vI(e){const t={},n=f(e,["retrieval"]);n!=null&&g(t,["retrieval"],n);const i=f(e,["computerUse"]);if(i!=null&&g(t,["computerUse"],i),f(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(e,["codeExecution"]);a!=null&&g(t,["codeExecution"],a);const o=f(e,["enterpriseWebSearch"]);o!=null&&g(t,["enterpriseWebSearch"],o);const l=f(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>iI(v))),g(t,["functionDeclarations"],y)}const u=f(e,["googleMaps"]);u!=null&&g(t,["googleMaps"],u);const m=f(e,["googleSearch"]);m!=null&&g(t,["googleSearch"],m);const d=f(e,["googleSearchRetrieval"]);d!=null&&g(t,["googleSearchRetrieval"],d);const p=f(e,["urlContext"]);return p!=null&&g(t,["urlContext"],p),t}function wI(e){const t={},n=f(e,["promptTokenCount"]);n!=null&&g(t,["promptTokenCount"],n);const i=f(e,["cachedContentTokenCount"]);i!=null&&g(t,["cachedContentTokenCount"],i);const a=f(e,["candidatesTokenCount"]);a!=null&&g(t,["responseTokenCount"],a);const o=f(e,["toolUsePromptTokenCount"]);o!=null&&g(t,["toolUsePromptTokenCount"],o);const l=f(e,["thoughtsTokenCount"]);l!=null&&g(t,["thoughtsTokenCount"],l);const u=f(e,["totalTokenCount"]);u!=null&&g(t,["totalTokenCount"],u);const m=f(e,["promptTokensDetails"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>A)),g(t,["promptTokensDetails"],E)}const d=f(e,["cacheTokensDetails"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(A=>A)),g(t,["cacheTokensDetails"],E)}const p=f(e,["candidatesTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(A=>A)),g(t,["responseTokensDetails"],E)}const y=f(e,["toolUsePromptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(A=>A)),g(t,["toolUsePromptTokensDetails"],E)}const v=f(e,["trafficType"]);return v!=null&&g(t,["trafficType"],v),t}function xI(e){const t={},n=f(e,["type"]);return n!=null&&g(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TI(e){const t={},n=f(e,["data"]);if(n!=null&&g(t,["data"],n),f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function EI(e){const t={},n=f(e,["content"]);n!=null&&g(t,["content"],n);const i=f(e,["citationMetadata"]);i!=null&&g(t,["citationMetadata"],_I(i));const a=f(e,["tokenCount"]);a!=null&&g(t,["tokenCount"],a);const o=f(e,["finishReason"]);o!=null&&g(t,["finishReason"],o);const l=f(e,["avgLogprobs"]);l!=null&&g(t,["avgLogprobs"],l);const u=f(e,["groundingMetadata"]);u!=null&&g(t,["groundingMetadata"],u);const m=f(e,["index"]);m!=null&&g(t,["index"],m);const d=f(e,["logprobsResult"]);d!=null&&g(t,["logprobsResult"],d);const p=f(e,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(E=>E)),g(t,["safetyRatings"],v)}const y=f(e,["urlContextMetadata"]);return y!=null&&g(t,["urlContextMetadata"],y),t}function _I(e){const t={},n=f(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),g(t,["citations"],i)}return t}function AI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let o=jn(a);Array.isArray(o)&&(o=o.map(l=>l)),g(n,["contents"],o)}return n}function CI(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),g(t,["tokensInfo"],a)}return t}function SI(e){const t={},n=f(e,["values"]);n!=null&&g(t,["values"],n);const i=f(e,["statistics"]);return i!=null&&g(t,["statistics"],kI(i)),t}function kI(e){const t={},n=f(e,["truncated"]);n!=null&&g(t,["truncated"],n);const i=f(e,["token_count"]);return i!=null&&g(t,["tokenCount"],i),t}function Zc(e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>q2(o))),g(t,["parts"],a)}const i=f(e,["role"]);return i!=null&&g(t,["role"],i),t}function II(e){const t={},n=f(e,["controlType"]);n!=null&&g(t,["controlType"],n);const i=f(e,["enableControlImageComputation"]);return i!=null&&g(t,["computeControl"],i),t}function NI(e){const t={};if(f(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function RI(e,t){const n={},i=f(e,["systemInstruction"]);t!==void 0&&i!=null&&g(t,["systemInstruction"],Xt(i));const a=f(e,["tools"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>jx(u))),g(t,["tools"],l)}const o=f(e,["generationConfig"]);return t!==void 0&&o!=null&&g(t,["generationConfig"],T2(o)),n}function MI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let l=jn(a);Array.isArray(l)&&(l=l.map(u=>Zc(u))),g(n,["contents"],l)}const o=f(t,["config"]);return o!=null&&NI(o),n}function PI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let l=jn(a);Array.isArray(l)&&(l=l.map(u=>u)),g(n,["contents"],l)}const o=f(t,["config"]);return o!=null&&RI(o,n),n}function DI(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["totalTokens"]);i!=null&&g(t,["totalTokens"],i);const a=f(e,["cachedContentTokenCount"]);return a!=null&&g(t,["cachedContentTokenCount"],a),t}function LI(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["totalTokens"]);return i!=null&&g(t,["totalTokens"],i),t}function OI(e,t){const n={},i=f(t,["model"]);return i!=null&&g(n,["_url","name"],tt(e,i)),n}function qI(e,t){const n={},i=f(t,["model"]);return i!=null&&g(n,["_url","name"],tt(e,i)),n}function BI(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function HI(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}function UI(e,t){const n={},i=f(e,["outputGcsUri"]);t!==void 0&&i!=null&&g(t,["parameters","storageUri"],i);const a=f(e,["negativePrompt"]);t!==void 0&&a!=null&&g(t,["parameters","negativePrompt"],a);const o=f(e,["numberOfImages"]);t!==void 0&&o!=null&&g(t,["parameters","sampleCount"],o);const l=f(e,["aspectRatio"]);t!==void 0&&l!=null&&g(t,["parameters","aspectRatio"],l);const u=f(e,["guidanceScale"]);t!==void 0&&u!=null&&g(t,["parameters","guidanceScale"],u);const m=f(e,["seed"]);t!==void 0&&m!=null&&g(t,["parameters","seed"],m);const d=f(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&g(t,["parameters","safetySetting"],d);const p=f(e,["personGeneration"]);t!==void 0&&p!=null&&g(t,["parameters","personGeneration"],p);const y=f(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&g(t,["parameters","includeSafetyAttributes"],y);const v=f(e,["includeRaiReason"]);t!==void 0&&v!=null&&g(t,["parameters","includeRaiReason"],v);const E=f(e,["language"]);t!==void 0&&E!=null&&g(t,["parameters","language"],E);const A=f(e,["outputMimeType"]);t!==void 0&&A!=null&&g(t,["parameters","outputOptions","mimeType"],A);const C=f(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&g(t,["parameters","outputOptions","compressionQuality"],C);const S=f(e,["addWatermark"]);t!==void 0&&S!=null&&g(t,["parameters","addWatermark"],S);const I=f(e,["labels"]);t!==void 0&&I!=null&&g(t,["labels"],I);const L=f(e,["editMode"]);t!==void 0&&L!=null&&g(t,["parameters","editMode"],L);const P=f(e,["baseSteps"]);return t!==void 0&&P!=null&&g(t,["parameters","editConfig","baseSteps"],P),n}function FI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const o=f(t,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(m=>z2(m))),g(n,["instances[0]","referenceImages"],u)}const l=f(t,["config"]);return l!=null&&UI(l,n),n}function GI(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>eu(o))),g(t,["generatedImages"],a)}return t}function zI(e,t){const n={},i=f(e,["taskType"]);t!==void 0&&i!=null&&g(t,["requests[]","taskType"],i);const a=f(e,["title"]);t!==void 0&&a!=null&&g(t,["requests[]","title"],a);const o=f(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&g(t,["requests[]","outputDimensionality"],o),f(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function VI(e,t){const n={},i=f(e,["taskType"]);t!==void 0&&i!=null&&g(t,["instances[]","task_type"],i);const a=f(e,["title"]);t!==void 0&&a!=null&&g(t,["instances[]","title"],a);const o=f(e,["outputDimensionality"]);t!==void 0&&o!=null&&g(t,["parameters","outputDimensionality"],o);const l=f(e,["mimeType"]);t!==void 0&&l!=null&&g(t,["instances[]","mimeType"],l);const u=f(e,["autoTruncate"]);return t!==void 0&&u!=null&&g(t,["parameters","autoTruncate"],u),n}function WI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let u=mf(e,a);Array.isArray(u)&&(u=u.map(m=>m)),g(n,["requests[]","content"],u)}const o=f(t,["config"]);o!=null&&zI(o,n);const l=f(t,["model"]);return l!==void 0&&g(n,["requests[]","model"],tt(e,l)),n}function jI(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let l=mf(e,a);Array.isArray(l)&&(l=l.map(u=>u)),g(n,["instances[]","content"],l)}const o=f(t,["config"]);return o!=null&&VI(o,n),n}function YI(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["embeddings"],o)}const a=f(e,["metadata"]);return a!=null&&g(t,["metadata"],a),t}function $I(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>SI(l))),g(t,["embeddings"],o)}const a=f(e,["metadata"]);return a!=null&&g(t,["metadata"],a),t}function KI(e){const t={},n=f(e,["endpoint"]);n!=null&&g(t,["name"],n);const i=f(e,["deployedModelId"]);return i!=null&&g(t,["deployedModelId"],i),t}function QI(e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&g(t,["fileUri"],n);const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function JI(e){const t={},n=f(e,["id"]);n!=null&&g(t,["id"],n);const i=f(e,["args"]);i!=null&&g(t,["args"],i);const a=f(e,["name"]);if(a!=null&&g(t,["name"],a),f(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function XI(e){const t={},n=f(e,["allowedFunctionNames"]);n!=null&&g(t,["allowedFunctionNames"],n);const i=f(e,["mode"]);if(i!=null&&g(t,["mode"],i),f(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function ZI(e){const t={},n=f(e,["description"]);n!=null&&g(t,["description"],n);const i=f(e,["name"]);i!=null&&g(t,["name"],i);const a=f(e,["parameters"]);a!=null&&g(t,["parameters"],a);const o=f(e,["parametersJsonSchema"]);o!=null&&g(t,["parametersJsonSchema"],o);const l=f(e,["response"]);l!=null&&g(t,["response"],l);const u=f(e,["responseJsonSchema"]);if(u!=null&&g(t,["responseJsonSchema"],u),f(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function e2(e,t,n){const i={},a=f(t,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],Zc(Xt(a)));const o=f(t,["temperature"]);o!=null&&g(i,["temperature"],o);const l=f(t,["topP"]);l!=null&&g(i,["topP"],l);const u=f(t,["topK"]);u!=null&&g(i,["topK"],u);const m=f(t,["candidateCount"]);m!=null&&g(i,["candidateCount"],m);const d=f(t,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const p=f(t,["stopSequences"]);p!=null&&g(i,["stopSequences"],p);const y=f(t,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const v=f(t,["logprobs"]);v!=null&&g(i,["logprobs"],v);const E=f(t,["presencePenalty"]);E!=null&&g(i,["presencePenalty"],E);const A=f(t,["frequencyPenalty"]);A!=null&&g(i,["frequencyPenalty"],A);const C=f(t,["seed"]);C!=null&&g(i,["seed"],C);const S=f(t,["responseMimeType"]);S!=null&&g(i,["responseMimeType"],S);const I=f(t,["responseSchema"]);I!=null&&g(i,["responseSchema"],ff(I));const L=f(t,["responseJsonSchema"]);if(L!=null&&g(i,["responseJsonSchema"],L),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=f(t,["safetySettings"]);if(n!==void 0&&P!=null){let ke=P;Array.isArray(ke)&&(ke=ke.map(xe=>V2(xe))),g(n,["safetySettings"],ke)}const G=f(t,["tools"]);if(n!==void 0&&G!=null){let ke=us(G);Array.isArray(ke)&&(ke=ke.map(xe=>J2(cs(xe)))),g(n,["tools"],ke)}const J=f(t,["toolConfig"]);if(n!==void 0&&J!=null&&g(n,["toolConfig"],Q2(J)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=f(t,["cachedContent"]);n!==void 0&&q!=null&&g(n,["cachedContent"],Bi(e,q));const V=f(t,["responseModalities"]);V!=null&&g(i,["responseModalities"],V);const ve=f(t,["mediaResolution"]);ve!=null&&g(i,["mediaResolution"],ve);const ne=f(t,["speechConfig"]);if(ne!=null&&g(i,["speechConfig"],pf(ne)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=f(t,["thinkingConfig"]);F!=null&&g(i,["thinkingConfig"],F);const de=f(t,["imageConfig"]);de!=null&&g(i,["imageConfig"],S2(de));const me=f(t,["enableEnhancedCivicAnswers"]);if(me!=null&&g(i,["enableEnhancedCivicAnswers"],me),f(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function t2(e,t,n){const i={},a=f(t,["systemInstruction"]);n!==void 0&&a!=null&&g(n,["systemInstruction"],Xt(a));const o=f(t,["temperature"]);o!=null&&g(i,["temperature"],o);const l=f(t,["topP"]);l!=null&&g(i,["topP"],l);const u=f(t,["topK"]);u!=null&&g(i,["topK"],u);const m=f(t,["candidateCount"]);m!=null&&g(i,["candidateCount"],m);const d=f(t,["maxOutputTokens"]);d!=null&&g(i,["maxOutputTokens"],d);const p=f(t,["stopSequences"]);p!=null&&g(i,["stopSequences"],p);const y=f(t,["responseLogprobs"]);y!=null&&g(i,["responseLogprobs"],y);const v=f(t,["logprobs"]);v!=null&&g(i,["logprobs"],v);const E=f(t,["presencePenalty"]);E!=null&&g(i,["presencePenalty"],E);const A=f(t,["frequencyPenalty"]);A!=null&&g(i,["frequencyPenalty"],A);const C=f(t,["seed"]);C!=null&&g(i,["seed"],C);const S=f(t,["responseMimeType"]);S!=null&&g(i,["responseMimeType"],S);const I=f(t,["responseSchema"]);I!=null&&g(i,["responseSchema"],ff(I));const L=f(t,["responseJsonSchema"]);L!=null&&g(i,["responseJsonSchema"],L);const P=f(t,["routingConfig"]);P!=null&&g(i,["routingConfig"],P);const G=f(t,["modelSelectionConfig"]);G!=null&&g(i,["modelConfig"],G);const J=f(t,["safetySettings"]);if(n!==void 0&&J!=null){let ce=J;Array.isArray(ce)&&(ce=ce.map(Ee=>Ee)),g(n,["safetySettings"],ce)}const q=f(t,["tools"]);if(n!==void 0&&q!=null){let ce=us(q);Array.isArray(ce)&&(ce=ce.map(Ee=>jx(cs(Ee)))),g(n,["tools"],ce)}const V=f(t,["toolConfig"]);n!==void 0&&V!=null&&g(n,["toolConfig"],V);const ve=f(t,["labels"]);n!==void 0&&ve!=null&&g(n,["labels"],ve);const ne=f(t,["cachedContent"]);n!==void 0&&ne!=null&&g(n,["cachedContent"],Bi(e,ne));const F=f(t,["responseModalities"]);F!=null&&g(i,["responseModalities"],F);const de=f(t,["mediaResolution"]);de!=null&&g(i,["mediaResolution"],de);const me=f(t,["speechConfig"]);me!=null&&g(i,["speechConfig"],pf(me));const ke=f(t,["audioTimestamp"]);ke!=null&&g(i,["audioTimestamp"],ke);const xe=f(t,["thinkingConfig"]);xe!=null&&g(i,["thinkingConfig"],xe);const be=f(t,["imageConfig"]);if(be!=null&&g(i,["imageConfig"],k2(be)),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const j=f(t,["modelArmorConfig"]);return n!==void 0&&j!=null&&g(n,["modelArmorConfig"],j),i}function fv(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let l=jn(a);Array.isArray(l)&&(l=l.map(u=>Zc(u))),g(n,["contents"],l)}const o=f(t,["config"]);return o!=null&&g(n,["generationConfig"],e2(e,o,n)),n}function pv(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["contents"]);if(a!=null){let l=jn(a);Array.isArray(l)&&(l=l.map(u=>u)),g(n,["contents"],l)}const o=f(t,["config"]);return o!=null&&g(n,["generationConfig"],t2(e,o,n)),n}function gv(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(d=>EI(d))),g(t,["candidates"],m)}const a=f(e,["modelVersion"]);a!=null&&g(t,["modelVersion"],a);const o=f(e,["promptFeedback"]);o!=null&&g(t,["promptFeedback"],o);const l=f(e,["responseId"]);l!=null&&g(t,["responseId"],l);const u=f(e,["usageMetadata"]);return u!=null&&g(t,["usageMetadata"],u),t}function yv(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),g(t,["candidates"],d)}const a=f(e,["createTime"]);a!=null&&g(t,["createTime"],a);const o=f(e,["modelVersion"]);o!=null&&g(t,["modelVersion"],o);const l=f(e,["promptFeedback"]);l!=null&&g(t,["promptFeedback"],l);const u=f(e,["responseId"]);u!=null&&g(t,["responseId"],u);const m=f(e,["usageMetadata"]);return m!=null&&g(t,["usageMetadata"],m),t}function n2(e,t){const n={};if(f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(e,["numberOfImages"]);t!==void 0&&i!=null&&g(t,["parameters","sampleCount"],i);const a=f(e,["aspectRatio"]);t!==void 0&&a!=null&&g(t,["parameters","aspectRatio"],a);const o=f(e,["guidanceScale"]);if(t!==void 0&&o!=null&&g(t,["parameters","guidanceScale"],o),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&g(t,["parameters","safetySetting"],l);const u=f(e,["personGeneration"]);t!==void 0&&u!=null&&g(t,["parameters","personGeneration"],u);const m=f(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&g(t,["parameters","includeSafetyAttributes"],m);const d=f(e,["includeRaiReason"]);t!==void 0&&d!=null&&g(t,["parameters","includeRaiReason"],d);const p=f(e,["language"]);t!==void 0&&p!=null&&g(t,["parameters","language"],p);const y=f(e,["outputMimeType"]);t!==void 0&&y!=null&&g(t,["parameters","outputOptions","mimeType"],y);const v=f(e,["outputCompressionQuality"]);if(t!==void 0&&v!=null&&g(t,["parameters","outputOptions","compressionQuality"],v),f(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(e,["imageSize"]);if(t!==void 0&&E!=null&&g(t,["parameters","sampleImageSize"],E),f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function i2(e,t){const n={},i=f(e,["outputGcsUri"]);t!==void 0&&i!=null&&g(t,["parameters","storageUri"],i);const a=f(e,["negativePrompt"]);t!==void 0&&a!=null&&g(t,["parameters","negativePrompt"],a);const o=f(e,["numberOfImages"]);t!==void 0&&o!=null&&g(t,["parameters","sampleCount"],o);const l=f(e,["aspectRatio"]);t!==void 0&&l!=null&&g(t,["parameters","aspectRatio"],l);const u=f(e,["guidanceScale"]);t!==void 0&&u!=null&&g(t,["parameters","guidanceScale"],u);const m=f(e,["seed"]);t!==void 0&&m!=null&&g(t,["parameters","seed"],m);const d=f(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&g(t,["parameters","safetySetting"],d);const p=f(e,["personGeneration"]);t!==void 0&&p!=null&&g(t,["parameters","personGeneration"],p);const y=f(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&g(t,["parameters","includeSafetyAttributes"],y);const v=f(e,["includeRaiReason"]);t!==void 0&&v!=null&&g(t,["parameters","includeRaiReason"],v);const E=f(e,["language"]);t!==void 0&&E!=null&&g(t,["parameters","language"],E);const A=f(e,["outputMimeType"]);t!==void 0&&A!=null&&g(t,["parameters","outputOptions","mimeType"],A);const C=f(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&g(t,["parameters","outputOptions","compressionQuality"],C);const S=f(e,["addWatermark"]);t!==void 0&&S!=null&&g(t,["parameters","addWatermark"],S);const I=f(e,["labels"]);t!==void 0&&I!=null&&g(t,["labels"],I);const L=f(e,["imageSize"]);t!==void 0&&L!=null&&g(t,["parameters","sampleImageSize"],L);const P=f(e,["enhancePrompt"]);return t!==void 0&&P!=null&&g(t,["parameters","enhancePrompt"],P),n}function r2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const o=f(t,["config"]);return o!=null&&n2(o,n),n}function a2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const o=f(t,["config"]);return o!=null&&i2(o,n),n}function s2(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>b2(l))),g(t,["generatedImages"],o)}const a=f(e,["positivePromptSafetyAttributes"]);return a!=null&&g(t,["positivePromptSafetyAttributes"],Vx(a)),t}function o2(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>eu(l))),g(t,["generatedImages"],o)}const a=f(e,["positivePromptSafetyAttributes"]);return a!=null&&g(t,["positivePromptSafetyAttributes"],Wx(a)),t}function l2(e,t){const n={},i=f(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&g(t,["parameters","sampleCount"],i),f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(e,["durationSeconds"]);if(t!==void 0&&a!=null&&g(t,["parameters","durationSeconds"],a),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(e,["aspectRatio"]);t!==void 0&&o!=null&&g(t,["parameters","aspectRatio"],o);const l=f(e,["resolution"]);t!==void 0&&l!=null&&g(t,["parameters","resolution"],l);const u=f(e,["personGeneration"]);if(t!==void 0&&u!=null&&g(t,["parameters","personGeneration"],u),f(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(e,["negativePrompt"]);t!==void 0&&m!=null&&g(t,["parameters","negativePrompt"],m);const d=f(e,["enhancePrompt"]);if(t!==void 0&&d!=null&&g(t,["parameters","enhancePrompt"],d),f(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=f(e,["lastFrame"]);t!==void 0&&p!=null&&g(t,["instances[0]","lastFrame"],tu(p));const y=f(e,["referenceImages"]);if(t!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>uN(E))),g(t,["instances[0]","referenceImages"],v)}if(f(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function c2(e,t){const n={},i=f(e,["numberOfVideos"]);t!==void 0&&i!=null&&g(t,["parameters","sampleCount"],i);const a=f(e,["outputGcsUri"]);t!==void 0&&a!=null&&g(t,["parameters","storageUri"],a);const o=f(e,["fps"]);t!==void 0&&o!=null&&g(t,["parameters","fps"],o);const l=f(e,["durationSeconds"]);t!==void 0&&l!=null&&g(t,["parameters","durationSeconds"],l);const u=f(e,["seed"]);t!==void 0&&u!=null&&g(t,["parameters","seed"],u);const m=f(e,["aspectRatio"]);t!==void 0&&m!=null&&g(t,["parameters","aspectRatio"],m);const d=f(e,["resolution"]);t!==void 0&&d!=null&&g(t,["parameters","resolution"],d);const p=f(e,["personGeneration"]);t!==void 0&&p!=null&&g(t,["parameters","personGeneration"],p);const y=f(e,["pubsubTopic"]);t!==void 0&&y!=null&&g(t,["parameters","pubsubTopic"],y);const v=f(e,["negativePrompt"]);t!==void 0&&v!=null&&g(t,["parameters","negativePrompt"],v);const E=f(e,["enhancePrompt"]);t!==void 0&&E!=null&&g(t,["parameters","enhancePrompt"],E);const A=f(e,["generateAudio"]);t!==void 0&&A!=null&&g(t,["parameters","generateAudio"],A);const C=f(e,["lastFrame"]);t!==void 0&&C!=null&&g(t,["instances[0]","lastFrame"],ri(C));const S=f(e,["referenceImages"]);if(t!==void 0&&S!=null){let P=S;Array.isArray(P)&&(P=P.map(G=>dN(G))),g(t,["instances[0]","referenceImages"],P)}const I=f(e,["mask"]);t!==void 0&&I!=null&&g(t,["instances[0]","mask"],cN(I));const L=f(e,["compressionQuality"]);return t!==void 0&&L!=null&&g(t,["parameters","compressionQuality"],L),n}function u2(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response","generateVideoResponse"]);return l!=null&&g(t,["response"],f2(l)),t}function d2(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response"]);return l!=null&&g(t,["response"],p2(l)),t}function h2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const o=f(t,["image"]);o!=null&&g(n,["instances[0]","image"],tu(o));const l=f(t,["video"]);l!=null&&g(n,["instances[0]","video"],Yx(l));const u=f(t,["source"]);u!=null&&g2(u,n);const m=f(t,["config"]);return m!=null&&l2(m,n),n}function m2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["prompt"]);a!=null&&g(n,["instances[0]","prompt"],a);const o=f(t,["image"]);o!=null&&g(n,["instances[0]","image"],ri(o));const l=f(t,["video"]);l!=null&&g(n,["instances[0]","video"],$x(l));const u=f(t,["source"]);u!=null&&y2(u,n);const m=f(t,["config"]);return m!=null&&c2(m,n),n}function f2(e){const t={},n=f(e,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>w2(l))),g(t,["generatedVideos"],o)}const i=f(e,["raiMediaFilteredCount"]);i!=null&&g(t,["raiMediaFilteredCount"],i);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&g(t,["raiMediaFilteredReasons"],a),t}function p2(e){const t={},n=f(e,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>x2(l))),g(t,["generatedVideos"],o)}const i=f(e,["raiMediaFilteredCount"]);i!=null&&g(t,["raiMediaFilteredCount"],i);const a=f(e,["raiMediaFilteredReasons"]);return a!=null&&g(t,["raiMediaFilteredReasons"],a),t}function g2(e,t){const n={},i=f(e,["prompt"]);t!==void 0&&i!=null&&g(t,["instances[0]","prompt"],i);const a=f(e,["image"]);t!==void 0&&a!=null&&g(t,["instances[0]","image"],tu(a));const o=f(e,["video"]);return t!==void 0&&o!=null&&g(t,["instances[0]","video"],Yx(o)),n}function y2(e,t){const n={},i=f(e,["prompt"]);t!==void 0&&i!=null&&g(t,["instances[0]","prompt"],i);const a=f(e,["image"]);t!==void 0&&a!=null&&g(t,["instances[0]","image"],ri(a));const o=f(e,["video"]);return t!==void 0&&o!=null&&g(t,["instances[0]","video"],$x(o)),n}function b2(e){const t={},n=f(e,["_self"]);n!=null&&g(t,["image"],I2(n));const i=f(e,["raiFilteredReason"]);i!=null&&g(t,["raiFilteredReason"],i);const a=f(e,["_self"]);return a!=null&&g(t,["safetyAttributes"],Vx(a)),t}function eu(e){const t={},n=f(e,["_self"]);n!=null&&g(t,["image"],zx(n));const i=f(e,["raiFilteredReason"]);i!=null&&g(t,["raiFilteredReason"],i);const a=f(e,["_self"]);a!=null&&g(t,["safetyAttributes"],Wx(a));const o=f(e,["prompt"]);return o!=null&&g(t,["enhancedPrompt"],o),t}function v2(e){const t={},n=f(e,["_self"]);n!=null&&g(t,["mask"],zx(n));const i=f(e,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),g(t,["labels"],a)}return t}function w2(e){const t={},n=f(e,["video"]);return n!=null&&g(t,["video"],oN(n)),t}function x2(e){const t={},n=f(e,["_self"]);return n!=null&&g(t,["video"],lN(n)),t}function T2(e){const t={},n=f(e,["modelSelectionConfig"]);n!=null&&g(t,["modelConfig"],n);const i=f(e,["responseJsonSchema"]);i!=null&&g(t,["responseJsonSchema"],i);const a=f(e,["audioTimestamp"]);a!=null&&g(t,["audioTimestamp"],a);const o=f(e,["candidateCount"]);o!=null&&g(t,["candidateCount"],o);const l=f(e,["enableAffectiveDialog"]);l!=null&&g(t,["enableAffectiveDialog"],l);const u=f(e,["frequencyPenalty"]);u!=null&&g(t,["frequencyPenalty"],u);const m=f(e,["logprobs"]);m!=null&&g(t,["logprobs"],m);const d=f(e,["maxOutputTokens"]);d!=null&&g(t,["maxOutputTokens"],d);const p=f(e,["mediaResolution"]);p!=null&&g(t,["mediaResolution"],p);const y=f(e,["presencePenalty"]);y!=null&&g(t,["presencePenalty"],y);const v=f(e,["responseLogprobs"]);v!=null&&g(t,["responseLogprobs"],v);const E=f(e,["responseMimeType"]);E!=null&&g(t,["responseMimeType"],E);const A=f(e,["responseModalities"]);A!=null&&g(t,["responseModalities"],A);const C=f(e,["responseSchema"]);C!=null&&g(t,["responseSchema"],C);const S=f(e,["routingConfig"]);S!=null&&g(t,["routingConfig"],S);const I=f(e,["seed"]);I!=null&&g(t,["seed"],I);const L=f(e,["speechConfig"]);L!=null&&g(t,["speechConfig"],L);const P=f(e,["stopSequences"]);P!=null&&g(t,["stopSequences"],P);const G=f(e,["temperature"]);G!=null&&g(t,["temperature"],G);const J=f(e,["thinkingConfig"]);J!=null&&g(t,["thinkingConfig"],J);const q=f(e,["topK"]);q!=null&&g(t,["topK"],q);const V=f(e,["topP"]);if(V!=null&&g(t,["topP"],V),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function E2(e,t){const n={},i=f(t,["model"]);return i!=null&&g(n,["_url","name"],tt(e,i)),n}function _2(e,t){const n={},i=f(t,["model"]);return i!=null&&g(n,["_url","name"],tt(e,i)),n}function A2(e){const t={};if(f(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(e,["enableWidget"]);return n!=null&&g(t,["enableWidget"],n),t}function C2(e){const t={};if(f(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(e,["timeRangeFilter"]);return n!=null&&g(t,["timeRangeFilter"],n),t}function S2(e){const t={},n=f(e,["aspectRatio"]);n!=null&&g(t,["aspectRatio"],n);const i=f(e,["imageSize"]);if(i!=null&&g(t,["imageSize"],i),f(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function k2(e){const t={},n=f(e,["aspectRatio"]);n!=null&&g(t,["aspectRatio"],n);const i=f(e,["imageSize"]);i!=null&&g(t,["imageSize"],i);const a=f(e,["personGeneration"]);a!=null&&g(t,["personGeneration"],a);const o=f(e,["outputMimeType"]);o!=null&&g(t,["imageOutputOptions","mimeType"],o);const l=f(e,["outputCompressionQuality"]);return l!=null&&g(t,["imageOutputOptions","compressionQuality"],l),t}function I2(e){const t={},n=f(e,["bytesBase64Encoded"]);n!=null&&g(t,["imageBytes"],br(n));const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function zx(e){const t={},n=f(e,["gcsUri"]);n!=null&&g(t,["gcsUri"],n);const i=f(e,["bytesBase64Encoded"]);i!=null&&g(t,["imageBytes"],br(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["mimeType"],a),t}function tu(e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(e,["imageBytes"]);n!=null&&g(t,["bytesBase64Encoded"],br(n));const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function ri(e){const t={},n=f(e,["gcsUri"]);n!=null&&g(t,["gcsUri"],n);const i=f(e,["imageBytes"]);i!=null&&g(t,["bytesBase64Encoded"],br(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["mimeType"],a),t}function N2(e,t,n){const i={},a=f(t,["pageSize"]);n!==void 0&&a!=null&&g(n,["_query","pageSize"],a);const o=f(t,["pageToken"]);n!==void 0&&o!=null&&g(n,["_query","pageToken"],o);const l=f(t,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const u=f(t,["queryBase"]);return n!==void 0&&u!=null&&g(n,["_url","models_url"],Ox(e,u)),i}function R2(e,t,n){const i={},a=f(t,["pageSize"]);n!==void 0&&a!=null&&g(n,["_query","pageSize"],a);const o=f(t,["pageToken"]);n!==void 0&&o!=null&&g(n,["_query","pageToken"],o);const l=f(t,["filter"]);n!==void 0&&l!=null&&g(n,["_query","filter"],l);const u=f(t,["queryBase"]);return n!==void 0&&u!=null&&g(n,["_url","models_url"],Ox(e,u)),i}function M2(e,t){const n={},i=f(t,["config"]);return i!=null&&N2(e,i,n),n}function P2(e,t){const n={},i=f(t,["config"]);return i!=null&&R2(e,i,n),n}function D2(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["_self"]);if(a!=null){let o=qx(a);Array.isArray(o)&&(o=o.map(l=>Cm(l))),g(t,["models"],o)}return t}function L2(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["_self"]);if(a!=null){let o=qx(a);Array.isArray(o)&&(o=o.map(l=>Sm(l))),g(t,["models"],o)}return t}function O2(e){const t={},n=f(e,["maskMode"]);n!=null&&g(t,["maskMode"],n);const i=f(e,["segmentationClasses"]);i!=null&&g(t,["maskClasses"],i);const a=f(e,["maskDilation"]);return a!=null&&g(t,["dilation"],a),t}function Cm(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["displayName"]);i!=null&&g(t,["displayName"],i);const a=f(e,["description"]);a!=null&&g(t,["description"],a);const o=f(e,["version"]);o!=null&&g(t,["version"],o);const l=f(e,["_self"]);l!=null&&g(t,["tunedModelInfo"],X2(l));const u=f(e,["inputTokenLimit"]);u!=null&&g(t,["inputTokenLimit"],u);const m=f(e,["outputTokenLimit"]);m!=null&&g(t,["outputTokenLimit"],m);const d=f(e,["supportedGenerationMethods"]);d!=null&&g(t,["supportedActions"],d);const p=f(e,["temperature"]);p!=null&&g(t,["temperature"],p);const y=f(e,["maxTemperature"]);y!=null&&g(t,["maxTemperature"],y);const v=f(e,["topP"]);v!=null&&g(t,["topP"],v);const E=f(e,["topK"]);E!=null&&g(t,["topK"],E);const A=f(e,["thinking"]);return A!=null&&g(t,["thinking"],A),t}function Sm(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["displayName"]);i!=null&&g(t,["displayName"],i);const a=f(e,["description"]);a!=null&&g(t,["description"],a);const o=f(e,["versionId"]);o!=null&&g(t,["version"],o);const l=f(e,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>KI(v))),g(t,["endpoints"],y)}const u=f(e,["labels"]);u!=null&&g(t,["labels"],u);const m=f(e,["_self"]);m!=null&&g(t,["tunedModelInfo"],Z2(m));const d=f(e,["defaultCheckpointId"]);d!=null&&g(t,["defaultCheckpointId"],d);const p=f(e,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),g(t,["checkpoints"],y)}return t}function q2(e){const t={},n=f(e,["mediaResolution"]);n!=null&&g(t,["mediaResolution"],n);const i=f(e,["codeExecutionResult"]);i!=null&&g(t,["codeExecutionResult"],i);const a=f(e,["executableCode"]);a!=null&&g(t,["executableCode"],a);const o=f(e,["fileData"]);o!=null&&g(t,["fileData"],QI(o));const l=f(e,["functionCall"]);l!=null&&g(t,["functionCall"],JI(l));const u=f(e,["functionResponse"]);u!=null&&g(t,["functionResponse"],u);const m=f(e,["inlineData"]);m!=null&&g(t,["inlineData"],TI(m));const d=f(e,["text"]);d!=null&&g(t,["text"],d);const p=f(e,["thought"]);p!=null&&g(t,["thought"],p);const y=f(e,["thoughtSignature"]);y!=null&&g(t,["thoughtSignature"],y);const v=f(e,["videoMetadata"]);return v!=null&&g(t,["videoMetadata"],v),t}function B2(e){const t={},n=f(e,["productImage"]);return n!=null&&g(t,["image"],ri(n)),t}function H2(e,t){const n={},i=f(e,["numberOfImages"]);t!==void 0&&i!=null&&g(t,["parameters","sampleCount"],i);const a=f(e,["baseSteps"]);t!==void 0&&a!=null&&g(t,["parameters","baseSteps"],a);const o=f(e,["outputGcsUri"]);t!==void 0&&o!=null&&g(t,["parameters","storageUri"],o);const l=f(e,["seed"]);t!==void 0&&l!=null&&g(t,["parameters","seed"],l);const u=f(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&g(t,["parameters","safetySetting"],u);const m=f(e,["personGeneration"]);t!==void 0&&m!=null&&g(t,["parameters","personGeneration"],m);const d=f(e,["addWatermark"]);t!==void 0&&d!=null&&g(t,["parameters","addWatermark"],d);const p=f(e,["outputMimeType"]);t!==void 0&&p!=null&&g(t,["parameters","outputOptions","mimeType"],p);const y=f(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&g(t,["parameters","outputOptions","compressionQuality"],y);const v=f(e,["enhancePrompt"]);t!==void 0&&v!=null&&g(t,["parameters","enhancePrompt"],v);const E=f(e,["labels"]);return t!==void 0&&E!=null&&g(t,["labels"],E),n}function U2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["source"]);a!=null&&G2(a,n);const o=f(t,["config"]);return o!=null&&H2(o,n),n}function F2(e){const t={},n=f(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>eu(a))),g(t,["generatedImages"],i)}return t}function G2(e,t){const n={},i=f(e,["prompt"]);t!==void 0&&i!=null&&g(t,["instances[0]","prompt"],i);const a=f(e,["personImage"]);t!==void 0&&a!=null&&g(t,["instances[0]","personImage","image"],ri(a));const o=f(e,["productImages"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>B2(u))),g(t,["instances[0]","productImages"],l)}return n}function z2(e){const t={},n=f(e,["referenceImage"]);n!=null&&g(t,["referenceImage"],ri(n));const i=f(e,["referenceId"]);i!=null&&g(t,["referenceId"],i);const a=f(e,["referenceType"]);a!=null&&g(t,["referenceType"],a);const o=f(e,["maskImageConfig"]);o!=null&&g(t,["maskImageConfig"],O2(o));const l=f(e,["controlImageConfig"]);l!=null&&g(t,["controlImageConfig"],II(l));const u=f(e,["styleImageConfig"]);u!=null&&g(t,["styleImageConfig"],u);const m=f(e,["subjectImageConfig"]);return m!=null&&g(t,["subjectImageConfig"],m),t}function Vx(e){const t={},n=f(e,["safetyAttributes","categories"]);n!=null&&g(t,["categories"],n);const i=f(e,["safetyAttributes","scores"]);i!=null&&g(t,["scores"],i);const a=f(e,["contentType"]);return a!=null&&g(t,["contentType"],a),t}function Wx(e){const t={},n=f(e,["safetyAttributes","categories"]);n!=null&&g(t,["categories"],n);const i=f(e,["safetyAttributes","scores"]);i!=null&&g(t,["scores"],i);const a=f(e,["contentType"]);return a!=null&&g(t,["contentType"],a),t}function V2(e){const t={},n=f(e,["category"]);if(n!=null&&g(t,["category"],n),f(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(e,["threshold"]);return i!=null&&g(t,["threshold"],i),t}function W2(e){const t={},n=f(e,["image"]);return n!=null&&g(t,["image"],ri(n)),t}function j2(e,t){const n={},i=f(e,["mode"]);t!==void 0&&i!=null&&g(t,["parameters","mode"],i);const a=f(e,["maxPredictions"]);t!==void 0&&a!=null&&g(t,["parameters","maxPredictions"],a);const o=f(e,["confidenceThreshold"]);t!==void 0&&o!=null&&g(t,["parameters","confidenceThreshold"],o);const l=f(e,["maskDilation"]);t!==void 0&&l!=null&&g(t,["parameters","maskDilation"],l);const u=f(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&g(t,["parameters","binaryColorThreshold"],u);const m=f(e,["labels"]);return t!==void 0&&m!=null&&g(t,["labels"],m),n}function Y2(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["source"]);a!=null&&K2(a,n);const o=f(t,["config"]);return o!=null&&j2(o,n),n}function $2(e){const t={},n=f(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>v2(a))),g(t,["generatedMasks"],i)}return t}function K2(e,t){const n={},i=f(e,["prompt"]);t!==void 0&&i!=null&&g(t,["instances[0]","prompt"],i);const a=f(e,["image"]);t!==void 0&&a!=null&&g(t,["instances[0]","image"],ri(a));const o=f(e,["scribbleImage"]);return t!==void 0&&o!=null&&g(t,["instances[0]","scribble"],W2(o)),n}function Q2(e){const t={},n=f(e,["retrievalConfig"]);n!=null&&g(t,["retrievalConfig"],n);const i=f(e,["functionCallingConfig"]);return i!=null&&g(t,["functionCallingConfig"],XI(i)),t}function J2(e){const t={};if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(e,["computerUse"]);n!=null&&g(t,["computerUse"],n);const i=f(e,["fileSearch"]);i!=null&&g(t,["fileSearch"],i);const a=f(e,["codeExecution"]);if(a!=null&&g(t,["codeExecution"],a),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(e,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>y)),g(t,["functionDeclarations"],p)}const l=f(e,["googleMaps"]);l!=null&&g(t,["googleMaps"],A2(l));const u=f(e,["googleSearch"]);u!=null&&g(t,["googleSearch"],C2(u));const m=f(e,["googleSearchRetrieval"]);m!=null&&g(t,["googleSearchRetrieval"],m);const d=f(e,["urlContext"]);return d!=null&&g(t,["urlContext"],d),t}function jx(e){const t={},n=f(e,["retrieval"]);n!=null&&g(t,["retrieval"],n);const i=f(e,["computerUse"]);if(i!=null&&g(t,["computerUse"],i),f(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(e,["codeExecution"]);a!=null&&g(t,["codeExecution"],a);const o=f(e,["enterpriseWebSearch"]);o!=null&&g(t,["enterpriseWebSearch"],o);const l=f(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>ZI(v))),g(t,["functionDeclarations"],y)}const u=f(e,["googleMaps"]);u!=null&&g(t,["googleMaps"],u);const m=f(e,["googleSearch"]);m!=null&&g(t,["googleSearch"],m);const d=f(e,["googleSearchRetrieval"]);d!=null&&g(t,["googleSearchRetrieval"],d);const p=f(e,["urlContext"]);return p!=null&&g(t,["urlContext"],p),t}function X2(e){const t={},n=f(e,["baseModel"]);n!=null&&g(t,["baseModel"],n);const i=f(e,["createTime"]);i!=null&&g(t,["createTime"],i);const a=f(e,["updateTime"]);return a!=null&&g(t,["updateTime"],a),t}function Z2(e){const t={},n=f(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&g(t,["baseModel"],n);const i=f(e,["createTime"]);i!=null&&g(t,["createTime"],i);const a=f(e,["updateTime"]);return a!=null&&g(t,["updateTime"],a),t}function eN(e,t){const n={},i=f(e,["displayName"]);t!==void 0&&i!=null&&g(t,["displayName"],i);const a=f(e,["description"]);t!==void 0&&a!=null&&g(t,["description"],a);const o=f(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&g(t,["defaultCheckpointId"],o),n}function tN(e,t){const n={},i=f(e,["displayName"]);t!==void 0&&i!=null&&g(t,["displayName"],i);const a=f(e,["description"]);t!==void 0&&a!=null&&g(t,["description"],a);const o=f(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&g(t,["defaultCheckpointId"],o),n}function nN(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","name"],tt(e,i));const a=f(t,["config"]);return a!=null&&eN(a,n),n}function iN(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["config"]);return a!=null&&tN(a,n),n}function rN(e,t){const n={},i=f(e,["outputGcsUri"]);t!==void 0&&i!=null&&g(t,["parameters","storageUri"],i);const a=f(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&g(t,["parameters","safetySetting"],a);const o=f(e,["personGeneration"]);t!==void 0&&o!=null&&g(t,["parameters","personGeneration"],o);const l=f(e,["includeRaiReason"]);t!==void 0&&l!=null&&g(t,["parameters","includeRaiReason"],l);const u=f(e,["outputMimeType"]);t!==void 0&&u!=null&&g(t,["parameters","outputOptions","mimeType"],u);const m=f(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&g(t,["parameters","outputOptions","compressionQuality"],m);const d=f(e,["enhanceInputImage"]);t!==void 0&&d!=null&&g(t,["parameters","upscaleConfig","enhanceInputImage"],d);const p=f(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&g(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const y=f(e,["labels"]);t!==void 0&&y!=null&&g(t,["labels"],y);const v=f(e,["numberOfImages"]);t!==void 0&&v!=null&&g(t,["parameters","sampleCount"],v);const E=f(e,["mode"]);return t!==void 0&&E!=null&&g(t,["parameters","mode"],E),n}function aN(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["_url","model"],tt(e,i));const a=f(t,["image"]);a!=null&&g(n,["instances[0]","image"],ri(a));const o=f(t,["upscaleFactor"]);o!=null&&g(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=f(t,["config"]);return l!=null&&rN(l,n),n}function sN(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>eu(o))),g(t,["generatedImages"],a)}return t}function oN(e){const t={},n=f(e,["uri"]);n!=null&&g(t,["uri"],n);const i=f(e,["encodedVideo"]);i!=null&&g(t,["videoBytes"],br(i));const a=f(e,["encoding"]);return a!=null&&g(t,["mimeType"],a),t}function lN(e){const t={},n=f(e,["gcsUri"]);n!=null&&g(t,["uri"],n);const i=f(e,["bytesBase64Encoded"]);i!=null&&g(t,["videoBytes"],br(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["mimeType"],a),t}function cN(e){const t={},n=f(e,["image"]);n!=null&&g(t,["_self"],ri(n));const i=f(e,["maskMode"]);return i!=null&&g(t,["maskMode"],i),t}function uN(e){const t={},n=f(e,["image"]);n!=null&&g(t,["image"],tu(n));const i=f(e,["referenceType"]);return i!=null&&g(t,["referenceType"],i),t}function dN(e){const t={},n=f(e,["image"]);n!=null&&g(t,["image"],ri(n));const i=f(e,["referenceType"]);return i!=null&&g(t,["referenceType"],i),t}function Yx(e){const t={},n=f(e,["uri"]);n!=null&&g(t,["uri"],n);const i=f(e,["videoBytes"]);i!=null&&g(t,["encodedVideo"],br(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["encoding"],a),t}function $x(e){const t={},n=f(e,["uri"]);n!=null&&g(t,["gcsUri"],n);const i=f(e,["videoBytes"]);i!=null&&g(t,["bytesBase64Encoded"],br(i));const a=f(e,["mimeType"]);return a!=null&&g(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hN(e,t){const n={},i=f(e,["displayName"]);return t!==void 0&&i!=null&&g(t,["displayName"],i),n}function mN(e){const t={},n=f(e,["config"]);return n!=null&&hN(n,t),t}function fN(e,t){const n={},i=f(e,["force"]);return t!==void 0&&i!=null&&g(t,["_query","force"],i),n}function pN(e){const t={},n=f(e,["name"]);n!=null&&g(t,["_url","name"],n);const i=f(e,["config"]);return i!=null&&fN(i,t),t}function gN(e){const t={},n=f(e,["name"]);return n!=null&&g(t,["_url","name"],n),t}function yN(e,t){const n={},i=f(e,["customMetadata"]);if(t!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["customMetadata"],o)}const a=f(e,["chunkingConfig"]);return t!==void 0&&a!=null&&g(t,["chunkingConfig"],a),n}function bN(e){const t={},n=f(e,["name"]);n!=null&&g(t,["name"],n);const i=f(e,["metadata"]);i!=null&&g(t,["metadata"],i);const a=f(e,["done"]);a!=null&&g(t,["done"],a);const o=f(e,["error"]);o!=null&&g(t,["error"],o);const l=f(e,["response"]);return l!=null&&g(t,["response"],wN(l)),t}function vN(e){const t={},n=f(e,["fileSearchStoreName"]);n!=null&&g(t,["_url","file_search_store_name"],n);const i=f(e,["fileName"]);i!=null&&g(t,["fileName"],i);const a=f(e,["config"]);return a!=null&&yN(a,t),t}function wN(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["parent"]);i!=null&&g(t,["parent"],i);const a=f(e,["documentName"]);return a!=null&&g(t,["documentName"],a),t}function xN(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),n}function TN(e){const t={},n=f(e,["config"]);return n!=null&&xN(n,t),t}function EN(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["fileSearchStores"],o)}return t}function Kx(e,t){const n={},i=f(e,["mimeType"]);t!==void 0&&i!=null&&g(t,["mimeType"],i);const a=f(e,["displayName"]);t!==void 0&&a!=null&&g(t,["displayName"],a);const o=f(e,["customMetadata"]);if(t!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(m=>m)),g(t,["customMetadata"],u)}const l=f(e,["chunkingConfig"]);return t!==void 0&&l!=null&&g(t,["chunkingConfig"],l),n}function _N(e){const t={},n=f(e,["fileSearchStoreName"]);n!=null&&g(t,["_url","file_search_store_name"],n);const i=f(e,["config"]);return i!=null&&Kx(i,t),t}function AN(e){const t={},n=f(e,["sdkHttpResponse"]);return n!=null&&g(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CN="Content-Type",SN="X-Server-Timeout",kN="User-Agent",km="x-goog-api-client",IN="1.38.0",NN=`google-genai-sdk/${IN}`,RN="v1beta1",MN="v1beta";class PN{constructor(t){var n,i,a;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:RN}else{if(!this.clientOptions.apiKey)throw new Oo({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:MN,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),t!==""&&a.push(t),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===Tm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),a=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[l,u]of Object.entries(t.queryParams))a.searchParams.append(l,String(u));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),t.abortSignal),this.unaryApiCall(a,o,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[a,o]of Object.entries(n))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t,n),a=this.constructUrl(t.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),t.abortSignal),this.streamApiCall(a,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,a){if(n&&n.timeout||a){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),t.signal=l}return n&&n.extraBody!==null&&DN(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await bv(a),new Em(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await bv(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(t){return ti(this,arguments,function*(){var i;const a=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";const u="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:p}=yield Be(a.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=o.decode(p,{stream:!0});try{const A=JSON.parse(y);if("error"in A){const C=JSON.parse(JSON.stringify(A.error)),S=C.status,I=C.code,L=`got status: ${S}. ${JSON.stringify(A)}`;if(I>=400&&I<600)throw new Oo({message:L,status:I})}}catch(A){if(A.name==="ApiError")throw A}l+=y;let v=-1,E=0;for(;;){v=-1,E=0;for(const S of m){const I=l.indexOf(S);I!==-1&&(v===-1||I<v)&&(v=I,E=S.length)}if(v===-1)break;const A=l.substring(0,v);l=l.substring(v+E);const C=A.trim();if(C.startsWith(u)){const S=C.substring(u.length).trim();try{const I=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Be(new Em(I))}catch(I){throw new Error(`exception parsing stream chunk ${S}. ${I}`)}}}}}finally{a.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=NN+" "+this.clientOptions.userAgentExtra;return t[kN]=n,t[km]=n,t[CN]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[a,o]of Object.entries(t.headers))i.append(a,o);t.timeout&&t.timeout>0&&i.append(SN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(t);a.sizeBytes=String(l.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=u;const m={file:a},d=this.getFileName(t),p=Se("upload/v1beta/files",m._url),y=await this.fetchUploadUrl(p,a.sizeBytes,a.mimeType,d,m,n==null?void 0:n.httpOptions);return o.upload(t,y,this)}async uploadFileToFileSearchStore(t,n,i){var a;const o=this.clientOptions.uploader,l=await o.stat(n),u=String(l.size),m=(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:l.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),y={};i!=null&&Kx(i,y);const v=await this.fetchUploadUrl(d,u,m,p,y,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,v,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,a,o,l){var u;let m={};l?m=l:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},a?{"X-Goog-Upload-File-Name":a}:{})};const d=await this.request({path:t,body:JSON.stringify(o),httpMethod:"POST",httpOptions:m});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function bv(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new Oo({message:a,status:n}):new Error(a)}}function DN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const o=JSON.parse(e.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const u=Object.assign({},o);for(const m in l)if(Object.prototype.hasOwnProperty.call(l,m)){const d=l[m],p=u[m];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?u[m]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),u[m]=d)}return u}const a=i(n,t);e.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LN="mcp_used/unknown";let ON=!1;function Qx(e){for(const t of e)if(qN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return ON}function Jx(e){var t;const n=(t=e[km])!==null&&t!==void 0?t:"";e[km]=(n+` ${LN}`).trimStart()}function qN(e){return e!==null&&typeof e=="object"&&e instanceof yf}function BN(e){return ti(this,arguments,function*(n,i=100){let a,o=0;for(;o<i;){const l=yield Be(n.listTools({cursor:a}));for(const u of l.tools)yield yield Be(u),o++;if(!l.nextCursor)break;a=l.nextCursor}})}class yf{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new yf(t,n)}async initialize(){var t,n,i,a;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var u=!0,m=(n=void 0,ni(BN(p))),d;d=await m.next(),t=d.done,!t;u=!0){a=d.value,u=!1;const y=a;l.push(y);const v=y.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=p}}catch(y){n={error:y}}finally{try{!u&&!t&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),pS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await a.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function HN(e,t,n){const i=new oS;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),t(i)}class UN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=zN(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),m=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const p=new Promise(P=>{d=P}),y=t.callbacks,v=function(){d({})},E=this.apiClient,A={onopen:v,onmessage:P=>{HN(E,y.onmessage,P)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(P){}},C=this.webSocketFactory.create(m,GN(l),A);C.connect(),await p;const L={setup:{model:tt(this.apiClient,t.model)}};return C.send(JSON.stringify(L)),new FN(C,this.apiClient)}}class FN{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=hI(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=dI(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Xa.PLAY)}pause(){this.sendPlaybackControl(Xa.PAUSE)}stop(){this.sendPlaybackControl(Xa.STOP)}resetContext(){this.sendPlaybackControl(Xa.RESET_CONTEXT)}close(){this.conn.close()}}function GN(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function zN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function WN(e,t,n){const i=new sS;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const o=JSON.parse(a);if(e.isVertexAI()){const l=pI(o);Object.assign(i,l)}else Object.assign(i,o);t(i)}class jN{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new UN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,a,o,l,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&Qx(t.config.tools)&&Jx(y);const v=QN(y);if(this.apiClient.isVertexAI()){const ne=this.apiClient.getProject(),F=this.apiClient.getLocation(),de=this.apiClient.getApiKey(),me=!!ne&&!!F||!!de;this.apiClient.getCustomBaseUrl()&&!me?p=m:(p=`${m}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,p))}else{const ne=this.apiClient.getApiKey();let F="BidiGenerateContent",de="key";ne!=null&&ne.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",de="access_token"),p=`${m}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${de}=${ne}`}let E=()=>{};const A=new Promise(ne=>{E=ne}),C=t.callbacks,S=function(){var ne;(ne=C==null?void 0:C.onopen)===null||ne===void 0||ne.call(C),E({})},I=this.apiClient,L={onopen:S,onmessage:ne=>{WN(I,C.onmessage,ne)},onerror:(n=C==null?void 0:C.onerror)!==null&&n!==void 0?n:function(ne){},onclose:(i=C==null?void 0:C.onclose)!==null&&i!==void 0?i:function(ne){}},P=this.webSocketFactory.create(p,KN(v),L);P.connect(),await A;let G=tt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const ne=this.apiClient.getProject(),F=this.apiClient.getLocation();ne&&F&&(G=`projects/${ne}/locations/${F}/`+G)}let J={};this.apiClient.isVertexAI()&&((a=t.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[qc.AUDIO]}:t.config.responseModalities=[qc.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],V=[];for(const ne of q)if(this.isCallableTool(ne)){const F=ne;V.push(await F.tool())}else V.push(ne);V.length>0&&(t.config.tools=V);const ve={model:G,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?J=uI(this.apiClient,ve):J=cI(this.apiClient,ve),delete J.config,P.send(JSON.stringify(J)),new $N(P,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const YN={turnComplete:!0};class $N{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=jn(n.turns),t.isVertexAI()||(i=i.map(a=>Zc(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(VN)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},YN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fI(t)}:n={realtimeInput:mI(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function KN(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function QN(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vv=10;function wv(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let a=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(is(l)){a=!0;break}if(!a)return!0;const o=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function is(e){return"callTool"in e&&typeof e.callTool=="function"}function JN(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(a=>is(a)))!==null&&i!==void 0?i:!1}function xv(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,a)=>{if(is(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(a)}),n}function Tv(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XN extends qi{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,a,o,l,u;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!JN(n)||wv(n.config))return await this.generateContentInternal(m);const d=xv(n);if(d.length>0){const C=d.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let p,y;const v=jn(m.contents),E=(o=(a=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:vv;let A=0;for(;A<E&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const C=p.candidates[0].content,S=[];for(const I of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(is(I)){const P=await I.callTool(p.functionCalls);S.push(...P)}A++,y={role:"user",parts:S},m.contents=jn(m.contents),m.contents.push(C),m.contents.push(y),Tv(m.config)&&(v.push(C),v.push(y))}return Tv(m.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async n=>{var i,a,o,l,u;if(this.maybeMoveToResponseJsonSchem(n),wv(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const m=xv(n);if(m.length>0){const y=m.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let o;const l=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((a=m==null?void 0:m.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=m==null?void 0:m.safetyAttributes:l.push(m);let u;return o?u={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Jr(Oi.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,o,l,u,m;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((m=(u=n.source)===null||u===void 0?void 0:u.video)===null||m===void 0)&&m.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,a;const o=(n=t.config)===null||n===void 0?void 0:n.tools;if(!o)return t;const l=await Promise.all(o.map(async m=>is(m)?await m.tool():m)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(u.config.tools=l,t.config&&t.config.tools&&Qx(t.config.tools)){const m=(a=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let d=Object.assign({},m);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Jx(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var n,i,a;const o=new Map;for(const l of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(is(l)){const u=l,m=await u.tool();for(const d of(a=m.functionDeclarations)!==null&&a!==void 0?a:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(t){var n,i,a;const o=(a=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:vv;let l=!1,u=0;const m=await this.initAfcToolsMap(t);return(function(d,p,y){return ti(this,arguments,function*(){for(var v,E,A,C,S,I;u<o;){l&&(u++,l=!1);const J=yield Be(d.processParamsMaybeAddMcpUsage(y)),q=yield Be(d.generateContentStreamInternal(J)),V=[],ve=[];try{for(var L=!0,P=(E=void 0,ni(q)),G;G=yield Be(P.next()),v=G.done,!v;L=!0){C=G.value,L=!1;const ne=C;if(yield yield Be(ne),ne.candidates&&(!((S=ne.candidates[0])===null||S===void 0)&&S.content)){ve.push(ne.candidates[0].content);for(const F of(I=ne.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(u<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(F.functionCall.name)){const de=yield Be(p.get(F.functionCall.name).callTool([F.functionCall]));V.push(...de)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(ne){E={error:ne}}finally{try{!L&&!v&&(A=P.return)&&(yield Be(A.call(P)))}finally{if(E)throw E.error}}if(V.length>0){l=!0;const ne=new mo;ne.candidates=[{content:{role:"user",parts:V}}],yield yield Be(ne);const F=[];F.push(...ve),F.push({role:"user",parts:V});const de=jn(y.contents).concat(F);y.contents=de}else break}})})(this,m,t)}async generateContentInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=pv(this.apiClient,t);return u=Se("{model}:generateContent",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=yv(p),v=new mo;return Object.assign(v,y),v})}else{const d=fv(this.apiClient,t);return u=Se("{model}:generateContent",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=gv(p),v=new mo;return Object.assign(v,y),v})}}async generateContentStreamInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=pv(this.apiClient,t);return u=Se("{model}:streamGenerateContent?alt=sse",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(y){return ti(this,arguments,function*(){var v,E,A,C;try{for(var S=!0,I=ni(y),L;L=yield Be(I.next()),v=L.done,!v;S=!0){C=L.value,S=!1;const P=C,G=yv(yield Be(P.json()));G.sdkHttpResponse={headers:P.headers};const J=new mo;Object.assign(J,G),yield yield Be(J)}}catch(P){E={error:P}}finally{try{!S&&!v&&(A=I.return)&&(yield Be(A.call(I)))}finally{if(E)throw E.error}}})})}else{const d=fv(this.apiClient,t);return u=Se("{model}:streamGenerateContent?alt=sse",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(y){return ti(this,arguments,function*(){var v,E,A,C;try{for(var S=!0,I=ni(y),L;L=yield Be(I.next()),v=L.done,!v;S=!0){C=L.value,S=!1;const P=C,G=gv(yield Be(P.json()));G.sdkHttpResponse={headers:P.headers};const J=new mo;Object.assign(J,G),yield yield Be(J)}}catch(P){E={error:P}}finally{try{!S&&!v&&(A=I.return)&&(yield Be(A.call(I)))}finally{if(E)throw E.error}}})})}}async embedContent(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=jI(this.apiClient,t);return u=Se("{model}:predict",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=$I(p),v=new Jb;return Object.assign(v,y),v})}else{const d=WI(this.apiClient,t);return u=Se("{model}:batchEmbedContents",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=YI(p),v=new Jb;return Object.assign(v,y),v})}}async generateImagesInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=a2(this.apiClient,t);return u=Se("{model}:predict",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=o2(p),v=new Xb;return Object.assign(v,y),v})}else{const d=r2(this.apiClient,t);return u=Se("{model}:predict",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=s2(p),v=new Xb;return Object.assign(v,y),v})}}async editImageInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=FI(this.apiClient,t);return o=Se("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>{const d=GI(m),p=new KC;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=aN(this.apiClient,t);return o=Se("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>{const d=sN(m),p=new QC;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=U2(this.apiClient,t);return o=Se("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=F2(m),p=new JC;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=Y2(this.apiClient,t);return o=Se("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=$2(m),p=new XC;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=_2(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Sm(p))}else{const d=E2(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Cm(p))}}async listInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=P2(this.apiClient,t);return u=Se("{models_url}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=L2(p),v=new Zb;return Object.assign(v,y),v})}else{const d=M2(this.apiClient,t);return u=Se("{models_url}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=D2(p),v=new Zb;return Object.assign(v,y),v})}}async update(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=iN(this.apiClient,t);return u=Se("{model}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Sm(p))}else{const d=nN(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>Cm(p))}}async delete(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=qI(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=HI(p),v=new ev;return Object.assign(v,y),v})}else{const d=OI(this.apiClient,t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=BI(p),v=new ev;return Object.assign(v,y),v})}}async countTokens(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=PI(this.apiClient,t);return u=Se("{model}:countTokens",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=LI(p),v=new tv;return Object.assign(v,y),v})}else{const d=MI(this.apiClient,t);return u=Se("{model}:countTokens",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=DI(p),v=new tv;return Object.assign(v,y),v})}}async computeTokens(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=AI(this.apiClient,t);return o=Se("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>{const d=CI(m),p=new ZC;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=m2(this.apiClient,t);return u=Se("{model}:predictLongRunning",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const y=d2(p),v=new Bc;return Object.assign(v,y),v})}else{const d=h2(this.apiClient,t);return u=Se("{model}:predictLongRunning",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const y=u2(p),v=new Bc;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZN extends qi{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=zC(t);return u=Se("{operationName}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const d=GC(t);return u=Se("{operationName}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=LC(t);return o=Se("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eR(e){const t={},n=f(e,["data"]);if(n!=null&&g(t,["data"],n),f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function tR(e){const t={},n=f(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>uR(o))),g(t,["parts"],a)}const i=f(e,["role"]);return i!=null&&g(t,["role"],i),t}function nR(e,t,n){const i={},a=f(t,["expireTime"]);n!==void 0&&a!=null&&g(n,["expireTime"],a);const o=f(t,["newSessionExpireTime"]);n!==void 0&&o!=null&&g(n,["newSessionExpireTime"],o);const l=f(t,["uses"]);n!==void 0&&l!=null&&g(n,["uses"],l);const u=f(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&g(n,["bidiGenerateContentSetup"],cR(e,u));const m=f(t,["lockAdditionalFields"]);return n!==void 0&&m!=null&&g(n,["fieldMask"],m),i}function iR(e,t){const n={},i=f(t,["config"]);return i!=null&&g(n,["config"],nR(e,i,n)),n}function rR(e){const t={};if(f(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(e,["fileUri"]);n!=null&&g(t,["fileUri"],n);const i=f(e,["mimeType"]);return i!=null&&g(t,["mimeType"],i),t}function aR(e){const t={},n=f(e,["id"]);n!=null&&g(t,["id"],n);const i=f(e,["args"]);i!=null&&g(t,["args"],i);const a=f(e,["name"]);if(a!=null&&g(t,["name"],a),f(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function sR(e){const t={};if(f(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(e,["enableWidget"]);return n!=null&&g(t,["enableWidget"],n),t}function oR(e){const t={};if(f(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(e,["timeRangeFilter"]);return n!=null&&g(t,["timeRangeFilter"],n),t}function lR(e,t){const n={},i=f(e,["generationConfig"]);t!==void 0&&i!=null&&g(t,["setup","generationConfig"],i);const a=f(e,["responseModalities"]);t!==void 0&&a!=null&&g(t,["setup","generationConfig","responseModalities"],a);const o=f(e,["temperature"]);t!==void 0&&o!=null&&g(t,["setup","generationConfig","temperature"],o);const l=f(e,["topP"]);t!==void 0&&l!=null&&g(t,["setup","generationConfig","topP"],l);const u=f(e,["topK"]);t!==void 0&&u!=null&&g(t,["setup","generationConfig","topK"],u);const m=f(e,["maxOutputTokens"]);t!==void 0&&m!=null&&g(t,["setup","generationConfig","maxOutputTokens"],m);const d=f(e,["mediaResolution"]);t!==void 0&&d!=null&&g(t,["setup","generationConfig","mediaResolution"],d);const p=f(e,["seed"]);t!==void 0&&p!=null&&g(t,["setup","generationConfig","seed"],p);const y=f(e,["speechConfig"]);t!==void 0&&y!=null&&g(t,["setup","generationConfig","speechConfig"],gf(y));const v=f(e,["thinkingConfig"]);t!==void 0&&v!=null&&g(t,["setup","generationConfig","thinkingConfig"],v);const E=f(e,["enableAffectiveDialog"]);t!==void 0&&E!=null&&g(t,["setup","generationConfig","enableAffectiveDialog"],E);const A=f(e,["systemInstruction"]);t!==void 0&&A!=null&&g(t,["setup","systemInstruction"],tR(Xt(A)));const C=f(e,["tools"]);if(t!==void 0&&C!=null){let q=us(C);Array.isArray(q)&&(q=q.map(V=>hR(cs(V)))),g(t,["setup","tools"],q)}const S=f(e,["sessionResumption"]);t!==void 0&&S!=null&&g(t,["setup","sessionResumption"],dR(S));const I=f(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&g(t,["setup","inputAudioTranscription"],I);const L=f(e,["outputAudioTranscription"]);t!==void 0&&L!=null&&g(t,["setup","outputAudioTranscription"],L);const P=f(e,["realtimeInputConfig"]);t!==void 0&&P!=null&&g(t,["setup","realtimeInputConfig"],P);const G=f(e,["contextWindowCompression"]);t!==void 0&&G!=null&&g(t,["setup","contextWindowCompression"],G);const J=f(e,["proactivity"]);if(t!==void 0&&J!=null&&g(t,["setup","proactivity"],J),f(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function cR(e,t){const n={},i=f(t,["model"]);i!=null&&g(n,["setup","model"],tt(e,i));const a=f(t,["config"]);return a!=null&&g(n,["config"],lR(a,n)),n}function uR(e){const t={},n=f(e,["mediaResolution"]);n!=null&&g(t,["mediaResolution"],n);const i=f(e,["codeExecutionResult"]);i!=null&&g(t,["codeExecutionResult"],i);const a=f(e,["executableCode"]);a!=null&&g(t,["executableCode"],a);const o=f(e,["fileData"]);o!=null&&g(t,["fileData"],rR(o));const l=f(e,["functionCall"]);l!=null&&g(t,["functionCall"],aR(l));const u=f(e,["functionResponse"]);u!=null&&g(t,["functionResponse"],u);const m=f(e,["inlineData"]);m!=null&&g(t,["inlineData"],eR(m));const d=f(e,["text"]);d!=null&&g(t,["text"],d);const p=f(e,["thought"]);p!=null&&g(t,["thought"],p);const y=f(e,["thoughtSignature"]);y!=null&&g(t,["thoughtSignature"],y);const v=f(e,["videoMetadata"]);return v!=null&&g(t,["videoMetadata"],v),t}function dR(e){const t={},n=f(e,["handle"]);if(n!=null&&g(t,["handle"],n),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function hR(e){const t={};if(f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(e,["computerUse"]);n!=null&&g(t,["computerUse"],n);const i=f(e,["fileSearch"]);i!=null&&g(t,["fileSearch"],i);const a=f(e,["codeExecution"]);if(a!=null&&g(t,["codeExecution"],a),f(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(e,["functionDeclarations"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>y)),g(t,["functionDeclarations"],p)}const l=f(e,["googleMaps"]);l!=null&&g(t,["googleMaps"],sR(l));const u=f(e,["googleSearch"]);u!=null&&g(t,["googleSearch"],oR(u));const m=f(e,["googleSearchRetrieval"]);m!=null&&g(t,["googleSearchRetrieval"],m);const d=f(e,["urlContext"]);return d!=null&&g(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mR(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(o=>`${n}.${o}`);t.push(...a)}else t.push(n)}return t.join(",")}function fR(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(e.bidiGenerateContentSetup=o,n=o):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const a=e.fieldMask;if(n){const o=mR(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?e.fieldMask=o:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];a.length>0&&(u=a.map(d=>l.includes(d)?`generationConfig.${d}`:d));const m=[];o&&m.push(o),u.length>0&&m.push(...u),m.length>0?e.fieldMask=m.join(","):delete e.fieldMask}else delete e.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?e.fieldMask=a.join(","):delete e.fieldMask;return e}class pR extends qi{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=iR(this.apiClient,t);o=Se("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const m=fR(u,t.config);return a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gR(e,t){const n={},i=f(e,["force"]);return t!==void 0&&i!=null&&g(t,["_query","force"],i),n}function yR(e){const t={},n=f(e,["name"]);n!=null&&g(t,["_url","name"],n);const i=f(e,["config"]);return i!=null&&gR(i,t),t}function bR(e){const t={},n=f(e,["name"]);return n!=null&&g(t,["_url","name"],n),t}function vR(e,t){const n={},i=f(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=f(e,["pageToken"]);return t!==void 0&&a!=null&&g(t,["_query","pageToken"],a),n}function wR(e){const t={},n=f(e,["parent"]);n!=null&&g(t,["_url","parent"],n);const i=f(e,["config"]);return i!=null&&vR(i,t),t}function xR(e){const t={},n=f(e,["sdkHttpResponse"]);n!=null&&g(t,["sdkHttpResponse"],n);const i=f(e,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=f(e,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),g(t,["documents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TR extends qi{constructor(t){super(),this.apiClient=t,this.list=async n=>new Jr(Oi.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bR(t);return o=Se("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(t){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=yR(t);a=Se("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wR(t);return o=Se("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=xR(m),p=new eS;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ER extends qi{constructor(t,n=new TR(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new Jr(Oi.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mN(t);return o=Se("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async get(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=gN(t);return o=Se("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>m)}}async delete(t){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pN(t);a=Se("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TN(t);return o=Se("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=EN(m),p=new tS;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_N(t);return o=Se("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=AN(m),p=new nS;return Object.assign(p,d),p})}}async importFile(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vN(t);return o=Se("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),a.then(m=>{const d=bN(m),p=new df;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Xx=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Xx=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const _R=()=>Xx();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Im(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Nm=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn extends Error{}class ln extends Yn{constructor(t,n,i,a){super(`${ln.makeMessage(t,n,i)}`),this.status=t,this.headers=a,this.error=n}static makeMessage(t,n,i){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&a?`${t} ${a}`:t?`${t} status code (no body)`:a||"(no status code or body)"}static generate(t,n,i,a){if(!t||!a)return new nu({message:i,cause:Nm(n)});const o=n;return t===400?new eT(t,o,i,a):t===401?new tT(t,o,i,a):t===403?new nT(t,o,i,a):t===404?new iT(t,o,i,a):t===409?new rT(t,o,i,a):t===422?new aT(t,o,i,a):t===429?new sT(t,o,i,a):t>=500?new oT(t,o,i,a):new ln(t,o,i,a)}}class Rm extends ln{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class nu extends ln{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Zx extends nu{constructor({message:t}={}){super({message:t??"Request timed out."})}}class eT extends ln{}class tT extends ln{}class nT extends ln{}class iT extends ln{}class rT extends ln{}class aT extends ln{}class sT extends ln{}class oT extends ln{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AR=/^[a-z][a-z0-9+.-]*:/i,CR=e=>AR.test(e);let Mm=e=>(Mm=Array.isArray,Mm(e));const SR=Mm;let kR=SR;const Ev=kR;function IR(e){if(!e)return!0;for(const t in e)return!1;return!0}function NR(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const RR=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Yn(`${e} must be an integer`);if(t<0)throw new Yn(`${e} must be a positive integer`);return t},MR=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PR=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ya="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const LR=()=>{var e,t,n,i,a;const o=DR();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ya,"X-Stainless-OS":Av(Deno.build.os),"X-Stainless-Arch":_v(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ya,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ya,"X-Stainless-OS":Av((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":_v((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const l=OR();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ya,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ya,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function OR(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const a=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:t,version:`${a}.${o}.${l}`}}}return null}const _v=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Av=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let gc;const qR=()=>gc??(gc=LR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lT(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function HR(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return lT({start(){},async pull(n){const{done:i,value:a}=await t.next();i?n.close():n.enqueue(a)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function cT(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function UR(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),a=i.cancel();i.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FR=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Gh(e,t,n){return uT(),new File(e,t??"unknown_file",n)}function GR(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const zR=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dT=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",VR=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&dT(e),WR=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function jR(e,t,n){if(uT(),e=await e,VR(e))return e instanceof File?e:Gh([await e.arrayBuffer()],e.name);if(WR(e)){const a=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Gh(await Pm(a),t,n)}const i=await Pm(e);if(t||(t=GR(e)),!(n!=null&&n.type)){const a=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return Gh(i,t,n)}async function Pm(e){var t,n,i,a,o;let l=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)l.push(e);else if(dT(e))l.push(e instanceof Blob?e:await e.arrayBuffer());else if(zR(e))try{for(var u=!0,m=ni(e),d;d=await m.next(),t=d.done,!t;u=!0){a=d.value,u=!1;const p=a;l.push(...await Pm(p))}}catch(p){n={error:p}}finally{try{!u&&!t&&(i=m.return)&&await i.call(m)}finally{if(n)throw n.error}}else{const p=(o=e==null?void 0:e.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof e}${p?`; constructor: ${p}`:""}${YR(e)}`)}return l}function YR(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hT{constructor(t){this._client=t}}hT._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mT(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Cv=Object.freeze(Object.create(null)),$R=(e=mT)=>(function(n,...i){if(n.length===1)return n[0];let a=!1;const o=[],l=n.reduce((p,y,v)=>{var E,A,C;/[?#]/.test(y)&&(a=!0);const S=i[v];let I=(a?encodeURIComponent:e)(""+S);return v!==i.length&&(S==null||typeof S=="object"&&S.toString===((C=Object.getPrototypeOf((A=Object.getPrototypeOf((E=S.hasOwnProperty)!==null&&E!==void 0?E:Cv))!==null&&A!==void 0?A:Cv))===null||C===void 0?void 0:C.toString))&&(I=S+"",o.push({start:p.length+y.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),p+y+(v===i.length?"":I)},""),u=l.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=m.exec(u))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((p,y)=>p.start-y.start),o.length>0){let p=0;const y=o.reduce((v,E)=>{const A=" ".repeat(E.start-p),C="^".repeat(E.length);return p=E.start+E.length,v+A+C},"");throw new Yn(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${l}
${y}`)}return l}),yc=$R(mT);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fT extends hT{create(t,n){var i;const{api_version:a=this._client.apiVersion}=t,o=Uc(t,["api_version"]);if("model"in o&&"agent_config"in o)throw new Yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(yc`/${a}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(yc`/${a}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(yc`/${a}/interactions/${t}/cancel`,i)}get(t,n={},i){var a;const o=n??{},{api_version:l=this._client.apiVersion}=o,u=Uc(o,["api_version"]);return this._client.get(yc`/${l}/interactions/${t}`,Object.assign(Object.assign({query:u},i),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}fT._key=Object.freeze(["interactions"]);class pT extends fT{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KR(e){let t=0;for(const a of e)t+=a.length;const n=new Uint8Array(t);let i=0;for(const a of e)n.set(a,i),i+=a.length;return n}let bc;function bf(e){let t;return(bc??(t=new globalThis.TextEncoder,bc=t.encode.bind(t)))(e)}let vc;function Sv(e){let t;return(vc??(t=new globalThis.TextDecoder,vc=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iu{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?bf(t):t;this.buffer=KR([this.buffer,n]);const i=[];let a;for(;(a=QR(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){i.push(Sv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,l=Sv(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}iu.NEWLINE_CHARS=new Set([`
`,"\r"]);iu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function QR(e,t){for(let a=t??0;a<e.length;a++){if(e[a]===10)return{preceding:a,index:a+1,carriage:!1};if(e[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function JR(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc={off:0,error:200,warn:300,info:400,debug:500},kv=(e,t,n)=>{if(e){if(NR(Fc,e))return e;sn(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Fc))}`)}};function Eo(){}function wc(e,t,n){return!t||Fc[e]>Fc[n]?Eo:t[e].bind(t)}const XR={error:Eo,warn:Eo,info:Eo,debug:Eo};let Iv=new WeakMap;function sn(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return XR;const a=Iv.get(n);if(a&&a[0]===i)return a[1];const o={error:wc("error",n,i),warn:wc("warn",n,i),info:wc("info",n,i),debug:wc("debug",n,i)};return Iv.set(n,[i,o]),o}const zr=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Za{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let a=!1;const o=i?sn(i):console;function l(){return ti(this,arguments,function*(){var m,d,p,y;if(a)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let v=!1;try{try{for(var E=!0,A=ni(ZR(t,n)),C;C=yield Be(A.next()),m=C.done,!m;E=!0){y=C.value,E=!1;const S=y;if(!v)if(S.data.startsWith("[DONE]")){v=!0;continue}else try{yield yield Be(JSON.parse(S.data))}catch(I){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),I}}}catch(S){d={error:S}}finally{try{!E&&!m&&(p=A.return)&&(yield Be(p.call(A)))}finally{if(d)throw d.error}}v=!0}catch(S){if(Im(S))return yield Be(void 0);throw S}finally{v||n.abort()}})}return new Za(l,n,i)}static fromReadableStream(t,n,i){let a=!1;function o(){return ti(this,arguments,function*(){var m,d,p,y;const v=new iu,E=cT(t);try{for(var A=!0,C=ni(E),S;S=yield Be(C.next()),m=S.done,!m;A=!0){y=S.value,A=!1;const I=y;for(const L of v.decode(I))yield yield Be(L)}}catch(I){d={error:I}}finally{try{!A&&!m&&(p=C.return)&&(yield Be(p.call(C)))}finally{if(d)throw d.error}}for(const I of v.flush())yield yield Be(I)})}function l(){return ti(this,arguments,function*(){var m,d,p,y;if(a)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let v=!1;try{try{for(var E=!0,A=ni(o()),C;C=yield Be(A.next()),m=C.done,!m;E=!0){y=C.value,E=!1;const S=y;v||S&&(yield yield Be(JSON.parse(S)))}}catch(S){d={error:S}}finally{try{!E&&!m&&(p=A.return)&&(yield Be(p.call(A)))}finally{if(d)throw d.error}}v=!0}catch(S){if(Im(S))return yield Be(void 0);throw S}finally{v||n.abort()}})}return new Za(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),a=o=>({next:()=>{if(o.length===0){const l=i.next();t.push(l),n.push(l)}return o.shift()}});return[new Za(()=>a(t),this.controller,this.client),new Za(()=>a(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return lT({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await n.next();if(o)return i.close();const l=bf(JSON.stringify(a)+`
`);i.enqueue(l)}catch(a){i.error(a)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function ZR(e,t){return ti(this,arguments,function*(){var i,a,o,l;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yn("Attempted to iterate over a response with no body");const u=new tM,m=new iu,d=cT(e.body);try{for(var p=!0,y=ni(eM(d)),v;v=yield Be(y.next()),i=v.done,!i;p=!0){l=v.value,p=!1;const E=l;for(const A of m.decode(E)){const C=u.decode(A);C&&(yield yield Be(C))}}}catch(E){a={error:E}}finally{try{!p&&!i&&(o=y.return)&&(yield Be(o.call(y)))}finally{if(a)throw a.error}}for(const E of m.flush()){const A=u.decode(E);A&&(yield yield Be(A))}})}function eM(e){return ti(this,arguments,function*(){var n,i,a,o;let l=new Uint8Array;try{for(var u=!0,m=ni(e),d;d=yield Be(m.next()),n=d.done,!n;u=!0){o=d.value,u=!1;const p=o;if(p==null)continue;const y=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?bf(p):p;let v=new Uint8Array(l.length+y.length);v.set(l),v.set(y,l.length),l=v;let E;for(;(E=JR(l))!==-1;)yield yield Be(l.slice(0,E)),l=l.slice(E)}}catch(p){i={error:p}}finally{try{!u&&!n&&(a=m.return)&&(yield Be(a.call(m)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Be(l))})}class tM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,a]=nM(t,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function nM(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iM(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:a,startTime:o}=t,l=await(async()=>{var u;if(t.options.stream)return sn(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Za.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const m=n.headers.get("content-type"),d=(u=m==null?void 0:m.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return sn(e).debug(`[${i}] response parsed`,zr({retryOfRequestLogID:a,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vf extends Promise{constructor(t,n,i=iM){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new vf(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gT=Symbol("brand.privateNullableHeaders");function*rM(e){if(!e)return;if(gT in e){const{values:i,nulls:a}=e;yield*i.entries();for(const o of a)yield[o,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Ev(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const a=i[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=Ev(i[1])?i[1]:[i[1]];let l=!1;for(const u of o)u!==void 0&&(t&&!l&&(l=!0,yield[a,null]),yield[a,u])}}const fo=e=>{const t=new Headers,n=new Set;for(const i of e){const a=new Set;for(const[o,l]of rM(i)){const u=o.toLowerCase();a.has(u)||(t.delete(o),a.add(u)),l===null?(t.delete(o),n.add(u)):(t.append(o,l),n.delete(u))}}return{[gT]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zh=e=>{var t,n,i,a,o,l;if(typeof globalThis.process<"u")return(i=(n=(t=IC)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,e))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yT;class ru{constructor(t){var n,i,a,o,l,u,m,{baseURL:d=zh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=zh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=t,v=Uc(t,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:p,apiVersion:y},v),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(i=E.timeout)!==null&&i!==void 0?i:ru.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const A="warn";this.logLevel=A,this.logLevel=(l=(o=kv(E.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:kv(zh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:A,this.fetchOptions=E.fetchOptions,this.maxRetries=(u=E.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(m=E.fetch)!==null&&m!==void 0?m:BR(),this.encoder=FR,this._options=E,this.apiKey=p,this.apiVersion=y,this.clientAdapter=E.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=fo([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return fo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return fo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Yn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ya}`}defaultIdempotencyKey(){return`stainless-node-retry-${_R()}`}makeStatusError(t,n,i,a){return ln.generate(t,n,i,a)}buildURL(t,n,i){const a=!this.baseURLOverridden()&&i||this.baseURL,o=CR(t)?new URL(t):new URL(a+(a.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return IR(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(a=>Object.assign({method:t,path:n},a)))}request(t,n=null){return new vf(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var a,o,l;const u=await t,m=(a=u.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=m),await this.prepareOptions(u);const{req:d,url:p,timeout:y}=await this.buildRequest(u,{retryCount:m-n});await this.prepareRequest(d,{url:p,options:u});const v="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=i===void 0?"":`, retryOf: ${i}`,A=Date.now();if(sn(this).debug(`[${v}] sending request`,zr({retryOfRequestLogID:i,method:u.method,url:p,options:u,headers:d.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new Rm;const C=new AbortController,S=await this.fetchWithTimeout(p,d,y,C).catch(Nm),I=Date.now();if(S instanceof globalThis.Error){const P=`retrying, ${n} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new Rm;const G=Im(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return sn(this).info(`[${v}] connection ${G?"timed out":"failed"} - ${P}`),sn(this).debug(`[${v}] connection ${G?"timed out":"failed"} (${P})`,zr({retryOfRequestLogID:i,url:p,durationMs:I-A,message:S.message})),this.retryRequest(u,n,i??v);throw sn(this).info(`[${v}] connection ${G?"timed out":"failed"} - error; no more retries left`),sn(this).debug(`[${v}] connection ${G?"timed out":"failed"} (error; no more retries left)`,zr({retryOfRequestLogID:i,url:p,durationMs:I-A,message:S.message})),G?new Zx:new nu({cause:S})}const L=`[${v}${E}] ${d.method} ${p} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${I-A}ms`;if(!S.ok){const P=await this.shouldRetry(S);if(n&&P){const ne=`retrying, ${n} attempts remaining`;return await UR(S.body),sn(this).info(`${L} - ${ne}`),sn(this).debug(`[${v}] response error (${ne})`,zr({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:I-A})),this.retryRequest(u,n,i??v,S.headers)}const G=P?"error; no more retries left":"error; not retryable";sn(this).info(`${L} - ${G}`);const J=await S.text().catch(ne=>Nm(ne).message),q=MR(J),V=q?void 0:J;throw sn(this).debug(`[${v}] response error (${G})`,zr({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:V,durationMs:Date.now()-A})),this.makeStatusError(S.status,q,V,S.headers)}return sn(this).info(L),sn(this).debug(`[${v}] response start`,zr({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:I-A})),{response:S,options:u,controller:C,requestLogID:v,retryOfRequestLogID:i,startTime:A}}async fetchWithTimeout(t,n,i,a){const o=n||{},{signal:l,method:u}=o,m=Uc(o,["signal","method"]);l&&l.addEventListener("abort",()=>a.abort());const d=setTimeout(()=>a.abort(),i),p=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,y=Object.assign(Object.assign(Object.assign({signal:a.signal},p?{duplex:"half"}:{}),{method:"GET"}),m);u&&(y.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,y)}finally{clearTimeout(d)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,a){var o;let l;const u=a==null?void 0:a.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(l=d)}const m=a==null?void 0:a.get("retry-after");if(m&&!l){const d=parseFloat(m);Number.isNaN(d)?l=Date.parse(m)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(o=t.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await PR(l),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,l=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,a,o;const l=Object.assign({},t),{method:u,path:m,query:d,defaultBaseURL:p}=l,y=this.buildURL(m,d,p);"timeout"in l&&RR("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:v,body:E}=this.buildBody({options:l}),A=await this.buildHeaders({options:t,method:u,bodyHeaders:v,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:A},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:y,timeout:l.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:a}){let o={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let u=fo([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),qR()),this._options.defaultHeaders,i,t.headers,l]);return this.validateHeaders(u),u.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=fo([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:HR(t)}:this.encoder({body:t,headers:i})}}ru.DEFAULT_TIMEOUT=6e4;class Ft extends ru{constructor(){super(...arguments),this.interactions=new pT(this)}}yT=Ft;Ft.GeminiNextGenAPIClient=yT;Ft.GeminiNextGenAPIClientError=Yn;Ft.APIError=ln;Ft.APIConnectionError=nu;Ft.APIConnectionTimeoutError=Zx;Ft.APIUserAbortError=Rm;Ft.NotFoundError=iT;Ft.ConflictError=rT;Ft.RateLimitError=sT;Ft.BadRequestError=eT;Ft.AuthenticationError=tT;Ft.InternalServerError=oT;Ft.PermissionDeniedError=nT;Ft.UnprocessableEntityError=aT;Ft.toFile=jR;Ft.Interactions=pT;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(e,t){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],i),n}function sM(e,t){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],i),n}function oM(e,t){const n={},i=f(e,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function lM(e,t){const n={},i=f(e,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function cM(e,t,n){const i={};if(f(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(e,["tunedModelDisplayName"]);if(t!==void 0&&a!=null&&g(t,["displayName"],a),f(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(e,["epochCount"]);t!==void 0&&o!=null&&g(t,["tuningTask","hyperparameters","epochCount"],o);const l=f(e,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=f(e,["batchSize"]);t!==void 0&&u!=null&&g(t,["tuningTask","hyperparameters","batchSize"],u);const m=f(e,["learningRate"]);if(t!==void 0&&m!=null&&g(t,["tuningTask","hyperparameters","learningRate"],m),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function uM(e,t,n){const i={};let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=f(e,["validationDataset"]);t!==void 0&&E!=null&&g(t,["supervisedTuningSpec"],Nv(E))}else if(a==="PREFERENCE_TUNING"){const E=f(e,["validationDataset"]);t!==void 0&&E!=null&&g(t,["preferenceOptimizationSpec"],Nv(E))}const o=f(e,["tunedModelDisplayName"]);t!==void 0&&o!=null&&g(t,["tunedModelDisplayName"],o);const l=f(e,["description"]);t!==void 0&&l!=null&&g(t,["description"],l);let u=f(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const E=f(e,["epochCount"]);t!==void 0&&E!=null&&g(t,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(u==="PREFERENCE_TUNING"){const E=f(e,["epochCount"]);t!==void 0&&E!=null&&g(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let m=f(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=f(e,["learningRateMultiplier"]);t!==void 0&&E!=null&&g(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(m==="PREFERENCE_TUNING"){const E=f(e,["learningRateMultiplier"]);t!==void 0&&E!=null&&g(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const E=f(e,["exportLastCheckpointOnly"]);t!==void 0&&E!=null&&g(t,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(d==="PREFERENCE_TUNING"){const E=f(e,["exportLastCheckpointOnly"]);t!==void 0&&E!=null&&g(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let p=f(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=f(e,["adapterSize"]);t!==void 0&&E!=null&&g(t,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(p==="PREFERENCE_TUNING"){const E=f(e,["adapterSize"]);t!==void 0&&E!=null&&g(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(f(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=f(e,["labels"]);t!==void 0&&y!=null&&g(t,["labels"],y);const v=f(e,["beta"]);return t!==void 0&&v!=null&&g(t,["preferenceOptimizationSpec","hyperParameters","beta"],v),i}function dM(e,t){const n={},i=f(e,["baseModel"]);i!=null&&g(n,["baseModel"],i);const a=f(e,["preTunedModel"]);a!=null&&g(n,["preTunedModel"],a);const o=f(e,["trainingDataset"]);o!=null&&TM(o);const l=f(e,["config"]);return l!=null&&cM(l,n),n}function hM(e,t){const n={},i=f(e,["baseModel"]);i!=null&&g(n,["baseModel"],i);const a=f(e,["preTunedModel"]);a!=null&&g(n,["preTunedModel"],a);const o=f(e,["trainingDataset"]);o!=null&&EM(o,n,t);const l=f(e,["config"]);return l!=null&&uM(l,n,t),n}function mM(e,t){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],i),n}function fM(e,t){const n={},i=f(e,["name"]);return i!=null&&g(n,["_url","name"],i),n}function pM(e,t,n){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const l=f(e,["filter"]);return t!==void 0&&l!=null&&g(t,["_query","filter"],l),i}function gM(e,t,n){const i={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const l=f(e,["filter"]);return t!==void 0&&l!=null&&g(t,["_query","filter"],l),i}function yM(e,t){const n={},i=f(e,["config"]);return i!=null&&pM(i,n),n}function bM(e,t){const n={},i=f(e,["config"]);return i!=null&&gM(i,n),n}function vM(e,t){const n={},i=f(e,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const a=f(e,["nextPageToken"]);a!=null&&g(n,["nextPageToken"],a);const o=f(e,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>bT(u))),g(n,["tuningJobs"],l)}return n}function wM(e,t){const n={},i=f(e,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const a=f(e,["nextPageToken"]);a!=null&&g(n,["nextPageToken"],a);const o=f(e,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Dm(u))),g(n,["tuningJobs"],l)}return n}function xM(e,t){const n={},i=f(e,["name"]);i!=null&&g(n,["model"],i);const a=f(e,["name"]);return a!=null&&g(n,["endpoint"],a),n}function TM(e,t){const n={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(e,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),g(n,["examples","examples"],a)}return n}function EM(e,t,n){const i={};let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=f(e,["gcsUri"]);t!==void 0&&l!=null&&g(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=f(e,["gcsUri"]);t!==void 0&&l!=null&&g(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=f(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&g(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=f(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&g(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(f(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bT(e,t){const n={},i=f(e,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const a=f(e,["name"]);a!=null&&g(n,["name"],a);const o=f(e,["state"]);o!=null&&g(n,["state"],Dx(o));const l=f(e,["createTime"]);l!=null&&g(n,["createTime"],l);const u=f(e,["tuningTask","startTime"]);u!=null&&g(n,["startTime"],u);const m=f(e,["tuningTask","completeTime"]);m!=null&&g(n,["endTime"],m);const d=f(e,["updateTime"]);d!=null&&g(n,["updateTime"],d);const p=f(e,["description"]);p!=null&&g(n,["description"],p);const y=f(e,["baseModel"]);y!=null&&g(n,["baseModel"],y);const v=f(e,["_self"]);return v!=null&&g(n,["tunedModel"],xM(v)),n}function Dm(e,t){const n={},i=f(e,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const a=f(e,["name"]);a!=null&&g(n,["name"],a);const o=f(e,["state"]);o!=null&&g(n,["state"],Dx(o));const l=f(e,["createTime"]);l!=null&&g(n,["createTime"],l);const u=f(e,["startTime"]);u!=null&&g(n,["startTime"],u);const m=f(e,["endTime"]);m!=null&&g(n,["endTime"],m);const d=f(e,["updateTime"]);d!=null&&g(n,["updateTime"],d);const p=f(e,["error"]);p!=null&&g(n,["error"],p);const y=f(e,["description"]);y!=null&&g(n,["description"],y);const v=f(e,["baseModel"]);v!=null&&g(n,["baseModel"],v);const E=f(e,["tunedModel"]);E!=null&&g(n,["tunedModel"],E);const A=f(e,["preTunedModel"]);A!=null&&g(n,["preTunedModel"],A);const C=f(e,["supervisedTuningSpec"]);C!=null&&g(n,["supervisedTuningSpec"],C);const S=f(e,["preferenceOptimizationSpec"]);S!=null&&g(n,["preferenceOptimizationSpec"],S);const I=f(e,["tuningDataStats"]);I!=null&&g(n,["tuningDataStats"],I);const L=f(e,["encryptionSpec"]);L!=null&&g(n,["encryptionSpec"],L);const P=f(e,["partnerModelTuningSpec"]);P!=null&&g(n,["partnerModelTuningSpec"],P);const G=f(e,["customBaseModel"]);G!=null&&g(n,["customBaseModel"],G);const J=f(e,["experiment"]);J!=null&&g(n,["experiment"],J);const q=f(e,["labels"]);q!=null&&g(n,["labels"],q);const V=f(e,["outputUri"]);V!=null&&g(n,["outputUri"],V);const ve=f(e,["pipelineJob"]);ve!=null&&g(n,["pipelineJob"],ve);const ne=f(e,["serviceAccount"]);ne!=null&&g(n,["serviceAccount"],ne);const F=f(e,["tunedModelDisplayName"]);F!=null&&g(n,["tunedModelDisplayName"],F);const de=f(e,["veoTuningSpec"]);return de!=null&&g(n,["veoTuningSpec"],de),n}function _M(e,t){const n={},i=f(e,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const a=f(e,["name"]);a!=null&&g(n,["name"],a);const o=f(e,["metadata"]);o!=null&&g(n,["metadata"],o);const l=f(e,["done"]);l!=null&&g(n,["done"],l);const u=f(e,["error"]);return u!=null&&g(n,["error"],u),n}function Nv(e,t){const n={},i=f(e,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const a=f(e,["vertexDatasetResource"]);return a!=null&&g(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AM extends qi{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Jr(Oi.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),o=await this.tuneMldevInternal(a);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:xm.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=fM(t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>Dm(p))}else{const d=mM(t);return u=Se("{name}",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>bT(p))}}async listInternal(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=bM(t);return u=Se("tuningJobs",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=wM(p),v=new nv;return Object.assign(v,y),v})}else{const d=yM(t);return u=Se("tunedModels",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=vM(p),v=new nv;return Object.assign(v,y),v})}}async cancel(t){var n,i,a,o;let l,u="",m={};if(this.apiClient.isVertexAI()){const d=sM(t);return u=Se("{name}:cancel",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=lM(p),v=new iv;return Object.assign(v,y),v})}else{const d=aM(t);return u=Se("{name}:cancel",d._url),m=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:m,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=t.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),l.then(p=>{const y=oM(p),v=new iv;return Object.assign(v,y),v})}}async tuneInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const u=hM(t,t);return o=Se("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>Dm(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dM(t);return o=Se("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:m.headers},p})),a.then(m=>_M(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CM{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SM=1024*1024*8,kM=3,IM=1e3,NM=2,Gc="x-goog-upload-status";async function RM(e,t,n){var i;const a=await vT(e,t,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[Gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function MM(e,t,n){var i;const a=await vT(e,t,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[Gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=kx(o),u=new hf;return Object.assign(u,l),u}async function vT(e,t,n){var i,a;let o=0,l=0,u=new Em(new Response),m="upload";for(o=e.size;l<o;){const d=Math.min(SM,o-l),p=e.slice(l,l+d);l+d>=o&&(m+=", finalize");let y=0,v=IM;for(;y<kM&&(u=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[Gc]));)y++,await DM(v),v=v*NM;if(l+=d,((a=u==null?void 0:u.headers)===null||a===void 0?void 0:a[Gc])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function PM(e){return{size:e.size,type:e.type}}function DM(e){return new Promise(t=>setTimeout(t,e))}class LM{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await RM(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await MM(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await PM(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OM{create(t,n,i){return new qM(t,n,i)}}class qM{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rv="x-goog-api-key";class BM{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Rv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Rv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HM="gl-node/";class wf{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ft({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=PC(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const a=new BM(this.apiKey);this.apiClient=new PN({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:HM+"web",uploader:new LM,downloader:new CM}),this.models=new XN(this.apiClient),this.live=new jN(this.apiClient,a,new OM),this.batches=new lk(this.apiClient),this.chats=new zk(this.models,this.apiClient),this.caches=new Uk(this.apiClient),this.files=new Zk(this.apiClient),this.operations=new ZN(this.apiClient),this.authTokens=new pR(this.apiClient),this.tunings=new AM(this.apiClient),this.fileSearchStores=new ER(this.apiClient)}}const UM=["Alginate/Agar (Hydrocolloids) are unstable; pour immediately due to syneresis/imbibition.","Condensation reactions release by-products (Water for Polysulfide, Alcohol for C-Silicone) causing shrinkage.","Addition Silicone (PVS) is the most stable (No by-product) but inhibited by Sulfur in Latex gloves.","Polyether is the most hydrophilic elastomer but is very stiff (careful with undercuts).","Thixotropic materials flow under pressure but stay in place when static.","Rapid 'snap' removal of viscoelastic materials reduces permanent deformation."],FM=`
# Impression Materials  Detailed impression like cements are one of the highest yield topics so detail of them must DO

### Why impressions matter

* An impression is a **negative** reproduction of teeth and oral tissues.
* A cast/model is the **positive** reproduction poured from the impression. Accurate prostheses (crowns, RPDs, complete dentures) depend on an accurate impression and a stable cast.

---

## 1) Key glossary (high-yield meanings)

### Polymer / setting chemistry

* **Accelerator:** compound that speeds a reaction (often loosely used for catalyst in impression materials).
* **Catalyst:** reduces activation energy and is not consumed (in dentistry the term is sometimes misused for the reactor/initiator component).
* **Initiator:** starts polymerization (chemical / heat / photo).
* **Polymerization:** small molecules  long chains (polymers).
* **Addition reaction (chain-growth):** chains grow to maximum length **without by-products** (classic idea).
* **Condensation reaction (step-growth):** monomers form dimers  trimers  long chains; condensation impression materials produce **by-products** (e.g., water/alcohol).
* **Cross-linking:** joining polymer chains into a 3-D network (turns a paste into an elastic rubber).

![Polymerization Chemistry](assets/impression_chemistry.png)

![Rheology Diagram](assets/rheology_diagram.png)

### Material behavior terms youre tested on

1. **Rheology:** science of flow/viscosity.

   **Pseudoplasticity (shear thinning):** viscosity  immediately when shear ; returns **immediately** when shear stops.(toothpaste example it becomes thin/flows when u squeeze it )

2. **Thixotropy (time-dependent shear thinning):**

   **Under continuous stress/shear  viscosity gradually decreases (gets more fluid).**
   **When stress stops  it doesnt snap back; it thickens slowly over time (time-dependent recovery).**

| Feature | Pseudoplasticity | Thixotropy |
| :--- | :--- | :--- |
| **Reaction to Shear** | Becomes Thinner | Becomes Thinner |
| **Recovery Speed** | Immediate (Instant) | Delayed (Takes Time) |
| **Clinical Feel** | Flows when pushed, freezes when stopped. | Flows when pushed, stays runny for a moment, then thickens. |
| **Key Word** | "Shear Rate" dependent | "Time" dependent |

3. **Viscoelasticity:** acts more like an elastic solid when strained quickly, but **deforms over time** (creep) when the load is slow or prolonged  so **fast snap removal reduces distortion** (good for impression as no distortion=accuracy), while slow removal increases deformation.
4. **Set:** rigid/elastic enough to remove without permanent deformation.
5. **Setting time:** mixing start  loss of flow/plasticity (clinically: safe removal time).part to flow, causing permanent distortion.

### Tear Energy vs. Tear Strength

* **Tear Strength:** Force needed to break the material.
* **Tear Energy:** Accounts for how much the material stretches before breaking.

* **Polysulfide** has high tear energy (stretches a lot).
* **PVS** has lower tear energy but better recovery

**Hydrocolloid water balance (common MCQ traps)**

![Hydrocolloid Water Balance](assets/syneresis_imbibition.png)

6. **Syneresis:** gel **loses** fluid onto its surface  **shrinkage**.
7. **Imbibition:** gel **absorbs** water when immersed  **swelling**.
8. **Gelation:** sol  gel transformation.
9. **Micelle / fibrils:** the brush-heap network that traps water inside the gel structure.

### Clinical geometry

* **Undercuts:** recessed areas that make removal harder and increase tearing/distortion risk.
* **Inelastic:** cannot sustain meaningful elastic deformation; fractures if forced over undercuts. It will fracture instead of flexing  it breaks like glass, not deforms like rubber.

---

## 2) Ideal impression material requirements (7-point checklist)

To produce accurate replicas, impression materials should be:

1. Fluid enough to adapt to tissues
2. Viscous enough to stay in the tray
3. Set in a reasonable time (commonly targeted < 7 min)
4. Resist tearing/distortion on removal
5. Dimensionally stable long enough to pour casts (sometimes multiple pours)
6. Biocompatible
7. Cost-effective (time + equipment)

### Critical question answers ()

* **Which criteria relate to time in the mouth?**
  Mainly (3) setting within a reasonable time and (the practical side of) (12) handling during working time so it can be seated before setting progresses too far.
* **Which one is mainly about the set impression?**
  (4) resistance to tearing/distortion during removal and (5) dimensional stability after set (these are set material performance).

---

## 3) Classification of impression materials (the clean way to remember)

### A) By setting mechanism

**Reversible (physical change; can soften again with heat)**

* **Impression compound** (thermoplastic)
* **Agar** (reversible hydrocolloid; solgel by temperature)

**Irreversible (chemical reaction; cannot revert in clinic)**

* **Alginate** (irreversible hydrocolloid)
* **Elastomers:** polysulfide, silicones, polyether
* **ZOE paste, impression plaster**

### B) By mechanical behavior after set

**Inelastic (rigid; fractures over undercuts)**

* Impression plaster, ZOE, impression compound

**Elastic (flexible; can pass mild undercuts and rebound)**

* Hydrocolloids (agar/alginate) + elastomers

### C) By Pressure Applied on Tissues

This divides materials based on whether they push (displace) the gum tissue or record it in a resting state.

1. **Mucostatic (Non-Pressure)**

* **Concept:** Records the tissue in its passive, resting state without displacing it.
* **Characteristics:** These materials are very runny (low viscosity) and flow easily.
* **Examples:**
  * Impression Plaster (The classic example)
  * Zinc Oxide Eugenol (ZOE)
  * Light Body Elastomers (very thin mix)

2. **Mucocompressive (Pressure / Displacement)**

* **Concept:** Compresses and displaces the soft tissue while taking the impression.
* **Characteristics:** These materials are thick (high viscosity) and require force to seat the tray.
* **Examples:**
  * Impression Compound (The classic example)
  * Putty Elastomers
  * Soft Liners (when used functionally)

### The 6 big clinical steps (fixed prosthetic workflow) <span style="color: red; font-weight: bold;">can skip this</span>

1. **Tray selection/prep** (adhesive, rigidity, custom vs stock)
2. **Tissue management** (retraction, hemostasis, moisture control)
3. **Mixing / loading** (hand, static automix, dynamic)
4. **Impression technique** (multiple-mix, monophase, putty-wash)
5. **Removal** (proper set + snap removal)
6. **Pouring casts/dies** (stone compatibility, surfactants for silicones)

![Clinical Steps](assets/clinical_steps.png)

# 5) Each impression material  composition, setting, pros/cons, handling

## A) Alginate (Irreversible hydrocolloid)

### What it is

* **Elastic, hydrophilic**, easy/cheap for study models, preliminary impressions, many removable cases.

### Composition essentials (<span style="color: red">what you must know</span>)

* **Soluble alginate** (e.g., sodium/potassium alginate) = main polymer
* **Calcium sulfate** = provides Ca to cross-link (reactor)
* **Trisodium phosphate** = **retarder** (controls working time)
* **Fillers** (diatomaceous earth) = strength/body
* **Potassium titanium fluoride** = gypsum surface hardener/accelerator for better stone surface

### Setting reaction (classic exam explanation)

1. Retarder stage: Ca reacts **first** with phosphate (slows gelation)
2. After phosphate is used up: Ca cross-links alginate chains  **calcium alginate gel**

### Controlling setting time (safe vs unsafe)

* **Safe:** change **water temperature** (warmer = faster set; cooler = slower).
* **Not ideal:** changing W/P ratio or mixing time too much  can weaken gel, change elasticity/tear behavior.

### Proper mixing (why water-first matters)

* **Water first, then powder:** prevents dry pockets at the bottom, reduces lumps, shortens mixing timeespecially important for fast-set alginate.

### Removal & distortion control

* Dont remove too early: alginates strength/elasticity improves shortly after gelation.
* Remove with a **quick snap** (viscoelastic material: shorter strain time = less permanent deformation).

### Dimensional stability (big pitfall)

* **Syneresis (shrink) in air + imbibition (swell) in water**  pour **immediately** whenever possible.
* If you must delay: wrap in a **damp** towel + sealed bag (humid environment), dont soak in water.

### Disinfection (practical, minimal distortion)

* Prefer **spray + wrap + sealed bag (10 min)** rather than long immersion (immersion can distort). Keep immersion short if used.

### Typical uses

* Diagnostic casts, orthodontic models, preliminary impressions, many removable partial denture impressions (when ultra-fine detail isnt critical).

---

## B) Agar (Reversible hydrocolloid)

### What it is

* **Elastic, hydrophilic**, very accurate detail, but needs **special equipment** (conditioning unit + water-cooled trays often).

### Sol  gel mechanism

* **Heat**  gel becomes sol (liquefaction)
* **Cooling**  sol becomes gel (gelation)

### The 3-bath conditioning unit (a favorite theory question)

* **Boil ~100C (10 min):** liquefy
* **Store ~65C:** keep as sol until needed
* **Temper ~46C (short time):** cool to safe handling temp before seating

### Key problems

* **Syneresis + evaporation**  shrinkage if left out
* **Imbibition**  swelling if immersed
* Must **pour immediately** (or maintain near-100% humidity if delayed).

### Clinical note (why its less common now)

* Technique-sensitive, extra equipment, tears more easily vs elastomers.

---

## Elastomeric impression materials (rubber impressions)

### What makes an elastomer an elastomer?

* Polymer-based materials that **cross-link** on setting into a rubbery network.
* Typically supplied as **base + catalyst/accelerator** systems in different viscosities (light, medium, heavy, putty).

### C) Polysulfide (Elastomer; condensation-type)

**Composition essentials**

* **Base paste:** polysulfide polymer with mercaptan (-SH), fillers, plasticizer; may include sulfur accelerator.
* **Catalyst/accelerator paste:** traditionally includes **lead dioxide** (brown color) + fillers/plasticizer; retarders (oleic/stearic acid) to control set.

**Setting reaction + by-product**

* Cross-linking occurs; **water is produced as by-product** (important for stability).
* Loss of this by-product over time  dimensional change  **pour early**.

**Properties (how it behaves clinically)**

* **High tear resistance** (good for thin sulcus areas)
* More flexible / lower stiffness vs many elastomers  easier removal from undercuts
* <span style="color: red">Odor, can stain</span>, longer working/setting times
* Often benefits from **custom tray** to reduce bulk and shrink-related distortion

**Best for**

* Cases where tear resistance and flexibility matter, but you can pour promptly and manage odor/handling.

---

### D) Condensation silicone

**Key idea**

* Sets by cross-linking and produces a volatile by-product (alcohol)  evaporation  shrinkage  **pour immediately** is the rule.

**Clinical technique tied to the chemistry**

* **Putty-wash** was popular to reduce shrink effects (less wash bulk; putty acts like an intraoral custom tray).

**Main disadvantage**

* Hydrophobic + by-product  stability issues if delayed.

---

## E) Addition silicone (PVS / VPS)

**Why its loved**

* Addition polymerization: **no classic volatile by-product**, so its **dimensionally stable** and can be poured multiple times (clinically very forgiving).

**Practical pitfalls to remember**

* **Hydrogen gas release** can create bubbles/voids in stone if poured too soon (many products include scavengers; otherwise delay pour).
* **Latex/sulfur inhibition:** sulfur compounds can inhibit set if the prep/tooth was touched with latex gloves (very testable).

**Hydrophobicity vs hydrophilized PVS**

* Standard PVS is hydrophobic; hydrophilized versions add surfactants to improve wettability during pouring.

**Best for**

* Fixed prosthesis (crowns/bridges), implant impressions (with proper technique), multiple pours, when you need maximum stability.

---

### F) Polyether

**What makes it different?**

* Generally the <span style="color: red">most hydrophilic</span> elastomer group  good wetting, good detail in moist environments compared with silicones.
* Typically <span style="color: red">stiffer</span> (higher modulus) than many others  can be harder to remove from significant undercuts.
* Must avoid long immersion disinfection (water uptake  distortion).

**Slide points to remember**

* Base + catalyst pastes; good mechanical/compressive properties; available in viscosities.

**Best for**

* Accurate impressions where moisture control is challenging, and undercuts are controlled/blocked.

---

# 6) Inelastic impression materials

## A) ZOE (Zinc OxideEugenol) impression paste

**What its used for**

* Edentulous mucostatic impressions, bite registrations, surgical dressings, etc.

**Why it sets faster in humidity (the exam explanation)**

* Setting is **moisture-assisted**: zinc oxide hydrolyzes toward zinc hydroxide; eugenol reacts to form zinc eugenolate. More moisture  faster progress.

**Pros/cons**

* **Very stable dimensionally** once set (great for storing).
* **Rigid/inelastic**  not for undercuts.
* Eugenol can irritate/sting; EBA substitutes reduce irritation.

## B) Impression plaster <span style="color: red">not used</span>

* Very fluid  mucostatic soft-tissue impressions.
* Brittle  may need to fracture to remove over undercuts, then reassemble.
* Useful in some implant splinting/transfer contexts because rigidity can stabilize components.

## C) Impression compound (modeling plastic)

**Temperature behavior is everything**

* **Thermoplastic:** soft on heating, hard on cooling (reversible).
* Low thermal conductivity  needs **uniform slow heating** and thorough cooling before removal to avoid warping.

**Clinical uses**

* Primary impressions for edentulous cases (tray compound)
* Border molding for custom trays
* Often combined with a wash material (ZOE, plaster, hydrocolloid, elastomer) for secondary impression.

---

# 7) Mixing system <span style="color: red; font-weight: bold;">can skip</span>

## Hand mixing

* Equal lengths of base/catalyst; mix to uniform color, avoid streaks.

## Static automix (cartridge + mixing tip)

* Stationary helical elements **split and recombine** streams repeatedly  many thin layers  uniform mix with fewer voids.

## Dynamic mechanical mixing

* The motor-driven device uses an **impeller** inside tip to mix as it extrudes (good for high viscosity materials.

**Main difference (static vs dynamic):** static has **no moving parts** inside the tip; dynamic has a **motor-driven** mixer/impeller.

---

# 8) Impression techniques (and why they fail)

## Multiple-mix (light body + heavy body)

* Light body syringed around margins; heavy body in tray seats over it.
* If either material goes past working time before seating  poor bonding and distortion risk.

## Monophase

* Same material used in tray + syringe.
* Relies on **shear thinning**: in syringe it becomes less viscous; in tray it holds shape.

## Putty-wash

* Putty forms tray; wash captures detail.
* Too little wash space or too much seating pressure can cause rebound distortion (short/narrow dies).

### The classic failure mechanism (important)

* Seating when material has begun developing elasticity  compresses  rebounds (spring back)  dies become too narrow/short (fixed prosthetic misfit).

---

# 9) Removal rules (viscoelastic logic)

* Do **not** remove until adequately set (test leftover material outside the field).
* Break the seal first, then remove with a <span style="color: red">quick snap:</span>
  * Less time under strain  less permanent deformation.
* Avoid rocking/teasing as the main removal method (teasing increases time-dependent deformation).

---

# 10) Dimensional inaccuracy  the 6 causes list

1. Polymerization shrinkage
2. Loss of by-product (water/alcohol)
3. Thermal contraction (37C  room temp)
4. Water/disinfectant absorption over time
5. Incomplete recovery (viscoelastic)
6. Plastic deformation (true permanent change)

**High yield:** condensation silicone + polysulfide are more affected by (2); polyether is more affected by (4) if stored wet; PVS is strong on (56) recovery.

---

# 11) Quick selection guide (clinical use)

* **Diagnostic casts / ortho models:** Alginate (fast, hydrophilic, cheap)(also for dentate patient)
* **High-accuracy fixed prosthesis:** PVS (addition silicone) or polyether
* **Moist field challenge:** Polyether (better wetting than silicone families)
* **Deep sulcus / thin areas where tearing is risky:** Polysulfide (high tear resistance)
* **Edentulous mucostatic:** ZOE paste or impression plaster (when undercuts are minimal)
* **Border molding / preliminary edentulous tray shaping:** Impression compound

---

# 12) Common failure patterns (what to check first)

* **Bubbles/voids:** air during mixing, syringe tip not kept within material, moisture/debris on tooth
* **Rough surface / unset patches:** wrong ratio, incomplete mixing, contamination (latex with PVS), premature removal
* **Distortion:** tray flexure, movement during set, too much bulk, seating after working time, delayed pour for unstable materials
* **Tearing in sulcus:** inadequate bulk, premature removal, thin wash in deep sulcus, severe undercuts, wrong removal direction

---

## Summary table <span style="color: red">VVIMP</span>

**If u cannot remember all just remember the first one in the order at least**

Important to note that polysulphide will not tear easily but that doesn't help much because it deforms it has the lowest elastic recovery

| Property | Ranking (Best/Most/Greatest/Longest  Worst/Least/Shortest) |
| :--- | :--- |
| **Working time & setting time** | Polysulfide > Silicones (addition & condensation) > Polyether |
| **Stiffness** | Polyether > Addition silicone (PVS) > Condensation silicone > Polysulfide |
| **Tear strength** | Polysulfide > Addition silicone (PVS) > Polyether > Condensation silicone |
| **Elastic recovery** | Addition silicone (PVS) > Condensation silicone > Polyether > Polysulfide |
| **Dimensional stability** | Addition silicone (PVS) > Polyether > Polysulfide > Condensation silicone |
| **Wettability** | Hydrocolloids > Polyether > Hydrophilic addition silicone > Polysulfide > Hydrophobic addition silicone > Condensation silicone |

**Addition silicon is the best elastomeric material over all just keep sulfur away and also**

| Material Condition | Effect on Addition Silicone (PVS) |
| :--- | :--- |
| **Old/Fully Cured Composite** | No Effect. Safe to take impression. |
| **Fresh Composite (Cut/Prepped)** | No Effect. Safe to take impression. |
| **Fresh Composite (Uncut Surface)** | **INHIBITION.** PVS will not set (stays gooey).the platinum catalyst will be poisoned |

<br/>

---

**Above portion over all properties and uses similar for all dental fields other subjects now we see only dm aspect**

**Below is one single coherent exam note for ALL impression materials (composition + setting mechanism + key points).**

# Impression Materials  One Coherent Exam Note
**(Composition + Setting + Key Points)**

### A) HYDROCOLLOIDS

**1) Agar (Reversible Hydrocolloid)**
**Type:** Elastic, reversible, hydrophilic
**Setting (reaction system):** Physical gelation (temperature)
* **Heat:** gel  sol
* **Cool:** sol  gel

**Composition (main):**
* **Agar + water** (major)
* **Borax** (strengthens gel)
* **KSO** (improves gypsum set)
* **Fillers**, plasticizers, preservatives, color/flavor

**Key points (exam):**
* **No chemical by-product**, but water movement causes distortion
* **Syneresis/imbibition**  pour immediately

**The "Hysteresis" Loop (Agar)**
* **Liquefaction:** We boil it at 100C to turn it into a Sol (Liquid).
* **Storage:** We keep it ready in a bath at 65C.
* **Tempering:** Before putting it in the mouth, we cool it to 45C (so it doesn't burn the patient).
* **Gelation (Setting):** It turns back to a Gel at 43C.
  * Note: This requires Water-Cooled Trays to lower the temperature quickly. The mouth is too warm to set it efficiently.
Its basically heating a gel and then cooling a gel to get an impression

**2) <span style="color: red">Alginate (Irreversible Hydrocolloid)</span>**
**Type:** Elastic, irreversible, hydrophilic
**Setting (reaction system):** Chemical gelation (Ca crosslinking)
* **Retarder stage:** CaSO + NaPO  Ca(PO) (delays set)
* **Final gel:** Soluble alginate + Ca  calcium alginate gel (insoluble)

**Composition (main):**
* **Sodium/potassium alginate** (soluble)
* **Calcium sulfate** (reactor)
* **Trisodium phosphate** (retarder)
* **Diatomaceous earth** (filler/strength)
* **Potassium titanium fluoride** (better gypsum surface)

**Key points (exam):**
* **No volatile by-product**, but syneresis/imbibition  pour ASAP
* Generally less accurate than elastomers (not for fine crown margins)

The reaction of sodium alginate is very fast, leaving no working time. Therefore, a Retarder (Sodium Phosphate) is added. The reactor (CaSO4) reacts with the retarder first, keeping it occupied. Once the retarder is finished, the reactor then reacts with the alginate to form CALCIUM Alginate (the Gel)."

### B) THERMOPLASTIC (RIGID) MATERIALS

**3) <span style="color: red">Impression Compound</span>**
**Type:** Rigid when set, thermoplastic
**Setting (reaction system):** Physical change (heat softens, cooling hardens)

**Composition (main):**
* **Resins/waxes** (softening + flow)
* <span style="color: red">**Stearic acid**</span>/plasticizers
* **Fillers** (talc/diatomaceous earth)

**Key points (exam):**
* **High thermal contraction**  distortion risk
* Used for preliminary edentulous impressions + border molding, not crown margins
This is a thermoplastic material its like a wax(technically it is a wax)

When heated (~5560 C): it softens and becomes moldable (high flow).
When cooled to mouth temperature (~37 C): it hardens/sets by physical cooling (low flow).
No chemical reaction and no by-product  it just changes state with temperature.

### C) RIGID CHEMICAL PASTES

**4) ZOE Impression Paste (Zinc OxideEugenol)(already in detail in cemenets)**
**Type:** Rigid, mucostatic, accurate for edentulous
**Setting (reaction system):** Acidbase chelation
* **ZnO + eugenol**  zinc eugenolate

**Composition:**
* **Base paste:** ZnO + oils/resins/fillers
* **Catalyst paste:** eugenol + accelerators (often zinc acetate) + fillers

**Key points (exam):**
* **No by-product**  good stability
* **Brittle**  avoid undercuts
* **Eugenol** may irritate/burn

### D) ELASTOMERS (RUBBER IMPRESSION MATERIALS)

**5) Polysulfide**
**Type:** Elastic, hydrophobic-ish, high tear strength, messy
**Setting (reaction system):** Condensation polymerization

**Key chemicals:**
* **Base:** mercaptan (SH)
* **Catalyst:** <span style="color: red">lead dioxide (PbO)</span>
**By-product:** <span style="color: red">Water</span>

**Key points (exam):**
* **Water evaporates**  shrinkage  pour early (~within 1 hour)
* **PbO**  brown color + stains, SH  bad odor

**6) Condensation Silicone (C-silicone)**
**Type:** Elastic, hydrophobic, moderate accuracy
**Setting (reaction system):** Condensation polymerization

**Key chemicals:**
* **Base:** hydroxyl-terminated PDMS (OH)
* **Cross-linker:** alkyl silicate
* **Catalyst:** <span style="color: red">stannous octoate (tin)</span>
**By-product:** <span style="color: red">Ethyl alcohol</span>

**Key points (exam):**
* **Alcohol evaporates fast**  highest shrinkage among elastomers
* **Pour ASAP** (~within 30 min)

**7) Addition Silicone (PVS/VPS)**
**Type:** Elastic, very accurate, excellent stability
**Setting (reaction system):** Addition (hydrosilylation)

**Key chemicals:**
* **Base:** vinyl-terminated polysiloxane
* **Cross-linker:** SiH (poly(methylhydrogen siloxane))
* **Catalyst:** <span style="color: red">platinum (Pt)</span>
**By-product:** None

**Key points (exam):**
* **Excellent dimensional stability** (can delay pour)
* **Sulfur inhibits Pt** (latex gloves, some materials)  incomplete set

**8) Polyether**
**Type:** Elastic but very rigid/stiff, hydrophilic (good wetting)
**Setting (reaction system):** Cationic ring-opening polymerization

**Key chemicals:**
* **Base:** polyether with aziridine rings
* **Initiator:** aromatic sulfonate ester
**By-product:** None

**Key points (exam):**
* **Very stable**
* **Hard to remove from undercuts** due to stiffness

### EXAM SUPER-SUMMARY (Most Tested)
**By-product  shrinkage risk**
* **Polysulfide**  water  shrink
* **C-silicone**  alcohol  shrink (worst)
* **PVS**  none  stable
* **Polyether**  none  stable
* **Agar/Alginate**  water movement (syneresis/imbibition)  pour immediately

**When to pour (high yield)**
* **Alginate/Agar:** immediately
* **C-silicone:** ~30 min
* **Polysulfide:** ~1 hour
* **PVS/Polyether:** stable (delayed pour acceptable

**Disinfection Protocol**
* **Alginate/Polyether (Hydrophilic):** Spray with disinfectant (chlorine/iodophor), wrap in damp paper towel for <10 mins. **Do not immerse.**
* **Silicones/Polysulfides (Hydrophobic):** Can be immersed in glutaraldehyde or phenol solutions for the required time (usually 10+ mins).

### Type of Failure Causes (Agar vs Alginate)

| Type of Failure | Causes: Agar (Reversible) | <span style="color: red">Causes: Alginate (Irreversible)imp</span> |
| :--- | :--- | :--- |
| **Grainy Material** |  Inadequate boiling<br> Storage temperature too low<br> **Storage time too long** |  **Improper mixing**<br> Prolonged mixing<br> Excessive gelation<br> Water/powder ratio too low |
| **Separation of Syringe Materials** |  **Water-soaked tray** material surface not removed<br> Premature gelation of either material |  Not applicable |
| **Tearing** |  **Inadequate bulk**<br> Premature removal from mouth<br> Syringe material partially gelled when tray was seated |  **Inadequate bulk**<br> Moisture contamination<br> **Premature removal** from mouth<br> Prolonged mixing |
| **External Bubbles** |  **Gelation of syringe material**, preventing flow |  **Undue gelation**, preventing flow<br> **Air incorporated** during mixing |
| **Irregularly Shaped Voids** |  Material **too cold** |  **Moisture or debris** on tissue |
| **Rough or Chalky Stone Model** |  Inadequate cleansing of impression<br> Excess water or hardening solution left in impression<br> Premature removal of die<br> Improper manipulation of stone |  **Air drying of impression** before pouring (Major cause)<br> Inadequate cleaning of impression<br> Excess water left in impression<br> Premature removal of impression<br> Model left in impression too long<br> Improper manipulation of stone |
| **Distortion** |  Impression not poured within **30 min**<br> Movement of tray during gelation<br> Premature removal from mouth<br> Improper removal from mouth<br> Use of ice water during initial gelation |  Impression **not poured immediately**<br> Movement of tray during gelation<br> Premature removal from mouth<br> Improper removal from mouth |

![Impression Materials Summary Table](assets/impression_downloadable_summary.png)
`,Mv=[{id:"imp-3",question:"Why must Condensation Silicone impressions be poured immediately/soon?",options:["Hydrogen gas causes voids","Water absorption causes swelling","Ethanol by-product evaporates causing shrinkage","Platinum catalyst continues curing for 24 h"],correctAnswerIndex:2,explanation:"Condensation silicone releases ethyl alcohol; evaporation  dimensional shrinkage."},{id:"imp-5",question:"Which material is naturally hydrophilic and works well in moisture but should not be stored in water?",options:["Condensation silicone","Addition silicone (PVS)","Polyether","Impression compound"],correctAnswerIndex:2,explanation:"Polyether is inherently hydrophilic (good in moisture) but absorbs water (imbibition) if stored in liquid."},{id:"imp-6",question:"Which alginate powder component acts as a retarder to provide working time?",options:["Calcium sulfate","Trisodium phosphate","Potassium titanium fluoride","Diatomaceous earth"],correctAnswerIndex:1,explanation:"Phosphate preferentially ties up Ca first; alginate crosslinking starts after phosphate is depleted."},{id:"imp-new-1",question:"In alginate impression material, which component is the main soluble hydrocolloid that reacts with calcium ions to form the elastic gel?",options:["Calcium sulfate","Sodium alginate","Diatomaceous earth","Trisodium phosphate"],correctAnswerIndex:1,explanation:"Sodium alginate dissolves in water to form the sol and reacts with calcium ions to form the calcium alginate gel."},{id:"imp-16",question:"Polyether stiffness compared to other elastomers is best described as:",options:["Lowest modulus; easiest removal","High modulus; difficult removal from undercuts","Similar to polysulfide; very flexible","Only stiff before set, soft after set"],correctAnswerIndex:1,explanation:"Polyether is classically the stiffest elastomer (high modulus), harder to remove from undercuts."},{id:"imp-22",question:"You are a clinical supervisor... patient has developed acute redness, swelling, and itching (signs of contact dermatitis/hypersensitivity)... Among the elastomeric materials, which one is the most likely culprit for this allergic reaction?",options:["Addition Silicone (PVS)","Polysulfide","Polyether","Condensation Silicone"],correctAnswerIndex:2,explanation:"Polyether. Short reasoning: Polyether is the elastomer most commonly linked to allergic/contact reactions compared with silicones and polysulfide."},{id:"imp-24",question:"Primary function of diatomaceous earth in alginate powder:",options:["Retarder","Reactor source of Ca","Filler increasing strength","Photoinitiator"],correctAnswerIndex:2,explanation:"It provides body and improves strength and rigidity."},{id:"imp-27",question:"A dentist is using a condensation silicone... what is the best time window to pour the stone cast to minimize dimensional inaccuracy?",options:["After 1 hour to allow for elastic recovery","After 24 hours to ensure full polymerization","Immediately or within 1530 minutes","After 1 week, similar to PVS"],correctAnswerIndex:2,explanation:"Immediately or within 1530 minutes. Justification: Condensation silicone undergoes a condensation reaction that releases ethanol. Ethanol evaporates quickly, producing significant shrinkage..."},{id:"imp-28",question:"Why is zinc oxideeugenol (ZOE) impression paste generally unsuitable for recording the fine details of a crown preparation?",options:["It is too fluid to stay in the tray.","It reacts with the temporary crown material.","It is inelastic and may fracture/lock in undercuts during removal.","It sets too slowly."],correctAnswerIndex:2,explanation:"It is inelastic and will fracture/lock in undercuts. Justification: ZOE sets into a rigid, inelastic material..."},{id:"imp-29",question:"Which component in polysulfide impression material is responsible for its characteristic dark brown color (and associated staining)?",options:["Titanium dioxide","Sulfur","Dibutyl phthalate","Lead dioxide (PbO)"],correctAnswerIndex:3,explanation:"Lead dioxide (PbO). Justification: In polysulfide impression materials, lead dioxide (PbO) is present in the accelerator/catalyst paste..."},{id:"imp-32",question:"Which impression material releases water as a by-product during its setting reaction, meaning the impression should be poured within about 3060 minutes to reduce dimensional change (shrinkage)?",options:["Polysulfide","Addition silicone (PVS)","Polyether","Impression compound"],correctAnswerIndex:0,explanation:"Polysulfide. Justification: Polysulfide sets via a condensation reaction... produces water as a by-product..."},{id:"imp-33",question:"What is the primary role of Diatomaceous Earth in an alginate impression powder?",options:["It acts as a filler to provide stiffness and strength.","It acts as a retarder.","It acts as a reactor.","It provides the dustless coating."],correctAnswerIndex:0,explanation:"It acts as a filler to provide stiffness and strength. Justification: Diatomaceous earth makes up the bulk of alginate powder (often ~5060%)..."},{id:"imp-34",question:"Which property of Polyether impression material makes it difficult to remove from the mouth, especially in undercut areas?",options:["High plasticity","High stiffness (high modulus of elasticity)","High tear strength","Low surface tension"],correctAnswerIndex:1,explanation:"High stiffness (high modulus of elasticity). Statement (key concept): Polyether sets into a very rigid elastomer..."},{id:"imp-38",question:"Which impression material shows hysteresis, meaning there is a temperature gap between liquefaction (sol) and gelation (gel) temperatures?",options:["Impression Compound","Polyether","Agar","Alginate"],correctAnswerIndex:2,explanation:"Agar. Statement (key concept): Agar (reversible hydrocolloid) demonstrates thermal hysteresis..."},{id:"imp-40",question:"If an Alginate impression is removed from the mouth and left on the countertop for 1 hour in dry air, it will distort primarily due to:",options:["Polymerization shrinkage","Thermal expansion","Imbibition","Syneresis and evaporation"],correctAnswerIndex:3,explanation:"Syneresis and evaporation. Statement (key concept): Alginate (an irreversible hydrocolloid) is a water-based gel..."},{id:"imp-41",question:"Which impression material is most likely to produce hydrogen gas as a side effect?",options:["Addition Silicone (PVS)","Polysulfide","Condensation Silicone","Polyether"],correctAnswerIndex:0,explanation:"Addition Silicone (PVS). Statement (key concept): Addition silicone (PVS) sets by an addition (hydrosilylation) reaction. Some formulations can release hydrogen gas (H)..."}],Pv=[{id:"imp-1",question:"Addition Silicone (PVS) sets everywhere except the margin (margin is gooey). Most likely cause?",options:["Too much tray adhesive","Ethanol by-product evaporation","Sulfur contamination inhibited polymerization","Water contamination accelerated setting"],correctAnswerIndex:2,explanation:"Platinum catalyst in PVS can be poisoned by sulfur (latex gloves / some cords), so the contaminated area stays unset."},{id:"imp-2",question:"Which phenomenon explains: flows easily through syringe under stress but doesnt drip off tray at rest?",options:["Thixotropy","Viscoelasticity","Pseudoplasticity","Syneresis"],correctAnswerIndex:2,explanation:"Pseudoplasticity (shear thinning) = viscosity drops immediately under shear and recovers immediately when stress stops."},{id:"imp-4",question:"Why is snap (quick jerk) removal recommended for elastomeric impressions?",options:["Prevents tearing by increasing viscosity","Minimizes permanent plastic deformation from viscoelastic flow","Increases wetting on the tooth","Prevents hydrogen bubbles"],correctAnswerIndex:1,explanation:"Fast strain favors elastic recovery; slow removal allows viscous flow  permanent distortion."},{id:"imp-7",question:"Patient has very mobile teeth / severe periodontal undercuts. Which material should be avoided due to high stiffness?",options:["Alginate","Polysulfide","Polyether","Agar"],correctAnswerIndex:2,explanation:"Polyether has a high modulus (stiff), risking locking into undercuts or even extracting mobile teeth."},{id:"imp-10",question:"Agar tray material left too long in tempering bath (>10 min). Primary consequence?",options:["Increased tear strength","Early gelation in tray","Ethanol evaporation","Inhibition by sulfur"],correctAnswerIndex:1,explanation:"Partial gelation in tray prevents flow/adaptation and interferes with bonding to syringe material."},{id:"imp-12",question:"Why is agar syringe material never tempered?",options:["Tempering increases its stiffness for support","It must stay as a fluid sol to adapt and bond","It needs ethanol to evaporate","It must become thixotropic"],correctAnswerIndex:1,explanation:"It must remain fluid (sol) for adaptation; staying untempered also supports bonding with tray material."},{id:"imp-13",question:"In polysulfide, lead dioxide has which dual function?",options:["Filler + surfactant","Retarder + plasticizer","Reactor/oxidizer + provides brown color","Crosslinker + releases ethanol"],correctAnswerIndex:2,explanation:"Lead dioxide supplies oxygen for reaction and gives characteristic brown color."},{id:"imp-15",question:"Most common cause of separation between agar tray and agar syringe material?",options:["No tray adhesive applied","Syringe material was tempered","Water-soaked surface layer on tray not removed","Use of cold water circulation"],correctAnswerIndex:2,explanation:"The wet superficial layer blocks bonding if not scraped/removed."},{id:"imp-17",question:"Why does alginate compressive strength increase markedly in first ~4 minutes after gelation?",options:["Water evaporates rapidly","Ethanol by-product forms","Crosslinking continues and network matures","Plasticizer leaches out"],correctAnswerIndex:2,explanation:"Calcium-alginate network continues organizing/strengthening after initial set."},{id:"imp-19",question:"You are preparing to take a preliminary impression using Impression Compound... it had become grainy, sticky, and unworkable. What is the primary cause of this degradation?",options:["Imbibition of water causing the filler to dissolve","Leaching out of the plasticizer","Polymerization of the resin matrix due to heat","Syneresis causing surface collapse"],correctAnswerIndex:1,explanation:"Leaching out of the plasticizer (stearic acid/stearin). Short reasoning: Prolonged hot-water immersion extracts/leaches the plasticizer  compound loses proper flow/cohesion  turns grainy and sticky."},{id:"imp-25",question:"A patient reports an intense burning sensation on their lips and alveolar ridge immediately after the insertion of a custom tray loaded with Zinc Oxide Eugenol (ZOE) impression paste. What is the most likely cause?",options:["Thermal shock from the setting reaction","The acidity of the impression material","Hypersensitivity to zinc oxide","Contact stomatitis due to eugenol"],correctAnswerIndex:3,explanation:"Contact stomatitis due to eugenol. Short reasoning: Eugenol is a phenolic compound that can irritate mucosa and trigger chemical burns/contact stomatitis, causing immediate burning."},{id:"imp-26",question:"In monophase technique, viscosity decreases during syringe injection due to:",options:["Low temperature in syringe","High shear rate in narrow tip","Ethanol by-product formation","Polymer chains shortening"],correctAnswerIndex:1,explanation:"High shear rate triggers shear thinning."},{id:"imp-30",question:"During a final impression with Addition Silicone (PVS), the material fails to set only in the area adjacent to a newly placed composite core build-up... What is the most likely chemical cause?",options:["Moisture contamination from the dentin.","Inhibition (poisoning) of the platinum catalyst by residual methacrylates/tertiary amines from the composite.","Reaction with the aluminum chloride hemostatic agent.","Thermal shock from the curing light."],correctAnswerIndex:1,explanation:"Inhibition of the platinum catalyst by residual methacrylates/amines. Justification: Addition silicone (PVS) sets by a platinum-catalyzed addition reaction. Certain contaminants can poison the platinum catalyst..."},{id:"imp-31",question:"The snap removal (quick jerk) technique is critical when removing viscoelastic impression materials because it:",options:["Increases the flow of the material into the sulcus.","Stops the chemical reaction immediately.","Maximizes elastic recovery and minimizes viscous flow (permanent deformation).","Prevents the tearing of thin sections."],correctAnswerIndex:2,explanation:"Maximizes elastic recovery and minimizes viscous flow (permanent deformation). Justification: Viscoelastic materials behave like both a spring (elastic) and a dashpot (viscous). If you remove the impression slowly..."},{id:"imp-35",question:"Why is Agar (Reversible Hydrocolloid) considered an excellent material for crown impressions, even though it requires special conditioning equipment...?",options:["It can be poured continuously for 7 days.","It is naturally hydrophilic and captures fine detail well in moist environments.","It is rigid enough to splint implants.","It has the highest tear strength of all impression materials."],correctAnswerIndex:1,explanation:"It is naturally hydrophilic and captures fine detail well in moist environments. Statement (key concept): Agar has a high water content..."},{id:"imp-37",question:"Manufacturers add surfactants to Addition Silicone (PVS). What is the main reason for adding these surfactants?",options:["To make the material completely resistant to sulfur/latex inhibition","To significantly shorten the setting time","To make gypsum slurry and oral moisture spread better","To markedly increase tear strength"],correctAnswerIndex:2,explanation:"To make gypsum slurry and oral moisture spread better. Statement (key concept): Standard PVS is hydrophobic..."},{id:"imp-42",question:"You are making an implant-level impression for a case with multiple impression copings that are not parallel. What is the primary disadvantage of using polyether as the impression material in this situation?",options:["The material will tear upon removal.","The material will distort permanently.","The high rigidity makes removal extremely difficult and may loosen the copings or tray.","The setting time is too fast to seat the tray."],correctAnswerIndex:2,explanation:"The high rigidity makes removal extremely difficult and may loosen the copings or tray. Statement (key concept): Polyether has a high modulus of elasticity (high stiffness/rigidity)..."},{id:"imp-45",question:"During a crown impression appointment, you need an elastomeric material that offers the least working time (very short mix + load + seat window) and then shows a distinct snap set, leaving minimal time for manipulation. Which elastomer typically has the shortest working time?",options:["Addition Silicone (PVS)  Fast set","Polyether","Condensation Silicone","Polysulfide"],correctAnswerIndex:1,explanation:"Polyether."},{id:"imp-46",question:"A border-molding impression is being made with Impression Compound. The tray is removed from the mouth before the compound has fully cooled to oral temperature. What is the most likely consequence?",options:["It will expand rapidly.","It will undergo plastic deformation (drag/distortion).","It will be too brittle and fracture.","It will adhere to the teeth."],correctAnswerIndex:1,explanation:"It will undergo plastic deformation (drag/distortion). Statement (key concept): Impression compound is a thermoplastic material..."},{id:"imp-new-2",question:"In alginate impression material, which ingredient makes up the largest percentage by weight of the powder (i.e., the main bulk/filler component)?",options:["Sodium alginate","Calcium sulfate","Diatomaceous earth","Trisodium phosphate"],correctAnswerIndex:2,explanation:"Diatomaceous earth is the main filler (~5060% by weight). It provides bulk, strength, and improves handling but does not participate in the gel-forming reaction."}],Dv=[{id:"imp-8",question:"In cationic polymerization of polyether, which component functions as the initiator?",options:["Platinum salt","Stannous octoate","Aromatic sulfonate ester","Trisodium phosphate"],correctAnswerIndex:2,explanation:"Aromatic sulfonate ester generates cations that open aziridine rings, initiating polymerization."},{id:"imp-9",question:"Why can polysulfide show high Tear Energy despite being prone to distortion?",options:["It is very rigid (high modulus)","It produces ethanol by-product","It can elongate greatly (high ) before tearing","It is hydrophilic and absorbs water"],correctAnswerIndex:2,explanation:"Tear Energy accounts for extension; polysulfide stretches a lot before tearing (high ), though it may distort permanently."},{id:"imp-11",question:"Impression compound distortion due to relaxation is worsened mainly by:",options:["High hydrophilicity","Low thermal conductivity","High contact angle","Hydrogen gas evolution"],correctAnswerIndex:1,explanation:"Outer cools/hardens first while inside stays hot; later internal cooling causes contraction/stress  distortion (relaxation)."},{id:"imp-14",question:"Polyether stored in water swells (imbibition). What simultaneous process degrades properties?",options:["Ethanol evaporation","Leaching of water-soluble plasticizer","Platinum poisoning","Syneresis"],correctAnswerIndex:1,explanation:"Water uptake occurs while plasticizer leaches out, altering flexibility and accuracy."},{id:"imp-18",question:"In addition silicone reaction, which group reacts with the vinyl group?",options:["OH terminal group","SH group","SiH group","Phosphate group"],correctAnswerIndex:2,explanation:"SiH on polymethylhydrosiloxane adds across vinyl groups (Pt-catalyzed)."},{id:"imp-20",question:"To reduce hydrogen gas voids in gypsum casts from PVS, manufacturers add:",options:["Borax","Palladium","Trisodium phosphate","Potassium titanium fluoride"],correctAnswerIndex:1,explanation:"Noble metals (commonly palladium) act as hydrogen scavengers."},{id:"imp-21",question:"A dentist takes a diagnostic alginate impression... slowly teases and rocks the tray out... the abutment teeth are slightly wider and distorted compared to reality. What is the most likely cause of this distortion?",options:["The slow removal allowed the alginate to absorb saliva (imbibition).","The slow removal caused permanent deformation because alginate is viscoelastic.","The alginate tore internally because the tear strength was exceeded.","The slow removal caused syneresis (water loss) due to prolonged air exposure."],correctAnswerIndex:1,explanation:"The slow removal caused permanent deformation because alginate is viscoelastic. Short reasoning: Slow removal allows time-dependent viscous flow  permanent set  teeth on the cast appear distorted/wider."},{id:"imp-23",question:"In condensation silicone, the alkyl silicate primarily acts as:",options:["Plasticizer","Cross-linking agent","Hydrogen scavenger","Retarder"],correctAnswerIndex:1,explanation:"Alkyl silicate reacts with terminal OH groups to create the 3D network."},{id:"imp-36",question:"Which disinfectant is commonly recommended for Zinc OxideEugenol (ZOE) impression paste but is NOT typically preferred for hydrocolloids...?",options:["Alcohol immersion","2% Glutaraldehyde (Alkaline)","Boiling water","Chlorine compounds"],correctAnswerIndex:1,explanation:"2% Glutaraldehyde (Alkaline). Statement (key concept): Glutaraldehyde is effective for ZOE..."},{id:"imp-39",question:"Why is Potassium Sulfate added to the setting bath or formulation of Agar (reversible hydrocolloid)...?",options:["To counteract the retarding effect of borax/sol on the gypsum surface.","To increase the shelf life.","To improve taste.","To act as a retarder for the impression."],correctAnswerIndex:0,explanation:"To counteract the retarding effect of borax/sol on the gypsum surface. Statement (key concept): Borax in agar acts as a strengthener, but it can retard the setting of gypsum..."},{id:"imp-43",question:"A clinician places a ferric sulfate hemostatic agent around the gingival sulcus before making an impression with Addition Silicone (PVS). The area is not rinsed thoroughly and the impression is taken. What is the most likely outcome?",options:["It dissolves the filler particles.","The sulfur in the ferric sulfate inhibits the platinum catalyst.","The iron stains the impression black.","It accelerates the setting reaction violently."],correctAnswerIndex:1,explanation:"The sulfur in the ferric sulfate inhibits the platinum catalyst. Justification (why B is correct): If a hemostatic agent residue is left on the tooth/gingiva, it can interfere with PVS polymerization..."},{id:"imp-44",question:"After removing an elastomeric impression from a mouth with mild undercuts, you notice the impression shows shape change that does not fully rebound back (i.e., highest permanent deformation / lowest elastic recovery after strain). Which elastomer is most likely to show this behavior?",options:["Condensation Silicone","Polysulfide","Polyether","Addition Silicone (PVS)"],correctAnswerIndex:1,explanation:"Polysulfide. Statement (key concept): Permanent deformation in elastomers happens because the material has a viscous (flow) component..."}],GM=`
# GYPSUM PRODUCTS (DENTAL)  Combined High-Yield Notes

## 1) What gypsum is + where it comes from

 Gypsum = calcium sulfate dihydrate (CaSO2HO).  
IN A NUT SHELL ITS CALCIUM SULFATE WITH 2 WATER MOLECULE (DIHYDRATE FANCY WORDING )  
We heat it in 3 ways to get different size shape particles , when we heat it the gypsum loses one water molecule and becomes hemihydrate and then we add water again to make the same gypsum back ( pretty basic stuff lol ) if we heat it too much it loses all water molecule and it becomes anhydrate

---

## 2) Why dentistry uses it (applications)

Main dental uses:  
 **Study models/casts** for oral & maxillofacial structures  
 <span style="color: red">**Dies**</span><span style="color: red"> for restorations</span>  
 **Mounting casts / denture mold/flasking**  
 <span style="color: red">**Investment**</span><span style="color: red"> (gypsum + refractory fillers like silica  heat-resistant mold for casting metals)</span>

**Definitions**  
 **Model** = replica of several teeth + soft tissues / edentulous arch  
 **Die** = replica of a single tooth

**Requirements of a good cast material (slides)**  
1. Dimensional accuracy  
2. Adequate mechanical properties  
3. Must be **fluid at pouring** to capture fine detail  
4. **Low contact angle** (better wetting  fewer surface voids)  
5. <span style="color: red">Strong + hard enough to resist fracture/abrasion (wax carving)</span>  
6. Compatible with other materials

---

## 3) Production (<span style="color: red">calcination</span>)  how powders are made

![Image](assets/gypsum_img_3_1.png)

**Key idea**  
Dental gypsum powders are **hemihydrates** made by heating gypsum (dihydrate). When mixed with water, they **revert back to dihydrate and set**.

**Calcination reaction (slides)**  
**2CaSO2HO  (CaSO)HO + 3HO**

**Comparison of Types:**

### -hemihydrate (Plaster of Paris / dental plaster)  
 Produced in **open containers/kettle** (~120C; your text: 110130C).  
 Particles are **irregular, porous (spongy)**  need **more water**  weaker.

### -hemihydrate (Dental stone)  
 Produced in a **wet environment/steam pressure** (autoclave/kettle/vat/rotary kiln).  
 Particles are **denser, prismatic/regular**  need **less water**  stronger.

### Modified -hemihydrate (Die stone; Type IV/V)  
 produced under pressure in **30% CaCl** or with **>1% sodium succinate**, then washed with hot water to remove residues.  
 boiling gypsum in salt solution like **CaCl** to get even less porosity.

### Overheating vs underheating  
 **Overheating  anhydrite (CaSO)**  
 **Underheating  residual dihydrate remains**  
Both **strongly affect setting characteristics**.

---

## 4) Setting of gypsum (what happens after mixing with water)

 **Critical question answer :**  
When hemihydrate powder is mixed with water  it **sets back to dihydrate** (solid gypsum) and releases **heat** (exothermic).

**Three theories**  
 Colloidal theory  
 Hydration theory  
  **Most accepted: Dissolutionprecipitation theory**

**Dissolutionprecipitation (high yield steps)**  
1. Hemihydrate + water  workable suspension  
2. Hemihydrate dissolves  saturated Ca and SO solution  
3. Solution becomes supersaturated with dihydrate  **dihydrate precipitates**  
4. More hemihydrate dissolves as dihydrate keeps precipitating  crystals grow & interlock until reaction ends

**Why this works:**  
Hemihydrate solubility  **4** dihydrate near room temperature.  
Because **dihydrate is much less soluble in water than hemihydrate**, the water cant hold it in solutionso it **comes out of the water as crystals** and sets. And when water evaporates we are left with hard dental stone/plaster

**Extra:** Set gypsum often doesnt reach 100% conversion quickly; some unreacted hemihydrate may remain

![Image](assets/gypsum_img_5_1.png)

<video src="/assets/Living_microscopic_scene_1080p_202601110631.mp4"></video>

| Type | Name | Description & Particle | W/P Ratio | Primary Use |
| :--- | :--- | :--- | :--- | :--- |
| **I** | **Impression Plaster** | -hemihydrate + chemicals. Very porous. | 0.50  0.75 | *Rarely used*. Final impressions for edentulous ridges. |
| **II** | **Model Plaster** | -hemihydrate. Irregular, spongy, porous particles. | 0.45  0.50 | Study models, mounting casts on articulators. (White color). |
| **III** | **Dental Stone** | -hemihydrate (Hydrocal). Prismatic, regular, less porous. | 0.28  0.30 | Working casts for full dentures, diagnostic casts. (Yellow color). |
| **IV** | **Die Stone (High Strength, Low Expansion)** | Modified -hemihydrate (Densite). Dense, cuboidal particles. | 0.22  0.24 | **Dies** for crowns, bridges, and inlays. Hard surface resistant to abrasion. |
| **V** | **Die Stone (High Strength, High Expansion)** | Modified -hemihydrate. Highest expansion (0.1% - 0.3%). | 0.18  0.22 | Dies for **Base Metal** castings (because base metals shrink more and need the mold to expand more). |

---

## 5) How to know it has set

 <span style="color: red">**Loss of gloss test**</span><span style="color: red"> (surface shine disappears as water is consumed)</span>  
 **Gillmore test**  
   Initial set: light needle (2.12 mm tip, 113.4 g) no longer penetrates  
   Final set: heavy needle (1.06 mm tip, 453.6 g) leaves barely visible mark  
 **Vicat test** (Vicat penetrometer: setting time when needle no longer reaches bottom)

![Image](assets/gypsum_img_6_1.png)

**A) Operator-controlled factors (under the technician /dentist controlled)**

**1) Temperature**  
 The effect is **small/variable overall**.  
  Temperature can **increase dissolution** of hemihydrate **but** it can also **reduce the driving force for precipitation/crystallization**, so the net effect may be minimal or even slower at higher temps.

**<span style="color: red">2) Water/Powder ratio (W/P)</span>**

** W/P ratio does TWO things**:  
 ** W/P  slower setting** (fewer nuclei per unit volume  slower crystal interlocking)

![Image](assets/gypsum_img_7_1.png)

 ** W/P   setting expansion** (crystals are farther apart, so theres less crystal pushing/impingement,

**3) Mixing (spatulation)**  
 **More/longer/faster mixing  faster setting**  
 Reason: mixing **breaks forming crystals** into smaller pieces  creates **more nuclei**  faster crystallization and earlier set.  
 <span style="color: red">(Within limitsextreme overmixing can harm final structure/strength.)</span>

**B) Powder-related factors (material itself)**

**1) Unconverted dihydrate contamination**  
 **Acts as nuclei (seed crystals)**  **accelerates** setting.

**2) Anhydrite content**  
 **Anhydrite reacts quickly with water**  can cause **marked acceleration** (very rapid set).

**3) Age / storage conditions**  
 Moisture exposure can partially hydrate powder  changes nuclei content and surface coating  **alters setting time** (can speed up or slow down depending on extent).

**C) Chemical modifiers**

**Accelerators**  
 **<span style="color: red">Potassium sulfate</span>** (especially effective at **>2%**)  speeds setting.  
 **Slurry water** (from model trimmer): contains **fine gypsum particles**  extra nuclei  **accelerates**.

**Retarders**  
 **<span style="color: red">Borax</span>**: common retarder (mechanism often described as interfering with crystal growth/setting).

**One-line memory rule**  
More nuclei = faster set ( mixing, slurry water, dihydrate contamination, some salts)  
Less nuclei density = slower set ( W/P)

**Accelerators (make it set faster)**  
 **<span style="color: red">KSO (Potassium sulfate)</span>**: strong accelerator (commonly used; effective at higher %).  
 **NaSO (Sodium sulfate)**: accelerator; effect depends on concentration.  
 **Gypsum slurry / terra alba / seed crystals**: provides nuclei  faster set.  
 **NaCl (LOW concentration ~0.51%)**: accelerator.

**Retarders (make it set slower)**  
 **NaCl (HIGH concentration ~10%)**: strong retarder.  
 **<span style="color: red">Borax</span>**: common retarder; also lowers early strength.  
 **Sodium citrate / sodium acetate**: retarders (dose-dependent).  
 <span style="color: red">**Blood/saliva/organic contamination**: retards (bad contamination). If the impression is not washed it can contaminate the gypsum</span>

---

## 7) Setting expansion (normal + hygroscopic)

**Why expansion happens**  
Even though dihydrate is denser (so youd expect shrinkage), the **growing dihydrate crystals intermesh and push outward**  crystal thrust  expansion.

add:  
 Expansion is linked to **growing crystals**, and if placed in water at initial set  expansion increases (hygroscopic expansion).

**Hygroscopic expansion**

![Image](assets/gypsum_img_10_1.png)

 Setting **under water**  water is replenished  crystals grow more freely before intermeshing stops them  **greater expansion**.

**Controlling expansion**  
 To keep accuracy, keep expansion low; manufacturer additives that control setting time also **reduce setting expansion**  called **anti-expansion agents**.  
 W/P ratio and mixing time affect expansion, but **<span style="color: red">manufacturer chemicals are the most effective control</span>**<span style="color: red">.</span>  
 examples:  
   Lower W/P + longer mixing increase expansion  
   **4% potassium sulfate** can reduce expansion (example value shown).

---

## 8) Strength of set gypsum (wet vs dry) + what controls strength

**Wet vs dry strength**  
 **Wet/green strength:** excess water still present  weaker

**Practical exam / clinic timings**  
 **01 hour:** Cast is still **wet/green** (excess water in pores)  weaker/softer.  
 **~824 hours (room air-drying):** Biggest jump toward **dry strength** happens here. By **~24 hours**, gypsum is usually considered **dry strength range** for practical purposes (much harder/stronger than at 1 hour).  
 **Up to ~7 days:** Strength can continue to rise and may **roughly double** compared with the 1-hour wet strength (depends on product and drying conditions).

**If you want one line to memorize**  
**Green strength = first hour; most drying strength gain occurs by ~24 hours; further increase continues up to about a week.**

 **Dry strength:** after drying  can be **2 or more higher**

**Main determinants**  
 Strength depends mainly on **porosity** and **time allowed to dry**.

**<span style="color: red">W/P ratio effect</span>**  
 W/P  porosity  dry strength (compressive strength inversely proportional to W/P).

**<span style="color: red">Manipulation effects</span>**  
Increasing mixing time increases strength up to a limit (~equivalent to hand mixing 1 min), but **overmixing breaks the crystal network**  weaker.  
 Accelerators/retarders can lower wet and dry strength.

**Drying speed**  
 **Microwave irradiation** can speed drying; some studies show possible dimensional change.

**<span style="color: red">Surface hardness / abrasion</span>**  
 Surface hardness relates to compressive strength and increases faster than bulk strength.  
 Abrasion resistance can increase when impregnated with epoxy resins; hardness improved by mixing with hardening solutions (e.g., colloidal silica mentioned).

---

## 9) <span style="color: red">Types of gypsum products (ISO/ADA 5 types)</span>

Slides list ISO types:  
1. **Type I**: Dental plaster (impression)  
2. **Type II**: Dental plaster (model)  
3. **Type III**: Dental stone (die/model)  
4. **Type IV**: Die stone (high strength, low expansion)  
5. **Type V**: Die stone (high strength, high expansion)

clinical logic:  
 Type III for denture casts (tolerates slight expansion)  
 Type IV for dies needing strength + low expansion  
 Type V has higher expansion to compensate higher casting shrinkage of newer base-metal alloys; avoid for inlays/onlays because fit may become too tight (from your text)

---

## 10) Manipulation (how to get a clean cast)  HAND mixing (slides) <span style="color: red">skip</span>

 Use a clean, scratch-free rubber/plastic bowl (~130 mm top diameter) + stiff spatula.  
 Add measured water, **add powder slowly over ~10 s**, mix/spatulate ~**60 s** (circular/figure-8).  
 Clean the bowl after each mix because residues alter working/setting.

**Reduce porosity (slides) <  <span style="color: green">do this</span>**  
 Air can be incorporated during mixing  porosity/weakness  
Best: vacuum mixing (under vacuum) + vibration during pouring.  
 **Vacuum mixing** removes air from the mix (biggest reduction in porosity).  
 **Vibration** then helps the mix flow into details and releases any remaining bubbles while pouring.

---

## 11) Storage + cast care  
 Hemihydrate absorbs moisture from air; high humidity can start partial hydration  changes setting time.  
 Store in a dry** atmosphere**; seal in a moisture-proof container.  
 Cast soaking: safest in **calcium-sulfatesaturated water** (with gypsum debris at bottom)

---

## <span style="color: red">Types of dental gypsum (Type IV)  what each is used for + why it fits that job</span>

The **reason types exist** is mainly differences in:  
 **Crystal form/packing** ( vs  vs modified )  
 **Water/powder (W/P) ratio needed**  
 Resulting **porosity  strength/hardness**  
 **Setting expansion**

Lower W/P  **less porosity  stronger + harder**, but usually **more technique-sensitive**.

---

## Type I  Impression Plaster

**Where used**  
 Historically for **impressions** (rare today)

**Why it was suitable**  
 **Very low setting expansion** (so impression stays accurate)  
 Can be formulated to set relatively fast

**Why its NOT used now**  
 Sets **rigid** and fractures/locks in undercuts  difficult to remove safely from teeth/soft tissue undercuts.  
 Replaced by elastomers/hydrocolloids (flexible).

**Key idea:** Impression materials need **accuracy + safe removal**; gypsum is accurate but **too rigid**.

---

## Type II  Model Plaster (Laboratory plaster)

**Where used**  
 **Flasking denture processing**  
 **Mounting casts** on articulators (mounting plasters are basically fast Type II style)  
 Situations where **high strength is not critical**

**What makes it suitable**  
 **-hemihydrate**  needs **higher W/P**  ends up more porous  **lower strength**  
 That sounds bad, but its useful because:  
   Its **easy to trim and carve**  
   Good for supporting roles (e.g., filling a flask) where accuracy/strength demands are moderate  
 Usually **white** (helpful contrast in lab)

**Key idea:** Type II is chosen when you want a cast material thats **cheap, easy to handle/trim**, and strength isnt the top priority.

---

## Type III  Dental Stone (Stone for casts)

**Where used**  
 **Diagnostic/study casts**  
 **Working casts for complete dentures** (soft tissue casts)  
 Many routine lab models

**What makes it suitable**  
 **-hemihydrate** (denser, prismatic crystals)  requires **lower W/P** than plaster  
 Lower W/P  **less porosity**  **higher strength and hardness**  
 **Setting expansion is moderate/controlled**, usually acceptable for soft-tissue denture casts.

**Why not Type II here?**  
 Study/working casts need to resist **chipping, abrasion**, and handling.  
 Type II breaks more easily.

**Key idea:** Type III is the everyday strong cast  strong enough for routine models and denture casts.

---

## Type IV  High-Strength, Low-Expansion Die Stone (Die stone)

**Where used**  
 **Dies** for crowns, bridges, inlays/onlays (especially where margins must be sharp)  
 Any case requiring **high accuracy + high strength + abrasion resistance+low expansion**

**What makes it suitable**  
 Made from **modified -hemihydrate**  particles are **more regular/blocky** and pack very efficiently  
 Needs **very low W/P**  
 Gives:  
   **High compressive strength**  
   **High surface hardness / abrasion resistance** (important because you carve wax against it)  
   **<span style="color: red">Low setting expansion</span>** (critical so restorations dont end up oversized)

**Key idea:** Type IV is chosen when you need a die that will **not wear**, will keep **sharp margins**, and will have **minimal expansion** for accuracy.

---

## Type V  High-Strength, High-Expansion Die Stone

**Where used**  
 Dies for restorations made from **base-metal alloys** (or cases where you need extra expansion to offset larger casting shrinkage)  
 When the labs total expansion is otherwise insufficient

**What makes it suitable**  
 Even **lower W/P** than Type IV  **very high strength**  
 But formulated to have **higher setting expansion** than Type IV

**Why you avoid it for some work**  
 For **inlays/onlays** (very precision-fit) the extra expansion can make restorations **too tight**.

**Key idea:** Type V is used when you need more expansion on purpose (to compensate for metal shrinkage), not because its better universally.

---

## Quick pick the type logic (exam style)

 Need something **easy to trim / low strength acceptable**  **Type II**  
 Need a **routine cast/study model**  **Type III**  
 Need a **die with sharp margins high strength + minimal expansion**  **Type IV**  
 Need a **die but extra expansion needed (base-metal casting)**  **Type V**  
 Impression gypsum (rare)  **Type I**
`,zM=["Gypsum = Calcium sulfate Dihydrate; Heated to Hemihydrate (powder).","Type II (Plaster) = Beta-hemihydrate (Spongy/Porous, high W/P, weak).","Type III/IV (Stone) = Alpha-hemihydrate (Prismatic/Dense, low W/P, strong).","Retarders: BORAX, Blood, Citrates.","Accelerators: POTASSIUM SULFATE, Slurry water.","Hygroscopic Expansion: Setting under water = MORE expansion.","Strength: Depends on W/P ratio (More water = More porosity = Weaker)."],VM=[{id:"gyp-new-1",question:"Gypsum calcined in open containers (dry heating) mainly produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Orthorhombic anhydrite"],correctAnswerIndex:1,explanation:""},{id:"gyp-new-2",question:"Gypsum heated in a wet environment / steam pressure (autoclave, kettle/vat/rotary kiln with moisture) mainly produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Hexagonal anhydrite"],correctAnswerIndex:0,explanation:""},{id:"gyp-new-3",question:"Gypsum calcined under pressure in ~30% CaCl solution (or with sodium succinate), then washed produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Dihydrate"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-4",question:"The manufacturing process used to make dental gypsum powder by heating gypsum (removing part of its crystal water) is called:",options:["Hydration","Dehydration","Calcination","Setting"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-5",question:"The setting process where hemihydrate dissolves and dihydrate forms as crystals is called:",options:["Fibers","Plates","Spherulites","Bubbles"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-6",question:"Overheating gypsum during calcination mainly forms:",options:["Residual dihydrate","Hemihydrate only","Anhydrite (CaSO)","Calcium hydroxide"],correctAnswerIndex:2,explanation:"Overheating  anhydrite, which changes setting behavior."},{id:"gyp-new-7",question:"Underheating during calcination leads to:",options:["Pure anhydrite","Residual dihydrate remaining","Complete hemihydrate conversion","No effect on setting"],correctAnswerIndex:1,explanation:"Residual dihydrate stays  acts as nuclei  alters/usually speeds set."},{id:"gyp-new-8",question:"-hemihydrate (plaster of Paris) has crystals that are:",options:["Dense, prismatic, regular","Spongy, irregular, porous","Cuboidal, very smooth","Glass-like, non-porous"],correctAnswerIndex:1,explanation:"-hemihydrate needs more water  more porosity  weaker."},{id:"gyp-new-9",question:"-hemihydrate (dental stone) is stronger mainly because it:",options:["Needs more water","Has more porosity","Needs less water (lower W/P)","Produces fewer crystals"],correctAnswerIndex:2,explanation:"Lower W/P  less porosity  higher strength/hardness."},{id:"gyp-new-10",question:"Most accepted setting mechanism of gypsum is:",options:["Colloidal solgel","Hydration only","Dissolutionprecipitation","Dissolution-Polymerization"],correctAnswerIndex:2,explanation:"Hemihydrate dissolves then dihydrate precipitates as crystals."},{id:"gyp-new-11",question:"Gypsum sets because:",options:["Dihydrate is more soluble and stays dissolved","Dihydrate is less soluble and precipitates as crystals","Hemihydrate becomes gas","Water evaporates first, then sets"],correctAnswerIndex:1,explanation:"Dihydrate is less soluble, so it comes out as crystals  interlocks  sets."},{id:"gyp-new-12",question:"During gypsum setting, dihydrate starts forming even while hemihydrate is still dissolving. This happens because:",options:["Hemihydrate turns into dihydrate without dissolving","Dihydrate is more soluble, so it forms in solution first","Water evaporates and forces crystals to appear","A solution saturated with hemihydrate is supersaturated with respect to dihydrate, so dihydrate precipitates out"],correctAnswerIndex:3,explanation:"Hemihydrate dissolves to a higher ion level; that same solution is too concentrated for dihydrate, so dihydrate precipitates and setting proceeds."},{id:"gyp-new-13",question:"The MOST effective operator change to make gypsum set faster (without adding chemicals) is:",options:["Increase W/P ratio","Use colder water","Increase spatulation speed/time (within limits)","Let the mix stand longer before pouring"],correctAnswerIndex:2,explanation:"More/faster mixing creates more nuclei (by breaking early crystals)  faster crystallization  faster set. Increasing W/P slows set."},{id:"gyp-new-14",question:"(harder). Compared with setting in air, the key early-stage difference when gypsum sets under water is:",options:["The hemihydrate-to-dihydrate reaction stops earlier","The solution never becomes supersaturated with respect to dihydrate","The particle/crystal spacing is maintained during early hydration instead of being pulled closer","The final product contains a different calcium sulfate hydrate"],correctAnswerIndex:2,explanation:"In air, early hydration reduces free water around particles, so they get pulled closer; under water, water is continuously available so that early pulling closer is reduced  crystals can grow longer before impingement  greater expansion."},{id:"gyp-new-15",question:". Increasing the water/powder (W/P) ratio generally results in:",options:["Lower strength (more porosity)","Longer setting time","Lower setting expansion","All of the above"],correctAnswerIndex:3,explanation:""}],WM=[{id:"gyp-new-16",question:"Increasing W/P ratio does which TWO?",options:["Faster set +  expansion","Slower set +  expansion","Faster set +  expansion","Slower set +  expansion"],correctAnswerIndex:1,explanation:"W/P  nuclei farther apart  slower set + less crystal thrust   expansion."},{id:"gyp-new-17",question:"Increasing spatulation (mixing) generally:",options:["Slows setting","Speeds setting","No change","Prevents crystals forming"],correctAnswerIndex:1,explanation:"More mixing breaks crystals  more nuclei  faster set."},{id:"gyp-new-18",question:"Overmixing (excessive spatulation) of gypsum mix can cause:",options:["Always increases final strength","Shorter working time and reduced final strength","Eliminates porosity completely","Stops the exothermic reaction"],correctAnswerIndex:1,explanation:""},{id:"gyp-new-19",question:"To obtain the most accurate, least porous die stone mix, the BEST mixing method is:",options:["Hand spatulation only (no mechanical mixing)","Mixing in an amalgamator","Vibrating the bowl during the entire mixing stage","Vacuum mechanical mixing"],correctAnswerIndex:3,explanation:"Vacuum removes air from mix; vibration releases remaining bubbles."},{id:"gyp-new-20",question:"Most common accelerator used in gypsum:",options:["Borax","Potassium sulfate","Sodium citrate","Blood contamination"],correctAnswerIndex:1,explanation:"KSO is a strong, common accelerator."},{id:"gyp-new-21",question:"Slurry water accelerates setting because it:",options:["Dissolves crystals","Adds heat","Provides nuclei (fine gypsum particles)","Removes calcium"],correctAnswerIndex:2,explanation:"Fine particles act as seed crystals."},{id:"gyp-new-22",question:"NaCl at low concentration (~0.51%) acts as:",options:["Strong retarder","Accelerator","Neutral","Anti-expansion only"],correctAnswerIndex:1,explanation:"Low NaCl can accelerate; high conc retards."},{id:"gyp-new-23",question:"Borax is mainly a:",options:["Accelerator","Retarder","Wetting agent","Binder"],correctAnswerIndex:1,explanation:"Borax retards gypsum set and reduces early strength."},{id:"gyp-new-24",question:"Setting expansion occurs mainly because:",options:["Dihydrate is less dense than hemihydrate","Water expands","Growing crystals interlock and push outward","Air bubbles expand"],correctAnswerIndex:2,explanation:"Intermeshing crystal growth creates outward force  expansion."},{id:"gyp-new-25",question:"Hygroscopic expansion is greater because:",options:["Gypsum dissolves under water","Immersion water replenishes water","Heat is higher under water","It becomes anhydrite"],correctAnswerIndex:1,explanation:"Continuous water supply  freer/longer growth  more thrust  more expansion."}],jM=[{id:"gyp-new-49",question:"The correct material for a die that will be exposed to porcelain firing temperatures is:",options:["Type IV stone","Type V stone","Refractory die/model material (not regular gypsum)","Alginate"],correctAnswerIndex:2,explanation:"Regular gypsum dehydrates/breaks down at high firing temperatures."},{id:"gyp-new-50",question:"Best investment type for casting a gold inlay/onlay (low-fusing noble alloy):",options:["Gypsum-bonded investment","Phosphate-bonded investment","Alginate investment","Zinc-oxide eugenol investment"],correctAnswerIndex:0,explanation:"Gold alloys traditionally use gypsum-bonded investments."},{id:"gyp-new-51",question:"Best investment type for casting base-metal crowns/metal-ceramic frameworks (high-temp):",options:["Gypsum-bonded investment","Phosphate-bonded investment","Zinc phosphate cement","Impression plaster"],correctAnswerIndex:1,explanation:`High-temp alloys need phosphate-bonded.
Waxes correlation (inlay wax logic)`},{id:"gyp-new-52",question:"While carving an inlay wax pattern, the die surface must resist wear from instruments. This property is mainly provided by:",options:["High setting expansion","High surface hardness/abrasion resistance of Type IV stone","High W/P ratio","Wet/green strength"],correctAnswerIndex:1,explanation:"Wax carving needs a hard die so margins stay sharp."},{id:"gyp-new-53",question:"Type V stone is generally AVOIDED for inlays/onlays because:",options:["It is too weak","It dissolves in water","Higher expansion can make the restoration fit too tight","It cannot be poured into impressions"],correctAnswerIndex:2,explanation:'Type V Stone has high setting expansion (0.1%0.3%). While good for base-metal crowns to offset shrinkage, for precision inlays/onlays, this extra expansion results in a restoration that is effectively "too large" for the cavity, leading to a fit that is too tight.'}],YM=[{id:"gyp-new-1",question:"Gypsum calcined in open containers (dry heating) mainly produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Orthorhombic anhydrite"],correctAnswerIndex:1,explanation:""},{id:"gyp-new-2",question:"Gypsum heated in a wet environment / steam pressure (autoclave, kettle/vat/rotary kiln with moisture) mainly produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Hexagonal anhydrite"],correctAnswerIndex:0,explanation:""},{id:"gyp-new-3",question:"Gypsum calcined under pressure in ~30% CaCl solution (or with sodium succinate), then washed produces:",options:["-hemihydrate","-hemihydrate","Modified -hemihydrate","Dihydrate"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-4",question:"The manufacturing process used to make dental gypsum powder by heating gypsum (removing part of its crystal water) is called:",options:["Hydration","Dehydration","Calcination","Setting"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-5",question:"The setting process where hemihydrate dissolves and dihydrate forms as crystals is called:",options:["Fibers","Plates","Spherulites","Bubbles"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-6",question:"Overheating gypsum during calcination mainly forms:",options:["Residual dihydrate","Hemihydrate only","Anhydrite (CaSO)","Calcium hydroxide"],correctAnswerIndex:2,explanation:"Overheating  anhydrite, which changes setting behavior."},{id:"gyp-new-7",question:"Underheating during calcination leads to:",options:["Pure anhydrite","Residual dihydrate remaining","Complete hemihydrate conversion","No effect on setting"],correctAnswerIndex:1,explanation:"Residual dihydrate stays  acts as nuclei  alters/usually speeds set."},{id:"gyp-new-8",question:"-hemihydrate (plaster of Paris) has crystals that are:",options:["Dense, prismatic, regular","Spongy, irregular, porous","Cuboidal, very smooth","Glass-like, non-porous"],correctAnswerIndex:1,explanation:"-hemihydrate needs more water  more porosity  weaker."},{id:"gyp-new-9",question:"-hemihydrate (dental stone) is stronger mainly because it:",options:["Needs more water","Has more porosity","Needs less water (lower W/P)","Produces fewer crystals"],correctAnswerIndex:2,explanation:"Lower W/P  less porosity  higher strength/hardness."},{id:"gyp-new-10",question:"Most accepted setting mechanism of gypsum is:",options:["Colloidal solgel","Hydration only","Dissolutionprecipitation","Dissolution-Polymerization"],correctAnswerIndex:2,explanation:"Hemihydrate dissolves then dihydrate precipitates as crystals."},{id:"gyp-new-11",question:"Gypsum sets because:",options:["Dihydrate is more soluble and stays dissolved","Dihydrate is less soluble and precipitates as crystals","Hemihydrate becomes gas","Water evaporates first, then sets"],correctAnswerIndex:1,explanation:"Dihydrate is less soluble, so it comes out as crystals  interlocks  sets."},{id:"gyp-new-12",question:"During gypsum setting, dihydrate starts forming even while hemihydrate is still dissolving. This happens because:",options:["Hemihydrate turns into dihydrate without dissolving","Dihydrate is more soluble, so it forms in solution first","Water evaporates and forces crystals to appear","A solution saturated with hemihydrate is supersaturated with respect to dihydrate, so dihydrate precipitates out"],correctAnswerIndex:3,explanation:"Hemihydrate dissolves to a higher ion level; that same solution is too concentrated for dihydrate, so dihydrate precipitates and setting proceeds."},{id:"gyp-new-13",question:"The MOST effective operator change to make gypsum set faster (without adding chemicals) is:",options:["Increase W/P ratio","Use colder water","Increase spatulation speed/time (within limits)","Let the mix stand longer before pouring"],correctAnswerIndex:2,explanation:"More/faster mixing creates more nuclei (by breaking early crystals)  faster crystallization  faster set. Increasing W/P slows set."},{id:"gyp-new-14",question:"(harder). Compared with setting in air, the key early-stage difference when gypsum sets under water is:",options:["The hemihydrate-to-dihydrate reaction stops earlier","The solution never becomes supersaturated with respect to dihydrate","The particle/crystal spacing is maintained during early hydration instead of being pulled closer","The final product contains a different calcium sulfate hydrate"],correctAnswerIndex:2,explanation:"In air, early hydration reduces free water around particles, so they get pulled closer; under water, water is continuously available so that early pulling closer is reduced  crystals can grow longer before impingement  greater expansion."},{id:"gyp-new-15",question:". Increasing the water/powder (W/P) ratio generally results in:",options:["Lower strength (more porosity)","Longer setting time","Lower setting expansion","All of the above"],correctAnswerIndex:3,explanation:""},{id:"gyp-new-16",question:"Increasing W/P ratio does which TWO?",options:["Faster set +  expansion","Slower set +  expansion","Faster set +  expansion","Slower set +  expansion"],correctAnswerIndex:1,explanation:"W/P  nuclei farther apart  slower set + less crystal thrust   expansion."},{id:"gyp-new-17",question:"Increasing spatulation (mixing) generally:",options:["Slows setting","Speeds setting","No change","Prevents crystals forming"],correctAnswerIndex:1,explanation:"More mixing breaks crystals  more nuclei  faster set."},{id:"gyp-new-18",question:"Overmixing (excessive spatulation) of gypsum mix can cause:",options:["Always increases final strength","Shorter working time and reduced final strength","Eliminates porosity completely","Stops the exothermic reaction"],correctAnswerIndex:1,explanation:""},{id:"gyp-new-19",question:"To obtain the most accurate, least porous die stone mix, the BEST mixing method is:",options:["Hand spatulation only (no mechanical mixing)","Mixing in an amalgamator","Vibrating the bowl during the entire mixing stage","Vacuum mechanical mixing"],correctAnswerIndex:3,explanation:"Vacuum removes air from mix; vibration releases remaining bubbles."},{id:"gyp-new-20",question:"Most common accelerator used in gypsum:",options:["Borax","Potassium sulfate","Sodium citrate","Blood contamination"],correctAnswerIndex:1,explanation:"KSO is a strong, common accelerator."},{id:"gyp-new-21",question:"Slurry water accelerates setting because it:",options:["Dissolves crystals","Adds heat","Provides nuclei (fine gypsum particles)","Removes calcium"],correctAnswerIndex:2,explanation:"Fine particles act as seed crystals."},{id:"gyp-new-22",question:"NaCl at low concentration (~0.51%) acts as:",options:["Strong retarder","Accelerator","Neutral","Anti-expansion only"],correctAnswerIndex:1,explanation:"Low NaCl can accelerate; high conc retards."},{id:"gyp-new-23",question:"Borax is mainly a:",options:["Accelerator","Retarder","Wetting agent","Binder"],correctAnswerIndex:1,explanation:"Borax retards gypsum set and reduces early strength."},{id:"gyp-new-24",question:"Setting expansion occurs mainly because:",options:["Dihydrate is less dense than hemihydrate","Water expands","Growing crystals interlock and push outward","Air bubbles expand"],correctAnswerIndex:2,explanation:"Intermeshing crystal growth creates outward force  expansion."},{id:"gyp-new-25",question:"Hygroscopic expansion is greater because:",options:["Gypsum dissolves under water","Immersion water replenishes water","Heat is higher under water","It becomes anhydrite"],correctAnswerIndex:1,explanation:"Continuous water supply  freer/longer growth  more thrust  more expansion."},{id:"gyp-new-26",question:"The initial strength of a gypsum cast is termed:",options:["Dry strength","Green (wet) strength","Compressive strength at 24 hours",`Hygroscopic strength

water occupies spaces between gypsum crystals, so crystals dont contact and interlock tightly, making the cast weak initially.
When the cast dries, the water leaves  crystals come into closer contact  strength (dry strength) increases significantly.`],correctAnswerIndex:1,explanation:""},{id:"gyp-new-27",question:"At about 4560 minutes after mixing gypsum, the casts strength is best described as:",options:["Dry strength (maximum strength)","Green/wet strength (initial strength)","Hygroscopic expansion strength",`Final compressive strength after 24 hours

Option 1`],correctAnswerIndex:1,explanation:""},{id:"gyp-new-28",question:"Separation of a gypsum cast from an impression is best done when the cast has:",options:["Completed the initial reaction phase","Developed adequate rigidity to resist distortion on removal","Achieved maximum hardness",`Finished all dimensional change

Option 2`],correctAnswerIndex:1,explanation:""},{id:"gyp-new-29",question:"The most appropriate stage to separate a gypsum cast from the impression is when it has:",options:["Just begun to thicken","Attained sufficient set to permit handling without damage","Become completely moisture-free",`Started hygroscopic expansion

Option 3`],correctAnswerIndex:1,explanation:""},{id:"gyp-new-30",question:"Under normal conditions, the earliest recommended time window to separate a gypsum cast is approximately:",options:["510 minutes","1520 minutes","4560 minutes","24 hours"],correctAnswerIndex:2,explanation:""},{id:"gyp-new-31",question:"Most practical dry strength range is reached around:",options:["5 minutes","1 hour","~24 hours (air drying)","10 days only"],correctAnswerIndex:2,explanation:"Big strength gain occurs by 824 h; continues up to ~1 week."},{id:"gyp-new-32",question:"Safe soaking of gypsum cast is best done in:",options:["Running tap water","Distilled water only","Water saturated with calcium sulfate (with gypsum debris)","Hot boiling water"],correctAnswerIndex:2,explanation:`Unsaturated water dissolves gypsum  loss of dimensions.
Correlation MCQs (Inlay wax / Impression materials / Investments / Best gypsum property)`},{id:"gyp-new-33",question:"For carving an inlay wax pattern, the best gypsum type for the working replica is:",options:["Type II model plaster","Type III stone","Type IV high-strength low-expansion stone","Type I impression plaster"],correctAnswerIndex:2,explanation:"Inlay wax needs hard, abrasion-resistant, low-expansion replica for sharp margins  Type IV."},{id:"gyp-new-34",question:`(Ceramic restoration)
In fabrication of a metal-ceramic(PFM)/PURE CERAMIC/GOLD ) restoration, gypsum is MOST commonly used as:`,options:["A refractory die that can be placed directly in the porcelain firing furnace","A high-strength die/cast material (Type IV stone) for wax patterning and margin finishing before investing","The binder of phosphate-bonded investment used for high-temperature casting","The final coping material that remains under porcelain after firing"],correctAnswerIndex:1,explanation:"For ceramic restorations, gypsum (especially Type IV die stone) is used to make an accurate, hard die/cast for wax-up and margin work."},{id:"gyp-new-35",question:"The most important gypsum property for wax margin carving accuracy is:",options:["High W/P ratio","Low surface hardness","High surface hardness + low setting expansion","High setting expansion"],correctAnswerIndex:2,explanation:"You want a die/model that wont wear and wont oversize  hard + low expansion."},{id:"gyp-new-36",question:"Why is gypsum a poor impression material for dentate patients?",options:["It sets too slowly","It is flexible","It is rigid and locks into undercuts","It has low accuracy"],correctAnswerIndex:2,explanation:"Gypsum impressions are accurate but too rigid  undercut locking."},{id:"gyp-new-37",question:"Best cast material requirement that reduces surface voids when pouring impressions:",options:["High contact angle","Low contact angle (good wetting)","High expansion","High porosity"],correctAnswerIndex:1,explanation:"Low contact angle = better wetting  fewer bubbles/voids."},{id:"gyp-new-38",question:"Type V stone is preferred over Type IV mainly when:",options:["You want minimal expansion always","You need more expansion to compensate base-metal casting shrinkage","You need a weak cast","Youre making diagnostic models only"],correctAnswerIndex:1,explanation:"Type V = high strength + high expansion for alloys with higher shrinkage."},{id:"gyp-new-39",question:"For a gypsum-based investment, the key added component that provides heat resistance is:",options:["Wax","Silica (quartz/cristobalite/fused silica) filler","Saliva","Borax"],correctAnswerIndex:1,explanation:"Investment = binder (gypsum) + refractory filler (silica)."},{id:"gyp-new-40",question:"Best investment binder choice for metal-ceramic / base metal alloys (high temp):",options:["Gypsum-bonded investment","Phosphate-bonded investment","Agar impression material","Alginate"],correctAnswerIndex:1,explanation:"High-temp work needs phosphate-bonded (more thermal stability)."},{id:"gyp-new-41",question:"If an impression is contaminated with saliva/blood and not washed, the cast may:",options:["Set faster always","Set slower (retard)","Become anhydrite","Have zero porosity"],correctAnswerIndex:1,explanation:"Organic impurities can act as retarders  slower setting + poorer surface."},{id:"gyp-new-42",question:"For inlay wax pattern work, why is low setting expansion important?",options:["It makes restoration intentionally tight","It prevents oversizing of the die  improves fit accuracy","It increases margin gap","It weakens gypsum"],correctAnswerIndex:1,explanation:"Expansion enlarges replica  restoration fit errors; low expansion improves accuracy."},{id:"gyp-new-43",question:"If gypsum sets too slowly in an alginate impression, the main problem is:",options:["Increased strength","Alginate distortion over time","Zero porosity","Conversion to anhydrite"],correctAnswerIndex:1,explanation:"Delay increases water exchange/time-dependent distortion  loss of accuracy."},{id:"gyp-new-44",question:"Best gypsum type for a die where you will carve an inlay/onlay wax pattern with sharp margins:",options:["Type II plaster","Type III stone","Type IV high-strength, low-expansion stone","Type V high-expansion stone"],correctAnswerIndex:2,explanation:"Inlay/onlay wax needs hard, abrasion-resistant + minimal expansion die."},{id:"gyp-new-45",question:"Type V stone is MOST indicated when:",options:["Inlay/onlay wax patterns require maximum accuracy","Casting base-metal alloys where extra expansion is needed to offset higher casting shrinkage","Making diagnostic casts for dentures","Making alginate study models only"],correctAnswerIndex:1,explanation:"Type V = high strength + higher expansion to compensate base-metal shrinkage."},{id:"gyp-new-46",question:"For a full denture working cast (soft-tissue cast), the preferred gypsum is:",options:["Type I","Type II","Type III","Type V"],correctAnswerIndex:2,explanation:"Type III is strong enough and expansion is acceptable for soft tissue casts."},{id:"gyp-new-47",question:"Which gypsum property is MOST critical for accurate crown margins (before investing)?",options:["High W/P ratio","High surface hardness + low setting expansion","High setting expansion","Long setting time"],correctAnswerIndex:1,explanation:"Margins must not abrade; dimensions must stay accurate."},{id:"gyp-new-48",question:"In a porcelain-fused-to-metal (PFM) workflow, gypsum is MOST properly used as:",options:["A material placed directly in the porcelain firing furnace","A Type IV working die/cast for wax pattern and margin finishing","The refractory die for porcelain build-up","The coping material under porcelain"],correctAnswerIndex:1,explanation:"Gypsum supports wax/margin work; firing needs refractory materials."},{id:"gyp-new-49",question:"The correct material for a die that will be exposed to porcelain firing temperatures is:",options:["Type IV stone","Type V stone","Refractory die/model material (not regular gypsum)","Alginate"],correctAnswerIndex:2,explanation:"Regular gypsum dehydrates/breaks down at high firing temperatures."},{id:"gyp-new-50",question:"Best investment type for casting a gold inlay/onlay (low-fusing noble alloy):",options:["Gypsum-bonded investment","Phosphate-bonded investment","Alginate investment","Zinc-oxide eugenol investment"],correctAnswerIndex:0,explanation:"Gold alloys traditionally use gypsum-bonded investments."},{id:"gyp-new-51",question:"Best investment type for casting base-metal crowns/metal-ceramic frameworks (high-temp):",options:["Gypsum-bonded investment","Phosphate-bonded investment","Zinc phosphate cement","Impression plaster"],correctAnswerIndex:1,explanation:`High-temp alloys need phosphate-bonded.
Waxes correlation (inlay wax logic)`},{id:"gyp-new-52",question:"While carving an inlay wax pattern, the die surface must resist wear from instruments. This property is mainly provided by:",options:["High setting expansion","High surface hardness/abrasion resistance of Type IV stone","High W/P ratio","Wet/green strength"],correctAnswerIndex:1,explanation:"Wax carving needs a hard die so margins stay sharp."},{id:"gyp-new-53",question:"Type V stone is generally AVOIDED for inlays/onlays because:",options:["It is too weak","It dissolves in water","Higher expansion can make the restoration fit too tight","It cannot be poured into impressions"],correctAnswerIndex:2,explanation:""}],Vh=["Composites shrink during polymerization (~2-5%); higher filler  less shrinkage.","C-Factor = bonded surface area / unbonded surface area; high C-factor = more stress.","Bis-GMA: high strength, high viscosity, low shrinkage per molecule.","TEGDMA: diluting agent with HIGH shrinkage (low molecular weight).","Higher filler % = lower shrinkage, better mechanical properties.","Incremental layering (2 mm) reduces C-factor and ensures complete cure."],Lv=`
# Composite Resins  Detailed Notes

## What a "composite" is

-  **Composite (materials science)**: A solid made from two or more distinct phases (example: filler particles dispersed in a polymer matrix) combined to give properties better than (or intermediate between) the constituents.
-  **Dental composite / resin-based composite**: A highly cross-linked polymer matrix reinforced by silica/glass/mineral/organic filler particles and/or short fibers, bonded to the matrix by a coupling agent.

![Dental Composite Structure](assets/composite_img_1_1.png)

If u remember dental amalgam had a similar structure even though the reactions are not the same

---

## 1) Core Terminology (Must-Know Definitions)

### Activation

-  Process where enough energy is provided to make an initiator produce free radicals, so polymerization begins.

### Activator

-  Energy source used to activate an initiator and generate free radicals. Main energy sources:
  - 1. **Heat**  thermal activation
  - 2. **Chemical activator** (electron donor) like tertiary amine  lowers energy needed so polymerization can occur at room temperature
  - 3. **Visible light**  photoinitiation (with a photosensitizer like **camphorquinone, CQ**)

![Activator Types](assets/composite_img_2_1.png)

### Initiator

-  A chemical that forms **free radicals** to start polymerization and becomes part of the final polymer (so it is not a catalyst).
-  **Free radical** = species with an unpaired electron that initiates chain-growth polymerization by attacking **C=C** bonds.

### Inhibitor

-  Added to reduce spontaneous polymerization  **increases working time + shelf life**, typically by scavenging free radicals (e.g., **BHT**).

![Initiator and Inhibitor](assets/composite_img_3_1.png)

The above are general terms are used for other material as well

<span style="color: red">**General terms for all can skip**</span>

### What is the resin (matrix) in composite?

-  The **resin matrix** is the plastic part of the composite (the "cement" that later hardens). It is mainly a mix of **methacrylate monomers** (like Bis-GMA, UDMA, TEGDMA) plus small additives (initiator, inhibitor, pigments).

---

### 2) What is a monomer?

-  A **monomer** is a **small single molecule** that can join with many others to form a polymer. In dental composites, monomers usually have a reactive group called:
  -  **Methacrylate group** with a **C=C double bond**
-  That **C=C** is the "handle" that opens during curing so monomers can join.

Example idea:
-  Monomer = one "link" of a chain

---

### 3) What is a polymer?

-  A **polymer** is a **very large molecule** made when many monomers join together.
  -  If it's mostly one long line  **linear polymer**
  -  If many chains join together  **cross-linked polymer network** (this is what composite becomes)

Example idea:
-  Polymer = a long chain / network made of many links

---

### 4) What groups do composite monomers have?

-  Most composite monomers are **dimethacrylates** (very important word):
  -  **Dimethacrylate = 2 methacrylate groups (2 C=C bonds) on the same molecule**

Examples:
-  **Bis-GMA** (big, thick, strong backbone)
-  **UDMA** (strong, slightly less viscous)
-  **TEGDMA** (small "thinner" monomer)

 **Why "two" groups matter**:
-  If a monomer has two **C=C** bonds, it can join two chains by forming CC it has 2 open arms which can bind to similar monomers  creates cross-linking.

---

### 5) What are "pendant groups"?

-  A **pendant group** is a side group that hangs off the main polymer chain **without being part of the backbone**. In composites, this usually means:
  -  Some methacrylate **C=C bonds do NOT react**
  -  They remain as **unreacted side double bonds** attached to the polymer network
-  So you get:
  -  A polymer backbone (main chain)
  -  Plus **pendant unreacted C=C groups** sticking out

 **Why pendant groups matter**:
-  They explain why **degree of conversion is not 100%**

-  **Matrix**: The continuous resin phase (plastic monomer blend) that cures into a solid and binds fillers together.
-  **Filler**: Inorganic/glass/organic resin particles dispersed in matrix to increase strength.
-  **Coupling agent**: A chemical that bonds filler to resin matrix (most commonly organosilanes like -methacryloxypropyltrimethoxysilane). Essential for strength/toughness and resistance to degradation.
-  **Depth of cure**: How deep a light-cured resin can cure under specific curing conditions (practical limit usually **~23 mm** per increment).

![Depth of Cure Diagram](assets/composite_depth_of_cure_new.png)

---

## Dental Composite Polymerization: Mechanism & Clinical Reality
<span style="color: red">can skip</span> just but this is the same process that will be seen in 2 more topics so better to once or **dental composites, elastomers, and denture base resins**.

### 1) Initiation (The Curing Light)

-  **Generic**: Initiator + Energy  Free Radical
-  **Dental Context**:
  -  **The Energy Source**: The dentist uses a Blue Curing Light (wavelength ~468 nm).
  -  **The Initiator**: The composite contains **Camphorquinone** (the photoinitiator).
  -  **The Process**: When the blue light hits the Camphorquinone, it gets excited and reacts with an **Amine** (accelerator) in the paste.
  -  **The Result**: This reaction releases **Free Radicals**.
  -   **Key Idea**: You press the button on the curing light  Free radicals are born.

### 2) Propagation (The Hardening)

![Polymerization Process](assets/composite_img_8_1.png)

-  **Generic**: Active center + monomer  Polymer Chain
-  **Dental Context**:
  -  **The Monomers**: The soft paste is full of resin monomers like **bis-GMA** or **TEGDMA**. These molecules have Carbon-Carbon double bonds (**C=C**).
  -  **The Reaction**: The free radicals attack the **C=C** double bonds, breaking them open.

### 3) Termination (The Stop)

![Free Radicals Process](assets/composite_img_9_1.png)

-  **Generic**: Active center destroyed  Reaction stops
-  **Dental Context**:
  -  **Chain Collision**: Two growing polymer chains crash into each other, canceling out their free radicals. The network is "locked."
  -  **Oxygen Inhibition (Crucial Clinical Detail)**: Oxygen is a "radical scavenger." On the very top surface of the filling (where air touches it), oxygen kills the radicals *before* they can cure.
  -  **The Result**: This leaves a sticky, uncured layer on top called the **Oxygen Inhibition Layer**.
  -   **Key Idea**: The sticky layer is actually goodit allows the *next* layer of composite you add to stick to the previous one chemically.

We use an activator (energy source) to activate an initiator, which starts polymerization by producing a highly reactive free radical. The free radical attacks the C=C double bond of a monomer, opens it, and creates a reactive end ("free hand"). That reactive end keeps adding more monomers, so the chain grows and forms a cross-linked network. The reaction stops when two growing polymer chains with free radicals combine with each other, or when radicals are inhibited (especially by oxygen at the surface, forming an oxygen-inhibited layer).

### Summary Table for Review

| Step | In General Chemistry | In Dental Composite |
|:---|:---|:---|
| Start | Energy + Initiator | Blue Light + Camphorquinone |
| Growth | Monomer + Radical | bis-GMA + Free Radical (Paste turns hard) |
| Stop | Radical Death / Impurities | Oxygen Inhibition Layer (Sticky top surface) |



**Gel point / Gelation:** Point where crosslinks become sufficient  resin becomes rigid (glassy), internal flow stops.
 Before gel point: stress can relax by polymer chain flow
 After gel point: stress cannot relax  stress concentrates at bonded interfaces

**Oxygen-inhibited layer:** Thin surface layer of cured composite with unreacted methacrylate groups due to oxygen inhibiting free-radical polymerization ("air-inhibited layer"). Helpful for bonding additional increments.

**Degree of Conversion (DC):** % of C=C double bonds converted to CC single bonds during cure.
 Higher DC  generally better strength, wear resistance, durability
 Typical DC for bis-GMA composites: around 5070% (not "all monomer left"  many unreacted double bonds are pendant groups).

**Polymerisation shrinkage (we don't want this):** In dental composites, polymerization shrinkage typically ranges from 2% to 5% by volume.
-  Composite continues to shrink even after curing because polymerization can keep going slowly. Shrinkage happens because when monomers join and cross-link, the molecules pack closer together, reducing the overall volume.

![Composite Shrinkage](assets/composite_img_11_1.png)

-  **C-factor (Configuration factor)**: Bonded surface area / unbonded free surface area
-  Higher C-factor  higher shrinkage stress at margins  gap formation, marginal leakage, staining, secondary caries risk
-  The more bonded surfaces a composite restoration has, the more the material is locked in. So when the composite polymerization-shrinks, it can't flow freely and instead pulls away from the tooth walls, creating shrinkage stress. This may open marginal gaps, leading to microleakage, post-operative sensitivity, marginal staining, and eventually secondary caries.

![C-Factor Dangers](assets/composite_img_12_1.png)

![Shrinkage Stress](assets/composite_img_13_1.png)

## 3. The C-Factor (Configuration Factor)

-  The C-Factor is a formula used to predict the level of polymerization stress a filling will exert on the tooth walls.

### The Formula

-  **C-Factor = (Number of Bonded Surfaces) / (Number of Unbonded Surfaces)**

### Why it Matters: The "Stress Relief" Concept

-  **Bonded surfaces**: These are "locked." The composite is glued to the tooth and cannot move.
-  **Unbonded surfaces**: These are "free." When the material shrinks, it can "flow" from these free surfaces toward the center to relieve tension.
-  **The Rule**: The higher the C-Factor, the higher the stress on the tooth.

### Clinical Examples Table

| Cavity Class | Bonded Walls | Unbonded Walls | Calculation | C-Factor | Risk Level |
|:---|:---|:---|:---|:---|:---|
| Class I (Occlusal) | 5 (Floor + 4 Walls) | 1 (Top surface) | 5/1 | 5 |  Highest Risk |
| Class II (MO/OD) | 4 | 2 | 4/2 | 2 | Moderate |
| Class IV (Front tooth) | 2 | 4 | 2/4 | 0.5 |  Low Risk |

-  Note: A Class I cavity is a "recipe for disaster" because 5 walls are pulling inward against only 1 free surface. This often causes **Post-Operative Sensitivity** or **Cracked Cusp Syndrome**.

---

## 3) Dental Uses / Applications

Resin composites are used for:
-  Direct restorations (Class IV depending on material)
-  Bonding agents/adhesives (with etch systems)
-  Pit & fissure sealants
-  Endodontic sealants
-  Veneer bonding
-  Cementation/luting of indirect restorations (resin cements)
-  Core build-ups/foundations (especially dual/self-cure)

---

## 2. The Three Essential Components

-  To understand a dental composite, think of it as a **three-part system**. If any one of these is missing, the material fails.

### A. The Resin Matrix (The "Glue")

-  **What it is**: A blend of fluid plastic monomers (like **bis-GMA** or **UDMA**).
-  **Function**: It creates the continuous phase that binds everything together. It gives the composite its ability to be molded and shaped before curing.
-  **Weakness**: On its own, the resin is relatively weak, flexible, prone to wear, and shrinks significantly when it hardens (polymerizes).

-  **One line summary**: **Bis-GMA** and **UDMA** form the continuous resin matrix that acts as the "glue" to hold the filler particles together.

| Monomer Type | Examples | Key Characteristics | Clinical Function / Analogy |
|:---|:---|:---|:---|
| Principal | Bis-GMA, UDMA | High Molecular Weight; Aromatic (Stiff); Very Viscous | Analogy: "Cold Honey". Provides strength, stiffness, and durability to the filling. |
| Diluent | TEGDMA, EGDMA | Low Molecular Weight; Aliphatic (Flexible); Fluid | Analogy: "Milk / Water". Reduces viscosity to make the paste workable, but causes more shrinkage. |

![Resin Matrix Components](assets/composite_img_16_1.png)

---

### B. The Fillers (The "STONE")

-  **What they are**: Particles of silica, quartz, barium glass, or zirconia.
-  **Function**: They reinforce the matrix.
  -  **Strength**: They increase stiffness and wear resistance.
  -  **Stability**: They reduce polymerization shrinkage (because glass doesn't shrink) and thermal expansion.
  -  **Appearance**: They provide translucency and radiopacity (visibility on x-rays)

### Why fillers matter (functions)

-  Fillers provide:
  - 1. **Reinforcement**:  compressive/tensile strength,  modulus,  toughness
  - 2. **Reduce polymerization shrinkage**: less resin volume to shrink
  - 3. **Reduce thermal expansion**: closer to tooth structure  less marginal stress during temperature changes
  - 4. **Control viscosity/handling**: more filler  thicker paste
  - 5. **Reduce water sorption**: less resin  less softening/staining
  - 6. **Radiopacity**: heavy metal fillers (Ba, Sr, Zn, YbF) absorb x-rays  detect caries/gaps

-  Fillers are important because we mainly change a composite's properties by increasing or decreasing the filler. More filler usually makes the composite stronger, but the surface can become rougher (like having more "hard particles" in it). Less filler usually makes the composite weaker, but it becomes easier to polish and gives a better finish.
-   **Hybrid composites** are considered the most balanced option, because they combine the good qualities of both worlds.

| Feature | High Filler / Large Particles (The "Rocks") | Low Filler / Small Particles (The "Sand") |
|:---|:---|:---|
| Strength | High (Stronger, fracture resistant) | Lower (More prone to chipping/breaking) |
| Polishability | Poor (Surface feels rough; "plucking" occurs) | Excellent (Retains high gloss) |
| Wear | High Wear (Rough particles grind opposing teeth) | Low Wear (Smooth surface is gentle) |
| Example | Macrofilled (Old school) | Microfilled (Great for front teeth veneers) |

![Filler Comparison](assets/composite_img_17_1.png)

---

-  **Esthetic requirement: refractive index matching**
  -  Filler refractive index should match cured resin  good translucency
  -  Particle size affects light scattering (big particles increase opacity and roughness)

-  **Filler loading & packing**
  -  Using multiple particle sizes allows tighter packing  higher filler fraction  better properties and reduced shrinkage.

-  **Coupling agent (Silane)**
  -  Forms chemical bridge between filler and resin network
  -  Improves strength, wear resistance, and reduces water penetration at interface

-   **Without coupling**: fillers act like voids  crack bypasses filler, weak composite.

### Summary

| Component | In Concrete | In Dental Composite | Role |
|:---|:---|:---|:---|
| Matrix | Cement paste | Resin (bis-GMA) | Holds everything together; cures to solid. |
| Coupling | Surface friction | Silane Agent | Bonds the filler to the matrix so they act as one. |
| Filler | Rocks/Gravel | Glass/Silica particles | Provides bulk, strength, and stops shrinkage. |

![Silane Coupling](assets/composite_img_19_1.png)

---

## 5) Classification  Types of Composites (Crucial Topic)

![Classification Chart](/composite-classification.png)

### A) Classification by filler particle size / distribution



**1) Traditional (Macrofilled / Conventional)**
-  Larger fillers (older category)
-  Strong but rough surface over time (matrix wears away  filler protrudes)

**2) Small/Fine particle composites**
-  Mean diameters roughly 0.110 m
-  Good strength; better polish than macrofilled; cannot reach ultra-high gloss like microfills

**3) Hybrid composites (Most "general purpose")**
-  **Hybrid** = mixture of at least two size ranges (often fine glass + micro/nanofiller)
-  **Goal**: balance strength + wear resistance + polishability
-  Widely used in anterior and many posterior indications (depending on brand)

**4) Microfilled composites**
-  **Primary filler** ~ 40 nm colloidal silica
-  Extremely high polish and smoothness
-  **Problem**: very small particles have huge surface area  increase viscosity  limits filler loading
-  **Clinical**: best for low-stress areas, Class III/V, excellent esthetics

Two styles often described:
-  **Homogeneous microfill**: mostly microfiller  very polishable, lower strength
-  **Heterogeneous microfill**: contains prepolymerized resin filler particles + microfiller  better handling and loading but weaker interfaces  chipping/wear

---

**5) Nanofilled composites**
-  **Primary particles** in nano range (<100 nm), often with "nanoclusters"
-  **Aim**: microfill-like polish + higher filler loading (strength)
-  In practice, many are actually **nanohybrids** because they include clusters/other particle sizes.

**6) Nanohybrid composites** (Very common modern "universal")
-  Mix of nano particles + fine glass fillers
-  **Great balance**: strength + good polish + posterior usability

-   **High yielding info**: The two main composite types we commonly use are hybrid and nanocomposite.
  -  **Hybrid composite** is preferred when we need extra strength (e.g., stress-bearing areas like posterior restorations).
  -  Nano/nanohybrid composite is preferred when we need maximum esthetics and polishability (e.g., highly visible anterior restorations).

BUT why are hybrids preferred anyways explained below:
 Hybrids mix large particles to give the heavy-duty strength missing in microfills, while filling the gaps with tiny particles to give the smooth polish missing in conventional composites. The Result: This "rocks and sand" structure creates a perfect universal material that is strong enough for chewing forces on back teeth yet smooth enough for beautiful smiles on front teeth.

![Hybrid Composites Goldilocks Solution](assets/composite_hybrid_goldilocks.jpg)

### B) Classification by manipulation/handling

**1) Flowable composites**
-  Lower filler and/or altered particle distribution  flows
-  **Uses**:
   liners/bases
   small defects
   areas needing adaptation
-  **Weakness**: lower filler  lower wear resistance and strength

**2) Packable / condensable composites**
-  Designed to feel more like amalgam (stiffer handling)
-  Achieved by fiber/irregular fillers that interlock
-  Intended for posterior placement ease; real-world advantage over good hybrids is limited

---

### C) Classification by curing mode (Very high yield)

| Feature | Chemically Activated (Self-Cure) | Light-Cured (Photo-Cure) | Dual-Cure System |
|:---|:---|:---|:---|
| Format | Two Pastes (Base + Catalyst) | Single Paste | Two Pastes (usually) |
| Activation Mechanism | Chemical Reaction: Benzoyl Peroxide (Initiator) + Tertiary Amine (Activator) | Light Energy: Camphorquinone (CQ) + Amine + Blue Light (~468 nm) | Combination: Chemical cure (slow) + Light cure (fast command set) |
| Porosity | High (Mixing introduces air bubbles) | Low (No mixing required) | Moderate (Requires mixing) |
| Working Time | Limited (Starts immediately upon mixing) | "Command Set" (Controlled by operator) | Flexible (Command set + chemical backup) |
| Esthetics / Color | Poor Stability (Amine oxidation causes yellowing over time) | Excellent Stability (No aromatic amine accelerators) | Compromised (Contains amines, less stable than light-cure) |
| Stress Buildup | Lower (Slower cure allows stress relaxation) | Higher (Rapid crosslinking locks in stress) | Moderate |
| Cure Depth | Unlimited (Cures throughout bulk chemically) | Limited (Requires 2mm increments) | Reliable Bulk Cure (Chemical backup for deep areas) |
| Primary Use | Core build-ups, areas hard to reach with light | Direct restorations (fillings), veneers | Cementing crowns/inlays, deep core build-ups |

---

## 6) Photocuring Lamps & Wavelength Matching

-  Photoinitiation depends on wavelength overlap with photoinitiator (CQ absorbs ~400500 nm).
-  **Main curing light types**:
  - 1. **LED**
     Emits blue range (often 440480 nm), no filters required
     Low heat, low power consumption, often battery
  - 2. **QTH (Quartz-Tungsten-Halogen)**
     Broad spectrum  needs filters (blue region)
     Output decreases with age  needs radiometer checks
  - 3. **PAC (Plasma Arc Curing)**
     High-intensity filtered output
  - 4. **Argon laser**
     Very high intensity, narrow wavelength

### Energy requirement concept (high yield)

-  Need sufficient **radiant energy** (irradiance  time).

### Critical technique rules

-  Light intensity decreases rapidly with distance (clinically huge).
-  Keep tip as close as possible and perpendicular (90).
-  Clean light guide (resin on tip reduces output).
-  Check curing light output periodically.

### Depth of cure limitation

-  Even with high intensity, light is absorbed/scattered within composite.
-  Practical depth remains **~ 23 mm** per increment unless curing time is extended significantly.

![Depth of Cure Diagram](assets/composite_depth_of_cure_new.png)

---

## 7) Polymerization Shrinkage & Stress (Most Tested Concept)

### Why shrinkage happens

-  Monomers pack closer when polymerized  volume reduces. Shrinkage creates stress especially after gel point.

### What increases shrinkage stress

-  Higher **C-factor** (more bonded surfaces, less free surface)
-  Larger bulk volume cured at once
-  Faster curing rate (light-cure, high intensity)
-  Higher proportion of low-MW diluent monomers (like **TEGDMA**)
-  Inadequate incremental technique

### Clinical consequences

-  Marginal gaps  leakage  sensitivity, staining, secondary caries
-  Marginal breakdown
-  Post-op sensitivity
-  Reduced restoration longevity

### How to reduce shrinkage stress (clinical techniques)

-  **Incremental layering**: Place composite in diagonal wedges  2 mm thick. This lowers the effective C-factor and creates more free surfaces.
-  **Stress-absorbing liners**: Use a thin base of flowable composite or glass ionomer. Their greater flexibility (lower modulus) acts like a cushion.
-  **Soft-start curing**: Use a ramped light curing method. This keeps the material in the pre-gel phase longer, allowing flow.
-  **Material choice**: Choose composites with a high filler-to-resin ratio and favor larger monomers (**Bis-GMA/UDMA**).
-  **Cavity preparation**: Round internal line angles to avoid sharp corners (stress concentration points).
- 
![Strategies to Reduce Shrinkage & Stress](/composite-shrinkage-strategies.png)

---

## 8) Properties of Resin-Based Composites (What controls what)

### Strength & modulus
-  Increase with filler loading and good coupling
-  Higher filler fraction  higher stiffness (modulus), hardness, wear resistance
-   *Trade-off*: more filler can increase brittleness and reduce handling ease.

### Water sorption
-  Mainly from resin matrix
-  Higher filler loading  less water uptake  better stain resistance and wear

### Thermal expansion
-  Polymers expand more than tooth; fillers reduce expansion closer to tooth structure  less marginal stress.

### Radiopacity
-  Achieved by heavy metal glass fillers (**Ba, Sr, Zn**) or YbF.
-  Ideally radiopacity should allow diagnosis without masking secondary caries.

### Wear
-  Two main wear modes:
   **Two-body wear**: direct contact (tooth/restoration)
   **Three-body wear**: food bolus abrasion
-  Wear resistance improves with small well-bonded fillers and high filler loading.

## 9) Biocompatibility & BPA / Estrogenicity (Short note)

 Risk mainly from leachable components if composite is inadequately cured, especially near pulp.
 Clinically, proper cure and finishing reduce unreacted monomer exposure.

## 10) Finishing, Polishing, Surface Sealing (Very exam-friendly)

### Finishing vs Polishing

 Finishing: shaping margins, anatomy, removing overhangs
 Polishing: smoothing to minimal roughness
-  **Finishing**: shaping margins, anatomy, removing overhangs.
-  **Polishing**: smoothing to minimal roughness.

### Timing & Technique
-  **Excessive dry polishing**  heat  may increase marginal leakage; use water cooling.
-  **Timing**: Often best to finish/polish shortly after placement.
-  **Surface sealing**: Applying a low-viscosity resin sealer can fill microcracks and reduce microleakage.

---

## 11) Repair of composites

-  Fresh composite bonds well due to the **oxygen-inhibited layer**.
-  Older composite has fewer reactive groups  bond strength drops.
-  **Repair strategies**:
  -  surface roughening + etch + bonding resin
  -  silane application to improve bond to exposed filler
-   **Note**: Repaired strength is usually lower than original bulk composite.

---

## 12) Posterior composite selection

### Indications
-  Esthetic demand
-  Conservative preparations
-  Patient without heavy parafunction

### Contraindications / cautions
-  **Bruxism** (wear/fracture risk)
-  Very large restorations
-  High caries activity

---

## 13) Quick Exam Tables (Fast Recall)

### A) Classification by filler size

| Type | Typical Filler Scale | Big Strength | Big Advantage | Big Drawback |
|:---|:---|:---|:---|:---|
| Macrofilled | Large (1050 m) | Strong | Shrinkage reduced | Rough surface (plucking) |
| Hybrid / Nanohybrid | Mixed sizes | Strong | "Best balance" | Technique sensitive |
| Microfilled | 40 nm silica | Lower | Best polish | Lower strength |
| Nanofilled | <100 nm + clusters | Good | Polish + Strength | Cure depth issues |

### B) Curing types (must memorize)

| Cure Type | Activator (Energy) | Initiator (Chemical) | Pros | Cons |
|:---|:---|:---|:---|:---|
| Self-cure | Tertiary Amine | Benzoyl Peroxide | Deep cure; No light needed | No "command set"; Porosity |
| Light-cure | Blue Light (~470nm) | Camphorquinone (CQ) | "Command set"; Low porosity | Depth limit; High stress |
| Dual-cure | Light + Chemical | Both systems | Reliable deep cure | Requires mixing |
| UV-cure (Old) | UV Light | Benzoin Methyl Ether | First "command set" | Limited penetration; Risks |

---

## 15) Ultra-High Yield "One-liners" SUMMARY

-  Higher **C-factor**  higher shrinkage stress  marginal leakage.
-  After **gel point**, stress cannot relax  it concentrates at bonded interfaces.
-  More filler  less shrinkage + less thermal expansion + more strength.
-  **Microfilled** = best polish, weaker; **Hybrid/Nanohybrid** = best overall balance.
-  Light cure needs correct wavelength match (**CQ ~ blue region**) + minimal distance + 90 angle.
-  **Incremental placement** solves both depth of cure and reduces stress per increment.

---

**End of Composite Resins Notes**
`,$M=`
# Composite Resins  High-Yield Summary

## 1) STRUCTURE (3 Components)

1. **Organic Matrix (Resin)**  Bis-GMA, UDMA, TEGDMA
2. **Inorganic Filler**  Glass/ceramic particles (70-85% by weight)
3. **Coupling Agent**  Silane (bonds filler to resin)

---

## 2) KEY MONOMERS

| Monomer | Properties | Clinical Note |
|:---|:---|:---|
| **Bis-GMA** | High viscosity, low shrinkage per molecule | Main resin, needs dilution |
| **TEGDMA** | Low viscosity, HIGH shrinkage | Diluting agent (bad for shrinkage) |
| **UDMA** | Lower viscosity, flexible | Alternative to Bis-GMA |

**Key Point**:  Bis-GMA =  shrinkage but  viscosity;  TEGDMA =  shrinkage

---

## 3) POLYMERIZATION

- **Light-Cure**:
  - **Photoinitiator**: Camphorquinone (CQ)
  - **Wavelength**: 460-470 nm (blue light)
  - **Degree of Conversion**: 55-75% (never 100%)

- **Dual-Cure**:
  - Benzoyl peroxide + tertiary amine
  - Use when light can't reach (deep post spaces, thick restorations)

---

## 4) POLYMERIZATION SHRINKAGE  (Most Tested)

- **Why**: Monomers pack closer (4   1.5 ) = **2-5% volumetric shrinkage**
- **Consequences**:
  - Gap formation  microleakage  secondary caries
  - Post-op sensitivity
  - Cusp deflection / fracture

**C-Factor = Bonded Surface / Free Surface**
- High C-factor (Class I = 5)  **MORE stress**
- Low C-factor (Class IV = 0.5)  **LESS stress**

**How to Minimize**:
-  Filler loading
- Incremental layering (2 mm)
- Soft-start curing
- Good bonding

---

## 5) COMPOSITE CLASSIFICATION

**By Filler Size**:

| Type | Particle Size | Best For |
|:---|:---|:---|
| **Macrofill** | 10-100 m | Obsolete (rough surface) |
| **Microfill** | 0.01-0.1 m | Best polish, low strength |
| **Hybrid** | Mixed sizes | Universal (anterior + posterior) |
| **Nanofill** | 1-100 nm | Best aesthetics + strength |
| **Nanohybrid** | Nano + larger | Clinical workhorse |

**By Viscosity**:
- **Flowable**: Low filler (~60-70%), high shrinkage, liners / small cavities
- **Universal**: Medium filler (~75-80%), anterior & posterior
- **Packable**: High filler (~85%+), posterior
- **Bulk-Fill**: Special chemistry, 4-5 mm increments

---

## 6) CLINICAL TECHNIQUE

- **Incremental Layering**:
  - 2 mm per layer
  - Cure 20-40 seconds each
  - Reduces C-factor

- **Bulk-Fill**:
  - 4-5 mm increments
  - Increased translucency + modified chemistry
  - Faster but may sacrifice aesthetics

- **Curing Light**:
  - Close and perpendicular (90)
  - Adequate intensity (1000 mW/cm)

---

## 7) COMPOSITE vs AMALGAM (Quick Comparison)

| Property | Composite | Amalgam |
|:---|:---|:---|
| **Aesthetics** | Tooth-colored  | Metallic  |
| **Bonding** | Yes (adhesive) | No (mechanical) |
| **Shrinkage** | Yes (~2-5%) | Slight expansion |
| **Technique** | High sensitivity | Moderate |
| **Longevity** | ~7-10 years | 10-15+ years |

---

## 8) HIGH-YIELD EXAM POINTS 

### Shrinkage & C-Factor
- **C-factor = bonded  free surfaces**
- Class I (C = 5) = highest stress
- Incremental layering reduces effective C-factor

### Monomers
- **Bis-GMA**: high strength, low shrinkage
- **TEGDMA**: HIGH shrinkage (diluting agent)

### Filler Function
-  Filler % =  shrinkage,  strength,  thermal expansion
- Typical: 70-85% by weight

### Silane
- Bonds filler to resin (Si-O-Si linkage)
- Without it, filler acts like voids

### Degree of Conversion
- Only 55-75% of C=C bonds react
- Unreacted monomers can leach  sensitivity

### Composite Selection
- **Anterior aesthetics**: Nanofill (best polish + strength)
- **Posterior strength**: Hybrid / Nanohybrid
- **Cervical flexure**: Flowable (low modulus)
- **Deep cavities**: Bulk-fill

---

## 9) COMMON CLINICAL PROBLEMS

| Problem | Cause | Solution |
|:---|:---|:---|
| **Marginal gap** | High C-factor, shrinkage stress | Incremental layering, good bonding |
| **Post-op sensitivity** | Microleakage, bond failure | Proper technique, adequate seal |
| **Incomplete cure** | Thick increment, low light | 2 mm layers, adequate curing time |
| **Veneer debonding** | Excessive shrinkage stress | Low-viscosity cement, thin layer |

---

## 10) MUST-KNOW NUMBERS

- **Shrinkage**: 2-5%
- **Degree of Conversion**: 55-75%
- **Filler Loading**: 70-85% by weight
- **Increment Thickness**: 2 mm (conventional), 4-5 mm (bulk-fill)
- **Curing Time**: 20-40 seconds per layer
- **Light Wavelength**: 460-470 nm (blue)
- **C-Factor Class I**: ~5 (highest stress)

---

**End of Summary**

---

**End of Summary**
`,wT=[{id:"comp-easy-1",question:'Which component of a dental composite functions as a "molecular bridge," chemically bonding the inorganic filler particles to the organic resin matrix?',options:["Bis-GMA","TEGDMA","Camphorquinone","Silane coupling agent"],correctAnswerIndex:3,explanation:"The silane coupling agent bonds the filler to the resin matrix. Without it, fillers act like defects/voids, weakening the composite."},{id:"comp-easy-2",question:"You are using a light-cured composite. Which specific photoinitiator is most likely present, and what wavelength of light is required to activate it?",options:["Benzoyl Peroxide; UV light (~300 nm)","Camphorquinone; Blue light (~468 nm)","Tertiary Amine; Red light (~600 nm)","Hydroquinone; Green light (~500 nm)"],correctAnswerIndex:1,explanation:"Camphorquinone (CQ) is the common photoinitiator in composites and is activated by blue light (~468 nm). Benzoyl peroxide is mainly for chemical/self-cure systems."},{id:"comp-easy-3",question:"Degree of Conversion (DC) means:",options:["% filler by volume","% C=C bonds converted to C-C during cure","% oxygen removed from surface","% polymer dissolved in water"],correctAnswerIndex:1,explanation:"DC measures how many double bonds reacted. Typical conversion is about 50-70%."},{id:"comp-easy-4",question:"If a patient requires a restoration on a front tooth (Class III or Veneer) where the primary concern is maximum gloss and polishability, which composite type is historically best suited?",options:["Macrofilled composite","Microfilled composite","Packable composite","Traditional hybrid composite"],correctAnswerIndex:1,explanation:"Microfilled composites (very small fillers) give the best polish and gloss, but lower strength."},{id:"comp-easy-5",question:'Which of the following statements about "Hybrid" composites is true?',options:["They contain only nanofillers.","They offer a balance of strength (from large particles) and polishability (from small particles).","They have the poorest physical properties of all composites.","They are primarily used as flowable liners."],correctAnswerIndex:1,explanation:'Hybrids mix multiple particle sizes ("rocks + sand") to achieve the best overall balance of properties.'},{id:"comp-easy-6",question:"Typical volumetric shrinkage of many composites is roughly:",options:["0-1%","2-5%","10-15%","20-30%"],correctAnswerIndex:1,explanation:"The common clinical range for polymerization shrinkage is approximately 2-5%."},{id:"comp-easy-7",question:"C-factor (Configuration Factor) is defined as:",options:["Unbonded surfaces / bonded surfaces","Bonded surfaces / unbonded (free) surfaces","Depth of cure / curing time","Filler % / resin %"],correctAnswerIndex:1,explanation:"C-factor = bonded surfaces / free (unbonded) surfaces."},{id:"comp-easy-8",question:"Higher polymerization shrinkage stress can lead to:",options:["Increased marginal seal always","Marginal gaps, sensitivity, staining, and secondary caries","Higher radiopacity","Better polishability"],correctAnswerIndex:1,explanation:"Stress can lead to debonding and gap formation, resulting in leakage problems like sensitivity and secondary caries."},{id:"comp-easy-9",question:"Practical incremental thickness for conventional light-cure composite is usually:",options:["5-6 mm","4-5 mm","2 mm","0.2 mm"],correctAnswerIndex:2,explanation:"The common clinical increment is approximately 2 mm for a reliable depth of cure."},{id:"comp-easy-10",question:"Light intensity at the composite surface decreases significantly when:",options:["Tip is close and perpendicular","Tip is far away from the surface","Tip is clean","Composite is thinner"],correctAnswerIndex:1,explanation:"Distance reduces irradiance rapidly according to the inverse square law."},{id:"comp-easy-11",question:"The best curing tip position is:",options:["Far and angled","Close and perpendicular (90)","Far and perpendicular","Close and parallel (0)"],correctAnswerIndex:1,explanation:"A close and perpendicular position maximizes the energy delivered to the composite."},{id:"comp-easy-12",question:"Camphorquinone is activated best by:",options:["Green light","Red light","Blue light","UV only"],correctAnswerIndex:2,explanation:"Camphorquinone (CQ) absorbs light most effectively in the blue region (~468 nm)."},{id:"comp-easy-13",question:'Which curing system has "command set" (user controls working time)?',options:["Self-cure only","Light-cure","Condensation polymerization","Heat-cure only"],correctAnswerIndex:1,explanation:"Light-cure composites stay workable until they are exposed to the curing light."},{id:"comp-easy-14",question:"Self-cure (chemical-cure) systems commonly use which initiator system?",options:["CQ + blue light","Benzoyl peroxide + tertiary amine","Silane + filler","Acid etch + primer"],correctAnswerIndex:1,explanation:"The classic chemical cure initiator system is Benzoyl Peroxide (BPO) and a tertiary amine."},{id:"comp-easy-15",question:"The main function of fillers in resin composites is to:",options:["Increase hardness but significantly increase shrinkage","Reinforce the resin and improve stability","Improve translucency while reducing the need for silane","Increase water sorption for better adaptation"],correctAnswerIndex:1,explanation:"Fillers act as the strong phase, strengthening the composite and reducing resin-related problems like shrinkage and thermal expansion."},{id:"comp-easy-16",question:"The coupling agent (silane) is essential because it:",options:["Removes oxygen inhibition","Chemically bonds filler to resin for stress transfer","Replaces the resin matrix","Prevents light scattering"],correctAnswerIndex:1,explanation:"Without silane, there is no bond between filler and matrix, and the filler acts like a defect/void."},{id:"comp-easy-17",question:"Microfilled composites are best known for their:",options:["High strength for posterior loads","Excellent polishability and gloss","Highest radiopacity","Fastest curing time"],correctAnswerIndex:1,explanation:"Small filler particles allow for excellent polish, but their lower loading results in lower strength."},{id:"comp-easy-18",question:"Which component provides radiopacity on X-rays to distinguish the restoration from caries?",options:["Camphorquinone photoinitiator","Silane coupling agent","Heavy-metal glass fillers (Ba, Sr, Zn, Zr)","Bis-GMA resin matrix"],correctAnswerIndex:2,explanation:"Manufacturers add radiopaque fillers containing heavy elements like Barium or Strontium to absorb X-rays."},{id:"comp-easy-19",question:"Standard LED curing lights are specifically designed to activate which photoinitiator?",options:["Benzoyl peroxide","Luciferin","Camphorquinone (CQ)","Hydroquinone"],correctAnswerIndex:2,explanation:"LED lights are tuned to match the absorption peak of Camphorquinone (~468 nm)."}],xT=[{id:"comp-medium-1",question:"Why is TEGDMA often added to a composite formulation containing Bis-GMA?",options:["To increase viscosity and strength","To reduce viscosity and allow better handling","To act as an inhibitor","To eliminate shrinkage entirely"],correctAnswerIndex:1,explanation:"Bis-GMA is very viscous, so TEGDMA is added as a diluent to improve handling, though it can increase shrinkage."},{id:"comp-medium-2",question:"Degree of Conversion (DC) is usually NOT 100% mainly because:",options:["Filler prevents polymerization","The polymer network restricts molecular mobility as it sets","Water stops the reaction","Oxygen inhibition is too strong"],correctAnswerIndex:1,explanation:"As the network stiffens, it traps unreacted groups that cannot reach each other to react further."},{id:"comp-medium-3",question:"Which of the following cavity preparations has the HIGHEST C-Factor and highest risk of shrinkage stress?",options:["Class IV (Anterior edge)","Class II (MO or DO)","Class I (Occlusal box)","Class V (Buccal surface)"],correctAnswerIndex:2,explanation:"Class I box has 5 bonded surfaces and only 1 free surface, leading to a C-factor of 5."},{id:"comp-medium-4",question:"Which technique is recommended to reduce the effective C-Factor and shrinkage stress?",options:["Bulk filling in one increment","High-intensity light for short time","Incremental placement (diagonal wedges <= 2 mm)","Drying the tooth structure excessively"],correctAnswerIndex:2,explanation:"Incremental wedges create more free surfaces per increment, allowing flow before the gel point."},{id:"comp-medium-5",question:"What is the primary cause of polymerization shrinkage in resin composites?",options:["Expansion of filler particles","Evaporation of water","Monomers packing closer as Van der Waals forces change to covalent bonds","Loss of the silane coupling agent"],correctAnswerIndex:2,explanation:"Monomers pull closer together as they form covalent bonds, resulting in volumetric shrinkage."},{id:"comp-medium-6",question:"A Class I occlusal cavity with 5 bonded walls and 1 free surface has a C-factor of:",options:["0.2","1.0","5.0","0.5"],correctAnswerIndex:2,explanation:"C-factor = Bonded / Free = 5 / 1 = 5."},{id:"comp-medium-7",question:"Incremental wedge layering reduces effective stress mainly by:",options:["Increasing cumulative shrinkage","Increasing the ratio of unbonded to bonded surfaces for each increment","Using less material overall","Eliminating the hybrid layer"],correctAnswerIndex:1,explanation:"By reducing the C-factor of individual increments, the material can flow more easily during the pre-gel phase."},{id:"comp-medium-8",question:"Soft-start (ramped) curing reduces stress mainly by:",options:["Increasing polymerization heat","Prolonging the pre-gel phase for stress relaxation","Reducing the degree of conversion","Increasing filler content"],correctAnswerIndex:1,explanation:"A slower early cure allows the material to move and relax stresses before it reaches the rigid gel point."},{id:"comp-medium-9",question:"Flowable liners are thought to reduce stress because:",options:["They have zero shrinkage","Their lower modulus of elasticity acts as a stress-absorbing buffer","They have higher filler loading","They increase the C-factor"],correctAnswerIndex:1,explanation:"The relative flexibility of the flowable liner can cushion the pull of the overlying composite."},{id:"comp-medium-10",question:"Bulk-fill composites differ from conventional composites by being able to cure in increments of:",options:["0.5 mm","1 mm","2 mm only","4-5 mm"],correctAnswerIndex:3,explanation:"Modified chemistry and increased translucency allow effective curing in much thicker increments."},{id:"comp-medium-11",question:"Which situation MOST strongly favors using bulk-fill rather than conventional layering?",options:["Small shallow Class V","Deep posterior cavity where speed and depth of cure matter","Thin veneer cementation","Pit and fissure sealing"],correctAnswerIndex:1,explanation:"Bulk-fill is highly advantageous in deep posterior boxes to save time and ensure cure at the base."},{id:"comp-medium-12",question:"A bulk-fill flowable is MOST commonly used as:",options:["Final occlusal layer","A base/lining bulk layer, followed by a sculptable capping layer","A substitute for bonding agent","Fissure sealant"],correctAnswerIndex:1,explanation:"Flowable bulk-fills are usually covered with a stronger 'capping' layer for better wear resistance."},{id:"comp-medium-13",question:"The chemical bond formed between silane and the silica filler particle is a:",options:["Ionic bond","Siloxane bond (Si-O-Si)","Metallic bond","Hydrogen bond only"],correctAnswerIndex:1,explanation:"Silane links to the filler surface through a siloxane bridge."},{id:"comp-medium-14",question:'Hybrid/Nanohybrid composites are considered "universal" because:',options:["They are only for anterior teeth","Mixed particle sizes provide a balance of strength and polishability","They do not require curing lights","They match every shade automatically"],correctAnswerIndex:1,explanation:"The 'rocks + sand' approach allows high filler loading for strength while maintaining a polishable surface."},{id:"comp-medium-15",question:'A marginal "white line" visible after composite placement typically indicates:',options:["Excessive use of silane","Marginal gap caused by polymerization shrinkage stress","Correct shade matching","Incomplete filler loading"],correctAnswerIndex:1,explanation:"If shrinkage stress exceeds the bond strength, a microscopic gap or fracture occurs at the margin."}],TT=[{id:"comp-hard-1",question:"When cementing a fiber post 10 mm deep into a canal, why is a dual-cure composite preferred over a light-cure one?",options:["It is more radiopaque","It ensures full polymerization even where light intensity is too low to reach","It has a lower C-factor","It simplifies the procedure"],correctAnswerIndex:1,explanation:"Light intensity diminishes rapidly with distance; the chemical cure component ensures solidification at the apical depths."},{id:"comp-hard-2",question:"For a fractured incisal edge (Class IV) needing both high esthetics and functional strength, which is the best modern choice?",options:["Macrofilled composite","Microfilled composite","Nanofilled composite","Packable composite"],correctAnswerIndex:2,explanation:"Nanofilled composites provide the superior polish retention (like microfills) along with high mechanical strength (like hybrids)."},{id:"comp-hard-3",question:"Immediate debonding of a porcelain veneer cemented with high-viscosity resin is most likely caused by:",options:["Creep","Excessive polymerization shrinkage stress exceeding bond strength","Hygroscopic expansion","Oxygen inhibition layer"],correctAnswerIndex:1,explanation:"High-viscosity materials in thin, high-constraint areas can generate stresses that rip the restoration off the tooth immediately."},{id:"comp-hard-4",question:"Why is a low modulus of elasticity (flexibility) beneficial for Class V cervical restorations?",options:["It increases wear resistance","It allows the restoration to flex with the tooth during occlusal loading","It prevents radiopacity issues","It speeds up the curing process"],correctAnswerIndex:1,explanation:"Teeth flex at the neck; a flexible restorative material can accommodate this movement without debonding at the margin."}],KM=[...wT,...xT,...TT],QM=["Micromechanical bonding (Hybrid Layer + Resin Tags) is the primary mechanism.","Acid etching creates microporosities; Primer adapts to wet dentin; Adhesive seals.","Dentin must be moist ('wet bonding') to prevent collagen collapse.","Enamel bonding is predictable (dry/frosty); Dentin bonding is technique-sensitive.","Smear layer reduces permeability but interferes with bonding (must be removed or modified).","HEMA is the key hydrophilic monomer (primer); Bis-GMA/TEGDMA are hydrophobic resins."],JM=`
# Bonding & Bonding Agents  High-Yield Notes

## 1) Core Terminology (1-liners)

-  **Adhesion**: attraction between two different materials at an interface (chemical +/or mechanical).
-  **Cohesion**: attraction within the same material.
-  **Adhesive**: the bonding substance (resin/primer/cement etc).
-  **Adherend**: the substrate being bonded (enamel, dentin, metal, ceramic, composite).
-  **Bonding**: resistance to separation of two joined materials.
-  **Wetting**: adhesive spreads over surface  needed before any bonding can happen.
-  **Contact angle**: smaller angle = better wetting (0 = complete wetting; 180 = no wetting).
-  **Smear layer**: weak debris layer created by cutting tooth; blocks bonding unless treated.
-  **Hybrid layer**: resin + collagen + dentin complex formed after dentin conditioning + resin infiltration.
-  **Resin tags**: resin extensions into etched microporosities/tubules  micromechanical lock.
-  **Luting agent**: cement that fills gap and retains an indirect restoration.
-  **Microleakage**: fluid/bacteria movement through microscopic gap at interface.

![Dental Bonding Key Terms](assets/adhesion_img_2_1.png)

---

## 2) Why we bond (big 3 functions)

A dental bonding system should:
1. Resist separation of restoration/cement from tooth/substrate
2. Distribute stress along the interface
3. Seal margins   microleakage   sensitivity, staining, secondary caries

-  Composite **cannot naturally bond** to tooth structure on its own.
-  So, to create a strong bond, we **prepare the tooth surface** first:
  -  We apply an **acid etchant** to dissolve a thin superficial layer of enamel (and condition dentin), which creates **microscopic pores/irregularities**.
  -  When the bonding resin is applied, it flows into these microporosities and, after polymerization, forms **resin tags**.
  -  These tags lock into the tooth surfacelike fingers interlockingproducing a strong **micromechanical bond**.

-  In this topic, we mainly discuss **how this bond is formed**, **what materials** (etch, primer, adhesive) are used, and **why bonding is important** (retention, stress distribution, and sealing to reduce microleakage).
-  We will primarily focus on **dentin bonding** as enamel bonding is much easier.

---

## 3) Historical turning points

-  **Early dentistry**: mostly mechanical retention + non-adhesive luting (zinc phosphate era).
-  **Hagger (late 1940s/1950s)**: early bonding concept (Sevriton-type self-adhesive idea).
-  **Buonocore (1955)**: phosphoric acid enamel etch  **modern adhesive dentistry**.
-  **Fusayama (1979)**: **total-etch concept** (enamel + dentin together).
-  **Nakabayashi (1984)**: resin infiltrates demineralized dentin collagen  **hybrid layer concept**.
-  **Kanca**: **wet bonding** (keep dentin moist so collagen doesnt collapse).

---

## 4) How is the Bond Formed? (The Mechanism)

Since composite resin cannot naturally stick to tooth structure, we must create a **mechanical lock**.

### Step 1: Surface Demineralization (Making the Holes)
-  **Enamel**: Acid dissolves the centers or peripheries of the enamel rods, removing about **10 microns** of surface and creating a **honeycomb-like microporous structure**.
-  **Dentin**: Acid dissolves the mineral (hydroxyapatite) to expose a **mesh of collagen fibers** (the organic network).

### Step 2: Infiltration (Wetting)
-  The bonding agent (resin) flows into these microscopic pores.
-  In dentin, it infiltrates the collagen network to form a **"Hybrid Layer."**

### Step 3: Locking (Resin Tags)
-  Once the resin hardens (polymerizes), it forms **Resin Tags** (approx. **620 m** long in enamel).
-  These tags lock into the tooth structure like a puzzle piece or, as you described, **fingers interlocking**.
-  This is called **Micromechanical Bonding**.

![How Acid-Etch Bonding Works](assets/adhesion_img_4_1.png)

#### Why wetting alone is NOT enough for long-term bonding?
-  Because you still need **stable infiltration + polymerized interlocking**, plus **durability against water/hydrolysis**, stresses, and contamination.

---

## 5) Factors that control bonding success (super high-yield)

### Wetting requirements
Good wetting needs:
-  Clean surface
-  Low surface tension adhesive
-  High surface energy substrate

### A) Contamination
Saliva/blood/oil contamination   surface energy   wetting   resin tag formation  **FAILURE**.

### B) Water
Water interferes with adhesion; **more water = poorer adhesion**.
But dentin must still be **moist**, not desiccated (see dentin section).

-  Contamination and excess moisture are major reasons why composite bonding fails.
-  For a reliable bond, the field must be **clean and well-isolated**free of saliva, blood, and debrisbecause contamination and water **prevent proper resin wetting and penetration**, reduce bond strength, and commonly cause **adhesive failure at the toothrestoration interface**.
-  However, dentin should **not be over-dried**.
  -  Aggressive air-drying can **collapse the exposed collagen network**, making the surface relatively impermeable and preventing resin infiltrationso the bond fails.

---

## 6) Smear layer (what it is + why it matters)

-  **Smear layer**: Poorly adherent layer of ground dentin produced by cutting a dentin surface; also, a tenacious deposit of microscopic debris that covers enamel and dentin surfaces that have been prepared for a restoration.
-  **Composition**:
  -  **Inorganic**: tooth structure + contaminants
  -  **Organic**: coagulated proteins/gelatinized collagen, pulp tissue, microorganisms
-  **Clinical role** = double-edged:
  -   reduces dentin permeability (protective)
  -   very weak cohesive layer  interferes with strong bonding

![Smear Layer on Dentin](assets/adhesion_img_6_1.png)

### Two strategies:
1. **Remove smear layer** (etch-and-rinse)
2. **Modify/penetrate through it** (self-etch systems)

#### Factors affecting smear layer:
-  **High-speed** = tightly attached
-  **Coarse diamond** = thicker
-  **Water spray** reduces amount/distribution but doesnt prevent it.

---

## 7) Acid-etch technique

### ENAMEL Etching (Key Numbers)

**The Agent**
-  **Material**: **Phosphoric acid** (usually supplied as a gel).
-  **Concentration**: Typically **37%** (range **30%50%**).
  -  **Note**: Concentrations **>50%** deposit **monocalcium phosphate monohydrate**, which inhibits etching.

**The Process (Key Numbers)**
-  **Etching Time**: Approximately **15 seconds**.
  -  **Variation**: Primary teeth or teeth with high fluoride content may require longer etching time.
-  **Rinsing Time**: Rinse thoroughly for about **20 seconds**.
-  **Drying**: Must be dried completely until it takes on a **white, frosted appearance**.

**The Effect (Microscopic Details)**
-  **Depth of Removal**: Dissolves the smear layer and removes approximately **10 microns** of the enamel surface.
-  **Etching Patterns**:
  -  **Type I**: Dissolves the **centers** of enamel rods.
  -  **Type II**: Dissolves the **peripheral areas** of enamel rods.
-  **Resulting Structure**: Creates a **high-energy, honeycomb-like surface**.

**Resin Tags (Mechanical Interlocking)**
-  Resin penetrates these etched micropores to form "tags."
-  **Tag Diameter**: Approximately **6 m**.
-  **Tag Length**: **10 to 20 m**.

![Enamel Acid Etching](assets/adhesion_img_7_1.png)

---

### DENTIN Etching (Why it is Technique-Sensitive)

#### 1. Complex Composition (The Challenge)
Unlike enamel, dentin is a **living tissue** with a complex composition:
-  **50% Inorganic**: Calcium phosphate mineral (hydroxyapatite).
-  **30% Organic**: Mainly **Type I Collagen**.
-  **20% Fluid**: Water.

#### 2. The Mechanism
-  **Action**: The acid dissolves the mineral phase (hydroxyapatite) completely for **several microns**.
-  **Result**: This exposes a **microporous network of collagen fibrils** that are suspended in water.

#### 3. The "Wet Bonding" Critical Balance
Dentin etching is highly sensitive because the collagen network relies on **water support** to remain expanded.
The dentist must manage the moisture level perfectly:

-  **If Too Dry (The Collapse Hazard)**:
  -  If the dentin is air-dried aggressively, the **collagen network collapses**.
  -  This forms a relatively **impermeable layer** that prevents resin monomers from infiltrating.
  -  **Result**: Poor bond strength and failure.

-  **If Too Wet**:
  -  If too much water remains, the resin (which is **hydrophobic**) cannot fully displace the water.
  -  **Result**: Resin infiltration is incomplete, leading to **voids and subsequent leakage**.

-  **The Goal**:
  -  The dentin must be kept **moist (glistening)** to keep the collagen "fluffed" and expanded for resin uptake.
  -  A **Primer** is then used to displace the water and carry the adhesive into the collagen network.

![Dentin Wet Bonding Moisture Balance](assets/adhesion_img_9_1.png)

---

## 8) Process & procedural factors

-  **Etching time**: usually **~15 sec** (may need slightly longer in high fluoride enamel or primary teeth).
-  **Rinse properly** (often taught **~20 sec**)  remove acid residues.
-  **Drying difference**:
  -  **Enamel**: dry hard (frosty)
  -  **Dentin**: keep moist (wet bonding concept)
-  **If contaminated**: clean + re-etch (commonly **~10 sec** is taught in many manuals).

---

## 9) Why Condition (Etch) Dentin?

-  **To Remove the Smear Layer**: Acid conditioning removes or modifies this layer.
-  **To Expose the Network**: It dissolves the mineral part of the dentin (hydroxyapatite) to expose the **collagen network**.
  -  This creates the microporous "mesh" that the resin needs to infiltrate to form a bond.

---

## 10) Dentin Bonding Agents (DBA) Definition

-  A thin layer of resin located between the conditioned dentin and the resin matrix of the composite restorative material.

### 1. The Hydrophilic Component (The Primer)
-  **Chemical Used**: **HEMA** (2-hydroxylethyl methacrylate).
-  **Why we need it**:
  -  **To Penetrate**: Dentin is wet (hydrophilic). HEMA is water-loving, so it can penetrate deep into the wet collagen network where other resins cannot go.
  -  **To Prevent Collapse**: It keeps the collagen fibers "fluffed up" and expanded after the acid is rinsed off.
  -  **To "Chase" Water**: It helps displace the water inside the dentin, making room for the resin.

![Why We Use A Primer](assets/adhesion_img_11_1.png)

### 2. The Hydrophobic Component (The Bonding Agent)
-  **Chemical Used**: **Bis-GMA** (Bisphenol A glycidyl methacrylate) or **TEGDMA**.
-  **Why we need it**:
  -  **To Match the Filling**: This is the same resin matrix used in the composite filling. Because they are chemically identical, they bond together perfectly (copolymerize).
  -  **To Seal**: It creates a tough, **hydrophobic layer** that seals the dentin tubules.
  -  **Strength**: It provides the physical strength of the bond.

### The "Why": The Bridge Effect
We need both because they act as a **chemical bridge**:
-  **HEMA** holds hands with the **Wet Dentin**.
-  **Bis-GMA** holds hands with the **Composite**.
-  Together, they allow a **dry plastic filling** to stick to a **wet, living tooth**.

---

## 11) Enamel vs Dentin Bonding (Key Difference)

-  **Enamel**: It is almost entirely mineral (hydroxyapatite) and can be dried completely. It acts as a **high-energy, dry surface** that resins can easily wet.
-  **Dentin**: It is a living, wet tissue with a much higher organic content.
  -  **Inorganic (Mineral)**: ~50%
  -  **Organic (Collagen)**: ~30%
  -  **Fluid (Water)**: ~20%

-  **Dentin is more challenging to bond than enamel** because it contains **much more organic material and water** (about **2030% organic content plus fluid**), whereas enamel is mostly mineral with very little organic content.
-  Since composite resins are relatively **hydrophobic**, they do not bond well to a wet surface, so bonding directly to dentin would be **weak and unpredictable**.
-  At the same time, we **cannot over-dry dentin** after etching.
  -  Aggressive air-drying causes the exposed collagen network to **collapse**, which closes the microporosities created by etching and prevents resin from penetrating.
-  To solve this, we use a **primer**.
  -  A primer contains **hydrophilic monomers** and a solvent that can **penetrate moist dentin and the exposed collagen network**, while still being compatible with the **hydrophobic bonding resin/composite**.
  -  In this way, the primer acts as a **bridge** between wet dentin and resin, enabling proper infiltration and formation of a strong **hybrid layer**.

---

## 12) Requirements for a "Successful DBA"

-  Manage or remove the smear layer.
-  Maintain the collagen scaffold (avoid collapse).
-  Achieve excellent wetting and penetration.
-  Polymerize inside the dentin and bond to the overlying resin.
-  Resist water degradation over time.

---

## 13) Two Bonding "Targets"

1. **Tooth Side**: Formation of a micromechanical **hybrid layer and resin tags**.
2. **Restoration Side**: **Copolymerization** with the composite or cement resin matrix.

---

## 14) Hybrid layer

-  After acid etching, the **primer and bonding resin** are applied.
-  They flow into the microporosities of etched dentin and infiltrate the exposed collagen network.
-  After light curing, this creates a layered interfacial zone called the **hybrid layer**a sandwich made of **dentin collagen + infiltrated resin** (from primer/adhesive) that links the tooth to the composite.

#### Micro-hybrid layer
-  The true microscopic interdiffusion zone inside dentin.
-  Resin penetrates between collagen fibrils (nano/micro spaces) within the demineralized intertubular dentin.
-  This is the real hybridization that gives **bond strength**.

#### Macro-hybrid layer
-  The larger, visible/clinical hybrid complex at the interface, including:
  -  the hybrid layer region plus the adhesive layer on top
  -  and often resin tags extending into tubules
-  Basically: everything at the bonding interface you can see as a thicker band, not just the microscopic collagen infiltration.

![Hybrid Layer Structure](assets/adhesion_img_12_1.png)
![Hybrid Layer Micro vs Macro](assets/adhesion_img_13_1.png)

---

## 15) Composition of bonding systems (whats inside)

-  **Etchant**: strong acid (often phosphoric **~3050%**; commonly **37%**) to create microporosity.
-  **Primer**: hydrophilic monomers + solvent (water/ethanol/acetone). Helps keep collagen expanded + replaces water.
-  **Adhesive resin**: more hydrophobic dimethacrylates to form the sealing intermediate layer.
-  **Initiators**: light-cure / self-cure / dual-cure systems.
-  **Fillers (optional)**: may thicken/strengthen adhesive layer.
-  **Other additives**: desensitizers, antimicrobials, fluoride, **MMP inhibitors** (like CHX in some protocols).

---

## 16) Dentin Bonding Agent (DBA) Classification

Different bonding systems are classified by **how many clinical steps** they require.
-  In some systems, the steps are **separate**for example **etch (rinse)  prime  bond**so you apply each component one after another.
-  In other systems, the materials are **combined** (primer + bond together, or even etch + prime + bond in one bottle), so you apply **one product** that performs multiple steps and simplifies the procedure.

![Dental Bonding Systems Step-by-Step](assets/adhesion_img_15_1.png)

| Category | System | Steps | Clinical Process | Key Characteristics from Text |
|:---|:---|:---|:---|:---|
| **Etch-and-Rinse** (Total-Etch) | **3-Step** (4th Gen) | 3 | 1. Etch (Rinse)<br>2. Primer<br>3. Adhesive |  The **"Gold Standard"**; most reliable and established.<br> Separate hydrophobic resin layer seals the bond best. |
| **Etch-and-Rinse** (Total-Etch) | **2-Step** (5th Gen) | 2 | 1. Etch (Rinse)<br>2. Prime + Bond (Combined) |  Most effective for **Enamel**.<br> Less durable on dentin (no separate hydrophobic layer, leading to water degradation). |
| **Self-Etch** | **2-Step** (6th Gen) | 2 | 1. Self-Etch Primer (No Rinse)<br>2. Adhesive |  **Good for dentin** because it prevents collagen collapse.<br> Smear layer is modified/incorporated, not removed. |
| **Self-Etch** | **1-Step** (7th Gen) | 1 | 1. All-in-One (Etch+Prime+Bond) |  User-friendly but **least durable**.<br> Acts as a semi-permeable membrane (attracts water).<br> Prone to **hydrolytic degradation**. |

**Note**: **Universal Adhesives** (8th Gen) often contain **10-MDP** (bonds to Ca in tooth & Zirconia).

---

## 17) Universal adhesives / functional monomers

-  **10-MDP** highlighted as key monomer:
  -  Bonds with dentin hydroxyapatite forming **stable calcium salts** (nanolayering concept in slide).
  -  Also helps bonding to **zirconia oxides**.
-  Meta-analyses comparing UA strategies (ER vs SE) show that **enamel bond strength** tends to be lower with pure SE strategy, improved by **longer/active application or double-coat**.

---

## 18) Luting agents & resin cements (what to choose)

-  **Traditional**: zinc phosphate (mainly mechanical), polycarboxylate, GIC/RMGI (chemical ionic bonding).
-  **Resin cements**:
  -  Best mechanical properties + high bond strength.
  -  Can bond to many substrates (tooth, composite, ceramics, metals) with **appropriate surface treatment**.
-  **Self-adhesive resin cements**: fewer steps; generally **weaker to intact enamel** than full etch systems (teaching point).
-  **Veneers**: commonly prefer **light-cure resin cement** (color stability + working time).
-  **Ceramics** may require:
  -  Sandblasting / **HF etch** (glass ceramics) / **Silane** / **Primers** (zirconia uses **MDP primers** + air abrasion type protocols).

 **Critical idea**: **No single cement is perfect** for every indirect restoration in every scenariosubstrate and restoration type dictate protocol.

---

## 19) Orthodontic bracket bonding (steps)

Typical bonding sequence:
1. **Prophylaxis**
2. **Phosphoric acid etch**
3. **Rinse**
4. **Dry**
5. **Primer/sealant**
6. **Resin cement placement + bracket**
7. **Light cure**

![Orthodontic Bracket Bonding](assets/adhesion_img_17_1.png)

-  **Note**: Self-adhesive cements are generally **not recommended** for ortho brackets because of lower bond to intact enamel vs conventional etch systems (common teaching).

---

## 20) Root canal sealers (bonding limitations)

Why bonding in canals is hard:
-  **Long narrow space**  hard to uniformly apply/evaporate solvents/penetrate dentin.
-  **Irrigants** (e.g., NaOCl) can affect collagen and bonding.
-  **Extremely high C-factor** (ratio bonded:unbonded walls)  huge polymerization shrinkage stress  debonding/gaps  leakage  failure risk.

**Systems**:
-  **Conventional**: gutta-percha + ZOE/CaOH/epoxy sealers (predictable).
-  **Resin-based obturation systems** exist, but true durable adhesive seal is challenging.

---

## 21) Glass ionomer restoratives (GIC / RMGI)

-  **True chemical bonding**: carboxyl groups (polyalkenoic acid) bond **ionically to Ca in hydroxyapatite**.
-  **Low shrinkage stress**  good retention in low-stress areas (like class V cervical lesions).
-  **Sandwich technique**: GIC base (fluoride release) + composite overlay.
-  **Why not routine sealants?**: lower wear resistance and retention in high-stress occlusal areas (common exam logic).

---

## 22) Amalgam bonding

-  **Bonded amalgam** = dentin bonding system + amalgam.
-  **Aims**:  microleakage,  fracture resistance.
-  **Mechanism**: mainly **mechanical interlocking** of condensed amalgam into viscous adhesive layer (macroretention), not true chemical bonding.

---

## 23) Pit & fissure sealants (clinical logic)

-  **Goal**: flow into fissures + seal against bacteria/debris.
-  **Needs low viscosity + excellent wetting**  etch is critical.
-  **Evidence teaching point**: if sealant remains intact, caries progression under it can be **arrested/doesnt progress**.

---

## 24) Quick exam answers to critical questions

-  **Why wetting alone isnt enough?** Needs resin infiltration + polymerization + hydrolytic stability + stress resistance; wetting is necessary but not sufficient.
-  **What bonds form with DBA?** Mainly **micromechanical** (hybrid layer + resin tags) + **copolymerization** with composite/cement; limited chemical contribution.
-  **Why dentin bond strengths vary?** Dentin water content, tubule orientation/density, smear layer variability, test method stress distributionhuge variability.
-  **Do bonding agents behave same on enamel vs dentin?** Noenamel is dry/inorganic (predictable etch pattern); dentin is wet/organic/tubular (technique-sensitive).
-  **Why self-adhesive cements not for ortho brackets?** Lower bond to intact enamel compared to phosphoric acid-etched conventional bracket resin systems (teaching standard).

---

`,Ov=[{id:"bonding-1",question:"What is the primary mechanism of bonding composite to tooth structure?",options:["True chemical bonding","Micromechanical interlocking","Macromechanical retention","Van der Waals forces"],correctAnswerIndex:1,explanation:"The bond is primarily micromechanical, formed by resin tags interlocking with etched enamel and the hybrid layer in dentin."},{id:"bonding-2",question:"What is the function of acid etching on enamel?",options:["To dry the tooth","To create microporosities for resin infiltration","To kill bacteria","To chemically bond to calcium"],correctAnswerIndex:1,explanation:"Acid etching dissolves hydroxyapatite to create a honeycomb microporous structure that allows resin to penetrate and lock."},{id:"bonding-3",question:"The 'Hybrid Layer' is formed by the infiltration of resin into:",options:["Etched enamel prisms","The smear layer","The exposed collagen network of dentin","The pulp chamber"],correctAnswerIndex:2,explanation:"The hybrid layer is the zone where resin infiltrates the demineralized collagen mesh of etched dentin."},{id:"bonding-4",question:"Which component of a bonding system is hydrophilic and helps re-expand collapsed collagen?",options:["Etchant","Primer","Adhesive resin","Filler"],correctAnswerIndex:1,explanation:"The primer contains hydrophilic monomers (like HEMA) and solvents that penetrate wet dentin and prevent collagen collapse."},{id:"bonding-q1",question:"Adhesion is best defined as:",options:["Attraction within the same material","Attraction between two different materials at an interface","Resistance to crack propagation inside a material","Ability of a liquid to evaporate"],correctAnswerIndex:1,explanation:" Answer: B  Adhesion = attraction between different materials at an interface."},{id:"bonding-q2",question:"Cohesion refers to:",options:["Attraction within the same material","Attraction between tooth and resin","Movement of bacteria through margins","Resin penetration into dentinal tubules"],correctAnswerIndex:0,explanation:" Answer: A  Cohesion = internal attraction within one material."},{id:"bonding-q3",question:"The tooth structure (enamel/dentin/ceramic/metal) being bonded is called:",options:["Adhesive","Adherend","Luting agent","Primer"],correctAnswerIndex:1,explanation:" Answer: B  Adherend = substrate being bonded."},{id:"bonding-q4",question:"Which term means adhesive spreads over the surface and is required before bonding?",options:["Cohesion","Wetting","Polymerization","Microleakage"],correctAnswerIndex:1,explanation:" Answer: B  Wetting must happen before any true bond develops."},{id:"bonding-q5",question:"A smaller contact angle indicates:",options:["Worse wetting","Better wetting","No effect on wetting","Only chemical bonding increases"],correctAnswerIndex:1,explanation:" Answer: B  Smaller angle = better wetting (0 = complete wetting)."},{id:"bonding-q10",question:"Resin tags mainly contribute to bond strength by:",options:["Chemical bonding to enamel crystals","Micromechanical retention into etched microporosities/tubules","Increasing dentin moisture","Increasing smear layer thickness"],correctAnswerIndex:1,explanation:" Answer: B  Tags = physical interlocking extensions."},{id:"bonding-q13",question:"More water = poorer adhesion is TRUE because water mainly:",options:["Enhances hydrophobic resin infiltration","Prevents polymerization shrinkage","Interferes with adhesion and resin infiltration","Creates more resin tags"],correctAnswerIndex:2,explanation:" Answer: C  Water competes with resin penetration and durability."},{id:"bonding-q19",question:"Most commonly used enamel etchant is:",options:["Hydrofluoric acid 9%","EDTA 17%","Phosphoric acid ~37% gel","Polyacrylic acid 10%"],correctAnswerIndex:2,explanation:" Answer: C  Standard enamel etch is phosphoric ~37%."},{id:"bonding-q20",question:"Typical enamel etching time is about:",options:["5 seconds","15 seconds","60 seconds","2 minutes"],correctAnswerIndex:1,explanation:" Answer: B  High-yield number: ~15 s."},{id:"bonding-q22",question:"A correctly etched enamel surface should look:",options:["Glossy and wet","White, frosted/chalky","Brown and stained","Oily and shiny"],correctAnswerIndex:1,explanation:" Answer: B  Frosty = good etch pattern and dryness."},{id:"bonding-q24",question:"Enamel etch pattern Type I means:",options:["Dissolves peripheral enamel rods","Dissolves centers of enamel rods","No demineralization occurs","Produces only smear layer removal"],correctAnswerIndex:1,explanation:" Answer: B  Type I = rod core dissolution."},{id:"bonding-q27",question:"Dentin composition is approximately:",options:["95% inorganic, 5% water","50% inorganic, 30% organic, 20% fluid","20% inorganic, 80% organic","100% inorganic like enamel"],correctAnswerIndex:1,explanation:" Answer: B  Key concept: dentin is wetter/organic  harder to bond."},{id:"bonding-q38",question:"After etching, drying requirements are:",options:["Enamel moist, dentin dry hard","Enamel dry hard, dentin moist","Both enamel and dentin flooded","Both enamel and dentin bone-dry"],correctAnswerIndex:1,explanation:" Answer: B  Classic exam contrast: enamel dry / dentin moist."},{id:"bonding-q40",question:"Glass ionomer bonds to tooth primarily by:",options:["Micromechanical resin tags","Ionic bonding of carboxyl groups to calcium in hydroxyapatite","Metallic bonding","Hydrogen bonding to saliva proteins"],correctAnswerIndex:1,explanation:" Answer: B  True chemical ionic bond to Ca."}],qv=[{id:"bonding-m1",question:"Why must dentin be kept 'moist' after etching (Wet Bonding technique)?",options:["To dilute the primer","To prevent collagen network collapse","To increase surface energy of hydroxyapatite","To neutralize the acid"],correctAnswerIndex:1,explanation:"If dentin is dried too much, the collagen network collapses and forms an impermeable layer, preventing resin infiltration and hybrid layer formation."},{id:"bonding-m2",question:"Which generation of bonding systems is considered the 'Gold Standard' for long-term durability?",options:["1-Step Self-Etch (7th Gen)","2-Step Etch-and-Rinse (5th Gen)","3-Step Etch-and-Rinse (4th Gen)","Universal Adhesives (8th Gen)"],correctAnswerIndex:2,explanation:"The 3-Step Etch-and-Rinse system (Etch + Primer + Bond) is the gold standard because it allows separate placement of a hydrophobic bonding layer, ensuring the best seal and durability."},{id:"bonding-m3",question:"What is the role of 10-MDP in universal adhesives?",options:["It is a solvent","It provides chemical bonding to calcium and zirconia","It acts as a photoinitiator","It removes the smear layer aggressively"],correctAnswerIndex:1,explanation:"10-MDP is a functional monomer that can chemically bond to hydroxyapatite (calcium) and oxide ceramics (like Zirconia), enhancing bond stability."},{id:"bonding-q6",question:"The big 3 goals of a bonding system are best represented by:",options:["Color matching, fluoride release, radiopacity","Resist separation, distribute stress, seal margins","Faster setting, higher viscosity, low cost","Increase smear layer, reduce wetting, increase porosity"],correctAnswerIndex:1,explanation:" Answer: B  Core goals: retention + stress distribution + seal."},{id:"bonding-q7",question:"Composite resin primarily bonds to etched enamel by:",options:["Ionic bonding to calcium","Micromechanical interlocking via resin tags","Hydrogen bonding to collagen","Metallic bonding"],correctAnswerIndex:1,explanation:" Answer: B  Etching creates microporosities  resin tags  micromechanical lock."},{id:"bonding-q8",question:"The correct sequence for micromechanical bonding is:",options:["Polymerize  etch  rinse","Etch/demineralize  infiltration/wetting  polymerized locking (tags/hybrid layer)","Rinse  dry dentin completely  bond","Smear layer formation  bond  etch"],correctAnswerIndex:1,explanation:" Answer: B  You first make micropores, then infiltrate, then polymerize to lock."},{id:"bonding-q11",question:"To achieve optimal wettability (contact angle  0) during bonding, which relationship must exist?",options:["High surface tension resin + low surface energy tooth","High surface energy tooth (clean/etched) + low surface tension resin","Equal, high surface tension values in both for cohesive equilibrium","Saliva contamination lowers surface energy and improves flow"],correctAnswerIndex:1,explanation:" Answer: B  High-energy substrate + low-tension adhesive = best wetting (small contact angle)."},{id:"bonding-q12",question:"Saliva/blood contamination usually causes bond failure mainly by:",options:["Increasing surface energy","Decreasing surface energy","Increasing etch depth","Increasing resin tag length"],correctAnswerIndex:1,explanation:" Answer: B  Contamination lowers surface energy  worse wetting  weaker bond."},{id:"bonding-q14",question:"After dentin etching, the ideal moisture condition is:",options:["Bone-dry (chalky) dentin","Glistening moist dentin (not puddled)","Flooded dentin with visible water droplets","No rinse after etch"],correctAnswerIndex:1,explanation:" Answer: B  Moist keeps collagen expanded; too dry collapses, too wet blocks infiltration."},{id:"bonding-q15",question:"Smear layer is BEST defined as:",options:["Strong enamel layer formed after etching","Poorly adherent debris layer created by cutting that covers prepared enamel/","A cured bonding resin layer","A bacterial biofilm only"],correctAnswerIndex:1,explanation:" Answer: B  Cutting produces a weak debris layer that interferes with bonding."},{id:"bonding-q16",question:"Clinically, the smear layer is double-edged because it:",options:["Always improves bond strength","Reduces permeability (protective) BUT is weak and interferes with bonding","Increases enamel hardness","Makes dentin drier"],correctAnswerIndex:1,explanation:" Answer: B  Protective barrier but weak cohesive layer."},{id:"bonding-q17",question:"Two major strategies regarding smear layer are:",options:["Remove it with self-etch; keep it with total-etch","Remove (etch-and-rinse) OR modify/penetrate (self-etch)","Never touch it; always bond over it","Only remove it in enamel, never in dentin"],correctAnswerIndex:1,explanation:" Answer: B  Thats the core difference in systems."},{id:"bonding-q18",question:"Smear layer tends to be thicker with:",options:["Fine finishing burs only","Coarse diamond preparation","Increased rinsing time only","Low-speed polishing only"],correctAnswerIndex:1,explanation:" Answer: B  Coarse diamond  thicker smear layer."},{id:"bonding-q28",question:"The major risk of over-drying etched dentin is:",options:["Increased resin tag formation","Collagen network collapse","Deeper etching pattern","Better bond durability"],correctAnswerIndex:1,explanation:" Answer: B  Collapsed collagen.  impermeable surface  poor infiltration"},{id:"bonding-q29",question:"If dentin is left too wet after etching, bond strength drops mainly because:",options:["Hydrophobic resin cannot displace water","Water increases polymerization","Smear layer becomes stronger","Enamel rods dissolve"],correctAnswerIndex:0,explanation:" Answer: A  Hydrophobic resin cannot displace water  incomplete infiltration/voids  leakage."},{id:"bonding-q30",question:"The MOST important role of the primer in dentin bonding is:",options:["Make enamel frosty","Displace water and carry monomers into exposed collagen network","Increase smear layer thickness","Replace etching completely in total-etch systems"],correctAnswerIndex:1,explanation:" Answer: B  Primer bridges moist collagen to resin."},{id:"bonding-q31",question:"HEMA in primer is primarily:",options:["Hydrophobic monomer that seals tubules","Hydrophilic monomer that penetrates moist dentin collagen","Acid etchant","Filler particle"],correctAnswerIndex:1,explanation:" Answer: B  HEMA = hydrophilic, penetrates wet collagen."},{id:"bonding-q33",question:"Why is isolation (rubber dam/cotton roll + suction) critical during composite bonding?",options:["It increases dentin tubule diameter, improving resin tag length","It prevents saliva/blood contamination that lowers surface energy and blocks proper wetting","It makes enamel rods dissolve faster, creating deeper etch patterns","It prevents polymerization of the bonding agent"],correctAnswerIndex:1,explanation:" Answer: B  Contamination reduces wetting/penetration  weak bond + leakage."},{id:"bonding-q34",question:"4th generation (3-step etch-and-rinse) sequence is:",options:["Etch  bond only","Etch (rinse)  primer  adhesive","Self-etch primer  adhesive","All-in-one single bottle only"],correctAnswerIndex:1,explanation:" Answer: B  Gold standard: separate primer + separate adhesive."},{id:"bonding-q35",question:"A key weakness of 5th generation (2-step etch-and-rinse) vs 4th gen is:",options:["Cannot bond to enamel at all","No separate hydrophobic adhesive layer","Always removes smear layer incompletely","Requires no etching"],correctAnswerIndex:1,explanation:" Answer: B  Combining steps reduces long-term dentin durability.No separate hydrophobic adhesive layer  more water degradation over time"},{id:"bonding-q36",question:"Self-etch systems are often good for dentin because they:",options:["Require complete desiccation of collagen","Reduce collagen collapse risk and incorporate/modify smear layer","Produce the frosty enamel appearance","Always give highest enamel bond strength without selective etch"],correctAnswerIndex:1,explanation:" Answer: B  Less collapse risk; smear layer is modified rather than fully removed."},{id:"bonding-q37",question:"7th generation (1-step self-etch) systems tend to be less durable because they:",options:["Are fully hydrophobic","Act like semi-permeable membranes and attract water","Cannot polymerize","Always increase resin tag length"],correctAnswerIndex:1,explanation:" Answer: B  All-in-one often  more water movement and breakdown."},{id:"bonding-q39",question:"If the etched surface gets contaminated (saliva/blood), the BEST immediate management is typically:",options:["Cure the adhesive immediately without cleaning","Clean and re-etch","Skip bonding agent and place composite directly","Use GIC only"],correctAnswerIndex:1,explanation:" Answer: B  Contamination kills wetting; re-etch restores surface energy."},{id:"bonding-q41",question:"Bonded amalgam improves outcomes mainly by:",options:["Strong chemical bonding between amalgam and dentin","Mechanical interlocking of condensed amalgam into viscous adhesive (macroretention) + reduced microleakage","Enamel resin tags inside amalgam","Increasing polymerization shrinkage"],correctAnswerIndex:1,explanation:" Answer: B  Mostly mechanical, not true chemical bonding."},{id:"bonding-q42",question:"Pit & fissure sealant success MOST depends on:",options:["High viscosity and poor wetting","Excellent flow + etch-created microporosity for retention","Chemical bonding like GIC","No need for isolation"],correctAnswerIndex:1,explanation:" Answer: B  Low viscosity + etch  retention + seal."},{id:"bonding-q43",question:"Orthodontic bracket bonding typically includes:",options:["Prophylaxis  phosphoric etch  rinse  dry  primer/sealant  resin + bracket  light cure","HF etch only  silane  cement","No etching required","Only GIC placement"],correctAnswerIndex:0,explanation:" Answer: A  Standard bracket bonding protocol sequence."}],Bv=[{id:"bonding-h1",question:"A 'Type I' enamel etching pattern involves:",options:["Dissolution of the peripheral enamel rods","Dissolution of the centers of enamel rods","Removal of the smear layer only","Precipitation of calcium salts"],correctAnswerIndex:1,explanation:"Type I etching pattern dissolves the centers (cores) of enamel rods. Type II dissolves the peripheries."},{id:"bonding-q9",question:"In dentin bonding, the Hybrid Layer is structurally distinct from Resin Tags because it consists of:",options:["Projections of adhesive resin extending deep into opened dentinal tubules","A layer of pure, unfilled adhesive resin sitting on top of the primed surface","Resin monomers infiltrated and polymerized within the demineralized intertubular collagen network","Modified smear layer incorporated into the acidic primer without removal"],correctAnswerIndex:2,explanation:" Answer: C  Hybrid layer = resin-infiltrated demineralized collagen (intertubular dentin)."},{id:"bonding-q21",question:"A clinician accidentally uses high-concentration phosphoric acid (>50%) or leaves the etchant on too long, and later notices the enamel does not etch effectively despite more time. What is the MOST likely reason?",options:["Collagen network collapses due to overdrying","Formation of a monocalcium phosphate monohydrate precipitate that inhibits further etching","Enamel rods become more resistant because smear layer thickens","Resin tags become excessively long, causing cohesive enamel fracture"],correctAnswerIndex:1,explanation:" Answer: B  >50% phosphoric acid (or excessive etching conditions) can deposit monocalcium phosphate monohydrate on the surface, which inhibits further dissolution, reducing etching effectiveness and risking weak bonding."},{id:"bonding-q25",question:"Why is simply air-drying a saliva-contaminated etched enamel surface insufficient to restore bond strength, so re-etching is needed?",options:["Saliva water penetrates deep and cannot evaporate, causing hydrolytic degradation","Salivary glycoproteins adsorb to etched enamel, lowering surface energy and preventing resin wetting","Bacterial enzymes inhibit camphorquinone, preventing full cure","Saliva minerals precipitate into a hyper-mineralized smear layer that blocks micropores"],correctAnswerIndex:1,explanation:' Answer: B Why B is the best answer: The "ambiguity" here is that while saliva contains water (A), bacteria (C), and minerals (D), the immediate reason for bond failure is the organic biofilm (glycoproteins). Acid-etched enamel is a "high-energy" surface. Organic proteins function like oilthey coat the surface instantly. You cannot "dry" oil off; you must re-etch to burn it off.'},{id:"bonding-q32",question:"Question: In a multi-step adhesive system, what is the primary role of the hydrophobic dimethacrylates (such as Bis-GMA and TEGDMA) found in the bonding agent?",options:["To act as a solvent that displaces water from the collagen network.","To copolymerize with the restorative composite and seal the primed dentin.","To demineralize the smear layer and expose the collagen fibrils.","To provide a hydrophilic interface that wets the naturally moist dentin surface."],correctAnswerIndex:1,explanation:" Answer: B The bonding agent (Bis-GMA/TEGDMA) is chemically identical to the resin matrix of the composite filling. Its job is to bind to the primer and then copolymerize (link chemically) with the composite, creating a strong, sealed union."},{id:"bonding-q44",question:"Why is bonding in root canals difficult?",options:["Low C-factor and easy solvent evaporation","High C-factor + difficult access + irrigants (e.g., NaOCl) affecting bonding","Enamel-like substrate and dry field","No fluid in dentin tubules"],correctAnswerIndex:1,explanation:" Answer: B  High C-factor + technique challenges + irrigant effects."},{id:"bonding-q45",question:"The major risk of high C-factor in canals is:",options:["Increased wetting","Huge polymerization shrinkage stress","Better marginal seal always","Increased fluoride release"],correctAnswerIndex:1,explanation:" Answer: B  High bonded:unbonded ratio concentrates shrinkage stress."},{id:"bonding-q46",question:"Why is bonding to sclerotic dentin (glassy, shiny dentin) significantly harder than bonding to normal dentin?",options:["It is excessively wet and hydrophilic.","The dentinal tubules are obliterated with mineral, preventing hybrid layer formation.","It is too soft to support the bond.","It contains excessive bacteria."],correctAnswerIndex:1,explanation:` Answer: B
Why (exam logic):
 Sclerotic dentin is hyper-mineralized.
 Dentinal tubules are occluded with mineral deposits.
 Acid etching cannot adequately demineralize the surface  collagen network is not exposed  poor resin infiltration  weak or absent hybrid layer.`}],Hv=`
# Dental Waxes

The only wax that requires detail is the inlay wax other u have to remember uses mostly and
some properties

**Inlay wax**: The wax used to make the wax pattern (positive replica) of a restoration; this
pattern is then invested and burned out to create a negative mold for casting.

![Inlay Wax Overview](assets/images/wax/wax_pdf_img_1.png)

## Inlay wax (Pattern wax)  complete topic

### 1) What inlay wax actually does (core concept)
- **Inlay wax is a pattern wax**  you build a positive wax pattern of the restoration (inlay/onlay/crown, etc.).
- That wax pattern is invested (surrounded by investment).
- Then wax is burned out  leaves a negative mold space inside the investment.
- Molten alloy (or pressed ceramic in some systems) fills that space  **final restoration can only be as accurate as the wax pattern**.

![Pattern Process](assets/images/wax/wax_pdf_img_2.png)

![Pattern Example](assets/images/wax/wax_pdf_img_3.png)


### 2) Where it fits in classification
Dental waxes can be classified:

**By use location**
- **Clinical**: bite registration wax, disclosing wax, utility wax, Type I inlay wax (direct technique; low melting; used in mouth).
- **Laboratory**: boxing wax, baseplate wax, sticky wax, beading wax, utility wax, Type II inlay wax (indirect technique; used on die/model).

**By function**
- **Pattern wax/modeling waxes**: inlay wax, casting wax, baseplate wax
- **Processing wax**: boxing, utility, sticky
- **Impression wax**: bite registration/corrective

 **Inlay wax belongs to pattern waxes.**
 **Type II wax is required for lost-wax processing of cast prostheses/frameworks.**

---

### 3) Composition (whats inside + why) IMP
- **Paraffin (~4060%)**  main body; moldable but flakes and lacks smooth/gloss alone.
- **Gum dammar (dammar resin)**  improves smoothness,  toughness,  cracking/flaking, improves luster.
- **Carnauba wax**  very hard, high MP  reduces flow at mouth temperature, adds gloss.
- **Candelilla wax**  can replace carnauba partly/fully (similar effect; lower MP; less hard).
- **Ceresin**  improves toughness + carving behavior (may replace part of paraffin).
- **Synthetic waxes** (compatible with paraffin)  more uniform; allow better working characteristics.
- **Coloring agents**  contrast with tooth/die/model; helps margin carving.
- **Fillers (sometimes)**  help control expansion/shrinkage; must burn out cleanly.

#### The few constituents that matter (exam logic)
**High-yield**: different waxes are basically the same base wax recipe, but you shift the % of key constituents to force the behavior you want (tacky vs hard vs pliable vs low-flow).

Heres the high-yield ingredient  effect  which wax uses more of it:

**1) Paraffin (hydrocarbon base)**
- More paraffin  more moldable/flowy, but also more shrinkage + more flaking/brittleness if its too pure.
-  Used in most waxes as the main body (often ~4060% in inlay wax).

**2) Hardeners (Carnauba > Candelilla)**
- More carnauba/candelilla  harder, higher melting range, lower flow at mouth temp, more gloss, but can become more brittle.
-  Hardness + low mouth-flow waxes use more of this.

**3) Tougheners / anti-flake modifiers**
- Dammar resin (gum dammar) / microcrystalline wax / ceresin
- More dammar  smoother surface + tougher, less cracking/flaking
- More microcrystalline/ceresin  tougher, less brittle, better carving/adaptation than paraffin alone
-  Waxes that must carve nicely or not chip use more of these.

**4) Tackifier resin (Rosin / sticky resins)**
- More rosin  very tacky when melted, brittle when cooled (classic sticky wax behavior).
-  **Sticky wax = high rosin** (this is the big differentiator).

**5) Plasticizers (often Beeswax / soft wax fractions)**
- More beeswax/soft fractions  more pliable, easier to adapt at room temp, but more distortion/flow at mouth temp if excessive.
-  Used in waxes that need to be soft and adaptable.

**6) Fillers (sometimes added)**
- More filler  stiffer, less thermal distortion/shrink, can improve handling (common idea in bite reg waxes).
-  Used where dimensional stability is critical.

#### Now apply it: If you want this wax increase these

**Sticky wax**
- Goal: tacky when hot, locks parts when cool
- Main use: Hold metal parts together before soldering (also holds broken denture parts/model pieces temporarily).
-   Rosin / tackifying resins (main difference)
-  Moderate base wax (paraffin/microcrystalline)
-  Low plasticizer (so it becomes brittle/firm when cooled)

**Inlay wax (pattern wax)  must do**
- Goal: accurate pattern, low flow at mouth temp, good carving, clean burnout
-   Paraffin base
-   Carnauba (hardener) to reduce mouth-temp flow
-   Dammar resin to reduce flaking + improve smoothness/gloss
-  Sometimes  ceresin/microcrystalline for toughness/carvability
- **Type I (direct)**: generally tuned for lower flow at 37C (so more hardener / higher-MP fractions idea).
- **Type II (indirect)**: comes soft/medium/hard depending on how much hardener/toughener is used.

**Boxing wax**
- Goal: soft, pliable sheet, seals around impression
-   Plasticizer/soft wax fractions (more pliable)
-  Often  microcrystalline for smooth bending without cracking
-  Low carnauba (you dont want it hard)
-  Small resin content helps it self-seal when pressed

**Baseplate wax**
- Goal: stable record base + rim form (dentures)
-   Paraffin/ceresin base (major portion)
-   Beeswax/resins to control flow and handling
-  Hard/medium/soft types = mostly by shifting hardener vs plasticizer

**Utility wax**
- Goal: very adaptable at room temp for tray borders
-   microcrystalline + plasticizers (very pliable)
-  Low hardeners (otherwise it wont adapt easily)

**Bite registration (impression) wax**
- Goal: records occlusion with minimal rebound/distortion after removal
-  Often  fillers and stability modifiers
-  Controlled flow: soft enough at mouth temp to record, rigid enough at room temp to hold shape

---

### 4) Types (Type I vs Type II)
- **Type I inlay wax (Direct technique)**
  - Used in the mouth
  - Must have very low flow at 37C so it can be carved/removed without distortion.
- **Type II inlay wax (Indirect technique)**
  - Used on die/model
  - Comes as soft/medium/hard varieties; used for lost-wax patterns made outside the mouth.

### 5) Flow (most tested property)
Why flow matters: too much flow  distortion and wrong fit.

**Type I**
- 37C: max 1%
- 45C: 7090%

**Type II**
- 30C: max 1%
- 37C: max 50%
- 45C: 7090%

**Meaning (exam logic):**
- At 45C, wax must flow a lot  to adapt into fine details.
- At 37C, Type I must barely flow  so the pattern doesnt distort while carving/removing in the mouth.

---

### 6) Thermal properties (why direct technique is tricky)
- **Low thermal conductivity**  wax heats/cools unevenly unless given time.
- **High coefficient of thermal expansion (CTE)**  tiny temperature changes = big dimensional change (**largest among dental materials**).
  - Wax may expand ~0.7% with +20C
  - May contract ~0.35% cooling 37C  25C
- Glass transition region (~35C) in paraffin-rich waxes  expansion/plasticity behavior changes around here.
-  This is less significant in indirect technique because the pattern isnt going mouth  room temp.

### 7) Wax distortion (common causes)
Wax patterns distort due to:
- Physical deformation during molding/carving/removal
- Trapped stresses from cooling/manipulation
- Elastic memory
- Occluded air
- Excess storage time (stress relaxation)
- Temperature extremes/changes during storage/handling

**Key rule**: best fit occurs when a pattern is **invested immediately** after removal.

### 8) Burnout requirement (must know)
- Wax must be eliminated completely from the mold during burnout.
- If wax leaves residue/impervious coating  casting quality and fit suffer.
- Ideal: at ~500C, residue should be **0.10%** of original wax weight.

### 9) The classic critical question (direct vs indirect fit)
**Why can a direct wax pattern produce a looser inlay than indirect?**
- Because in direct technique the pattern is formed at mouth temperature, then removed and cools to room temperature causing thermal contraction + stress release (elastic memory)  distortion/shrinkage  inaccurate pattern  poorer fit.
`,XM=`
# Wax (Summary)

## Key Definitions
- **Pattern Wax**: Used to create the mold (e.g., Inlay Wax).
- **Processing Wax**: Used to aid laboratory steps (e.g., Boxing Wax).
- **Impression Wax**: Used to record bites (e.g., Aluwax).

## Composition Highlights
- **Paraffin**: Main ingredient (40-60%).
- **Carnauba**: Hardener + Gloss.
- **Dammar**: Toughener + Smoothness.

## Critical Exam Points
- **CTE**: Highest of ALL dental materials (expands/contracts the most).
- **Conductivity**: Very low (insulator). Heat evenly to avoid stress.
- **Elastic Memory**: Wax distorts over time. **Invest immediately.**
- **Type I vs II**: 
  - Type I (Direct/Mouth): Low flow at 37C.
  - Type II (Indirect/Bench): Used on dies.
`,Wh=["Inlay wax is a pattern wax used to create the lost-wax mold space.","Paraffin (~40-60%) is the main component but causes brittleness if used alone.","Carnauba wax is added as a hardener to reduce flow at mouth temperature.","Gum Dammar is a toughener added to prevent carving from flaking or cracking.","Type I inlay wax is for direct (in-mouth) use; it has stricter flow limits at 37C.","Dental waxes have the highest coefficient of thermal expansion of all dental materials.","Waxes have low thermal conductivity; they must be heated slowly and evenly.","Investing immediately after removal prevents distortion caused by stress relaxation.","Clean burnout requires residue to be  0.10% by weight."],ET=[{id:"wax-pdf-2",question:"Biggest reason wax is dimensionally unstable vs other materials:",options:["High CTE","High strength","High k","High density"],correctAnswerIndex:0,explanation:" Answer: A Wax has very high thermal expansion (CTE)."},{id:"wax-pdf-5",question:"Cause of shape change hours after carving:",options:["Elastic memory","Hygroscopy","Corrosion","Polymerization"],correctAnswerIndex:0,explanation:" Answer: A Wax relieves trapped stresses over time."},{id:"wax-pdf-10",question:"Main base wax:",options:["Paraffin","Rosin","Gypsum","Eugenol"],correctAnswerIndex:0,explanation:" Answer: A Paraffin is the main body (often 4060%)."},{id:"wax-pdf-13",question:"During inlay wax manipulation, dry heat is preferred over a water bath. The main reason is that a water bath can:",options:["Cause staining of wax","Introduce water droplets into wax","Increase radiopacity of wax","Cause corrosion of wax"],correctAnswerIndex:1,explanation:" Answer: B Water droplets incorporated into wax can cause varying expansion and spattering (smearing) during heating."},{id:"wax-pdf-18",question:"Highest thermal conductivity (k):",options:["Wax","Metal","Ceramic","PMMA"],correctAnswerIndex:1,explanation:" Answer: B Metals transfer heat fastest."},{id:"wax-pdf-20",question:"Material that softens over a range (not a single sharp point):",options:["Pure metal","Wax","Gypsum","Ceramic"],correctAnswerIndex:1,explanation:" Answer: B Wax is a mixture  softens over a melting range."},{id:"wax-pdf-21",question:"Material with sharp melting point:",options:["Wax","Pure metal","PMMA","Alginate"],correctAnswerIndex:1,explanation:" Answer: B Pure metals melt at a defined temperature."},{id:"wax-pdf-23",question:"Material designed for elastic recovery after removal from undercuts:",options:["Inlay wax","Elastomer impression","Gypsum die","Ceramic"],correctAnswerIndex:1,explanation:" Answer: B Elastomers are meant to recover elastically."},{id:"wax-pdf-26",question:"Pattern material that must burn out cleanly to leave a mold:",options:["Wax pattern","Gypsum die","Ceramic crown","Metal coping"],correctAnswerIndex:0,explanation:" Answer: A Lost-wax needs clean burnout  clean cavity."},{id:"wax-pdf-29",question:"The biggest reason direct wax patterns are less accurate than indirect:",options:["No die needed","Mouthroom temp change","Wax is radiolucent","Wax is brittle"],correctAnswerIndex:1,explanation:" Answer: B Cooling causes thermal contraction + distortion."},{id:"wax-pdf-30",question:"Material that is chemically set (not thermoplastic):",options:["Wax","Gypsum","Impression compound","PMMA sheet"],correctAnswerIndex:1,explanation:" Answer: B Gypsum hardens by a setting reaction."},{id:"wax-pdf-32",question:"Which pair is correct?",options:["Wax = chemical set; gypsum = thermoplastic","Wax = thermoplastic; gypsum = chemical set","Wax = crystalline lattice; metal = amorphous","Wax = rigid; ceramic = flexible"],correctAnswerIndex:1,explanation:" Answer: B Wax softens with heat; gypsum sets chemically."},{id:"wax-pdf-34",question:"A wax pattern leaves a film inside the mold after burnout. The most likely casting effect is:",options:["Surface defect/misfit","Stronger casting","Higher conductivity","Less porosity always"],correctAnswerIndex:0,explanation:" Answer: A Residue coats mold wall  poor surface/fit."},{id:"wax-pdf-35",question:"Best material for rigid die (carving margins against it):",options:["Wax","Gypsum die stone","Alginate","Elastomer impression"],correctAnswerIndex:1,explanation:" Answer: B Die must be rigid and stable."}],_T=[{id:"wax-pdf-1",question:"Direct wax pattern  looser casting mainly due to:",options:["Expansion","Contraction","Corrosion","Setting"],correctAnswerIndex:1,explanation:" Answer: B Mouth  room cooling causes thermal contraction + distortion."},{id:"wax-pdf-4",question:"A wax pattern looks perfect on the die, but after 12 hours the margins open slightly. The BEST step to prevent this is:",options:["Bench storage","Immediate investing","Reheating margins","Finger pressure"],correctAnswerIndex:1,explanation:" Answer: B Wax undergoes stress relaxation/elastic memory with time; immediate investing locks the pattern inside the set investment, so it cant deform later."},{id:"wax-pdf-6",question:"Youre assisting in clinic. The operator says: Im doing a direct wax pattern for an inlay. Warm the wax, adapt it inside the prepared cavity in the mouth, carve margins at oral temperature, then remove it without distortion. Which wax is indicated?",options:["Type I inlay wax","Type II inlay wax","Baseplate wax","Sticky wax"],correctAnswerIndex:0,explanation:" Answer: A Type I is for direct intraoral waxing and is formulated to resist distortion at 37C."},{id:"wax-pdf-7",question:"Lab bench scenario The patient has left. Youre at the bench with a stone die. Your technician says: Make the inlay wax pattern on the die using the indirect technique. Pick the wax that comes in soft/medium/hard grades for lab waxing. Which wax is indicated?",options:["Type I inlay wax","Type II inlay wax","Bite registration wax","Boxing wax"],correctAnswerIndex:1,explanation:" Answer: B Type II is designed for indirect waxing on die/model and is supplied in different hardness grades."},{id:"wax-pdf-8",question:"At 37C, the maximum permitted flow for Type I inlay wax is:",options:[" 1%"," 20%"," 50%","7090%"],correctAnswerIndex:0,explanation:" Answer: A Very low flow at mouth temperature prevents distortion during carving/removal."},{id:"wax-pdf-9",question:"At 45C, the required flow range for Type I and Type II inlay wax is:",options:[" 1%"," 20%"," 50%","7090%"],correctAnswerIndex:3,explanation:" Answer: D High flow at 45C allows wax to adapt and reproduce fine detail."},{id:"wax-pdf-11",question:"A paraffin-based inlay wax produces a rough, flaky surface when trimmed and fails to develop a smooth glossy finish. Which additive is specifically incorporated to improve smoothness and luster and to reduce cracking/flaking?",options:["Dammar resin","Rosin","Water","Silica"],correctAnswerIndex:0,explanation:" Answer: A Dammar resin modifies paraffin by increasing toughness and smoothness, making the wax less prone to flaking/cracking and giving a better luster."},{id:"wax-pdf-12",question:"An inlay wax must resist distortion at oral temperature while still producing a smooth, glossy surface. Which component is added to decrease flow at mouth temperature and increase surface gloss?",options:["Carnauba wax","Glycerin","Plaster","Alcohol"],correctAnswerIndex:0,explanation:" Answer: A Carnauba wax is a hard, highmelting point wax that reduces flow at 37C and improves gloss."},{id:"wax-pdf-14",question:"In the lost-wax technique, the inlay wax pattern represents the restoration as a:",options:["Positive pattern","Negative mold","Die spacer","Separating film"],correctAnswerIndex:0,explanation:" Answer: A The wax pattern is the positive replica of the final restoration."},{id:"wax-pdf-15",question:"After the wax pattern is eliminated during burnout, the investment contains a:",options:["Positive replica","Negative mold cavity","Separating layer","Die relief space"],correctAnswerIndex:1,explanation:" Answer: B Burnout removes the wax and leaves a negative mold space that will be filled by molten alloy."},{id:"wax-pdf-17",question:"Highest thermal expansion (CTE) among these:",options:["Wax","Ceramic","Metal","Gypsum"],correctAnswerIndex:0,explanation:" Answer: A Wax has the highest CTE  biggest size change with small temperature change."},{id:"wax-pdf-19",question:"Lowest thermal conductivity (k) (heats unevenly most):",options:["Metal","Ceramic","Wax","Gypsum"],correctAnswerIndex:2,explanation:" Answer: C Wax is a poor heat conductor  surface softens first."},{id:"wax-pdf-22",question:"Elastic memory causing pattern distortion with time best matches:",options:["Wax","Gypsum","Ceramic","Metal"],correctAnswerIndex:0,explanation:" Answer: A Wax releases trapped stresses  shape changes later."},{id:"wax-pdf-24",question:"Creep at room/mouth conditions is most problematic for:",options:["Wax","Ceramic","Gypsum","Glass"],correctAnswerIndex:0,explanation:" Answer: A Wax is viscoelastic  deforms under small loads over time."},{id:"wax-pdf-25",question:"Best step to stop wax creep/memory from ruining accuracy:",options:["Store overnight","Invest immediately","Reheat repeatedly","Press hard while cooling"],correctAnswerIndex:1,explanation:" Answer: B Set investment locks the pattern  no later distortion."},{id:"wax-pdf-27",question:"If burnout leaves residue, the main problem is:",options:["Higher CTE","Mold wall coating","Higher hardness","Higher k"],correctAnswerIndex:1,explanation:" Answer: B Residue coats mold walls  casting defects/misfit."},{id:"wax-pdf-28",question:"Most dimensionally stable with temperature change (lowest thermal distortion risk):",options:["Wax","Metal","PMMA","Impression compound"],correctAnswerIndex:1,explanation:" Answer: B Compared to wax/PMMA, metals change less with small temp changes."},{id:"wax-pdf-31",question:"Material that undergoes polymerization shrinkage (not cooling shrinkage):",options:["Wax","PMMA denture base","Metal alloy","Ceramic"],correctAnswerIndex:1,explanation:" Answer: B PMMA shrinks mainly by polymerization + processing."},{id:"wax-pdf-33",question:"A direct wax pattern is removed from the mouth; the operator keeps holding it between fingers to inspect margins. Most likely outcome:",options:["Better fit","Distortion","Stronger wax","Cleaner burnout"],correctAnswerIndex:1,explanation:" Answer: B Finger heat causes temperature change  wax dimension shifts/distorts."},{id:"wax-pdf-36",question:"Glass transition temperature (Tg) concept fits best with:",options:["Wax becomes soft/plastic near Tg","Metal becomes plastic near Tg","Gypsum melts at Tg","Ceramic flows at Tg"],correctAnswerIndex:0,explanation:" Answer: A Near Tg, wax shifts from stiff  more plastic/flowable."}],AT=[{id:"wax-pdf-3",question:"When softening inlay wax, the best reason to heat it slowly and allow soak time is because wax has:",options:["Rapid heat spread","Poor heat spread","High stiffness","High strength"],correctAnswerIndex:1,explanation:" Answer: B Wax has low thermal conductivity, so if you dont heat slowly/allow soak time, the outside overheats and becomes too soft/runny while the core stays firm  you get uneven flow, poor adaptation, and a higher chance of pattern distortion."},{id:"wax-pdf-16",question:"In a paraffin-rich inlay wax, the point near ~35C where the rate of thermal expansion increases abruptly and the wax becomes more plastic is called:",options:["Melting point","Glass transition temperature","Boiling point","Dew point"],correctAnswerIndex:1,explanation:" Answer: B Glass transition temperature is where wax shifts toward a more plastic/rubbery behavior and its thermal expansion rate changes sharply (commonly around 35C in paraffin-rich inlay waxes) Below Tg: molecules are stuck  wax stays hard. At Tg: molecules start slipping past each other  wax becomes soft/plastic and flows more, so its expansion also increases faster."}],ZM=[...ET,..._T,...AT],e3=["Metals are crystalline solids with metallic bonds.","Properties include ductility, malleability, and conductivity.","Dental applications: Restorations, prostheses, implants, and orthodontics."],t3=`
# Metals in Dentistry

## 1) Introduction to Dental Metals
### Why use metals?
- **Strength**: High toughness and fatigue resistance (won't break easily).
- **Stiffness (Modulus)**: Good for RPD frameworks and PFM copings (doesn't bend too much).
- **Hardness**: Durable, but can wear opposing teeth if too hard.

### Key Types in Dentistry
- **Noble Alloys**: Gold, Palladium, Platinum (Corrosion resistant).
- **Base Metal Alloys**: Ni-Cr, Co-Cr, Ti (Stronger, stiffer, rely on passivation).
- **Wrought Alloys**: Wires (SS, NiTi) shaped by bending/drawing.



---

## 2) Biocompatibility: The Big Risks
### Nickel (Ni) Allergy
- **Most common** metal allergy (females > males).
- **Risk**: Contact dermatitis (rash/inflammation).
- **Beryllium (Be)**: Sometimes added to Ni-Cr to lower melting point, but is defined as a **carcinogen** and causes **berylliosis** (lung disease). **Use is declining.**

### Galvanic Shock/Corrosion
- **Two different metals** + **Saliva (electrolyte)** = **Battery**.
- **Pain**: Short-circuit current through pulp.
- **Corrosion**: The less noble (anode) metal corrodes.
- *Example*: Old amalgam touching a new gold crown.

---

## 3) Passivation (The "Shield" Concept)
### Definition
- Base metals (Ti, Cr, Al) are chemically reactive, BUT they form a thin, invisible, stable **oxide film** that blocks further corrosion.
- The film can "self-heal" if oxygen is available.

### Key Dental Examples
- **Stainless steel / CoCr / NiCr**: Chromium forms **CrO** passive layer.
- **Titanium**: Forms **TiO** passive layer (excellent biocompatibility).

### What can challenge passivation clinically?
- Low-oxygen crevices  **crevice corrosion** risk.
- Chloride-rich environments + defects  **pitting** risk.
- Grain-boundary chromium depletion (sensitization)  **intergranular corrosion**.

---

## 4) Stainless Steel: Phases, Microstructures, and the Role of Chromium + Carbon

### A) Phases of Iron/Steel (true phases)
- **Ferrite (-Fe)**
  - **BCC** structure.
  - Soft, ductile; **low carbon solubility**.
- **Austenite (-Fe)**
  - **FCC** structure.
  - Higher carbon solubility; tough/ductile at higher temperature.
- **Cementite (FeC)**
  - Very hard, brittle iron carbide.
- **Delta ferrite (-Fe)**
  - High-temperature **BCC** phase.

### B) Common steel microstructures
- **Pearlite** = **ferrite + cementite** lamellae
  - Strength , ductility  compared with ferrite.
- **Martensite**
  - Formed by rapid quenching (diffusionless transformation).
  - Very hard, brittle unless tempered.
- **Tempered martensite**
  - Balance of hardness + improved toughness.

### C) What ferrochromium does in steel (FeCr additive)
- Adds **chromium (Cr)** to steel.
  - Enables **CrO** passive film  **corrosion resistance ** (stainless behavior).
  - **Hardenability ** and **oxidation resistance **.
  - Forms hard **chromium carbides**  **wear resistance ** (when carbon is present).

### D) What carbon does in steel (high-yield)
- Increasing **carbon (C)** generally causes:
  - **Hardness **, **strength **, **wear resistance **.
  - **Ductility **, **toughness ** (more brittle tendency).
  - Supports formation of **FeC (cementite)** and **martensite**.

### E) Chromium + carbon issue: sensitization (exam concept)
- At certain temperatures (e.g., overheating/welding range):
  - **Cr + C  chromium carbides** (e.g., **CrC**) at grain boundaries.
  - This creates nearby **chromium-depleted zones**.
  -  Chromium depletion  weaker passivation  **intergranular corrosion risk**.
- **Prevention concepts**: Use **low-carbon stainless** (e.g., **L-grades**) or stabilized steels (e.g., **Ti/Nb stabilized**) to tie up carbon.

---

## 5) Nitinol (NiTi): Key Details for Dentistry
- **NiTi (Nitinol)** = **NickelTitanium alloy** used in:
  - **Orthodontic wires**.
  - **Endodontic rotary files**.

### Key behaviors
- **Shape memory**: deformation  heat/body temperature  returns toward original shape.
- **Superelasticity**: stress causes reversible phase change  large elastic deflection.

### NiTi phases (high-yield)
- **Austenite** (parent phase).
- **Martensite** (more easily deformed phase).
- **R-phase** may exist as an intermediate.

### Clinical pros/cons
- **Ortho**: more **constant, gentle force** over a range of activation.
- **Endo**: high **flexibility** helps follow curved canals.
-  **Risks**: **cyclic fatigue** (curved canals) and **torsional fracture** (binding).

---

## 6) RPD Clasps: Metallic Properties
### Rest (support)
- Must be **rigid** and **strong** (no flex).
-  Provides **vertical support** and helps define fulcrum behavior.

### Retentive arm
- Must have **controlled flexibility**, mainly in the **terminal third**.
- The **terminal tip** flexes over the height of contour  engages the undercut.
-  Flexible enough to engage undercut without stressing the abutment.

### Reciprocal arm / reciprocal plate
- Must be **rigid** (non-flexing).
-  Provides **reciprocation + bracing**, countering lateral forces from the retentive arm.

### Minor connector
- Must be **rigid** and dimensionally stable.
-  Transmits forces between the clasp and the framework.

### Approach arm (bar clasp)
- Origin/body should be relatively **rigid**, with **flexibility near the terminal**.
- Designed to approach undercut from the gingival direction.
-  Must flex without permanently deforming, then return to passive position.

---


---

## 8) Critical Exam Questions (High-Yield Essentials)

### Q: Why do metal properties differ so much from ceramics or polymers?
- **A**: **Metallic bonding** (the "electron sea"). It allows for nondirectional bonds, high thermal/electrical conductivity, and **ductility**. Ceramics have ionic/covalent bonds which are directional and brittle.

### Q: Why aren't pure metals (like pure gold) usually used for cast restorations?
- **A**: They are typically **too soft** and have low yield strength. Alloying is required to improve hardness, strength, and tarnish resistance.

### Q: Why does faster cooling result in smaller grains?
- **A**: Faster cooling (large supercooling) creates many stable nuclei at once. Because many grains start growing simultaneously, they collide quickly and cannot grow large. **Smaller grains = stronger metal (Hall-Petch effect)**.

### Q: What is the benefit of Iridium (Ir) or Ruthenium (Ru) in gold alloys?
- **A**: They act as **grain refiners**. They provide artificial sites for heterogeneous nucleation, ensuring a fine, uniform grain structure that is less likely to crack during adjustment.

### Q: What is the most common metal allergy in dentistry?
- **A**: **Nickel (Ni)**. It is frequently found in base metal alloys (Ni-Cr) and stainless steel.

![Grain Refinement & Strengthening](assets/metals/metals_img_14_1.png)
`,n3=["Alloy: Mixture of two or more metals.","Phase diagrams: Solid solutions (substitutional vs interstitial).","Heat treatment affects properties (e.g., gold alloys)."],i3=`
# Metals are a low yielding topic
## Dental alloys  ultra-high-yield concise notes

---

### 1)Why Metal Is Hard to Define (Clinical View)

-  A textbook definition (**good heat/electric conductor**, **lustrous**, **reflective**) is not enough for dentistry because clinicians care about:

  -  **Plaque adhesion**

  -  **Porcelain bonding**

  -  **Joining/soldering**

  -  **Fit**

  -  **Opposing wear**

  -  **Biocompatibility**

  -  **Corrosion/tarnish**
---

### 2)  Metals vs Alloys (Important)

-  Dentistry mostly uses **alloys (not pure metals)**, because pure metals are usually too **soft** and/or **corrode**.

-  Exception examples:

  -  **Gold foil** (direct filling)

  -  **Commercially pure titanium (CP-Ti)**

  -  **Silver points**


---

### 3) What Cast Metals Are Used For

-  **All-metal**: **inlays**, **onlays**, **partial crowns**, **full crowns**, **bridges**, **posts/cores**

-  **Frameworks**: **PFM (metal-ceramic)** and **metal-resin** prostheses

-  **RPD frameworks** + **implant abutments**

---

### 4) Dental Alloy Groups (Core Classification)  **IMP**

| Classification | Definition | Typical Uses |
|---|---|---|
| **High Noble (HN)** | ** 40% Au** and ** 60% total noble metal** | Crowns, bridges, inlays (**excellent corrosion resistance**). |
| **Noble (N)** | ** 25% total noble metal** | PFM frameworks, bridges (**good balance of cost/performance**). |
| **Predominantly Base (PB)** | **< 25% noble metal**<br>Common systems: **Ni-Cr**, **Co-Cr**, **Fe-C-Cr**, **CP-Ti**, **Ti-Al-V** | Partial dentures, specific crowns (**high strength**, relies on **passivation**). |
| **Amalgam** | Amalgam contains metals, but it doesnt behave like a typical metal. After setting it acts more like a composite (**particles + matrix**), so it can undergo **creep** (slow deformation under load). Also it is **brittle** it can fracture.<br><br>**Amalgam = an alloy that contains mercury (Hg).**<br>**Mercury + an alloy powder (mainly silver, tin, copper)** that reacts to form a hard set restoration. | Posterior restorations where esthetics dont matter: **Class I & Class II** (occlusal + proximal) in premolars/molars<br><br>Large posterior fillings needing **high strength + wear resistance**, especially when isolation is difficult<br><br>**Core build-up / foundation under a crown** (amalgam core)<br><br>Sometimes **Class V** on posterior/buccal cervical areas if not esthetic zone and moisture control is hard |

---

### 5) Key Alloying Elements  **VV IMP**

-  **Gold (Au)**: provides **corrosion resistance** and **ductility**

-  **Palladium (Pd)**: **whitens** alloys, increases **melting range** and **stiffness (modulus)**

-  **Platinum (Pt)**: increases **strength** and **melting point**

-  **Silver (Ag)**: increases **thermal expansion**; can cause **greening** of porcelain

-  **Copper (Cu)**: increases **strength** and **hardness**; **reddens** the alloy

-  **Zinc (Zn)**: **oxygen scavenger**; reduces **porosity** during casting

-  **Iridium (Ir)** / **Ruthenium (Ru)**: **grain refiners** (promote **smaller grain size**)

---

### 6) Metallic Bonding (Why Metals Behave Metal-like)

-  Valence electrons form a **sea/cloud of electrons**  **non-directional bonds**

-  Explains:

  -  **High thermal/electrical conductivity**

  -  **Luster**

  -  **Ductility/malleability**

  -  Basically metals electrons are free to go anywhere therefore they can easily conduct heat and electricity fast

-  **Stretch without breaking**

  -  When you pull/stretch, layers of metal atoms can slide past each other and the electron sea still holds them together  deforms instead of cracking

-  **Diagram space**:

  -  ![Metallic Bonding](assets/metals/metals_page_3_img_1.png)

---

### 7) Solidification + Microstructure (Casting Context)

-  When we cast, the alloy is melted and poured into the **investment mold**.

-  The topic here is what happens inside the metal as it cools from liquid to solid:

  -  **Nucleation**:

    -  Solidification starts when tiny atomic clusters (**embryos**) form in the liquid.

    -  Most embryos are unstable; only those that reach a **critical size** become stable nuclei and grow into crystals.

  -  **Heterogeneous nucleation (common in dental casting)**:

    -  Nuclei form on existing seeds such as **mold walls**, **investment irregularities**, **oxides**, **dust**, or **grain refiners (Ir/Ru/Re)**.

    -  Because part of the nucleus sits on a surface, the surface energy barrier is lower  nucleation happens easily.

  -  **Homogeneous nucleation (rare in dentistry)**:

    -  Nuclei form randomly in the bulk liquid without any surface/seed.

    -  Requires a much higher energy barrier  usually needs **very large supercooling**, which typical dental casting conditions dont reach.

-  **Diagram space**:

  -  ![Nucleation](assets/metals/NUCLEATION.png)

---

### 8) Solidification (Can **SKIP**)

-  Imagine metal is like water turning to ice:

  -  **1) Hot liquid  temperature drops**

    -  Youre just removing heat, so the temperature falls normally.

  -  **2) It reaches Tf (melting/freezing point) but may NOT freeze yet**

    -  Freezing needs a first crystal seed.

    -  If no seed forms immediately, the liquid goes a little below Tf  that tiny dip is **supercooling**.

  -  **3) The moment the first crystals form**

    -  As soon as freezing actually starts, liquid  solid.

  -  **4) Freezing releases hidden heat**

    -  Turning liquid into solid gives out stored heat called **latent heat of fusion**.

  -  **5) That released heat keeps temperature stuck at Tf**

    -  The temperature stops falling and stays flat at Tf (**the plateau**) until all liquid becomes solid.

  -  **6) After its 100% solid**

    -  No more latent heat release  temperature starts falling again.

---

### 9) The 5 Steps With Dentist Relevance (Can Skip)

-  **1. Supercooling (The Strength Factor)**

  -  The Physics: the metal drops below its freezing point to find the energy to start crystallizing.

  -  Dentist Relevance: determines the **Grain Size**.

    -  If the metal supercools naturally (without help), it forms large, tree-like crystals (**dendrites**).

    -  Consequence: large grains make the metal brittle. A clasp made this way will snap when you try to adjust it.

-  **2. Nucleation (The Grain Refiner Step)**

  -  The Physics: tiny crystal seeds form and solidification starts.

  -  Dentist Relevance: why you pay extra for alloys with **Iridium** or **Ruthenium** (**Grain Refiners**).

    -  These elements act as artificial seeds that force nucleation to happen everywhere at once.

    -  Consequence: creates **Fine Grains**, which makes the alloy significantly stronger and allows you to burnish the margins without flaking.

-  **3. Latent Heat Release / Recalescence (The Hot Tear Risk)**

  -  The Physics: the metal releases heat as it turns solid, warming itself back up.

  -  Dentist Relevance: release of heat keeps the metal mushy for longer.

    -  If your mold is too hot (high burnout temp), this extra heat can prevent thin sections (like margins) from freezing quickly enough.

    -  Consequence: leads to **Hot Tears**micro-cracks in the metal that cause the casting to fail under stress.

-  **4. The Plateau (The Do Not Touch Phase)**

  -  The Physics: the temperature stays flat while the metal finishes freezing.

  -  Dentist Relevance: the casting is a fragile mix of solid crystals floating in liquid.

    -  Consequence: if you or the technician move or bump the casting ring during this glow phase, you will fracture the internal structure.

    -  The casting will likely break when you try to seat it.

-  **5. Solid Cooling (The Fit)**

  -  The Physics: the fully solid metal cools down to room temperature and contracts.

  -  Dentist Relevance: **Shrinkage** (TF  Room Temp).

    -  Consequence: this is why your **investment material must expand**.

    -  If investment expansion doesnt perfectly match this cooling shrinkage  crown too tight or wont seat at all.

-  Just remember:

  -  Supercooling means the liquids temperature drops below its freezing point (Tf) because freezing needs a starting point (**a nucleus**).

  -  Analogy: the car is on, but it still needs acceleration to actually move forward  just like the liquid is ready to freeze, but without a nucleus it doesnt start yet (like gypsum nucleation).

-  **Diagram space**:

  -  ![Solidification Graph](assets/metals/SOLIDIFICATION.png)

---

### 10) MICROSTRUCTURE (Can Skip  Very Extensive Explanation)

#### A) Atom  Grain  Boundary  Dislocation  Slip (Simplest Build)

-  **1) Atom**

  -  An atom is the smallest unit of the metal (**Au atom**, **Cu atom**, etc.).

  -  ![Atom Structure](assets/metals/ATOM%20STRUCUTRE.png)

-  **2) Atoms in solid metal dont sit randomly**

  -  When metal solidifies, atoms stack in a repeating pattern like a 3D wallpaper.

  -  That repeating pattern = **crystal lattice (FCC/BCC/HCP)**.

  -  Analogy: bricks stacked in a repeating way.

  -  **FCC is the most common one in dentistry**
-  ![Crystal Structure 1](assets/metals/CRYSTAL%20ALTTICE.png)
---

#### B) Crystal vs Grain (Polycrystal)

-  **3) Crystal (one ordered block)**

  -  Definition: a region where atoms are stacked in one continuous, unbroken pattern.

  -  In a single crystal, the entire material is one solid block of perfect order.

  -  Analogy: a perfectly tiled floor where every single tile is laid straight, covering the entire room without a break.

  -  ![Tiled Floor Analogy](assets/metals/TILED_FLOOR.png)

| Feature | Crystal (Single) | Grain (Polycrystal) | CAN SKIP 
|---|---|---|
| Structure | One giant, perfect block. | Many small blocks stuck together. |
| Orientation | Same direction everywhere. | Changes direction from one grain to the next. |
| Boundaries | None (internal perfection). | Separated by Grain Boundaries. |
| Commonality | Rare (specialty tech). | Standard (almost all dental metals). |

-  **4) Grain = a tiny crystal region in the metal**

  -  A real casting (metal) is not one giant crystal. Its made of many tiny crystals.

  -  **Grain = a small crystal chunk** where atoms are lined up in the same pattern and the same direction.

  -  ![Grain Structure](assets/metals/GRAIN.png)

  -  Analogy: a tiled floor made of patches:

    -  One patch of tiles all pointing the same way = one grain

    -  Next patch tiles rotated a bit = another grain




-  **5) Why do grains exist?**

  -  During solidification, many crystals start growing at many different spots at the same time (many starts = nucleation).

  -  Each start grows in its own direction. Eventually they meet.

-  **6) Grain boundary = where two grains meet**

  -  When two grains with different directions collide, you get a seam.

  -  **Grain boundary = the border/seam** between two grains with different orientations.

  -  Analogy: the line where two different tile patches meet.
 -  ![Grain Boundary](assets/metals/metals_page_11_img_1.png)---

#### C) Dislocations + Slip (Why Metals Bend)

-  **7) Dislocation = the defect line that lets metal deform**

  -  A perfect lattice would be super strong. Real metals have dislocations (built-in line defects).

  -  **Dislocation = a line where the atomic layers are mis-stacked (an extra atom)**

  -  Its why we can bend metal: its a weak point that can move.

  -  Arm analogy:

    -  The Normal Arm (Perfect Crystal): rigid bone; if you force it, it snaps (fracture).

    -  The Extra Joint (Dislocation): a mistake but allows bending in a new place.

  -  Key takeaway: defects (dislocations) sound bad, but they are the only reason metals are useful. Without these extra joints, a metal spoon would shatter like glass if you tried to bend it.

  

-  **Malleability** = ability to deform under **compression** (hammer/press into shape).

-  **Ductility** = ability to deform under **tension** (stretch/elongate into a wire).

    -  ![Ductility and Malleability](assets/metals/DUCILITY%20AND%20MEALIBILITY.png)
 

Analogy:If you want the tile analogy, think of it like an extra tilesomething we dont usually needso it can move pretty easily because it isnt locked in like the rest. 


![Dislocation](assets/metals/DISLOCATION.png)

  

-  **8) Slip = dislocation movement (this is how metal bends)**

  -  When you bend a metal, atoms dont all shift together.

  -  Instead the dislocation moves, and the metal changes shape gradually.

  -  It moves in straight directions (up/down/left/right)  called a **slip plane** (dislocation slips in a 2D plane like a ball rolling on a table).



  -  EXTRA INFO:

    -  When shaping an **Adams clasp** or making letters from wire for practice adjusting a denture clasp, dislocations move.

    -  With repeated bending, dislocations pile up and get tangled  wire becomes more rigid/hard and less ductile.

    -  Keep bending back and forth  can crack and break.

  -  **Slip = a dislocation moving along a slip plane** (same plane left/right up/down)

  -  Analogy:

    -  Track/road = slip plane

    -  Car/train = dislocation (moves forward/reverse only on its track)

  -  ![Slip Analogy](assets/metals/metals_page_13_img_1.png)

---

#### D) Why Grain Boundaries Strengthening Metals (Exam Rule)

-  **9) Why grain boundaries block dislocations**

  -  Inside one grain, dislocation has a clear track (slip plane).

  -  At the grain boundary, the next grain is rotated, so the track doesnt line up.

  -  Dislocation gets stuck or needs extra force to continue.

  -  Train analogy:

    -  Inside a grain = rails are straight

    -  Grain boundary = rails end

    -  Next grain = rails rotated  not connected  train cant pass easily

    -  ![Annealing](assets/metals/metals_page_15_img_1.png)

  -  ![Grain Boundaries](assets/metals/metals_page_14_img_1.png)

-  **10) The exam rule (super important)**

  -  More grain boundaries = more stopping points = **stronger metal**

  -  Smaller grains  **stronger/harder** (but usually **less ductile**)

---

-  Tile analogy (TO SUMARIZE EVERYTHIGN IN SINGLE PARAGRAPH):

  -  One tile is like the repeating crystal pattern. A bunch of the same tiles, all facing the same direction, is one grain (one country). The lines separating different tile directions are grain boundaries (the border between countries).

  -  Sometimes the metal has a defectlike an extra/misplaced tile that can move easily (dislocation).

  -  Because it can move, it lets the metal deform along a slip plane (moving mainly in one directionup/down or left/right), but mostly within the same country/grain where the tile pattern is the same.

  -  If it tries to cross the border (grain boundary) into another country/grain, the tile pattern doesnt match, so it gets blocked and stress builds up at the border.

  -  That tension can lead to problems, and if it becomes too much, it can cause cracks/fractures.

  -  This is not necessarily a bad thing because it can increase the strength of a metal (strengthening). One way is grain refinement:

    -  Small grains (fine): many grain boundaries  dislocations are blocked  stronger/harder.

    -  Large grains (coarse): fewer grain boundaries  dislocations move more easily  softer/weaker.

 

---

#### E) Annealing (Stress-Relief / Reset Button)  **IMP**

-  **11) Annealing**

  -  Annealing is a heat treatment process in which a metal is heated to a specific temperature, held for a set time, and then allowed to cool slowly.

  -  Primary purpose: relieve **internal stresses**, reduce **hardness**, restore **ductility** (softness) so the metal can be worked further without breaking.

  -  This resets the atomic structure, removing the internal stress (the train pile-up) and making the metal soft and bendable again.

  -  Heat treatment (stress-relief/annealing) reduces internal stresses (and dislocation tangles) so it becomes less likely to crack or fracture and is often more workable/bendable.

 -  ![Grain Refinement](assets/metals/ANEALING.png)


---

### 11) Dendritic vs Equiaxed (Grain Shape + Casting Reliability)  **IMP**

-  **Dendritic growth (tree-like)**

  -  Common in many **base-metal** castings

  -  Bad part: interdendritic regions collect **segregation** (difference in composition) / **porosity**  crack initiation sites

  -  Hot tears can form in thin sections

-  **Equiaxed fine grains (small, roundish grains)**

  -  Common in many **HN/N** alloys because of grain refiners: **Ir, Ru, Re**

  -  Benefits: better uniformity + corrosion resistance, often better mechanical reliability

  -  ![Dendritic vs Equiaxed](assets/metals/metals_page_17_img_1.png)

-  **Grain size effects (HallPetch idea)**

  -  Smaller grains  higher **yield strength** (grain boundaries block dislocations)

  -  Smaller grains  higher **yield strength** (grain boundaries block dislocations)

  -  But grain boundaries can also concentrate porosity/low-melting phases, so quality of casting still matters

  -  ![Phase Diagram](assets/metals/metals_page_18_img_1.png)

| Feature | Equiaxed Fine Grains (Refined) | Dendritic/Coarse Grains (Unrefined) |
|---|---|---|
| Grain Shape | Round, small, uniform | Tree-like, long branches |
| Cause | Addition of **Ir, Ru, Re** (nucleating agents) | Slow cooling without refiners |
| Strength | High (Tensile & Yield) | Lower |
| Ductility | High (Good for burnishing) | Lower (Brittle) |
| Corrosion | High resistance | Prone to segregation/tarnish |

---

### 12) Solid Solutions in Dental Casting Alloys

-  A **solid solution** occurs when two or more elements are completely soluble in each other in the solid state.

-  Unlike a mixture where phases separate, a solid solution forms a single phase with a homogeneous microstructure.

-  Relevance: most **noble dental casting alloys** (e.g., **GoldCopper**, **PalladiumSilver**) are solid solutions.

-  Solid solution analogy: like salt dissolved in water, but in a solid metal.

  -  Mix two metals while molten.

  -  When it solidifies, atoms of the second metal spread evenly inside the first metals crystal lattice.

  -  You get one uniform solid phase (looks the same everywhere under the microscope).

### A) Types of Solid Solutions

-  Type depends on size of the solute (added atom) relative to the solvent (base atom):

-  **A. Substitutional solid solution**

  -  Solute atoms are roughly the same size as solvent atoms.

  -  They substitute into lattice positions.

  -  Mechanism: direct replacement of atoms.

  -  Key requirement: similar atomic radii (usually within **15%**).

  -  Dental examples:

    -  **GoldCopper (AuCu)**: common in Type III and IV gold alloys

    -  **PalladiumSilver (PdAg)**: used in PFM alloys

-  **B. Interstitial solid solution**

  -  Solute atoms are significantly smaller than solvent atoms.

  -  They fit into interstices (gaps) between larger solvent atoms.

  -  Mechanism: small atoms fit into voids of the lattice.

  -  Key requirement: solute atoms must be very small (typically **< 60%** of solvent diameter).

  -  Dental examples:

    -  **Carbon in Iron**: creates steel (improves hardness)

    -  **Oxygen, Nitrogen, or Carbon in Titanium**: in **CP-Ti**, these act like impurities that strengthen the metal but reduce ductility
-  ![Interstitial Solution](assets/metals/INTESERIOTNAL%20SOLOTUTON.png)
---

### 13) Mechanism: Solid-Solution Strengthening

-  Primary method for increasing strength of pure metals without relying on precipitation hardening.

-  Problem with pure metals: planes slide easily (dislocation movement)  soft and ductile.

-  Solution (distortion): add solute atoms (substitutional or interstitial)  do not fit perfectly.

  -  Substitutional:

    -  Larger atom pushes neighbors apart; smaller pulls them in.

  -  Interstitial:

    -  Atom forces lattice to bulge outward.

    -  **Carbon in Iron**: creates steel (improves hardness)

    -  **Oxygen, Nitrogen, or Carbon in Titanium**: in **CP-Ti**, these act like impurities that strengthen the metal but reduce ductility

    

-  Result (lattice strain): size mismatch creates strain field around solute atom.

  -  Distortion acts like a speed bump/roadblock for dislocations.

  -  Blocks dislocations: requires more energy for a dislocation to move past distorted areas.

  -  ![Solid Solution Strengthening](assets/metals/solid_solution_strengthening.png)

-  Effect on properties:

  -  Strength & Hardness: Increased ()

  -  Ductility: Decreased ()  slip restricted

  -  Proportional Limit: Increased ()


| Property | Change | Reason |
|---|---|---|
| Strength & Hardness | Increase | Requires more force (stress) to move dislocations past distortions. |
| Ductility | Decrease | Cannot deform as easily  less stretchable before breaking. |
| Proportional Limit | Increase | Point where plastic deformation begins is raised. |

---

### 14) Phase Diagrams (Why Binary Diagrams Still Matter)

-  Even though dental alloys are multicomponent + casting is nonequilibrium:

  -  Binary diagrams teach what phases can form, **liquidus/solidus**, **eutectic/peritectic**, and help predict heat treatment effects.

  -  In essence tell composition of the metals and physical/mechanical properties.

  -  **1. Predicting Composition (The Map Function)**

  -  **2. Predicting Physical & Mechanical Properties**

  -  **3. Defining Critical Casting Temperatures**

    -  Binary diagrams define critical freezing temperatures (liquidus/solidus), controlling where/when the last weak, low-melting liquid forms (often source of casting defects).

  -  **4. Guiding Heat Treatment**

---

### 15) Why Microsegregation Is Worse When LiquidusSolidus Gap Is Large

-  Bigger freezing range  longer solid + liquid coexistence  more composition partitioning  more coring + interdendritic enrichment.

-  Rapid cooling doesnt give atoms time to diffuse and equalize.

-  So you get:

  -  Dendrite core = formed first  composition closer to the first solid

  -  Outer dendrite = formed later  composition shifts

  -  Interdendritic (between dendrites) = last-to-freeze liquid  enriched in the low-melting element

-  That non-uniform composition = **cored structure**

-  Quote (as given):

  -  Rapid cooling gives a finer grain structure (more nuclei form), but it also traps the alloy in a non-uniform composition because atoms dont have time to diffuse. This frozen-in microsegregation (coring and interdendritic enrichment) lowers casting qualitymore weak zones leads to poorer corrosion resistance, and higher risk of defects.

  -  ![coring](assets/metals/metals_page_23_img_1.png)
---

### 16) Coring + Homogenization

-  Rapid cooling  dendrite cores have different composition than outer regions + interdendritic areas.


![Coring](assets/metals/metals_page_23_img_2.png)

-  **Homogenization heat treatment**:

  -  Heat casting to a high temperature just below the **solidus** (so it doesnt melt), hold for a while, then cool.

  -  Why it works:

    -  At high temperature, atoms can diffuse  alloy composition becomes more uniform (coring/microsegregation decreases).

  -  What it improves:

    -  Corrosion/tarnish resistance  (less composition difference  less galvanic attack)

    -  Ductility  (fewer weak, brittle segregated regions)


![Homogenization](assets/metals/HOMOGNAZATION.png)

---

### 17) Eutectic Alloys (e.g., SilverCopper)

-  Occurs when metals have limited solubility.

-  **Eutectic Point**: specific composition with the lowest melting temperature.

-  **Structure**: solidifies into alternating layers (**lamellae**) of two phases (**** and ****) (sandwich of 2 metals, alternating layers).

  -  ![Eutectic Structure](assets/metals/EUTHTICTC.png)


-  **Properties**: often brittle and chemically active (lower tarnish resistance), but useful for solders due to low melting point.

-  Property trend:

  -  More eutectic lamellae   hardness/strength,  ductility (more brittle)

  -  Often worse tarnish than single-phase solid solutions

  -  


-  Uses:

  -  **Solders/brazing**

  -  In **amalgam particle production**

---

### 18) Peritectic Alloys (Concept)  Can Skip

-  Invariant reaction on cooling:

  -  Liquid + ** (solid)**  ** (new solid phase)**

-  Needs lots of diffusion at interface  prone to coring if cooled fast  can hurt corrosion resistance + increase brittleness.

-  SEEN IN DENTAL AMALGAM: **AgSn** is a peritectic system.

  -  ![Peritectic](assets/metals/PREHTITIC.png)
---

### 19) AuCu Ordering + Heat Treatment (Types III/IV Gold)

-  Copper strengthens gold by two mechanisms:

  -  **1. Solid-solution strengthening** (Cu in Au lattice)

    -  Stronger than pure gold but weaker than age-hardened gold.

  -  **2. Ordering (superlattice) / age hardening** at lower temperatures

    -  Ordered AuCu phases restrict dislocations.

-  Strength ladder (as given):

  -  Pure Au < quenched (disordered) AuCu < aged (ordered) AuCu in strength/hardness.

  -  ![Au-Cu Ordering Analogy](assets/metals/AU%20HARDHING%20LADDDER%20ANAOLGY.png)


### A) Heat Treatment Cycle (What to Do + Why)

-  **1) Solution heat treat + quench = soften (turn off hardening)**

  -  Heat to about **700C** (often quoted **~700750C**) to make fully disordered.

  -  Quench (rapid cool)  freezes disordered state.

  -  Use: easier finishing, burnishing, margin adjustment.

-  **2) Ageing (order hardening) = harden (turn on)**

  -  Reheat to about **200450C** and hold (time depends on alloy, often **~1530 min** typical teaching value).

  -  Atoms rearrange into ordered structure.

  -  Use: final strengthening after adjustments.

-  **3) Reset**

  -  So basically u can remove step 3 by doing the step 2.

| What you want | The Temperature | The Speed | Why? |
|---|---|---|---|
| I want it **SOFT** (to grind/polish) | High (**~700C**) | Fast (**Quench**) | Scrambles atoms and freezes random mess. |
| I want it **HARD** (for the patient) | Low (**~400C**) | Slow / Hold | Gives atoms time to shuffle into strong, rigid pattern. |

  -  ![Heat Treatment](assets/metals/metals_page_27_img_1.png)

---

### 20) Palladium Alloys (Big Distinction)

-  **High-Pd PFM alloys  PdAg** simple solid-solution alloys.

-  High-Pd systems can show complex precipitates / eutectic shifts / tweed submicron structures and strengthening by solid solution + precipitates, designed to survive porcelain firing and bond to porcelain.

---

### 21) Color of Cast Alloys (Simple Rules)

-  **Au + Cu**  more reddish/yellow

-  **Ag in AuAgCu**  reduces coppers red but can give greenish tint if high

-  Most **Pd/Ni/Co/Ag-based** casting alloys are white/silver

-  Some **PdIn** alloys can look yellowish (optical/intermetallic effect)

---

### 22) Answers to the CRITICAL QUESTIONS (Straight)

-  Why metal properties differ from ceramics/polymers?

  -  Metallic bonding (free electrons, nondirectional)  conductivity + ductility + higher fracture toughness

  -  Ceramics/polymers have ionic/covalent bonding  brittleness/low KIc

-  Why pure metals not useful in dentistry?

  -  Usually too soft and/or corrode

  -  Alloys tailor strength, hardness, TEC, corrosion, porcelain bonding

-  Why heterogeneous nucleation (not homogeneous)?

  -  Mold walls/impurities/grain refiners lower energy barrier; real systems arent clean/inert.

-  Why faster cooling  smaller grain size?

  -  More supercooling  smaller critical radius  more nuclei  grains cant grow large

-  How grain size affects properties?

  -  Smaller grains  higher yield strength; usually better uniformity/corrosion; grain boundaries also collect defects/phases

-  Why binary diagrams important despite multicomponent + nonequilibrium?

  -  Baseline map for phase tendencies (composition) + heat-treatment predictions

-  Eutectic pros/cons?

  -  Pro: lowest melting (great for soldering)

  -  Con: lamellar two-phase structure  brittle/tarnish-prone vs solid solutions

-  How does Cu strengthen Au alloys?

  -  Solid-solution strengthening + ordering/age-hardening (superlattice phases)
`,r3=["Common types: Co-Cr, Ni-Cr, Ti alloys.","High stiffness and hardness compared to noble alloys.","Biocompatibility concerns: Nickel allergy."],a3=`
# Base Metal Alloys

Base metal alloys are composed of non-noble metals and rely on **passivation** for corrosion resistance. They are generally stiffer, harder, and less expensive than noble alloys.

## 1) Classification & Applications
The two primary groups in dentistry are:
- **Cobalt-Chromium (Co-Cr)**: Primarily used for **RPD frameworks**. They are very hard, stiff, and have high proportional limits, enabling them to withstand high stresses without permanent deformation.
- **Nickel-Chromium (Ni-Cr)**: Primarily used for **PFM copings** and small castings (crowns/bridges). They have better castability and density than Co-Cr.

## 2) Key Alloying Elements
- **Chromium (Cr)**: The most critical element (usually >20%).
  - **Passivation**: Forms a tenacious **CrO** oxide film that blocks corrosion.
  - **Hardening**: Provides solid-solution hardening.
- **Cobalt (Co)**: Increases stiffness (modulus) and strength.
- **Nickel (Ni)**: Increases ductility and reduces hardness. **Note**: 10-15% of the population (especially females) has a **Nickel allergy**.
- **Molybdenum/Manganese**: Refine grain structure and improve casting behavior.
- **Silicon**: Imparts good casting properties and increases ductility.
- **Beryllium (Be)**: Sometimes added to Ni-Cr to lower the melting range and improve castability. 
  -  **CAUTION**: Beryllium is a known carcinogen (Berylliosis) and its use is strictly regulated or declining.

## 3) The Critical Role of Carbon
Carbon concentration is a major factor controlling alloy properties:
- **Controlled Carbon**: Increases hardness, strength, and proportional limit.
- **Excess Carbon**: Results in a **brittle alloy** with very low ductility and an increased danger of fracture.

## 4) Passivation: The "Shield" Concept
Base metals are chemically reactive but "self-protect" by forming a stable oxide layer. 
- **Self-Healing**: If the layer is scratched, it reforms in the presence of oxygen.
- **Breakdown**: Crevices or high-chloride environments (saliva) can lead to **pitting** or **crevice corrosion**.

## 5) Titanium & Modern Implantology
- **Commercially Pure Titanium (CP-Ti)**: Grades 1-4 are used for implants due to exceptional biocompatibility.
- **Ti-6Al-4V**: An alloy (Aluminium/Vanadium) used when higher strength is required.
- **Biocompatibility**: Relies on a stable **TiO** layer that allows for **osseointegration**.

## 6) Clinical Considerations
- **Polishing**: Due to their extreme hardness (especially Co-Cr), base metal alloys are very difficult to polish and adjust.
- **Opposing Wear**: Their hard surface is more likely to cause wear on opposing natural dentition compared to gold allies.
- **Density**: Ni-Cr has higher density than Co-Cr, resulting in better thrust during casting and fewer voids.

![Basal Metal Alloys - Passivation](assets/metals/metals_page_3_img_1.png)
`,s3=["Wrought: Shaped by plastic deformation (cold working).","Fibrous microstructure (not cast grains).","Examples: Orthodontic wires (SS, NiTi, Beta-Ti)."],o3=`
# Wrought Alloys

Wrought alloys are shaped by **mechanical working** (rolling, drawing, bending) at temperatures well below the recrystallization point (**cold working**). This process fundamentally changes their microstructure and properties compared to cast alloys.

## 1) Microstructure & Strain Hardening
- **Fibrous Grain Structure**: Unlike the equiaxed grains of cast alloys, wrought grains become **elongated and fibrous** in the direction of work.
- **Dislocation Density**: Cold working massively increases the number of dislocations. These dislocations tangle and pile up, making further slip difficult.
- **Strain Hardening (Work Hardening)**: 
  -  **Strength ** and **Hardness **.
  -  **Ductility ** and **Toughness ** (metal becomes brittle).

## 2) Reversing the Effect: Annealing
Annealing is a heat treatment used to reset the properties of cold-worked metal:
1. **Recovery**: Internal stresses are relieved; minimal changes in properties.
2. **Recrystallization**: New, strain-free equiaxed grains form. **Ductility returns**, and hardness drops.
3. **Grain Growth**: If heated too long, grains coarsen, and strength decreases.

## 3) Steel Phases (High-Yield Core)
Steel is an alloy of Iron (Fe) and Carbon (C). Its behavior depends on its phase structure:
- **Austenite (-Fe)**: **FCC** structure. Stable at high temperatures (>723C). Tough and ductile.
- **Ferrite (-Fe)**: **BCC** structure. Soft, ductile, but low carbon solubility.
- **Cementite (FeC)**: Iron carbide. **Very hard and brittle**.
- **Pearlite**: A lamellar mixture of ferrite and cementite.
- **Martensite**: Formed by **rapid quenching** of austenite. It has a distorted BCC lattice and is **extremely hard and brittle**.

![Phase Diagram](assets/metals/metals_page_18_img_1.png)

## 4) Hardening and Tempering
- **Quenching**: Austenite  Martensite (Hardest possible state).
- **Tempering**: Heating martensite to 200400C to allow partial conversion to ferrite and cementite. This reduces brittleness and restores **toughness**.

![Tempering Cycle](assets/metals/metals_page_21_img_1.png)

## 5) Stainless Steel & Corrosion
Stainless steel contains >12% **Chromium**.
- **18/8 Stainless Steel**: Contains 18% Cr and 8% Ni. This is the **Austenitic** type used for orthodontic wires.
- **Weld Decay (Sensitization)**: Overheating causes Cr to react with C to form **Chromium Carbides** at grain boundaries. This depletes the surrounding areas of Chromium, leading to **intergranular corrosion**.

![Weld Decay](assets/metals/metals_page_15_img_1.png)

## 6) Orthodontic Wires
- **Stainless Steel**: High stiffness (modulus) and high force.
- **Nitinol (NiTi)**: 
  - **Superelasticity**: Reversible phase change (Austenite  Martensite) allows large elastic deflections.
  - **Shape Memory**: Returns to original shape when heated.
  -  Provides **light, continuous force**.
- **Beta-Titanium (TMA)**: Excellent formability and intermediate stiffness.

![Nitinol Superelasticity](assets/metals_page_20_img_1.png)
`,l3=["Noble metals (Au, Pt, Pd) are corrosion and oxidation resistant.","Classification depends on noble metal content (High Noble >= 60%, Noble >= 25%).","Gold foil works by cold welding and requires absolute isolation."],c3=`
## 1) Noble Metals (Core Definition)

-  **Noble metals**: **Gold (Au)**, **Platinum (Pt)**, **Palladium (Pd)**

  -  **Resistant to corrosion and oxidation** (chemically noble behavior in the oral electrolyte)

  -  Used when long-term **biocompatibility** + **tarnish/corrosion resistance** is critical

---

## 2) ADA Classification of Dental Casting Alloys (Noble Content)

-  **High Noble (HN)**

  -  ** 60% noble metal** (Au + Pt + Pd + etc)

  -  ** 40% Au**

  -  Best overall **corrosion resistance** + **clinical longevity** (classic exam association)

-  **Noble (N)**

  -  ** 25% noble metal**

  -  Balanced cost/performance; commonly used for **PFM frameworks** and cast restorations depending on system

-  **Predominantly Base (PB)**

  -  **< 25% noble metal**

  -  Examples: **NiCr**, **CoCr**, **FeCr**, **CP-Ti**, **Ti6Al4V**

  -  High strength; corrosion resistance depends mainly on **passivation** (oxide film)

---

## 3) Noble Metal Alloy Types in Dentistry (What You Actually See Clinically)

### A) Gold-Based Casting Alloys (Au Alloys)

-  **What theyre used for**

  -  **Inlays/onlays**, **partial crowns**, **full cast crowns**, **bridges** (depending on strength class)

  -  Some **post & cores**, **RPD components** (historically), and specialty castings

-  **Why Au-based alloys are used**

  -  **Excellent corrosion resistance** + very stable in saliva

  -  **Good ductility**  margins can be finished/burnished well (thin margins less likely to chip)

  -  **Reliable castability** (flows well) and predictable finishing/polishing

-  **Key alloying elements (classic exam lines)**

  -  **Au**: corrosion resistance + ductility

  -  **Cu**: major strengthener (solid-solution + ordering/age hardening in some systems)

  -  **Ag**: modifies color; increases thermal expansion; can influence porcelain color if used in PFM

  -  **Pt/Pd**: raises melting range, increases stiffness, strengthens

  -  **Zn**: deoxidizer  reduces casting porosity

  -  **Ir/Ru**: grain refiners  finer grain  improved mechanical reliability

---

### B) Gold Alloy Types (Traditional Type IIV + High-Strength)

-  **Type I (Soft)**

  -  Highest Au content (relative) and **most ductile**

  -  Historically for **small inlays** / very low stress areas

  -  Not commonly used today compared with stronger options

-  **Type II (Medium)**

  -  Moderate strength

  -  Historically for **inlays/onlays** with moderate load

-  **Type III (Hard)**

  -  Higher strength / lower ductility than Type I/II

  -  Used for **onlays**, **partial crowns**, **some full crowns**

-  **Type IV (Extra-Hard / High Strength)**

  -  Highest strength among the traditional gold types

  -  Used for **full crowns**, **bridges**, and cases needing more rigidity

  -  **Important association**: Type IV is commonly discussed with **heat treatment (AuCu ordering)**

-  **High-strength / modified gold alloys**

  -  Modern gold alloys may be modified (different Au/Cu/Pd/Pt ratios)

  -  Aim: better strength, better wear resistance, controlled stiffness

-  **Heat treatment concept (high-yield link to gold types)**

  -  **Solution heat treat + quench  soften** (disordered structure)

  -  **Ageing (order hardening)  harden** (ordered AuCu phases restrict dislocations)

  -  **Exam chain**: **AuCu ordering**  dislocation blocking  **strength/hardness ** after ageing

-  **Diagram space**

  -  ![AuCu ordering / heat treatment](assets/metals/aucu_ordering.png)

---

### C) Palladium-Based Noble Alloys (Pd Alloys)

-  **Why Pd is used**

  -  Strong, white-colored metal

  -  Raises melting range, increases stiffness (modulus)

  -  Often chosen for **PFM frameworks** (designed to tolerate porcelain firing cycles)

-  **Types youll hear clinically**

  -  **PdAg alloys** (palladiumsilver)

    -  More affordable vs high-gold

    -  Can have porcelain interaction issues if not properly formulated (classic silver effects teaching)

  -  **High-Pd PFM alloys** (Pd-rich systems)

    -  Can form complex strengthening structures (precipitates / submicron tweed patterns in some descriptions)

    -  Designed specifically for porcelain bonding + high-temp stability

-  **Key point**

  -  Pd alloys in PFM are not all the samePFM-grade systems are engineered for **oxide bonding** + firing compatibility

---

### D) Platinum-Containing Noble Alloys (Pt influence)

-  **Role of Pt (when present in noble systems)**

  -  Increases **melting point** and **strength**

  -  Increases stiffness

  -  Helps stabilize high-temperature behavior (useful in PFM-type designs)

-  Practical note

  -  Pt is often used as an additive rather than the main bulk metal in many dental alloys

---

## 4) Direct Gold Fillings (Gold Foil)  Direct Filling Gold

### A) Core Mechanism: Cold Welding
Direct gold restorations rely on the property of **cold welding (cohesion)**. Clean surfaces of pure gold form metallic bonds upon contact under pressure, without the application of heat.
- **Key Condition**: The surface must be absolutely free of adsorbed gases (like ammonia), grease, or moisture.

### B) Clinical Handling & Preparation
- **Isolation**: Absolute isolation (rubber dam) is **mandatory**. Moisture completely ruins the cohesive property.
- **Degassing (Annealing)**: Before use, the gold is heated (e.g., to ~250C) to remove any adsorbed contaminants. This "annealing" restores the gold to its most cohesive state.
- **Condensation**: The gold is built up incrementally (pieces are 0.001 mm thick). Each layer is condensed with high pressure to create a dense, void-free mass.
- **Sandwich Foils**: Foils of gold and platinum are sometimes used to produce a restoration with improved physical characteristics.

### C) Indications & Contraindications
-  **Indications**: Small conservative restorations (Class I, Class III, Class V) where longevity is the priority and technique can be perfect.
-  **Contraindications**: Large stress-bearing areas, poor isolation, or esthetic zones if the patient rejects the gold color.

![Gold Foil Condensation](assets/metals/metals_page_13_img_1.png)

## 5) Alloy Ordering & Heat Treatment
Traditional gold alloys (Type III & IV) can be strengthened after casting through **age hardening**.
- **Softening (Solution Heat Treat)**: Heat to ~700C and **quench**. This scrambles the atoms (disordered state) for easy adjustment.
- **Hardening (Ageing)**: Heat to ~400C and cool slowly. This allows atoms to form an **ordered superlattice (CuAu or CuAu)**, which blocks dislocation movement and significantly increases strength.

![Au-Cu Ordering](assets/metals/metals_page_27_img_1.png)

---

## 5) Quick Linking Lines (Exam Memory Anchors)

-  **Noble metals** (Au, Pt, Pd)  **corrosion resistance** + biocompatibility

-  **High Noble** = ** 60% noble** and ** 40% Au**

-  **Gold Types IIV**: increasing strength from **Type I (soft)**  **Type IV (extra hard)**
-  **Direct gold** works by **cold welding**  demands **absolute cleanliness + isolation**

`,u3=[{id:"mt_mcq_1",question:"Which property is typically higher in metals than ceramics?",options:["Brittleness","Fracture toughness","Porosity","Glass transition temperature"],correctAnswerIndex:1,explanation:"Metals can deform plastically at a crack tip and blunt it, so cracks dont run easily. Ceramics are brittle, so cracks propagate fast  lower fracture toughness."},{id:"mt_mcq_2",question:"Which statement is TRUE about pure metals in dentistry?",options:["Pure metals are used for most cast crowns","Pure gold is strong enough for crowns","Pure metals are often too soft/corrode, so alloys are used","Pure metals are always brittle"],correctAnswerIndex:2,explanation:"Pure metals (like pure gold) are usually too soft/low stiffness for restorations, and many pure metals may corrodeso we alloy them to improve strength, hardness, corrosion resistance, etc."},{id:"mt_mcq_3",question:"Heterogeneous nucleation requires less energy because:",options:["It increases surface area","It reduces the surface energy barrier (nucleus forms on a surface)","It increases melting point","It prevents diffusion"],correctAnswerIndex:1,explanation:"When a nucleus forms on a mold wall/particle, it doesnt need to create a full new sphere surface  less new surface area , lower surface free energy , easier nucleation."},{id:"mt_mcq_4",question:"Homogeneous nucleation usually needs:",options:["No cooling","Extreme supercooling","Grain refiners","High porosity"],correctAnswerIndex:1,explanation:"In the clean bulk liquid theres no surface help , so you need a big driving force to overcome surface energy  achieved by large supercooling ."},{id:"mt_mcq_5",question:"Grain refiners used in noble dental alloys include:",options:["Hg, Sn, Cu","Ir, Ru, Re","Na, K, Cl","Ca, P, F"],correctAnswerIndex:1,explanation:"Ir/Ru/Re create many nucleation sites  more grains start , grains stay smaller (fine-grained) ."},{id:"mt_mcq_6",question:"Grain boundaries strengthen metals because they:",options:["Increase porosity","Block dislocation motion (HallPetch)","Melt early","Remove impurities"],correctAnswerIndex:1,explanation:"Dislocations (plastic slip carriers) have trouble crossing into a differently oriented grain  boundaries block slip , so higher stress is needed."},{id:"mt_mcq_7",question:"Fine grains increase yield strength primarily because:",options:["Dislocations pile up at grain boundaries","Alloys become pure","Liquidus increases","TEC decreases"],correctAnswerIndex:0,explanation:"More boundaries = shorter distance before a dislocation hits a boundary  pile-up happens sooner  higher stress required to continue deformation."},{id:"mt_mcq_8",question:"Solid-solution strengthening generally causes:",options:["Strength , hardness , ductility ","Strength , hardness , ductility ","Strength , hardness , ductility ","No property changes"],correctAnswerIndex:0,explanation:"Solute atoms distort the lattice  act like speed bumps to dislocations  strength/hardness rise; ability to deform easily (ductility) drops."},{id:"mt_mcq_9",question:"A key requirement for substitutional solid solution is:",options:["Atom size difference > 50%","Similar atomic radii ( within 15%)","Always different crystal structures","No metallic bonding"],correctAnswerIndex:1,explanation:"If the atoms are too different in size, the lattice distortion becomes too severe  solid solubility drops and multiple phases form."},{id:"mt_mcq_10",question:"Liquidus temperature is:",options:["Highest temp where alloy is fully solid","Lowest temp where alloy is fully liquid","Exact melting point for all alloys","Room temperature"],correctAnswerIndex:1,explanation:"Above liquidus = all liquid . Cooling below it = first solid starts forming."},{id:"mt_mcq_11",question:"Solidus temperature is:",options:["Lowest temp where alloy is fully solid","Lowest temp where alloy is fully liquid","The eutectic temperature always","The boiling point"],correctAnswerIndex:0,explanation:"Below solidus = all solid . Between liquidus and solidus = solid + liquid together (mushy zone)."},{id:"mt_mcq_12",question:"Coring happens mainly when:",options:["Cooling is slow and diffusion is complete","Cooling is rapid and diffusion cannot equalize composition","Alloy is a pure metal","Grain refiners are absent"],correctAnswerIndex:1,explanation:"Fast cooling traps composition differences: xdendrite core forms first with one composition, later layers/interdendritic liquid become different  composition gradient remains."},{id:"mt_mcq_13",question:"Homogenization generally improves:",options:["Corrosion resistance and ductility","Porosity and brittleness","Shrinkage and cracking","Supercooling"],correctAnswerIndex:0,explanation:"Heat near solidus lets atoms diffuse and even out composition , reducing micro-galvanic corrosion from segregated regions; more uniform structure tends to be less brittle."}],d3=[{id:"mt_mcq_14",question:"A classic dental alloy system with peritectic relevance for amalgam alloy powders is:",options:["AgSn","PdAg","AuCu","AgCu"],correctAnswerIndex:0,explanation:"AgSn system shows peritectic-type phase relations and is the classic base for amalgam alloy powder metallurgy/phase behavior."},{id:"mt_mcq_15",question:"Dental amalgam is best defined as:",options:["Any ceramic restoration","An alloy containing mercury","Pure silver","A polymer composite"],correctAnswerIndex:1,explanation:"By definition, amalgam = mercury + other metal(s) forming a dental restorative alloy."},{id:"mt_mcq_16",question:"Compared with typical cast metals, set amalgam is:",options:["Highly ductile and malleable","Relatively brittle with low tensile strength","A single-phase solid solution","A glass"],correctAnswerIndex:1,explanation:"Set amalgam is multi-phase and has weak tensile behavior  tends to be brittle compared to ductile cast alloys."},{id:"mt_mcq_17",question:"Creep in amalgam is:",options:["Instant fracture on load","Time-dependent deformation under constant stress","Color change only","Increase in melting point"],correctAnswerIndex:1,explanation:"Creep = slow strain over time under constant load; clinically matters for marginal breakdown."},{id:"mt_mcq_18",question:"Zinc is added mainly as:",options:["Oxygen scavenger  reduces gas porosity","Grain refiner (primary)","A porcelain colorant","A mercury binder"],correctAnswerIndex:0,explanation:"Zn ties up oxygen during melting  less gas dissolved  less gas porosity in the casting."},{id:"mt_mcq_19",question:"Elements that help porcelain bonding by forming oxides include:",options:["Sn, In, Fe","Au, Pt, Pd only","Ag only","Hg only"],correctAnswerIndex:0,explanation:"Porcelain bonds to a controlled oxide layer; Sn/In/Fe are oxidizable  form bonding oxides."},{id:"mt_mcq_20",question:"Grain refiners in noble alloys include:",options:["Ir, Ru, Re","Sn, In, Fe","Hg, Sn, Cu","Na, K, Cl"],correctAnswerIndex:0,explanation:"Same concept as earlier: Ir/Ru/Re promote nucleation  finer grains."},{id:"mt_mcq_21",question:"Pure gold is generally not used for cast restorations because:",options:["It is too hard","It is too soft/low stiffness","It corrodes instantly","It is magnetic"],correctAnswerIndex:1,explanation:"Pure Au is very ductile but too weak/low modulus for functional cast restorations."},{id:"mt_mcq_22",question:"Palladium added to gold alloys generally:",options:["Redden color and lower melting range","Whitens, raises strength/hardness/melting range, lowers density","Turns alloy into ceramic","Eliminates all oxidation"],correctAnswerIndex:1,explanation:"Pd is a whitener and strengthens Au alloys; also raises melting range and lowers density relative to gold."},{id:"mt_mcq_23",question:"Which statement is TRUE about work hardening (cold working)?",options:["It makes metals softer and more ductile","It reduces dislocation density","It increases strength/hardness but decreases ductility","It only happens during melting"],correctAnswerIndex:2,explanation:"Deformation creates more dislocations; they tangle and block each other  harder to deform further (stronger) but less ductile."},{id:"mt_mcq_24",question:"Annealing / stress-relief heat treatment mainly:",options:["Adds more dislocations","Reduces internal","Creates more   phase","Makes grains always smaller"],correctAnswerIndex:1,explanation:"Heat lets dislocations rearrange/annihilate; internal stresses drop; metal softens and ductility returns."},{id:"mt_mcq_25",question:"Which lattice type is most associated with high ductility and burnishability in dentistry?",options:["FCC","HCP","BCC","Amorphous"],correctAnswerIndex:0,explanation:"FCC has many slip systems  dislocations move easily  high ductility."},{id:"mt_mcq_26",question:"Quench from ~700C in Type III/IV gold is mainly used to:",options:["Increase ordering immediately","Keep the alloy disordered and softer for finishing/burnishing","Create more precipitates","Increase casting shrinkage"],correctAnswerIndex:1,explanation:"Fast cooling prevents ordering/age hardening  remains softer for margin finishing."}],h3=[{id:"mt_mcq_27",question:"Age hardening (ordering) of AuCu is typically done to:",options:["Make the casting softer for margin adjustment","Make the restoration harder/stronger after adjustments are finished","Remove all grains","Prevent all corrosion"],correctAnswerIndex:1,explanation:"Controlled heat in ordering range creates ordered regions  blocks dislocations  strength/hardness increase."},{id:"mt_mcq_28",question:"Dental amalgam brittleness and galvanic/corrosion problems are MOST strongly linked to:",options:["A peritectic reaction during cooling from a melt","Multiple phases with different electrochemical potentials","Hygroscopic expansion of investment","FCC lattice of silver"],correctAnswerIndex:1,explanation:"Different phases act like tiny galvanic cells  corrosion + weakening  brittleness/marginal breakdown."},{id:"mt_mcq_29",question:"Best combined statement about ductility is:",options:["Only metallic bonding matters; dislocations are irrelevant","Only dislocations matter; bonding type is irrelevant","Metallic bonding allows sliding without bond breakage, and dislocations make sliding easy","Grain boundaries create ductility"],correctAnswerIndex:2,explanation:"The electron sea keeps bonding intact during sliding; dislocations reduce the stress needed for slip."},{id:"mt_mcq_30",question:"The main reason gold (Au) is added to dental alloys is to improve:",options:["Magnetic properties","Corrosion resistance and ductility","Thermal expansion mismatch","Porcelain greening"],correctAnswerIndex:1,explanation:"Au is noble/inert  excellent corrosion resistance; also very ductile."},{id:"mt_mcq_31",question:"Which element most strongly whitens gold alloys and also increases melting range + modulus?",options:["Silver","Copper","Palladium","Zinc"],correctAnswerIndex:2,explanation:"Pd is a strong whitener and stiffener; raises melting range and elastic modulus."},{id:"mt_mcq_32",question:"Platinum (Pt) is primarily added to PFM gold alloys to:",options:["Lower melting point and soften the alloy","Increase strength and melting point","Cause porcelain greening","Reduce porosity by scavenging oxygen"],correctAnswerIndex:1,explanation:"Pt increases strength and raises melting range (useful for PFM processing)."},{id:"mt_mcq_33",question:"In Pd-based PFM alloys, silver (Ag) is mainly added to:",options:["Decrease thermal expansion coefficient (TEC)","Increase thermal expansion coefficient (TEC)","Increase corrosion resistance more than gold","Act as grain refiner"],correctAnswerIndex:1,explanation:"Pds TEC is low; Ag raises TEC to better match porcelain."},{id:"mt_mcq_34",question:"Greening of porcelain is classically associated with which element in some alloys?",options:["Platinum","Silver","Zinc","Iridium"],correctAnswerIndex:1,explanation:"Some Ag-containing alloys can cause greenish discoloration in certain porcelains (older/classic issue)."},{id:"mt_mcq_35",question:"Copper (Cu) in Au alloys mainly:",options:["Lowers hardness and increases ductility only","Increases strength/hardness and reddens the alloy","Whitens the alloy and lowers density","Prevents oxide formation completely"],correctAnswerIndex:1,explanation:"Cu gives solid-solution strengthening/ordering effects and adds a reddish hue."},{id:"mt_mcq_36",question:"Zinc (Zn) is added mainly as an:",options:["Oxygen scavenger to reduce gas porosity","Element to increase porcelain greening","Grain refiner","Metal that increases modulus more than Pd"],correctAnswerIndex:0,explanation:"Zn reacts with oxygen  less gas pickup  fewer porosity defects."},{id:"mt_mcq_37",question:"Iridium (Ir) and Ruthenium (Ru) are added to noble casting alloys mainly to:",options:["Increase thermal expansion","Promote smaller grains (grain refinement)","Cause reddish color","Reduce melting range"],correctAnswerIndex:1,explanation:"They act as grain refiners  more nucleation  finer grains  better strength/consistency."},{id:"mt_mcq_38",question:"Which pairing is CORRECT?",options:["Ag  reddens alloy","Cu  whitens alloy","Pd  whitens and increases modulus","Zn  causes porcelain greening"],correctAnswerIndex:2,explanation:"Pd is the classic whitener/stiffener; Ag doesnt redden (Cu does); Zn doesnt cause greening."},{id:"mt_mcq_39",question:"A casting shows excessive gas porosity. Which alloying element helps prevent this?",options:["Copper","Silver","Zinc","Iridium"],correctAnswerIndex:2,explanation:"Zn is the oxygen scavenger  reduces gas-related porosity during melting/casting."}],m3=[{id:"mt_mcq_1",question:"Which property is typically higher in metals than ceramics?",options:["Brittleness","Fracture toughness","Porosity","Glass transition temperature"],correctAnswerIndex:1,explanation:"Metals can deform plastically at a crack tip and blunt it, so cracks dont run easily. Ceramics are brittle, so cracks propagate fast  lower fracture toughness."},{id:"mt_mcq_2",question:"Which statement is TRUE about pure metals in dentistry?",options:["Pure metals are used for most cast crowns","Pure gold is strong enough for crowns","Pure metals are often too soft/corrode, so alloys are used","Pure metals are always brittle"],correctAnswerIndex:2,explanation:"Pure metals (like pure gold) are usually too soft/low stiffness for restorations, and many pure metals may corrodeso we alloy them to improve strength, hardness, corrosion resistance, etc."},{id:"mt_mcq_3",question:"Heterogeneous nucleation requires less energy because:",options:["It increases surface area","It reduces the surface energy barrier (nucleus forms on a surface)","It increases melting point","It prevents diffusion"],correctAnswerIndex:1,explanation:"When a nucleus forms on a mold wall/particle, it doesnt need to create a full new sphere surface  less new surface area , lower surface free energy , easier nucleation."},{id:"mt_mcq_4",question:"Homogeneous nucleation usually needs:",options:["No cooling","Extreme supercooling","Grain refiners","High porosity"],correctAnswerIndex:1,explanation:"In the clean bulk liquid theres no surface help , so you need a big driving force to overcome surface energy  achieved by large supercooling ."},{id:"mt_mcq_5",question:"Grain refiners used in noble dental alloys include:",options:["Hg, Sn, Cu","Ir, Ru, Re","Na, K, Cl","Ca, P, F"],correctAnswerIndex:1,explanation:"Ir/Ru/Re create many nucleation sites  more grains start , grains stay smaller (fine-grained) ."},{id:"mt_mcq_6",question:"Grain boundaries strengthen metals because they:",options:["Increase porosity","Block dislocation motion (HallPetch)","Melt early","Remove impurities"],correctAnswerIndex:1,explanation:"Dislocations (plastic slip carriers) have trouble crossing into a differently oriented grain  boundaries block slip , so higher stress is needed."},{id:"mt_mcq_7",question:"Fine grains increase yield strength primarily because:",options:["Dislocations pile up at grain boundaries","Alloys become pure","Liquidus increases","TEC decreases"],correctAnswerIndex:0,explanation:"More boundaries = shorter distance before a dislocation hits a boundary  pile-up happens sooner  higher stress required to continue deformation."},{id:"mt_mcq_8",question:"Solid-solution strengthening generally causes:",options:["Strength , hardness , ductility ","Strength , hardness , ductility ","Strength , hardness , ductility ","No property changes"],correctAnswerIndex:0,explanation:"Solute atoms distort the lattice  act like speed bumps to dislocations  strength/hardness rise; ability to deform easily (ductility) drops."},{id:"mt_mcq_9",question:"A key requirement for substitutional solid solution is:",options:["Atom size difference > 50%","Similar atomic radii ( within 15%)","Always different crystal structures","No metallic bonding"],correctAnswerIndex:1,explanation:"If the atoms are too different in size, the lattice distortion becomes too severe  solid solubility drops and multiple phases form."},{id:"mt_mcq_10",question:"Liquidus temperature is:",options:["Highest temp where alloy is fully solid","Lowest temp where alloy is fully liquid","Exact melting point for all alloys","Room temperature"],correctAnswerIndex:1,explanation:"Above liquidus = all liquid . Cooling below it = first solid starts forming."},{id:"mt_mcq_11",question:"Solidus temperature is:",options:["Lowest temp where alloy is fully solid","Lowest temp where alloy is fully liquid","The eutectic temperature always","The boiling point"],correctAnswerIndex:0,explanation:"Below solidus = all solid . Between liquidus and solidus = solid + liquid together (mushy zone)."},{id:"mt_mcq_12",question:"Coring happens mainly when:",options:["Cooling is slow and diffusion is complete","Cooling is rapid and diffusion cannot equalize composition","Alloy is a pure metal","Grain refiners are absent"],correctAnswerIndex:1,explanation:"Fast cooling traps composition differences: dendrite core forms first with one composition, later layers/interdendritic liquid become different  composition gradient remains."},{id:"mt_mcq_13",question:"Homogenization generally improves:",options:["Corrosion resistance and ductility","Porosity and brittleness","Shrinkage and cracking","Supercooling"],correctAnswerIndex:0,explanation:"Heat near solidus lets atoms diffuse and even out composition , reducing micro-galvanic corrosion from segregated regions; more uniform structure tends to be less brittle."},{id:"mt_mcq_14",question:"A classic dental alloy system with peritectic relevance for amalgam alloy powders is:",options:["AgSn","PdAg","AuCu","AgCu"],correctAnswerIndex:0,explanation:"AgSn system shows peritectic-type phase relations and is the classic base for amalgam alloy powder metallurgy/phase behavior."},{id:"mt_mcq_15",question:"Dental amalgam is best defined as:",options:["Any ceramic restoration","An alloy containing mercury","Pure silver","A polymer composite"],correctAnswerIndex:1,explanation:"By definition, amalgam = mercury + other metal(s) forming a dental restorative alloy."},{id:"mt_mcq_16",question:"Compared with typical cast metals, set amalgam is:",options:["Highly ductile and malleable","Relatively brittle with low tensile strength","A single-phase solid solution","A glass"],correctAnswerIndex:1,explanation:"Set amalgam is multi-phase and has weak tensile behavior  tends to be brittle compared to ductile cast alloys."},{id:"mt_mcq_17",question:"Creep in amalgam is:",options:["Instant fracture on load","Time-dependent deformation under constant stress","Color change only","Increase in melting point"],correctAnswerIndex:1,explanation:"Creep = slow strain over time under constant load; clinically matters for marginal breakdown."},{id:"mt_mcq_18",question:"Zinc is added mainly as:",options:["Oxygen scavenger  reduces gas porosity","Grain refiner (primary)","A porcelain colorant","A mercury binder"],correctAnswerIndex:0,explanation:"Zn ties up oxygen during melting  less gas dissolved  less gas porosity in the casting."},{id:"mt_mcq_19",question:"Elements that help porcelain bonding by forming oxides include:",options:["Sn, In, Fe","Au, Pt, Pd only","Ag only","Hg only"],correctAnswerIndex:0,explanation:"Porcelain bonds to a controlled oxide layer; Sn/In/Fe are oxidizable  form bonding oxides."},{id:"mt_mcq_20",question:"Grain refiners in noble alloys include:",options:["Ir, Ru, Re","Sn, In, Fe","Hg, Sn, Cu","Na, K, Cl"],correctAnswerIndex:0,explanation:"Same concept as earlier: Ir/Ru/Re promote nucleation  finer grains."},{id:"mt_mcq_21",question:"Pure gold is generally not used for cast restorations because:",options:["It is too hard","It is too soft/low stiffness","It corrodes instantly","It is magnetic"],correctAnswerIndex:1,explanation:"Pure Au is very ductile but too weak/low modulus for functional cast restorations."},{id:"mt_mcq_22",question:"Palladium added to gold alloys generally:",options:["Redden color and lower melting range","Whitens, raises strength/hardness/melting range, lowers density","Turns alloy into ceramic","Eliminates all oxidation"],correctAnswerIndex:1,explanation:"Pd is a whitener and strengthens Au alloys; also raises melting range and lowers density relative to gold."},{id:"mt_mcq_23",question:"Which statement is TRUE about work hardening (cold working)?",options:["It makes metals softer and more ductile","It reduces dislocation density","It increases strength/hardness but decreases ductility","It only happens during melting"],correctAnswerIndex:2,explanation:"Deformation creates more dislocations; they tangle and block each other  harder to deform further (stronger) but less ductile."},{id:"mt_mcq_24",question:"Annealing / stress-relief heat treatment mainly:",options:["Adds more dislocations","Reduces internal","Creates more   phase","Makes grains always smaller"],correctAnswerIndex:1,explanation:"Heat lets dislocations rearrange/annihilate; internal stresses drop; metal softens and ductility returns."},{id:"mt_mcq_25",question:"Which lattice type is most associated with high ductility and burnishability in dentistry?",options:["FCC","HCP","BCC","Amorphous"],correctAnswerIndex:0,explanation:"FCC has many slip systems  dislocations move easily  high ductility."},{id:"mt_mcq_26",question:"Quench from ~700C in Type III/IV gold is mainly used to:",options:["Increase ordering immediately","Keep the alloy disordered and softer for finishing/burnishing","Create more precipitates","Increase casting shrinkage"],correctAnswerIndex:1,explanation:"Fast cooling prevents ordering/age hardening  remains softer for margin finishing."},{id:"mt_mcq_27",question:"Age hardening (ordering) of AuCu is typically done to:",options:["Make the casting softer for margin adjustment","Make the restoration harder/stronger after adjustments are finished","Remove all grains","Prevent all corrosion"],correctAnswerIndex:1,explanation:"Controlled heat in ordering range creates ordered regions  blocks dislocations  strength/hardness increase."},{id:"mt_mcq_28",question:"Dental amalgam brittleness and galvanic/corrosion problems are MOST strongly linked to:",options:["A peritectic reaction during cooling from a melt","Multiple phases with different electrochemical potentials","Hygroscopic expansion of investment","FCC lattice of silver"],correctAnswerIndex:1,explanation:"Different phases act like tiny galvanic cells  corrosion + weakening  brittleness/marginal breakdown."},{id:"mt_mcq_29",question:"Best combined statement about ductility is:",options:["Only metallic bonding matters; dislocations are irrelevant","Only dislocations matter; bonding type is irrelevant","Metallic bonding allows sliding without bond breakage, and dislocations make sliding easy","Grain boundaries create ductility"],correctAnswerIndex:2,explanation:"The electron sea keeps bonding intact during sliding; dislocations reduce the stress needed for slip."},{id:"mt_mcq_30",question:"The main reason gold (Au) is added to dental alloys is to improve:",options:["Magnetic properties","Corrosion resistance and ductility","Thermal expansion mismatch","Porcelain greening"],correctAnswerIndex:1,explanation:"Au is noble/inert  excellent corrosion resistance; also very ductile."},{id:"mt_mcq_31",question:"Which element most strongly whitens gold alloys and also increases melting range + modulus?",options:["Silver","Copper","Palladium","Zinc"],correctAnswerIndex:2,explanation:"Pd is a strong whitener and stiffener; raises melting range and elastic modulus."},{id:"mt_mcq_32",question:"Platinum (Pt) is primarily added to PFM gold alloys to:",options:["Lower melting point and soften the alloy","Increase strength and melting point","Cause porcelain greening","Reduce porosity by scavenging oxygen"],correctAnswerIndex:1,explanation:"Pt increases strength and raises melting range (useful for PFM processing)."},{id:"mt_mcq_33",question:"In Pd-based PFM alloys, silver (Ag) is mainly added to:",options:["Decrease thermal expansion coefficient (TEC)","Increase thermal expansion coefficient (TEC)","Increase corrosion resistance more than gold","Act as grain refiner"],correctAnswerIndex:1,explanation:"Pds TEC is low; Ag raises TEC to better match porcelain."},{id:"mt_mcq_34",question:"Greening of porcelain is classically associated with which element in some alloys?",options:["Platinum","Silver","Zinc","Iridium"],correctAnswerIndex:1,explanation:"Some Ag-containing alloys can cause greenish discoloration in certain porcelains (older/classic issue)."},{id:"mt_mcq_35",question:"Copper (Cu) in Au alloys mainly:",options:["Lowers hardness and increases ductility only","Increases strength/hardness and reddens the alloy","Whitens the alloy and lowers density","Prevents oxide formation completely"],correctAnswerIndex:1,explanation:"Cu gives solid-solution strengthening/ordering effects and adds a reddish hue."},{id:"mt_mcq_36",question:"Zinc (Zn) is added mainly as an:",options:["Oxygen scavenger to reduce gas porosity","Element to increase porcelain greening","Grain refiner","Metal that increases modulus more than Pd"],correctAnswerIndex:0,explanation:"Zn reacts with oxygen  less gas pickup  fewer porosity defects."},{id:"mt_mcq_37",question:"Iridium (Ir) and Ruthenium (Ru) are added to noble casting alloys mainly to:",options:["Increase thermal expansion","Promote smaller grains (grain refinement)","Cause reddish color","Reduce melting range"],correctAnswerIndex:1,explanation:"They act as grain refiners  more nucleation  finer grains  better strength/consistency."},{id:"mt_mcq_38",question:"Which pairing is CORRECT?",options:["Ag  reddens alloy","Cu  whitens alloy","Pd  whitens and increases modulus","Zn  causes porcelain greening"],correctAnswerIndex:2,explanation:"Pd is the classic whitener/stiffener; Ag doesnt redden (Cu does); Zn doesnt cause greening."},{id:"mt_mcq_39",question:"A casting shows excessive gas porosity. Which alloying element helps prevent this?",options:["Copper","Silver","Zinc","Iridium"],correctAnswerIndex:2,explanation:"Zn is the oxygen scavenger  reduces gas-related porosity during melting/casting."}],f3=`

# Investment Material



![Dental Lost Wax Casting Technique](assets/investment/lost_wax_technique.png)



# 2) Investment: definition + ideal requirements



## Definition

**Investment** = ceramic mold material into which metal/alloy is cast; the process is **investing**.



## Ideal requirements (high yield)

- Easy manipulation; should not separate on mixing.

- Smooth surface/detail reproduction.

- Proper working/setting time.

- Strength to survive burnout + casting.

- **Controlled expansion** (to compensate alloy shrinkage).

- Adequate porosity (vent gases during casting).

- Easy divestment, inexpensive.



# 3) Composition (whats inside an investment)



Most dental investments = **Refractory + Binder + Modifiers**



## A) Refractory (mainly silica)

- Silica allotropes used to control thermal behavior: quartz, cristobalite, tridymite (sometimes mixes).



## B) Binder (holds everything together)

Basically a glue that holds rocks (silica) together.

- **Gypsum (-hemihydrate)** for low-temp casting.

- **Phosphate** for high-temp / metal-ceramic / base metal.

- **Ethyl silicate (silica-bonded)** mainly for some base-metal RPD work (obsolete).



## C) Modifiers / reducing agents

- Modifiers like NaCl, boric acid, etc. regulate setting time/expansion and influence high-temp behavior.



![Investment Classification](assets/investment/investment_img_3_1.png)



# 4) Classification (easy exam structure)



## I) Based on binder (most used classification)

1. **Gypsum-bonded**  gold alloy inlays/onlays/crowns (lower casting temps).

2. **Phosphate-bonded**  base metals + metal-ceramic alloys (higher temps) - mostly used and the best one.

3. **Ethyl silicate-bonded**  mainly some CoNi/CoCr partial denture castings (obsolete).



## II) Based on type of silica used

- Quartz investment vs Cristobalite investment.



## III) Type I / II / III (gypsum investment use-style)

- **Type I**: compensation mainly by thermal expansion (inlay/crown).

- **Type II**: compensation mainly by hygroscopic expansion (inlay/onlay/crown).

- **Type III**: used rarely; casting gold partial denture type situations.



# 5) Gypsum-bonded investments (GBI)  THE CLASSIC



## A) Indications (where you use it)



| Type | Category | Hardness (VHN)* | Description & Common Uses |
| :--- | :--- | :--- | :--- |
| **Type I** | Soft | 50  90 | Very high gold content (approx 83%). Highly burnishable (malleable). Small, one-surface inlays. Low-stress areas but weak. Rarely used today due to softness. |
| **Type II** | Medium | 90  120 | Moderate strength. Good balance of burnishability and stability. Larger inlays, onlays, 2 or 3 surface restorations. |
| **Type III** | Hard | 120  150 | High strength and durability. The standard for most crown and bridge work. Heat treatable. Full Crowns, Short-span bridges, Abutments. |
| **Type IV** | Extra Hard | 150+ | Highest strength. Lower gold content, higher Copper/Platinum. Very rigid and resistant to deflection. Removable Partial Denture (RPD) frameworks, Long-span bridges, Clasps and saddles. |



## B) Composition

Typical:

- **Gypsum binder ~2535%** (strength + setting expansion).

- **Silica ~6575%** (controls thermal expansion).

- **Modifiers ~23%**: reducing agents/color may be added.



## C) Big limitation: temperature ceiling

- Gypsum investment must not be heated above **~700C** because decomposition releases sulfur gases  **shrinkage** + **contamination/tarnish** (sulfides) of alloying elements.

- Many texts also emphasize **carbon-containing gypsum investments** have a lower safe max (often ~650C).



## D) Why silica is added (the expansion science)

Gypsum binder tends to **contract on heating** (after dehydration/phase changes), so silica is used to **counterbalance** that contraction via **silica inversions**.



### Silica inversion expansions (high-yield temperatures)

- **Cristobalite**: big expansion around **200270C** (highest expansion).

- **Quartz**: inversion at **573C** (significant expansion).

- **Tridymite**: lower expansion overall (less than 1% by 600C).



**Why it matters**: you choose silica type/amount to get the right mold enlargement at burnout temp.



## E) Setting Reaction

**Reaction**: Calcium sulfate hemihydrate  Dihydrate (Gypsum crystals)



**CaSO   HO + 1 HO  CaSO  2 HO + Heat**



- **Mechanism**: This acts as the glue. The setting reaction is **exothermic** (releases heat).

- **Structure**: The newly formed **CaSO  2HO** crystals interlock and bridge the silica particles together to form a solid mold.

![Gypsum-Bonded Investment Structure](assets/investment/gypsum_bonded_structure.png)

## F) Expansion types (3 expansions you must separate)



### 1) Normal (air) setting expansion (LINEAR EXPANSION)

- Happens while setting in air; helps compensate casting shrinkage.

- Typical range ~0.40.6%.



### 2) Hygroscopic setting expansion (Type II concept)

- Setting while in contact with water  much larger (about ~6 normal).

- Typical allowed range ~1.22.2%.

- **Key controls**:

    -  silica content, finer silica   hygroscopic expansion.

    - -hemihydrate + silica tends to give more hygroscopic expansion than .

    -  W/P ratio   hygroscopic expansion.

    - Less mixing time   hygroscopic expansion.

    - Older investment (shelf life)   hygroscopic expansion.

    - Earlier immersion (before initial set)  maximum expansion.



### 3) Thermal expansion (Type I concept)

- Mainly controlled by type + amount of silica and the W/P ratio.

- Typical target mentioned for gypsum Type I: about ~1.01.6%.

- **More water  less thermal expansion** (important clinically).



## G) Strength (dont overthink  just know the rules)

- Strength decreases with higher W/P ratio (more water = weaker).

- Heating/cooling cycles can reduce strength (microcracking on cooling is a known issue).



## H) Porosity of the investment (not casting porosity)

- Porosity is needed so air/gases can escape as molten metal enters.

- Keep the pattern positioned so the end near the ring opening isnt buried under too much investment (~6 mm as a classic guideline).



# 6) Phosphate-bonded investments (PBI)  HIGH TEMP WORKHORSE



![Phosphate-Bonded Investment](assets/investment/investment_img_8_1.png)



Phosphate-Bonded Investment = High-Heat / Heavy-Duty Investment



###  Used for:

- Metal-ceramic (PFM) alloys (high-fusing).

- Base-metal alloys (Ni-Cr, Co-Cr).

- Can also be used for pressable ceramics (in many systems).

- **BEST investment material mostly used.**



###  Why not gypsum-bonded here?

- Gypsum-bonded investments must NOT be heated above ~700C  decomposition + contamination risk.

- Phosphate-bonded investments tolerate much higher burnout/casting temperatures.



## A) Composition (Simple recipe)

**Powder:**

- **Refractory filler** (mostly silica) = quartz / cristobalite (major portion).

- **Binder system**:

    - MgO (magnesia) = base.

    - NHHPO (monoammonium phosphate) = acid source.



**Liquid (controls expansion):**

- Water  standard expansion.

- **Colloidal silica special liquid**  expansion booster.

- Increases setting expansion + thermal expansion.

- Also reduces the early thermal shrinkage seen when mixed with water.



## B) Setting reaction (Room temperature)  what type of reaction?

 **Acidbase reaction** (like a cement)

- **Acid**: NHHPO

- **Base**: MgO



**Key equation (high yield):**

**NHHPO + MgO + 5HO  NHMgPO  6HO**

*(Ammonium Phosphate + Magnesia + Water  Magnesium Ammonium Phosphate / Struvite)*



That product (magnesium ammonium phosphate hexahydrate) forms a rigid binder matrix that locks the silica filler grains together.



## C) What happens on heating (burnout / furnace changes)?

When heated, the binder dehydrates + decomposes:

- **What you notice**: Ammonia smell can occur (binder breakdown products).

- **What it becomes (final high-temp binder)**: The set binder converts mainly to magnesium pyrophosphate (**MgPO**).

- By high temperature, it behaves like a ceramic-like refractory mass that can withstand molten metal.



  **Exam Key Point: How to get MORE expansion?**

If the question asks: How do you increase mold expansion for a base-metal crown/framework?

 **Replace water with colloidal silica special liquid** (or increase its concentration).

That increases:

- Setting expansion.

- Thermal expansion.

(And it reduces the early 200400C shrinkage seen with water mixes.)



## D) Carbon controversy (high yield)

- Carbon helps divesting/clean casting, BUT for high palladium alloys theres concern about interaction/embrittlement; palladium reacting with carbon around high temperatures (~1500C range), so **carbon-free phosphate investment** may be preferred in those cases.



# 7) Ethyl silicatebonded investments (silica-bonded)  LESS COMMON NOW



### Where used:

- Historically important for some high-fusing base-metal RPD casting; use has declined because technique is more complex.



## Ethyl silicatebonded investment: setting + green (high-yield) shrinkage



### 1) Key Reactions (Binder Formation)

**Step 1  Acid-catalyzed hydrolysis** (HCl is the catalyst). HCl + water start the reaction by hydrolyzing ethyl silicate (TEOS):

**Si(OCH) + 4HO (with HCl catalyst)  Si(OH) + 4CHOH**

*(Silanols (SiOH) + ethanol)*



**Step 2  Condensation / polymerization**  silica gel binder. Those SiOH groups join to form a 3-D gel network:

**SiOH + HOSi  SiOSi + HO**



**Step 3  The gel binds the filler** (not reacts to form ethyl silicate). The gel coats/bridges the quartz/cristobalite grains and sets. Later, drying causes green shrinkage (loss of alcohol + water).



> In ethyl silicatebonded investment, the ethyl silicate liquid undergoes hydrolysis (water breaks SiOR bonds to form SiOH), then condensation/gelation forms a silica gel network that coats and bridges the refractory silica filler grains, acting as a glue to hold the particles together.



![Shrinkage Compensation](assets/investment/investment_img_13_1.png)



### 2) Two shrinkages you MUST mention (this is the exam hook)



**A) Setting shrinkage**

- Happens during gel formation / setting of the binder.

- It reduces mold dimensions.



**B) Green shrinkage (IMPORTANT)**

- Happens during drying of the set gel before high-heat burnout.

- As the gel dries (loses alcohol + water), it undergoes additional volumetric contraction.

- This extra contraction is called **green shrinkage**, and it is additive to setting shrinkage.



 **Total mold reduction (before casting):**

**Total Shrinkage = Setting Shrinkage + Green Shrinkage**



### Why it matters clinically:

To get accurate castings, mold enlargement must compensate for:

**Compensation Required = Alloy Casting Shrinkage + Setting Shrinkage + Green Shrinkage**

Thats the key why ethyl silicate systems are technique-sensitive.



### 4) Extra high-yield handling note

- More complicated; flammable alcohol is released during heating  burnout/handling needs care.

`,p3=["Refractory (Silica) provides thermal expansion and heat resistance.","Binder (Gypsum/Phosphate) provides strength and holds the refractory.","Gypsum-bonded investments cannot be heated above 700C (decomposition).","Phosphate-bonded investments are used for PFM and base metal alloys.","Phosphate-bonded investments are currently the most widely used and considered the best investment material.","Hygroscopic expansion can significantly increase the total mold expansion.","Colloidal silica 'special liquid' in phosphate investments increases both setting and thermal expansion.","Ethyl silicate systems involve hydrolysis and condensation to form a silica gel binder.","Green shrinkage is a unique challenge in ethyl silicate-bonded investments."],CT=[{id:"inv_mcq_2",question:"Dental investments are mainly composed of:",options:[" Wax + resin + water"," Refractory + binder + modifiers"," Metal + flux"," Acrylic resin + catalyst"],correctAnswerIndex:1,explanation:"Core formula = filler (silica) + binder + modifiers."},{id:"inv_mcq_3",question:"A sprue is best defined as:",options:[" A wax hardener used on dies"," The channel in investment through which molten metal flows"," The ring liner inside the casting ring"," The water bath used for hygroscopic expansion"],correctAnswerIndex:1,explanation:"Sprue = channel for molten metal flow in the mold."},{id:"inv_mcq_4",question:"The investment material must be:",options:[" Soluble in water so it can be washed away"," Refractory and thermally stable at casting temperatures"," Soft to allow easy carving"," Metallic to conduct heat"],correctAnswerIndex:1,explanation:"It must withstand high temperatures without breaking down."},{id:"inv_mcq_5",question:"Investment is:",options:[" Wax used for patterns"," Ceramic mold material into which alloys are cast"," A die spacer paint"," A ring liner"],correctAnswerIndex:1,explanation:"Investment = ceramic mold into which metal is cast."},{id:"inv_mcq_6",question:"The common refractory used in investments is:",options:[" Zinc oxide"," Silica allotropes"," Calcium hydroxide"," Sodium alginate"],correctAnswerIndex:1,explanation:"Refractory filler is mostly silica .(quartz/cristobalite/tridymite)"},{id:"inv_mcq_7",question:"In investments, the binder mainly functions to:",options:[" Melt the alloy B holding silica filler particles together"," Prevent wax burnout"," Remove oxides from casting"],correctAnswerIndex:1,explanation:"Binder cements silica grains into a rigid mass. Classification"},{id:"inv_mcq_8",question:"The most commonly used classification of investments is based on:",options:[" Color"," Binder type"," Sprue length"," Ring size"],correctAnswerIndex:1,explanation:"Most common = gypsum / phosphate / ethyl silicate (binder-based) ."},{id:"inv_mcq_9",question:"Gypsum-bonded investments are most appropriate for:",options:[" Very high-fusing base metal alloys (Ni-Cr/Co-Cr)"," Gold alloy castings (lower casting temperatures)"," Titanium castings"," All ceramics only"],correctAnswerIndex:1,explanation:"Gypsum-bonded is for lower-fusing (gold) castings ."},{id:"inv_mcq_10",question:"Phosphate-bonded investments are mainly used for:",options:[" Low-fusing gold inlays only"," Metal-ceramic alloys and base metal alloys ()"," Only gypsum products"," Hydrocolloid impressions"],correctAnswerIndex:1,explanation:"Phosphate-bonded tolerates high temperatures for PFM/base metals ."},{id:"inv_mcq_11",question:"Ethyl silicatebonded investments are best described as:",options:[" Most common modern investment for all crowns"," Silica-gel bonded, technique-sensitive, now less common"," Only for gypsum die stones"," Used only below 400C"],correctAnswerIndex:1,explanation:"Ethyl silicate systems are older/complex , now less common ."},{id:"inv_mcq_12",question:"Type II investment compensates casting shrinkage mainly by:",options:[" Thermal expansion"," Hygroscopic expansion"," Wax contraction"," Shrinkage of investment"],correctAnswerIndex:1,explanation:"Type II = mainly hygroscopic expansion . Gypsum-bonded investments (GBI)"},{id:"inv_mcq_13",question:"Typical composition of gypsum-bonded investment is closest to:",options:[" 5% gypsum + 95% silica"," 2535% gypsum binder + 6575% silica + small modifiers"," 80% binder + 20% silica"," 100% gypsum only"],correctAnswerIndex:1,explanation:"Typical ranges: ~2535% binder and ~6575% silica ."},{id:"inv_mcq_14",question:"Gypsum-bonded investments should NOT be heated above approximately:",options:[" 300C"," 500C"," 700C"," 1200C"],correctAnswerIndex:2,explanation:"Above ~ 700C gypsum decomposes  shrinkage + contamination."},{id:"inv_mcq_15",question:"A lab technician hands you a gold casting that has a dark/black discoloration (tarnish) . The most likely reason is:",options:[" Incorrect sprue angle"," Wet ring liner used"," Overheating the gypsum-bonded investment during burnout"," Excess vibration while investing"],correctAnswerIndex:2,explanation:"(why C is correct) Gypsum-bonded investments are stable only up to a certain burnout temperature(700-650 C). If the ring is overheated , the gypsum binder begins to decompose , and sulfur-containing products can be released. These sulfur compounds react with alloy components at the casting surface and form metal sulfides , which show up clinically as a dark/black surface discoloration (tarnish) ."},{id:"inv_mcq_16",question:"Quartz inversion (  ) occurs at:",options:[" 117C"," 270C"," 573C"," 1040C"],correctAnswerIndex:2,explanation:"Quartz  inversion is at 573C ."},{id:"inv_mcq_17",question:"Cristobalite inversion mainly occurs around:",options:[" 050C"," 200270C"," 573C"," 9001000C"],correctAnswerIndex:1,explanation:"Cristobalite inversion occurs ~200270C ."},{id:"inv_mcq_18",question:"The gypsum setting reaction is:",options:[" CaSO  2H  O  CaSO  H  O"," CaSO  H  O + 1H  O  CaSO  2H  O + heat"," MgO + NH  H  PO   Mg  P  O "," Si(OC  H  )   SiO  only"],correctAnswerIndex:1,explanation:"Hemihydrate hydrates to dihydrate and releases heat ."},{id:"inv_mcq_19",question:"Normal (air) setting expansion of gypsum investments is typically:",options:[" 0.010.05%"," 0.40.6%"," 1.22.2%"," 35%"],correctAnswerIndex:1,explanation:"Normal setting expansion is around 0.40.6% ."},{id:"inv_mcq_20",question:"Maximum hygroscopic expansion is obtained when the investment ring is immersed:",options:[" After final set"," Before initial set"," Only after burnout"," Only in cold water (05C)"],correctAnswerIndex:1,explanation:"Earlier immersion (before initial set) gives the highest hygroscopic expansion."},{id:"inv_mcq_21",question:"Hygroscopic expansion generally increases with:",options:[" Coarser silica and higher W/P"," Finer silica and higher silica content"," Increasing W/P ratio"," Longer shelf life (older investment)"],correctAnswerIndex:1,explanation:"More + finer silica  more hygroscopic expansion."},{id:"inv_mcq_22",question:"Why is porosity of investment important?",options:[" It makes casting heavier"," It vents gases/air ahead of molten metal to allow full mold filling"," It prevents burnout"," It increases alloy melting point"],correctAnswerIndex:1,explanation:"Porosity provides gas escape paths during casting."},{id:"inv_mcq_23",question:"Main reason phosphate investment is used instead of gypsum for PFM/base metals:",options:[" Gypsum expands too much"," Gypsum decomposes at high temperature"," Phosphate has lower strength"," Phosphate is only for hydrocolloid impressions"],correctAnswerIndex:1,explanation:"Gypsum breaks down at high heat-700C; ; phosphate survives high-fusing phosphate tolerates high temperatures"},{id:"inv_mcq_24",question:"Acid used in phosphate investment powder is commonly:",options:[" Borax"," Monoammonium phosphate (NH  H  PO  )"," Sodium chloride"," Calcium carbonate"],correctAnswerIndex:1,explanation:"NH  H  PO  is the acid phosphate ."},{id:"inv_mcq_25",question:"Base in phosphate investment binder is:",options:[" MgO (magnesia)"," CaSO  H  O"," SiO "," HCl"],correctAnswerIndex:0,explanation:"MgO is the base component."},{id:"inv_mcq_26",question:"Setting product formed (room temperature) is:",options:[" CaSO  2H  O"," NH  MgPO  6H  O"," Mg  P  O "," Si(OH) "],correctAnswerIndex:1,explanation:"Forms magnesium ammonium phosphate hexahydrate ."},{id:"inv_mcq_27",question:"On heating phosphate investments, the binder mainly converts to:",options:[" CaO"," Mg  P  O "," NaCl"," CaSO  2H  O"],correctAnswerIndex:1,explanation:"Heating yields Mg  P  O  (ceramic-like binder)."},{id:"inv_mcq_28",question:"A practical sign during heating of phosphate investments can be:",options:[" Chlorine smell"," Ammonia smell"," Sulfur dioxide smell"," Ozone smell"],correctAnswerIndex:1,explanation:"Binder decomposition can release ammonia ."},{id:"inv_mcq_29",question:"To increase mold expansion for base-metal castings using phosphate investment, you should:",options:[" Replace special liquid with oil"," Replace water with colloidal silica"," Add borax as retarder"," Use less silica filler"],correctAnswerIndex:1,explanation:"Colloidal silica boosts setting + thermal expansion ."},{id:"inv_mcq_30",question:"Carbon in phosphate investments is mainly added to:",options:[" Raise melting point"," Improve divesting/cleaner castings"," Reduce casting shrinkage to zero"," Stop ammonia release"],correctAnswerIndex:1,explanation:"Carbon helps clean casting + divesting , but may be avoided with high Pd. (High-yield follow-up on Carbon controversy in PBI) A phosphate-bonded investment WITHOUT carbon is preferred when casting which alloy? A. High-copper gold alloy B. Silver-palladium / high-palladium alloy C. Low-fusing Type I gold alloy D. Pure titanium B Carbon can interact with high-palladium alloys at high casting temperatures , increasing risk of embrittlement/contamination , so a carbon-free phosphate investment is preferred. Ethyl silicatebonded investments"},{id:"inv_mcq_31",question:"Green shrinkage refers to shrinkage occurring mainly during:",options:[" Alloy solidification"," Drying of the silica gel"," Quartz inversion at 573C"," Hygroscopic expansion in water bath"],correctAnswerIndex:1,explanation:"Green shrinkage = drying contraction of gel (loss of water/alcohol)."},{id:"inv_mcq_32",question:"Total mold reduction in ethyl silicate systems (before casting) is:",options:[" Only setting shrinkage"," Only green shrinkage"," Setting shrinkage + green shrinkage"," Thermal expansion + hygroscopic expansion"],correctAnswerIndex:2,explanation:"Total shrinkage = setting shrinkage + green shrinkage ."}],ST=[{id:"inv_mcq_33",question:"Dental alloys are most commonly cast into molds using:",options:[" Hand pressure only"," Centrifugal force, pressure, or vacuum + pressure"," Capillary action only"," Ultrasonic vibration only"],correctAnswerIndex:1,explanation:"Standard casting uses centrifugal / pressure / vacuum-pressure ."},{id:"inv_mcq_34",question:"Which is NOT an ideal requirement of an investment?",options:[" Controlled expansion"," Adequate porosity for gas venting"," Chemical reaction with molten metal for better bonding"," Smooth surface/detail reproduction"],correctAnswerIndex:2,explanation:"Investment should NOT chemically react with molten metal. Q7 . The main role of refractory silica in an investment is to: A. Act as binder B. Provide thermal expansion to compensate alloy shrinkage C. Act as reducing agent D. Lower alloy melting point B Silica gives thermal expansion/inversion expansion to offset alloy shrinkage."},{id:"inv_mcq_35",question:"Type I investment compensates casting shrinkage mainly by:",options:[" Hygroscopic expansion"," Thermal expansion"," Polymerization expansion"," Elastic recovery"],correctAnswerIndex:1,explanation:"Type I = mainly thermal expansion compensation."},{id:"inv_mcq_36",question:"Type II investments should have hygroscopic expansion (in water) roughly:",options:[" 0.10.3%"," 0.40.6%"," 1.22.2%"," 46%"],correctAnswerIndex:2,explanation:"Type II target/limits are ~1.22.2% . Gold shrinks about 1.2%"},{id:"inv_mcq_37",question:"Increasing W/P ratio (thinner mix) generally causes hygroscopic expansion to:",options:[" Increase"," Decrease"," Become 10 higher"," Stay unchanged always"],correctAnswerIndex:1,explanation:"More water  less hygroscopic expansion . This is a bit conflicting but increase W/P ratio will(more water less powder )will decrease expansion increase porosity and decrease strength but if the setting is done under water after the initial mixing is done at the time when chemical reaction is occurring submerged in water (taking a bath ) More gauging water = weaker + more porous + less expansion. More immersion water (early) = more hygroscopic expansion."},{id:"inv_mcq_38",question:"Thermal expansion for Type I gypsum investments is typically targeted around:",options:[" 00.2%"," 0.40.6%"," 1.01.6%"," 3.05.0%"],correctAnswerIndex:2,explanation:"Type I relies on thermal expansion ~1.01.6% . Q30 A gypsum-bonded investment is accidentally heated above its safe temperature during burnout. Which outcome is MOST likely? A. Increased hygroscopic expansion and improved fit B. Investment shrinkage with possible casting contaminatio n C. Stronger investment mold and smoother casting D. Complete prevention of porosity B Overheating gypsum investment causes decomposition , leading to contraction (shrinkage) and contamination of the casting (classically via sulfide formation) ."},{id:"inv_mcq_39",question:"Classic positioning guideline for venting in gypsum-bonded investments: top of pattern should be within about:",options:[" 1 mm of open end"," 3 mm of open end"," 6 mm of open end"," 15 mm of open end"],correctAnswerIndex:2,explanation:"Pattern should be within ~6 mm for effective venting. Phosphate-bonded investments (PBI)"},{id:"inv_mcq_40",question:"The phosphate binder system is mainly:",options:[" Polymerization"," Acidbase reaction"," Oxidation-reduction"," Crystallization without chemical change"],correctAnswerIndex:1,explanation:"It sets by an acidbase cement reaction ."},{id:"inv_mcq_41",question:"Ethyl silicate investments set mainly by:",options:[" Gypsum hydration"," Solgel chemistry"," Acidbase MgO + phosphate reaction only"," Polymerization of acrylic resin"],correctAnswerIndex:1,explanation:"Ethyl silicate uses hydrolysis + gelation  silica gel binder."},{id:"inv_mcq_42",question:"In ethyl silicate systems, HCl mainly acts as:",options:[" Refractory filler"," Catalyst for hydrolysis of ethyl silicate"," Ring liner"," Wax softener"],correctAnswerIndex:1,explanation:"HCl catalyzes hydrolysis of ethyl silicate."}],kT=[{id:"inv_mcq_43",question:"Silica is added to gypsum-bonded investment mainly because it:",options:[" Prevents gypsum setting reaction"," Acts as the binder that holds the investment together"," Undergoes inversion expansion on heating, offsetting gypsum contraction"," Eliminates the need for a ring liner"],correctAnswerIndex:2,explanation:"Quartz/cristobalite show inversion expansion on heating, which counterbalances gypsum shrinkage and helps maintain mold size."},{id:"inv_mcq_44",question:"Reducing mixing time generally causes hygroscopic expansion to:",options:[" Increase"," Decrease"," Double"," Become unrelated to silica content"],correctAnswerIndex:1,explanation:"Less mixing  reduced hygroscopic expansion ."}],g3=[...CT,...ST,...kT],y3=`
# Casting Procedure

![Casting Procedure Overview](assets/investment/investment_img_1_1.png)

# Dental Casting (Lost-Wax)
## The BIG GOAL (why we do all this)
A casting fits only if the mold is enlarged enough to compensate for:
- Wax pattern changes (minor, variable)
- Alloy solidification shrinkage (major; noble  ~1.25%+, base metals ~ 2.2% )

## Alloy Solidification Shrinkage (Major, Predictable)
This is the most important factor.
###  Why does metal shrink?
- Molten metal atoms are far apart
- On cooling and solidification, atoms pack closer together
- This causes volume contraction
###  Typical shrinkage values:
- **Noble alloys (gold-based)**:  1.25%
- **Base-metal alloys (Ni-Cr, Co-Cr)**:  2.02.3% ( 2.2%)

 Base metals shrink more because:
- Higher melting temperature
- Greater thermal contraction

![Shrinkage Compensation](assets/investment/casting_img_2.png)

We cannot control this shrinkage so what we do is we counter it by making the investment expand which we already learned in investment material by thermal expansion and hygroscopic expansion

**Investment expansion +2.2% - (Metal shrinkage )2.2%-=0**

**Total Investment Expansion = Metal Casting Shrinkage**
- Example: If the metal shrinks by 2.2%, the mold must expand by 2.2%.
- Result: The expansion (+2.2%) cancels out the shrinkage (-2.2%), resulting in a net change of 0.
If this is mismatched by any percentage we get either undersized or oversized casting

# 1) Lost-Wax Casting Procedure  FLOW CHART (what happens step-by-step)
**Impression**
-> **Master cast + Master die** (Type IV / Type V stone)
-> **Wax/resin pattern made on die** (margins/contacts/occlusion corrected)
-> **Sprue + reservoir added** (creates metal channel + feeding source)
-> **Investing** (pattern surrounded by investment in ring / ringless system) (a separate slide )
-> **Bench set (~1 hour)** (investment hardens)
-> **Burnout / Wax elimination + heating** (wax removed, mold expanded, water driven off)
-> **Casting** (molten alloy forced into mold: centrifugal / pressure / vacuum+pressure)
-> **Cooling** (then divest)
-> **Cleaning** (pickling / ultrasonic / sandblast as appropriate)
-> **Finish + fit check** (remove nodules, check margins under magnification)

# 2) Master die
Most commonly used:
- **Type IV stone**: high strength, setting expansion 0.1%
- **Type V stone**: high strength, higher expansion up to ~0.3% (helps compensate base-metal shrinkage)

**Main disadvantage of gypsum dies**: abrasion during wax carving.
Ways to increase abrasion resistance (but can slightly increase die size):
- Silver plating / electroforming approaches
- Cyanoacrylate coating
- Die hardener addition

**Die spacer (for cement space)**:
- Usually resin paint-on; applied in coats to within ~0.5 mm of finish line

**Electroformed dies (metal shell on impression)**:
- Very abrasion-resistant + accurate surface reproduction
- Silver-plated die is technically wrong wording because the impression surface is plated, not the die itself.

# 3) Sprue design  the highest-yield principles MUST
**Purpose of sprue former**: channel for molten alloy to reach mold after wax elimination.

## 6.1 Sprue diameter
- Sprue diameter  thickest part of wax pattern
- Too small  sprue freezes first  localized shrinkage / suck-back near attachment

## 6.2 Sprue position + direction
- Attach to bulkiest area
- Best if metal flows thick  thin (toward margins) rather than thin  thick
- Avoid directing molten metal toward thin/delicate parts (may abrade/fracture investment)

## 6.3 Sprue angle (turbulence rule)
- Avoid attaching at 90 to broad flat surfaces  turbulence  severe porosity at attachment
- Prefer ~45 to proximal wall for smoother flow + less porosity

## 6.4 Sprue attachment shape
- Often flared for high-density gold alloys (helps entry like reservoir)
- Sometimes more restricted for lower-density alloys

## 6.5 Sprue length + pattern position (the 6 mm rule)
- Pattern should be positioned close to ring end so gases vent:
    - **Gypsum-bonded**: top of pattern within ~6 mm of open end
    - **Phosphate-bonded**: can be closer (~34 mm) due to higher strength

![Sprue Design](assets/investment/casting_img_3.png)

## 6.6 Reservoir (feeding rule)
- Reservoir/button must remain molten longer than the pattern so it can feed metal during solidification  prevents shrinkage voids.

![Reservoir Concept](assets/investment/casting_img_4.png)

# 7) Rings, ring liners, and Ringless systems detail is unnecessary
## 7.1 Why liner is used
Metal ring restricts investment expansion  can distort mold.
Ring liner provides cushioning  allows investment expansion.

## 7.2 Liner materials
- Asbestos is obsolete (biohazard)
- Alternatives: cellulose (paper) and ceramic liner

## 7.3 One liner vs two liners
- More liner thickness (or two layers)  more normal + semihygroscopic expansion
- Liner thickness should not be < ~1 mm
- Liner must fit with no overlap (overlap = nonuniform expansion)

## 7.4 Wet liner vs dry liner
- Wet liner adds water during set  increases semihygroscopic expansion
- Dont squeeze liner (uneven water removal  nonuniform expansion)

## 7.5 Controlling excessive longitudinal expansion
- Expansion is greater longitudinally than radially
- Keeping liner slightly short of ring ends (example ~3.25 mm short) can reduce longitudinal over-expansion and distortion.

## 7.6 Ringless (Ingl(e)ss) / PowerCast style concept
- Tapered plastic rings allow the set mold to be pushed out after setting
- Burnout occurs without rigid metal ring  greater investment expansion
- Used for cases needing more mold expansion than traditional techniques.

# 8) Crucibles (what to choose)
- **Clay**: many crown/bridge noble alloys
- **Carbon**: many gold-based alloys (NOT for carbon-sensitive alloys)
- **Quartz / alumina / zirconia-alumina**: recommended for high-fusing alloys and carbon-sensitive alloys
- Carbon crucible should NOT be used for: high-Pd, Pd-Ag, Ni-Cr, Co-Cr alloys (carbon contamination risk)

![Crucibles](assets/investment/casting_img_5.png)

# 8) Mixing + investing procedure (what causes nodules/roughness)

## 8.1 Cleaning wax pattern
- Must be cleaned of debris/grease/oil
- Thin film of cleaner/wetting agent improves wetting  fewer bubbles

## 8.2 Vacuum mixing/investing (high yield)
- Vacuum mixing removes bubbles  smoother surface, fewer nodules
- Excessive vibration is bad  solids settle + free water near pattern  roughness
- Excessive vibration can dislodge pattern from sprue  miscast

## 8.3 Liquid/powder ratio (L/P or W/P)
- Higher W/P (more water)  weaker investment, more porosity, rougher casting, generally less effective expansion
- Lower W/P  thicker mix, potentially more expansion BUT too thick risks pattern distortion + poor coverage
- Measure accurately.

![Vacuum Mixing](assets/investment/casting_img_6.png)

# 9) Burnout (wax elimination + heating)  what happens + how its done

## 9.1 What burnout accomplishes
- Eliminates wax  creates mold cavity
- Provides thermal expansion(detail in investment material )
- Drives off water; reduces wax absorption; water vapor helps flush wax from mold
- If mold is held too long at high temp: risk of investment breakdown + rough surface + contamination

![Burnout Oven](assets/investment/casting_img_7.png)

## 9.2 Orientation in furnace (practical)
- Often place ring sprue hole down over a slot/tray so melted wax drains.

## 9.3 Two main compensation techniques
### A) Hygroscopic / Low-heat method (gypsum)
- Compensation from:
    1. Wax expansion in warm water bath (~37C)
    2. Hygroscopic expansion from water entering investment
    3. Thermal expansion at ~500C
- Requires longer burnout time because wax oxidizes slower at low temp
- Typical: mold in furnace 60 min, can be held longer with little damage, but venting may reduce if residual carbon remains  back-pressure risk.

### B) High-heat / Thermal expansion method (gypsum)
- Heat from room temp up to ~650700C (controlled heating to avoid cracking)
- Hold at top temperature (short hold) then cast promptly
- Gypsum is more prone to decomposition if overheated.

## 9.4 Gypsum investment temperature ceiling (critical)
- Gypsum investments should not be heated above **~700C**
- If gypsum investment contains carbon, safe maximum may be lower (often around **~650C**)
- Above limits  sulfur gases + contamination  black/gray brittle layer on gold alloy; difficult to pickle clean.

## 9.5 Phosphate investment burnout (high heat)
- Typical burnout temperatures: **~750C to 1030C** (highest for base metals)
- Often staged heating: slow early (e.g., 200315C hold) then faster, then hold at top temp (~30 min), then cast.
- Phosphate investment permeability is lower than gypsum  often requires greater casting pressure.

## 9.6 Cast soon after removing ring (time allowable)
- Investment contracts as it cools.
- In high-heat technique, about **~1 minute** can pass without noticeable dimensional loss under average conditions  then contraction matters.

# 10) Casting machines
Alloys melted and cast by:
1. Torch melting  centrifugal casting
2. Electrical resistance or induction melting  centrifugal
3. Induction melting (often for base metals)
4. Vacuum-arc melted + pressure casting in inert atmosphere (esp. reactive metals like Ti)

![Casting Machines](assets/investment/casting_img_8.png)

# 11) Torch flame + melting

## 11.1 Proper flame
- Use a nonluminous brush flame (efficient/hot)
- Beginners often choose roaring too much air flame (sounds hot but is wrong)

## 11.2 Flame zones (must know)
- **Mixing zone**: no heat
- **Combustion/oxidizing zone**: oxidizes alloy  dross (keep away)
- **Reducing zone**: hottest usable zone  should contact alloy during melting
- Outer oxidizing area should not be used for melting.

![Flame Zones](assets/investment/casting_img_9.png)

## 11.3 Signs youre using wrong zone
- **Correct reducing zone**  metal surface bright/mirrorlike
- **Oxidizing zone**  dull cloudy oxide film (dross)

## 11.4 Casting temperature rule
- Cast immediately when proper temp reached
- For many noble alloys: molten alloy should be **~3866C** above liquidus

## 11.5 Flux (noble alloys)
- Flux increases fluidity and reduces oxidation/porosity
- Borax + boric acid is classic
- Reducing fluxes with charcoal can shed carbon bits  margin defects

# 13) Cleaning after casting

## 13.1 Quenching (noble alloys)
- For type III/IV gold: quench when button shows **dull-red glow**
The button is the rounded mass of excess metal at the end of the sprue, near the crucible former, after casting

![Quenching 1](assets/investment/casting_img_10.png)
![Quenching 2](assets/investment/casting_img_11.png)

- Anneals metal (easier burnish/polish)(detail in metals )
- Hot investment breaks down  easier removal(thermal shock )
**Too hot (bright red) quench**  over-annealing + distortion;
**too cold (fully cooled) quench**  hard alloy(no annealing occurs ) + difficult divesting;(no thermal shock to break the investment)
**dull-red button**  ideal anneal + easy divesting.
If the metal is too hot and it is quench in water it can leads to Metal fins on casting

![Metal Fins](assets/investment/casting_img_12.png)

## 13.2 Pickling (removes oxides/discoloration)
- Often surface dark from oxides/tarnish  remove by acid pickling
- Common for gypsum-bonded: ~50% HCl (effective but fumes hazardous/corrosive; needs ventilation)
- Dont boil acids (fumes)

**Important mistake to avoid (high yield):**
- **Never use steel tongs** in pickling solution while holding casting  galvanic cell deposits copper on casting  future discoloration.

## 13.3 Phosphate investment cleanup
- Investment adheres strongly; large quartz grains
- HCl/HSO(cannot use it )
- Neither phosphate binder nor silica is soluble in
- HF(used to etch ceramic ) dissolves silica but is dangerous (often avoided); safer commercial alternatives exist
- Base metal alloys: prefer sandblasting with fine alumina, avoid acids.

# 14) Casting defects (most testable)  types, causes, prevention

![Casting Defects](assets/investment/casting_img_13.png)

## A) Distortion
- Usually wax pattern distortion (handling/removal)
- Also nonuniform investment expansion can distort thin patterns
- Lower setting expansion generally  less distortion (but expansion still needed overall)

## B) Surface roughness / irregularities / discoloration
Common causes:
- Air voids on pattern  nodules (fix: vacuum investing, good wetting)
- Water films from investment separating from wax (jarring after investing)
- High W/P ratio  rough casting
- Coarse silica  rougher surface
- Foreign bodies in mold (bits of investment, carbon from flux)
- Sulfur contamination  black/gray brittle layer on gold alloy; doesnt pickle clean

## C) Porosity (internal + external)
Two big groups:
1. **Solidification defects**
    - Localized shrinkage porosity
    - Microporosity
    - Suck-back porosity (hot spot)
2. **Trapped gases**
    - Pinhole porosity
    - Gas inclusions
    - Subsurface porosity
    - Back-pressure porosity

### 1) Localized shrinkage porosity
- **What**: a shrinkage void caused by poor feeding of molten metal during solidification.(basically the metal freezes/solidifies before it flows to all places )
- **Why**: metal shrinks as it freezes; if the sprue/button freezes before the casting, liquid metal cant flow in to compensate  void forms.
- **Where/looks like**: irregular voids, often near the spruecasting junction or thick areas.
- **Prevent**: sprue thick enough, attach to thickest part, add reservoir/button, correct casting temperature.

### 2) Microporosity
- **What**: many tiny internal pores within thick sections.
- **Why**: the surface freezes first; inside becomes a mushy zone of dendrites, and the last liquid metal cant feed the shrinkage  tiny pores remain.
- **Where/looks like**: fine internal porosity in bulky areas; not always visible until sectioned/ground.
- **Prevent**: correct sprue + reservoir, avoid too-rapid freezing, maintain proper casting temperature and pressure.

### 3) Suck-back porosity (hot spot)
- **What**: a shrinkage void from a localized hot region that freezes last.
- **Why**: metal impinges at sprue junctions or sharp line angles, creating a hot spot; that area solidifies last and pulls back  void.
- **Where/looks like**: usually just inside casting near sprue attachment or near sharp internal angles; often a smooth void.
- **Prevent**: flare sprue attachment, round sharp line angles, correct sprue placement, avoid excessive mold/melt temp.

### 4) Trapped gases
- **What**: gas/air physically stuck in the mold or melt  rounded voids.
- **Why**: turbulence, poor venting, moisture/wax residues creating gas, inadequate pressure/flow.
- **Where/looks like**: rounded pores; may be scattered; can cause short castings.
- **Prevent**: smooth metal flow (proper sprue), complete burnout, dry mold, adequate pressure.

### 5) Pinhole porosity
- **What**: tiny surface pinholes.
- **Why**: gas in molten metal escapes at/near the surface during freezing (often from overheating, contamination, wrong flame, dirty alloy/crucible).
- **Where/looks like**: many small pin-point holes on surface after finishing.
- **Prevent**: dont overheat, clean alloy/crucible, proper flux, controlled melting, avoid prolonged heating.

### 6) Gas inclusions
- **What**: larger rounded bubbles trapped inside the casting.
- **Why**: air/gas gets entrained during melting/casting (turbulence, splashing, contamination).
- **Where/looks like**: larger smooth round internal voids (bigger than pinholes).
- **Prevent**: avoid turbulence, correct sprueing, steady casting pressure, clean melt.

### 7) Subsurface porosity
- **What**: pores just below the surface (appear after grinding/polishing).
- **Why**: gas dissolves in molten metal; as it cools, gas solubility drops  gas comes out beneath a frozen surface skin.
- **Where/looks like**: looks fine initially, then pores show on finishing.
- **Prevent**: avoid overheating, minimize melt time, protect melt from gas pickup.

### 8) Back-pressure porosity
- **What**: rounded porosity + often incomplete casting due to air pushing back.
- **Why**: air in mold cant escape through investment because investment is too dense or pores are clogged (carbon from incomplete burnout, moisture). Incoming metal meets resistance  voids/short margins.
- **Where/looks like**: rounded porosity + rounded incomplete margins / missing thin parts.
- **Prevent**: correct investment mix (good permeability), complete burnout, keep pattern ~6 mm from ring end/wall, adequate casting pressure/time.

## Shrinkage Porosity (The "Feeding" Problem)
**Cause**: Metal shrinks as it cools. If new liquid metal cannot reach the shrinking area, a vacuum void forms.

| Type | Visual Cues | Key Mechanism |
| :--- | :--- | :--- |
| **Localized Shrinkage** | Irregular shapes (jagged). Usually near the sprue-casting junction. | **Sprue froze too early.** The supply line was cut off while the casting was still thirsty for metal. |
| **Microporosity** | Tiny, fine voids throughout a thick section, often invisible until polished. | **Dendritic growth.** The "mushy zone" inside a thick chunk froze before liquid could fill the gaps between crystals. |
| **Suck-back (Hot Spot)** | Smooth void, often just inside the casting near the sprue or sharp line angle. | **Hot Spot.** The metal hit a sharp corner, overheated that spot, and that spot froze last, sucking metal back toward the sprue. |

## Gas Porosity (The "Trapped Air" Problem)
**Cause**: Gas (air, combustion products, or dissolved gas) is physically trapped inside the metal.

| Type | Visual Cues | Key Mechanism |
| :--- | :--- | :--- |
| **Pinhole Porosity** | Tiny spherical holes all over the surface. | **Gas release.** The metal was overheated or contaminated; gas dissolved in the liquid and bubbled out right as it froze. |
| **Gas Inclusions** | Larger rounded bubbles inside the metal. | **Turbulence.** Poor sprue design caused the metal to splash and trap air pockets, or debris released gas. |
| **Subsurface Porosity** | Hidden voids that appear only after polishing/grinding. | **Solubility drop.** Gas was trapped just under the frozen "skin" of the casting. |
| **Back-pressure Porosity** | Rounded voids + Rounded margins (incomplete casting). | **No Escape.** The air in the mold couldn't get out (investment too dense or pattern too deep). The air fought back against the metal. |
`,b3=["Casting involves forcing molten alloy into a mold cavity.","Stages: Wax pattern, Spruing, Investing, Burnout, Casting.","Expansion of the mold must perfectly compensate for alloy shrinkage.","Venting is necessary to allow gases to escape the mold."],IT=[],NT=[{id:"cast_mcq_set2_1",question:"Cleaning after casting (base metals) A cast restoration made from a Ni-Cr alloy needs cleaning after divesting. What is the preferred method?",options:["Pickling in 50% HCl","Pickling in sulfuric acid","Sandblasting with fine alumina","Ultrasonic cleaning in acid"],correctAnswerIndex:2,explanation:"Base-metal alloys (Ni-Cr, Co-Cr) are acid-resistant and acids are ineffective and potentially damaging. Fine alumina sandblasting is preferred to mechanically remove investment remnants."},{id:"cast_mcq_set2_2",question:"Pickling with gypsum-bonded investment After casting a Type III gold alloy using a gypsum-bonded investment, the surface appears dark and discolored. What is the most appropriate cleaning method?",options:["Sandblasting with alumina","Pickling with ~50% hydrochloric acid","Hydrofluoric acid immersion","No cleaning is required"],correctAnswerIndex:1,explanation:"For gypsum-bonded investments , ~50% HCl effectively removes surface oxides and discoloration. However, fumes are corrosive and require proper ventilation."},{id:"cast_mcq_set2_3",question:"Quenching of gold alloys When casting a Type IV gold alloy, when should the ring be quenched in water?",options:["Immediately after casting","When the sprue button shows a bright cherry-red color","When the button shows a dull-red glow","After complete cooling to room temperature"],correctAnswerIndex:2,explanation:"For Type III/IV gold alloys , quenching is done when the button shows a dull-red glow . This ensures proper annealing and facilitates easy divesting."},{id:"cast_mcq_set2_4",question:"Purpose of quenching gold castings Why is quenching performed when the button shows a dull-red glow in noble metal castings?",options:["To increase hardness","To reduce alloy shrinkage","To anneal the alloy and break down the hot investment","To prevent oxidation during melting"],correctAnswerIndex:2,explanation:"Quenching provides thermal shock , which breaks down the hot investment for easy removal and anneals the gold alloy , making it easier to burnish and polish."},{id:"cast_mcq_set2_5",question:"Definition of the button In dental casting, the button refers to:",options:["The crucible former","The thickest part of the crown","The rounded mass of excess metal at the end of the sprue","The reservoir inside the wax pattern"],correctAnswerIndex:2,explanation:"The button is the rounded excess metal mass that forms at the end of the sprue near the crucible former after casting."},{id:"cast_mcq_set2_6",question:"Flux in noble alloy casting What is the primary purpose of using flux during casting of noble metal alloys?",options:["Increase mold expansion","Prevent gypsum decomposition","Increase fluidity and reduce oxidation","Etch the metal surface"],correctAnswerIndex:2,explanation:"Flux improves fluidity of molten metal and reduces oxidation and porosity during melting and casting."},{id:"cast_mcq_set2_7",question:"Common flux for noble alloys Which combination is classically used as a flux for noble metal alloy casting?",options:["Borax + charcoal","Borax + boric acid","Boric acid + silica","Sodium fluoride + borax"],correctAnswerIndex:1,explanation:"Borax + boric acid is the classic flux for noble alloys, forming a protective glassy layer that limits oxidation."},{id:"cast_mcq_set2_8",question:"Correct torch flame zone During torch melting of a noble metal alloy, which flame zone should be directed onto the alloy?",options:["Mixing zone","Oxidizing (combustion) zone","Reducing zone","Outer oxidizing zone"],correctAnswerIndex:2,explanation:"The reducing zone is the hottest usable zone and minimizes oxidation. Contact with oxidizing zones produces dross and porosity."},{id:"cast_mcq_set2_9",question:"Effect of using the oxidizing flame zone Using the oxidizing zone of the flame during alloy melting most likely causes:",options:["Faster melting with better flow","Increased mold expansion","Dull, cloudy oxide formation (dross)","Reduced porosity"],correctAnswerIndex:2,explanation:"The oxidizing zone introduces oxygen, leading to oxide formation (dross) and increased porosity."},{id:"cast_mcq_set2_10",question:"Function of ring liner What is the primary function of a ring liner during investing?",options:["Strengthen the casting ring","Reduce setting time of investment","Provide cushioning to allow investment expansion","Prevent wax distortion during burnout"],correctAnswerIndex:2,explanation:"The ring liner cushions the investment , reducing restriction from the metal ring and allowing uniform setting and hygroscopic expansion ."}],RT=[{id:"cast_mcq_1",question:"The ideal site for sprue attachment on a wax pattern is:",options:["Thin marginal area","Nonfunctional cusp tip","Bulkiest part of the pattern","Any flat surface"],correctAnswerIndex:2,explanation:"Sprue must attach to the thickest section so metal flows thick  thin and the sprue does not freeze before the casting."},{id:"cast_mcq_2",question:"Attaching a sprue at a right angle (90) to a broad flat surface most commonly causes:",options:["Microporosity","Back-pressure porosity","Turbulence and localized porosity","Distortion of wax pattern"],correctAnswerIndex:2,explanation:"90 attachment causes turbulent metal flow , leading to severe porosity at the attachment site ."},{id:"cast_mcq_3",question:"Sprue attachment at approximately 45 is preferred because it:",options:["Increases casting pressure","Reduces metal oxidation","Produces smooth, laminar metal flow","Shortens burnout time"],correctAnswerIndex:2,explanation:"A 45 angle reduces turbulence , ensuring smooth metal entry and fewer porosities."},{id:"cast_mcq_4",question:"A sprue with a diameter smaller than the thickest part of the wax pattern is most likely to cause:",options:["Gas inclusion porosity","Subsurface porosity","Localized shrinkage (suck-back) porosity","Surface roughness"],correctAnswerIndex:2,explanation:"Thin sprue freezes first , preventing feeding  localized shrinkage / suck-back porosity near attachment."},{id:"cast_mcq_5",question:"The main purpose of flaring the sprue attachment is to:",options:["Reduce investment expansion","Increase turbulence","Act as a reservoir and reduce hot-spot formation","Prevent wax distortion"],correctAnswerIndex:2,explanation:"Flared attachment acts like a mini-reservoir , reduces hot spots, and minimizes suck-back porosity."},{id:"cast_mcq_6",question:"The sprue should be directed away from thin areas of the wax pattern because molten metal may:",options:["Cool too fast","Abrade or fracture the investment","Increase hygroscopic expansion","Cause distortion of the die"],correctAnswerIndex:1,explanation:"Direct metal impact on thin areas can fracture or abrade investment , causing casting defects."},{id:"cast_mcq_7",question:"In gypsum-bonded investments, the wax pattern should be positioned:",options:["Anywhere inside the ring","At the center of the ring","Within 6 mm of the open end of the ring","At the bottom of the ring"],correctAnswerIndex:2,explanation:"6 mm rule ensures adequate gas venting , reducing back-pressure porosity."},{id:"cast_mcq_8",question:"The reservoir in a sprue system should solidify:",options:["Before the pattern","Simultaneously with the pattern","After the pattern","Independently of the pattern"],correctAnswerIndex:2,explanation:"Reservoir must remain molten longer than the pattern to feed metal during solidification.  CASTING DEFECTS: Solidification Defects due to improper feeding."},{id:"cast_mcq_9",question:"Localized shrinkage porosity is primarily caused by:",options:["Gas trapped in the mold","Early freezing of the sprue","Oxidizing flame","High W/P ratio"],correctAnswerIndex:1,explanation:"If the sprue freezes early, molten metal cannot feed shrinkage  localized voids ."},{id:"cast_mcq_10",question:"Suck-back porosity most commonly occurs:",options:["At the margins","Near the sprue-casting junction","At the button surface","On the external surface only"],correctAnswerIndex:1,explanation:"Hot spots near sprue attachment freeze last  suck-back porosity ."},{id:"cast_mcq_11",question:"Suck-back porosity is best prevented by:",options:["Increasing mold temperature","Increasing casting temperature","Flaring sprue attachment and rounding line angles","Using oxidizing flame"],correctAnswerIndex:2,explanation:"Flared attachment + rounded line angles eliminate hot spots and reduce shrinkage voids."},{id:"cast_mcq_12",question:"Microporosity is usually associated with:",options:["High casting temperature","Rapid solidification","Incomplete wax elimination","Residual carbon"],correctAnswerIndex:1,explanation:"Rapid freezing prevents voids from coalescing  fine microporosities . B. GAS-RELATED DEFECTS"},{id:"cast_mcq_13",question:"Pinhole porosity is most commonly caused by:",options:["Inadequate sprue diameter","Trapped air from poor venting","Dissolved gases expelled during solidification","Investment cracking"],correctAnswerIndex:2,explanation:"Dissolved gases (O , H ) are expelled as metal solidifies  small spherical pinholes ."},{id:"cast_mcq_14",question:"Back-pressure porosity occurs due to:",options:["Excessive casting pressure","Inadequate mold venting","Large sprue diameter","Overheating of alloy"],correctAnswerIndex:1,explanation:"Trapped air cannot escape through investment pores  metal entry is resisted ."},{id:"cast_mcq_15",question:"Which situation increases back-pressure porosity?",options:["Pattern placed close to ring end","High mold permeability","Residual carbon clogging investment pores","Adequate casting pressure"],correctAnswerIndex:2,explanation:"Carbon residue blocks pores , preventing gas escape. C. INCOMPLETE CASTING"},{id:"cast_mcq_16",question:"Rounded, dull margins on a casting indicate:",options:["Oxidation of alloy","Low metal temperature or insufficient pressure","Sulfur contamination","Excessive mold expansion"],correctAnswerIndex:1,explanation:"Metal solidifies before filling margins  rounded, dull edges ."},{id:"cast_mcq_17",question:"Rounded but shiny margins suggest incomplete casting due to:",options:["Low casting pressure","Residual wax producing reducing atmosphere","Low mold temperature","Thin sprue diameter"],correctAnswerIndex:1,explanation:"Residual wax creates reducing CO atmosphere , producing shiny but incomplete margins."},{id:"cast_mcq_18",question:"Which factor MOST improves prevention of incomplete casting?",options:["Higher W/P ratio","Adequate venting and sustained casting pressure","Lower mold temperature","Smaller sprue diameter"],correctAnswerIndex:1,explanation:"Proper venting + maintained pressure ensures complete mold filling.  EXAM TAKEAWAY (One-Line Memory Hooks)  Thin sprue  shrinkage porosity  90 sprue  turbulence  porosity  45 sprue  smooth flow  Pattern ~ 6 mm from ring end  Reservoir solidifies LAST  Rounded dull margins = low pressure/temp  Rounded shiny margins = residual wax  Back-pressure = trapped air"}],v3=[...IT,...NT,...RT],w3=`
# Dental Cements & Tooth Structures (Comprehensive)

## 1) Liners vs Bases (definitions + what they actually do)

![Liner vs Base](assets/cements/cements_img_1.png)


**Liner (thin)**

- Definition: a thin layer mainly to act as a barrier (chemical/electrical + some thermal) between dentin and the restoration; protects dentin from diffusing residual reactants and from oral fluids penetrating margins.
- **When you use it:** especially with metallic restorations that are not bonded and not insulating (amalgam, cast gold, indirect restorations).

**Base (thicker)**

- Definition: a thicker layer used for:
  - thermal protection
  - mechanical support (distributes stresses to underlying dentin)
  - support during condensation of amalgam when remaining dentin is thin

**Quick memory rule**

- Liner = barrier (thin)
- Base = barrier + support (thick)

<u><strong>Clinical Rules (RDT):</strong></u>
- RDT 2 mm: restoration only
- 12 mm: seal/bond only
- 0.51 mm: add BASE
- <0.5 mm: spot LINER + cover with BASE
- exposure: cap (MTA/CaOH) + base  restore.

## 2) Requirements (ideal properties) for liners/bases

A pulp-protective layer should:

1. Form an impervious layer without stealing bulk from restoration
2. Be biocompatible with dentin/pulp
3. Be chemically compatible with tooth + restorative material
4. Not discolor tooth/restoration
5. Harden fast enough for restoration placement
6. Withstand condensation forces without moving/deforming
7. Reduce dentin permeability
8. Be easy to manipulate

<u>Note:</u> thermal insulation often needs ~0.75 mm minimal thickness for true thermal protection (thats base territory).

## 3) Classification of dental cements (the slide version)



**By type (what theyre based on)**

- Water-based: GIC / RMGIC, zinc polyacrylate (polycarboxylate), zinc phosphate
- Resin-based: composite & adhesive resin, compomers
- Oil-based: ZOE and non-eugenol ZnO

**By setting reaction**

- Acidbase: zinc phosphate, zinc polycarboxylate, ZOE, GIC
- Polymerization + acidbase: RMGIC, compomer
- Polymerization: resin cement

## 4) The materials (what its made of + how it sets + where you use it)

### A) Varnish (not really a cement, but tested with liners/bases)

**Composition:** natural gum/rosin/synthetic resin in organic solvent  leaves a thin film.
**Main use:** reduce leakage around cavity walls/margins; reduce penetration of amalgam corrosion products into dentin.

<u>**Do NOT use under:**</u>
- Composite (interferes with setting/bonding)
- GIC (prevents fluoride release)

### B) Calcium Hydroxide (CaOH2) liner (pulp protection / pulp capping concept)

**Key chemistry idea**
- Main feature: very high alkalinity (pH ~1112.5).

**Forms + compositions**

1. **Non-setting aqueous paste (CaOH2 + water)**
   - Doesnt set, weak  can be displaced
   - Not used directly under resin restorations in this wet form because its hydrophilic and can interfere with bonding

2. **Setting CaOH2 cements (classic Dycal-type: two pastes)**
   - Based on alkyl salicylates (liquid), supplied as two pastes
     - Base paste
     - Catalyst paste

**Setting reaction (what actually happens)**
- An acidbase / chelation reaction between weakly acidic salicylate and alkaline Ca(OH)2  calcium chelate salt formation (carboxylate bands form).

**The Pulp Protector**

**Status:** The historic "Gold Standard" for vital pulp therapy
**Commercial Name:** Dycal

1. **Mechanism of Action (The "Bridge Builder")**
   - **High Alkalinity (pH ~12.5):** The high pH causes a localized state of chemical irritation to the pulp tissue.
   - **Effect:** This irritation stimulates undifferentiated mesenchymal cells in the pulp to differentiate into odontoblasts.
   - **Result:** These new cells form a Reparative Dentin Bridge (a physical barrier of dentin) that walls off the pulp from the cavity.
   - **Antimicrobial:** The high alkalinity is bactericidal, killing bacteria remaining in deep carious lesions.

**Clinical uses**

Uses: Calcium Hydroxide
- **Pulp Capping (Direct/Indirect):** Stimulates reparative dentin bridges to protect vital pulp.
- **Intracanal Medicament:** Placed between root canal visits to kill bacteria (bactericidal) and dry up persistent weeping/pus.
- **Apexification:** Induces a calcified barrier at the root tip in non-vital (dead) immature teeth.
- **Apexogenesis:** Maintains pulp vitality to allow natural root completion in vital (alive) immature teeth.
- **Anti-Resorption:** Neutralizes acidic inflammation to stop the body from resorbing (eating) the tooth root after trauma.

### C) Zinc Oxide-Eugenol (ZOE)

 **Key Feature:** Obtundent (sedative) effect on the pulp.
 **Chemistry:** Zinc Oxide-Eugenol (ZOE) Chemistry  Detailed Expansion

**Classification:** Chelation Reaction (Acid-Base).

**1. Composition**
- **Powder:**
  - Zinc Oxide (ZnO): (~69%) The principal ingredient.
  - White Rosin: (~29%) Critical additive. It reduces brittleness and makes the mix smoother.
  - Accelerators: Zinc Stearate or Zinc Acetate (~1%) are added to speed up the setting time.
- **Liquid:**
  - Eugenol: (Oil of Cloves). Chemically, it is a weak acid (phenol).
  - Plasticizers: Olive oil or cottonseed oil are added to control viscosity (masking the strong taste and smoothing the mix).
  - Water: Trace amounts are essential to initiate the reaction.

**2. The Setting Reaction (Chelation)**
The setting process is a chemical "Chelation" reaction that happens in two stages:
- **Step 1: Hydrolysis (The Trigger)** The reaction requires water to start. The Zinc Oxide reacts with water (from the liquid or atmosphere) to form Zinc Hydroxide. ZnO + H2O  Zn(OH)2
- **Step 2: Chelation (The Set)** The Zinc Hydroxide reacts with the Eugenol. Two molecules of Eugenol grab (chelate) one Zinc ion to form Zinc Eugenolate. Zn(OH)2 + 2HE  ZnE2 + 2H2O (Where HE = Eugenol and ZnE2 = Zinc Eugenolate)

**3. Structure of the Set Cement**

The final hardened mass is a "Cored Structure":
- Core: Unreacted Zinc Oxide particles (providing strength).
- Matrix: Amorphous Zinc Eugenolate (holding the particles together).

![ZOE Structure](assets/cements/cements_img_2.png)

**4. Critical Factors Affecting Setting**
- **Water/Humidity:** The reaction is Autocatalytic (it produces water, which speeds it up). Therefore, high humidity accelerates the setting time.
- **Temperature:** Higher heat accelerates the reaction (it sets faster in the mouth than on the mixing pad).

 **Key Properties:**
- pH: Alkaline (~7-8).
- Strength: Lowest compressive strength and hardness of all cements.
- Solubility: High solubility in oral fluids (washes out).

 <u><strong>Biological Paradox (Exam Gold):</strong></u>

| Target Tissue | Effect | Description |
|---|---|---|
| **Pulp** | Sedative (Obtundent) | Soothes the nerve; stops pain. |
| **Mucosa (Gums)** | Irritant | Causes chemical burns; avoid contact. |
| **Bacteria** | Antibacterial | Weak antiseptic; inhibits bacterial growth. |

 **Contraindication:** Eugenol inhibits the polymerization of resin composites (do not use under Composite).

 **Clinical Use:** Because of its unique "Sedative" vs. "Irritating" duality, ZOE has very specific roles.

1. **Temporary Restoration (IRM)**
   - Material: Intermediate Restorative Material (ZOE reinforced with polymer).
   - Use: Placed as a temporary filling (lasts < 1 year) when a patient cannot get a permanent filling immediately.
   - Why: Sedates the pulp until the permanent treatment is done.

2. **Temporary Cementation (Luting)**
   - Material: Temp-Bond.
   - Use: Cementing provisional (temporary) crowns and bridges.
   - Why: Weak enough to be removed easily when the permanent crown is ready.

3. **Sedative Base (Deep Cavities)**
   - Use: Placed under Amalgam restorations in deep cavities.
   - Why: Acts as a thermal insulator and soothes a hypersensitive pulp.
   - <u>**CRITICAL WARNING:**</u> NEVER place under Composite Resin (Eugenol inhibits setting).

4. **Impression Material (Prosthodontics)**
   - Material: Zinc Oxide Eugenol Impression Paste.
   - Use: Final impressions for Edentulous Arches (Complete Dentures) specifically for the "Wash Impression" technique.
   - Why: Records fine detail in soft tissues without displacing them (mucostatic).

5. **Endodontics (Root Canal Sealer)**
   - Use: Used to coat gutta-percha points during root canal obturation.
   - Why: Antimicrobial and provides a seal. (Note: It is resorbable if excess is pushed out of the apex).

6. **Periodontal Dressing (Perio-Pack)**
   - Use: Placed over gums after surgery (like a "cast" for gums).
   - Why: Protect the wound.
   - Note: Non-Eugenol versions are now preferred here to avoid the "Mucosal Irritation" (burning) you noted earlier.

 **Modifications for Strength (Reinforced ZOE)**
Standard ZOE is too weak for permanent use. To fix this, the chemistry is modified to create EBA-ZOE Cements.
- **The Additive:** Ortho-Ethoxybenzoic Acid (EBA).
- **Composition Change:**
  - Liquid: The liquid is modified to contain ~62.5% Ortho-Ethoxybenzoic Acid (EBA) and only ~37.5% Eugenol.
  - Powder: Alumina (Aluminum Oxide) or Quartz is often added to the powder for reinforcement.
- **The Result (Exam Gold):**
  - Strength: Drastically increases compressive strength (making it comparable to Zinc Phosphate).
  - Solubility: Reduces solubility so it does not wash out easily.
- **Clinical Use:** This modification allows ZOE to be used for the permanent cementation of crowns and bridges (whereas standard ZOE is only for temporary use).

Limits: low strength/modulus, thin layer = little thermal insulation; contraindicated under composite (interferes with resin setting).

### D) Glass Ionomer Cement (GIC) (separate topic in detail)

**Composition**
- Powder: fluoroaluminosilicate glass
- Liquid: aqueous polycarboxylic acid solution (Polyalkenoic Acid)

**Setting reaction (the real mechanism)**
- Slow acidbase reaction: acid attacks glass  releases ions  forms an amorphous network/matrix around unreacted particles; plus a chelating/ion-exchange effect gives bonding to enamel/dentin.
- Glass-ionomers are acid-base cements: weak polymeric acid + basic ion-leachable glass + water.

**Why GIC is loved (and why its annoying)**
- Fluoride release helps inhibit recurrent caries
- Bonds to tooth + works on slightly moist dentin
- Moisture sensitive while setting

**Types / uses**
- Type I: luting (cementation of indirect restorations / ortho)
- Type II: restorations near gingiva (Class V)
- Type III: liner / bonding agent

<u>Clinical pearl:</u> If remaining dentin thickness is > 1 mm, some references state no extra pulpal protection is required under GIC.

### E) Resin-Modified Glass Ionomer (RMGIC)

**Why it exists:** to overcome GIC water sensitivity and improve mechanical properties.

**Composition (slide version)**
- Powder: fluoroaluminosilicate
- Liquid: polycarboxylic acid modified with pendant methacrylate group + HEMA

**Setting reaction**
- Two reactions happening:
  1. classic GIC acidbase
  2. resin polymerization (light/chemical)

### F) Zinc Phosphate Cement (ZP)

**Status:** The traditional "Gold Standard" against which new cements are compared. It functions as both a Type I (Luting) and Type II (Base) cement.

**1. Composition**
- **Powder:**
  - Zinc Oxide (ZnO): (~90%) The principal ingredient.
  - Magnesium Oxide (MgO): (~10%) Added to reduce the sintering temperature and maintain the white color.
  - Sintering: The powder is heated (sintered) at high temperatures during manufacturing to reduce reactivity.
- **Liquid:**
  - Phosphoric Acid: (~45-64%) The main reactant.
  - Water: (~30-35%) Critical component. Essential for ionizing the acid. Evaporation or humidity changes can drastically alter setting time.
  - Buffers: Aluminum and Zinc salts are dissolved in the acid to slow the reaction for better working time.

**2. Setting Reaction**
- **Type:** Acid-Base Reaction (Crystallization).
- **Reaction:** The phosphoric acid attacks the surface of the Zinc Oxide particles: ZnO + 2H2PO  Zn(H2PO)2 + H2O
- **Exothermic:** The reaction releases a significant amount of heat.
- **Final Structure:** A "Cored Structure" containing unreacted ZnO particles (core) bound by an amorphous Zinc Aluminophosphate gel (matrix). (similar structure as seen in amalgam composite and gic)

![Zinc Phosphate Structure](assets/cements/cements_img_3.png)

**3. Clinical Issues & Pulp Irritation (Exam Focus)**

This is the most critical biological drawback of Zinc Phosphate.

- **Acidity (The "Sting"):**
  - Initial pH: Extremely acidic (~2.0 to 3.5) upon mixing.
  - Neutralization: It rises slowly, taking 24 to 48 hours to reach a neutral pH (~6.9).
  - Effect: This prolonged acidity causes chemical irritation to the pulp, often leading to post-operative sensitivity.
- **Osmotic Pressure:** Fluid movement in dentinal tubules caused by the acid can trigger pain (Hydrodynamic Theory).
- **Dentin Thickness (The Safety Buffer):**
  - Thick Dentin (>1.5mm): The natural buffering capacity of the dentin usually neutralizes the acid before it reaches the pulp.
  - Deep Cavities: The acid will penetrate to the pulp.
  - **Solution:** You MUST use a varnish (e.g., Copalite) or a protective liner (Calcium Hydroxide) under Zinc Phosphate in deep cavities.

**4. Manipulation (The "Frozen Slab" Technique)**

To manage the Exothermic Reaction and Acidity:
- **Cool Glass Slab:** Mixing is performed on a cool glass slab to absorb the heat released by the reaction.
- **Incremental Mixing:** Small increments of powder are added to the liquid one by one to slow the reaction and dissipate heat.
- **Wide Spread:** The mix is spread over a large surface area of the slab to maximize cooling.

### G) Zinc Polycarboxylate (Zinc Polyacrylate)

**Composition (from your dental cements slides)**
- Powder: similar to zinc phosphate (ZnO main; stannous oxide replacing MgO; fillers; fluoride additives)
- Liquid: aqueous polyacrylic acid (copolymers; itaconic acid mentioned as stabilizer)

**Setting reaction**
- Acidbase  zinc polycarboxylate salt matrix.

**Key clinical point (big difference vs zinc phosphate):**
- It has adhesion to tooth + less irritation than ZP (slide emphasizes advantages vs ZP).

### H) Resin cements (resin-based luting) (already done in detail)

**What theyre made of (the must-know composition)**

Resin-based dental materials (including luting resins) generally have:
- Organic resin matrix (oligomers/monomers) +
- Filler particles +
- Silane coupling agent linking fillers to resin

**Common monomers you MUST know (because they show up everywhere):**
- Bis-GMA, plus non-BPA methacrylates like UDMA, TEGDMA, HEMA

**Setting reaction**
- Polymerization (light / chemical / dual).

Also: conversion is never 100%  some residual monomer can remain.

### I) Compomers (polyacid-modified composites)

- **Distinct feature:** they contain hydrophilic components, so after curing they absorb water, which triggers an acidbase reaction, giving GIC-like benefits such as fluoride release.
- Thats why slides often list them under polymerization + acidbase.

**For easier comparison sake:**
(with the common name)
- RMGIC: GIC modified by resin (hybrid ionomer).
- Compomer: composite modified by ionomer (polyacid-modified composite).

| Feature | RMGIC (GIC is Parent) | Compomer (Composite is Parent) |
|---|---|---|
| **Main Reaction** | Acid-Base + Light Cure | Light Cure Only (Initially) |
| **Water Content** | Contains Water | Anhydrous (Needs saliva to activate acid-base) |
| **Bonding** | Chemical Bond (Self-adhesive) | Micromechanical (Needs Bonding Agent) |
| **Fluoride** | High | Low |
| **Esthetics** | Good | Better (Closer to Composite) |
| **Strength** | Moderate | High (Closer to Composite) |

### J) Mineral Trioxide Aggregate (MTA)

The bioactive "miracle material" for root repair and pulp therapy.
**Composition:** 75% Portland Cement (Tricalcium Silicate) + 20% Bismuth Oxide (Radiopacifier) + Gypsum.

**1. Mechanism of Action**
- **Hydration Reaction:** Sets with water to form a Calcium Silicate Hydrate gel and Calcium Hydroxide.
- **Bioactivity:** High pH (~12.5) creates an antibacterial environment and stimulates the formation of Hydroxyapatite, creating a biological seal.

**2. Key Properties**
- **Hydrophilic:** Unique ability to set in the presence of moisture and blood (unlike resin or ZOE).
- **Sealing Ability:** Superior marginal seal; expands slightly upon setting.
- **Biocompatibility:** Non-cytotoxic; induces cementum and bone regrowth.
- **Drawback:** Very long setting time (34 hours) and difficult "sandy" handling.

**3. Clinical Indications**
- **Perforation Repair:** Sealing accidental root perforations.
- **Apexification:** Creating a barrier at the tip of an open root.
- **Vital Pulp Therapy:** Pulp capping and pulpotomies (especially in kids).
- **Apexogenesis:** To maintain the vitality of an injured pulp in an immature tooth so the root can finish growing (lengthening and thickening).
- **Retrograde Filling:** Root-end filling during apicoectomy surgery.

**4. Gray vs. White MTA**
- **Gray:** Original formula; contains Iron; causes tooth discoloration.
- **White:** Iron removed to prevent staining; preferred for esthetic zones.

## 5) Fast what goes under what rules (exam-friendly)

**Under composite / adhesive restorations**
- Avoid ZOE and varnish (both can interfere with resin bonding/setting).
- Safer options: RMGIC liner/base or properly sealed/compatible systems (depends on technique).

**Under amalgam**
- Varnish is classic for sealing margins; bases used if thermal/mechanical need.
- Base if dentin thin / need support during condensation.

| Clinical Scenario | Best Material | Why? |
|---|---|---|
| Veneers / Esthetics | Resin Cement | Invisible margins, strongest bond. |
| High Caries Risk | GIC / RM-GIC | Releases Fluoride. |
| Deep Cavity / Pain | CaOH (Spot) + GIC Base | Heals pulp + Seals tubules. |
| Temporary Crown | ZOE | Soothes pulp + Easy to remove later. |
| Metal Crown (Standard) | Zinc Phosphate or RM-GIC | Cost-effective + Proven retention. |
`,x3=["Liners = Thin barrier; Bases = Thick support + thermal protection.","RDT Rules: >2mm restore only, 0.5-1mm add Base, <0.5mm Liner + Base.","Calcium Hydroxide: High pH (~12.5), stimulates reparative dentin.","ZOE: Sedative (obtundent), don't use under composite (inhibits set).","Zinc Phosphate: Exothermic, acidic (irritant), mix on cool slab.","GIC: Fluoride release, chemical bond, moisture sensitive.","MTA: Biocompatible, hydrophilic, used for perforations/apexification."],MT=[{id:"cem_mcq_1",question:"A liner is best defined as:",options:["A thick layer that mainly provides mechanical support","A thin barrier layer that protects dentin/pulp from chemical/electrical irritation and microleakage","A luting agent for indirect restorations","A material used only to insulate against heat when 0.75 mm thick"],correctAnswerIndex:1,explanation:"Liners are thin and mainly act as a barrier (chemical/electrical, some thermal), reducing diffusion and leakage."},{id:"cem_mcq_2",question:"A base is best defined as:",options:["A thin film that reduces microleakage only","A thick barrier + stress-support layer placed to replace dentin and support restorations","A resin bonding agent","A varnish film placed under composites"],correctAnswerIndex:1,explanation:"Bases are thicker , give thermal protection + mechanical support , and help when dentin is thin."},{id:"cem_mcq_3",question:"Thermal insulation is more realistically achieved when the protective layer thickness is approximately:",options:["0.1 mm","0.2 mm","0.75 mm","2.5 mm"],correctAnswerIndex:2,explanation:"True thermal protection typically needs ~0.75 mm , which is base territory."},{id:"cem_mcq_4",question:"According to the RDT rule, when RDT is 2 mm, the best approach is:",options:["Liner + base + restoration","Base only","Restoration only (or routine bonding/sealing as indicated)","Direct pulp cap"],correctAnswerIndex:2,explanation:"With 2 mm dentin , the dentin itself buffers well; no extra pulpal protection is typically needed."},{id:"cem_mcq_5",question:"According to the RDT rule, when RDT is 12 mm, you should usually:",options:["Add a thick base","Seal/bond only","Spot liner + cover with base","Direct pulp cap"],correctAnswerIndex:1,explanation:"12 mm: seal/bond only (extra thickness may steal restorative bulk)."},{id:"cem_mcq_6",question:"According to the RDT rule, when RDT is 0.51 mm, you should:",options:["Add a base","Restoration only","Direct pulp cap immediately","Varnish only"],correctAnswerIndex:0,explanation:"0.51 mm: add BASE for protection/support."},{id:"cem_mcq_7",question:"According to the RDT rule, when RDT is <0.5 mm (very deep dentin but not exposed), you should:",options:["Restoration only","Spot liner + cover with base","Direct pulp cap only","Varnish under composite"],correctAnswerIndex:1,explanation:"<0.5 mm: spot liner (near deepest area) then cover with base ."},{id:"cem_mcq_8",question:"In a true pulp exposure, the correct immediate approach is:",options:["Varnish + amalgam","ZOE directly on exposure","Pulp cap (MTA/Ca(OH)  ) + base, then restore","Zinc phosphate directly over pulp"],correctAnswerIndex:2,explanation:"Exposure needs pulp capping material first, then a protective base."},{id:"cem_mcq_9",question:"An ideal pulp-protective liner/base should NOT:",options:["Be biocompatible","Reduce dentin permeability","Discolor tooth/restoration","Withstand condensation forces"],correctAnswerIndex:2,explanation:"Discoloration is an undesirable property."},{id:"cem_mcq_10",question:"Forms an impervious layer without stealing bulk from the restoration is most relevant to:",options:["Minimizing microleakage while keeping restorative thickness adequate","Increasing polymerization shrinkage","Enhancing corrosion","Increasing thermal conductivity"],correctAnswerIndex:0,explanation:"You want a seal/barrier without reducing restorative bulk ."},{id:"cem_mcq_11",question:"Withstand condensation forces without moving/deforming is most critical when placing:",options:["Composite veneer","Amalgam restoration","Glass ionomer fissure sealant","Resin cemented veneer"],correctAnswerIndex:1,explanation:"Amalgam condensation can displace weak bases/liners."},{id:"cem_mcq_12",question:"A patient reports severe throbbing pain in a molar. You diagnose reversible pulpitis but cannot complete the root canal or final restoration today. You need a temporary sedative restoration. Which material is most appropriate?",options:["Resin-Modified Glass Ionomer (RMGIC)(IRM)","Composite Resin(IRM)","Zinc Phosphate (IRM)","Zinc Oxide Eugenol (IRM)"],correctAnswerIndex:3,explanation:"Zinc Oxide Eugenol (IRM) Why (exam points):  IRM = reinforced ZOE, used as a temporary restoration (intermediate/temporary filling).  Eugenol has an obtundent (sedative) effect on the pulp  reduces pain and sensitivity.  Provides a decent short-term seal and is easy to place/remove for the next visit"},{id:"cem_mcq_13",question:"Which is an oil-based cement?",options:["Zinc phosphate","Zinc polycarboxylate","ZOE","Resin cement"],correctAnswerIndex:2,explanation:"ZOE is the classic oil-based system (eugenol)."},{id:"cem_mcq_14",question:"Which cement sets primarily by an acidbase reaction?",options:["Resin cement","Zinc phosphate","Composite resin","Adhesive resin"],correctAnswerIndex:1,explanation:"Zinc phosphate is a classic acidbase cement."},{id:"cem_mcq_15",question:"Which material class is correctly matched to polymerization + acidbase?",options:["Zinc phosphate","RMGIC","Resin cement","Varnish"],correctAnswerIndex:1,explanation:"RMGIC has acidbase + resin polymerization ."},{id:"cem_mcq_16",question:"Compomers are best categorized as:",options:["Pure acidbase cements","Pure polymerization materials with no acidbase component ever","Polymerization first, then water-triggered acidbase later","Oil-based chelation only"],correctAnswerIndex:2,explanation:"Compomers cure by polymerization , then absorb water  limited acidbase."},{id:"cem_mcq_17",question:"Cavity varnish is best described as:",options:["A thick insulating base","A resin/rosin film in solvent that leaves a thin coating after evaporation","A self-adhesive fluoride-releasing cement","A resin cement for veneers"],correctAnswerIndex:1,explanation:"Varnish = thin film left after solvent evaporates."},{id:"cem_mcq_18",question:"Varnish is CONTRAINDICATED under:",options:["Amalgam","Cast gold","Composite resin restoration","Non-bonded metallic restorations"],correctAnswerIndex:2,explanation:"Varnish can interfere with bonding/setting of resin systems."},{id:"cem_mcq_19",question:"Varnish is generally avoided under GIC mainly because it:",options:["Increases fluoride release","Blocks ion exchange and interferes with GICs bonding/fluoride benefits","Strengthens GIC by crosslinking","Increases working time dramatically"],correctAnswerIndex:1,explanation:"Varnish can isolate the tooth surface, reducing GICs key interactions."},{id:"cem_mcq_20",question:"The most important biological feature of calcium hydroxide is:",options:["Its alkaline environment promotes antimicrobial action and stimulates hard-tissue barrier formation","Its low initial acidity creates a mild etching effect and encourages dentin deposition","Its chemical adhesion to dentin provides a biological seal that triggers bridge formation","Its high mechanical strength protects the pulp by resisting condensation forces"],correctAnswerIndex:0,explanation:"The key biological advantage is the very high pH (strong alkalinity), which is bactericidal and induces reparative dentin (hard-tissue barrier) formation. ."},{id:"cem_mcq_21",question:"The classic setting Ca(OH) 2 liner (Dycal-type) sets mainly by:",options:["Free radical polymerization","Chelation between calcium hydroxide and salicylate ester forming calcium chelate salts","Acid attack of glass releasing fluoride","Crystallization of zinc phosphate"],correctAnswerIndex:1,explanation:"Dycal-type systems set via chelation (salicylate chemistry)."},{id:"cem_mcq_22",question:"Which is TRUE about non-setting aqueous Ca(OH) 2 paste?",options:["High strength and supports amalgam condensation","Does not set and is weak  can be displaced","Bonds strongly to dentin chemically","Completely insoluble in oral fluids"],correctAnswerIndex:1,explanation:"Non-setting paste is weak and easily displaced."},{id:"cem_mcq_23",question:"Best clinical use of Ca(OH) 2 in a very deep cavity without exposure is:",options:["Thick base covering entire floor","Spot liner only at deepest area, then cover with a stronger base","Avoid any liner/base","Use Zn phosphate directly on dentin"],correctAnswerIndex:1,explanation:"Ca(OH) 2 is best as a spot liner , then cover with a stronger base."}],PT=[{id:"cem_mcq_24",question:"A key endodontic use of Ca(OH) 2 is:",options:["Inhibiting resin polymerization","Intracanal medicament between visits","Permanent luting of crowns","Increasing early strength of zinc phosphate"],correctAnswerIndex:1,explanation:"Ca(OH) 2 is a classic intracanal medicament ."},{id:"cem_mcq_25",question:"ZOE sets primarily by:",options:["Free radical polymerization","Chelation forming zinc eugenolate","Glass dissolution and polysalt matrix formation","Phosphate crystallization"],correctAnswerIndex:1,explanation:"Water helps (also accelerate )form Zn(OH) 2 , then chelation  zinc eugenolate ."},{id:"cem_mcq_26",question:"The major clinical signature of ZOE is:",options:["Strong adhesion to enamel","Obtundent/sedative effect on pulp","Highest compressive strength of all cements","Excellent long-term solubility resistance"],correctAnswerIndex:1,explanation:"Eugenol has a sedative effect on pulp."},{id:"cem_mcq_27",question:"ZOE is CONTRAINDICATED under resin composite primarily because:",options:["It increases polymerization shrinkage","Eugenol inhibits resin polymerization","It bonds too strongly to dentin","It releases excessive fluoride"],correctAnswerIndex:1,explanation:"Eugenol can inhibit resin setting ."},{id:"cem_mcq_28",question:"Which clinical use is most appropriate for standard ZOE?",options:["Permanent cementation of zirconia crowns","Temporary cementation of provisional crowns","Bonding ceramic veneers","Luting indirect composite inlays permanently"],correctAnswerIndex:1,explanation:"Standard ZOE is great for temporary cementation (easy removal, soothing)."},{id:"cem_mcq_29",question:"Reinforced ZOE (EBA-modified) compared with standard ZOE generally has:",options:["Lower strength and higher solubility","Higher strength and lower solubility","No chelation reaction","No clinical use in luting"],correctAnswerIndex:1,explanation:"EBA reinforcement improves strength and decreases washout."},{id:"cem_mcq_30",question:"Which statement is TRUE (exam biological paradox) about eugenol?",options:["Sedative to mucosa, irritant to pulp","Irritant to mucosa, sedative to pulp","Sedative to both","Irritant to both only"],correctAnswerIndex:1,explanation:"Eugenol can soothe pulp but irritate mucosa ."},{id:"cem_mcq_31",question:"Classic GIC powder is mainly:",options:["Zinc oxide + magnesium oxide","Fluoroaluminosilicate glass","Calcium hydroxide crystals","Quartz + rosin"],correctAnswerIndex:1,explanation:"GIC powder = fluoroaluminosilicate glass ."},{id:"cem_mcq_32",question:"Classic GIC liquid is mainly:",options:["Phosphoric acid","Aqueous polyalkenoic acid","Eugenol","UDMA + TEGDMA"],correctAnswerIndex:1,explanation:"Liquid = aqueous polycarboxylic acid solution."},{id:"cem_mcq_33",question:"The setting reaction of GIC is best described as:",options:["Polymerization only","Acidbase","Chelation only without ion release","Oil-based saponification"],correctAnswerIndex:1,explanation:"Classic acidbase with an ion-release polysalt matrix."},{id:"cem_mcq_34",question:"A major advantage of GIC is:",options:["No moisture sensitivity","Fluoride release + chemical bonding to enamel/dentin","Highest fracture toughness among cements","Complete polymerization with zero residual monomer"],correctAnswerIndex:1,explanation:"GIC bonds chemically and releases fluoride ."},{id:"cem_mcq_35",question:"A major early drawback of GIC is:",options:["Sets by polymerization only","Moisture sensitivity during initial setting","Requires etch-and-rinse adhesive always","Always inhibits resin polymerization"],correctAnswerIndex:1,explanation:"Early GIC is moisture sensitive .(both contamination and dehydration are harmful"},{id:"cem_mcq_36",question:"Correct match of GIC type to use:",options:["Type I = restoration; Type II = luting; Type III = impression","Type I = luting; Type II = restorative; Type III = liner/base","Type I = endodontic sealer; Type II = varnish; Type III = composite","Type I = temporary; Type II = permanent; Type III = none"],correctAnswerIndex:1,explanation:"Type I luting , Type II restorative , Type III liner/base ."},{id:"cem_mcq_37",question:"RMGIC exists primarily to:",options:["Remove fluoride release","Reduce GIC water sensitivity and improve handling","Eliminate acidbase reaction completely","Make eugenol compatible with composite"],correctAnswerIndex:1,explanation:"RMGIC improves water tolerance and properties.improve handling/strength"},{id:"cem_mcq_38",question:"RMGIC sets by:",options:["Acidbase only","Polymerization only","Acidbase + resin polymerization (dual chemistry)","Chelation only"],correctAnswerIndex:2,explanation:"RMGIC has two reactions : GIC + resin cure."},{id:"cem_mcq_39",question:"A common resin component associated with many RMGICs is:",options:["Eugenol","HEMA (plus methacrylate-modified polyacid)","Pure phosphoric acid","Rosin solvent varnish"],correctAnswerIndex:1,explanation:"RMGIC commonly includes HEMA and methacrylate-modified polyacids."},{id:"cem_mcq_40",question:"Zinc phosphate liquid is mainly:",options:["Eugenol with oils","Phosphoric acid + water","Polyacrylic acid only","UDMA/TEGDMA blend"],correctAnswerIndex:1,explanation:"Liquid = phosphoric acid + water , often with Al/Zn salts as buffers."},{id:"cem_mcq_41",question:"Zinc phosphate cement is initially very acidic. Approximately how long does it take to reach a near-neutral pH?",options:["510 minutes","3060 minutes","2448 hours","7 days "],correctAnswerIndex:2,explanation:"2448 hours Why: Zinc phosphate starts at a very low pH (about 23.5) and neutralizes slowly, typically taking 12 days to approach near-neutral pH, which is why it can cause early pulpal irritation in deep cavities."},{id:"cem_mcq_42",question:". A dental assistant mixes Zinc Phosphate cement on a cool glass slab and uses a wide mixing area. What is the primary purpose of this specific manipulation technique?",options:["To increase the acidity for better etching.","To prevent the evaporation of eugenol.","To dissipate the heat from the exothermic reaction.","To increase the setting speed of the cement. "],correctAnswerIndex:2,explanation:"T o dissipate the heat from the exothermic reaction Why (exam points):  Th e setting reaction of zinc phosphate is strongly exothermic (releases heat).  Using a cool slab + wide area helps absorb and spread out heat, which:  slows the reaction, giving longer working time  reduces rapid thickening and improves handling"},{id:"cem_mcq_43",question:"In deep cavities, zinc phosphate should be placed:",options:["Directly on near-pulp dentin with no protection","Over a protective liner/varnish/base","Only under composites","Only under GIC"],correctAnswerIndex:1,explanation:"Deep dentin needs protection from its acidity."},{id:"cem_mcq_44",question:". An elderly patient with high caries risk presents with multiple Class V (cervical/root surface) lesions. Moisture control is moderately difficult. Which restorative material is best suited for this scenario?",options:["Composite Resin","Zinc Polycarboxylate","Glass Ionomer Cement (GIC)","Resin-Modified Glass Ionomer Cement (RMGIC) "],correctAnswerIndex:3,explanation:"Resin-Modified Glass Ionomer Cement (RMGIC) Why (key points):  Better moisture tolerance than composite (composite is very moisture-sensitive for bonding).  Fluoride release  ideal for high caries risk + root caries prevention.  Chemical adhesion to enamel/dentin (no purely micromechanical bond dependence).  Improved strength/handling vs conventional GIC + less early washout risk."},{id:"cem_mcq_45",question:"Patient has a hypersensitive tooth requiring a crown. You want a luting cement that chemically bonds to tooth structure and is also less irritating to the pulp. Which material best fits this description?",options:["Zinc Phosphate","ZOE (Standard)","Zinc Polycarboxylate","Resin Cement "],correctAnswerIndex:2,explanation:"Zinc Polycarboxylate Why: It chemically adheres to enamel/dentin via carboxyl groups chelating Ca  , and it is less pulpal irritating than zinc phosphate (large polyacid molecules penetrate tubules less; higher/less aggressive acidity)."},{id:"cem_mcq_46",question:"Resin cements primarily set by:",options:["Acidbase only","Polymerization (light/chemical/dual cure)","Chelation only","Crystallization only"],correctAnswerIndex:1,explanation:"Resin cements = polymerization ."}],DT=[{id:"cem_mcq_47",question:"You are restoring a tooth with a deep amalgam restoration. You decide to use Zinc Phosphate as a base to provide thermal insulation. What critical step must be done before placing Zinc Phosphate?",options:["Etch the dentin with 37% phosphoric acid.","Dry the dentin completely until it is desiccated.","Place a varnish or liner to seal the dentinal tubules.","Mix the cement on a warm slab to speed up the set. "],correctAnswerIndex:2,explanation:"Place a varnish or liner to seal the dentinal tubules. Reason (high-yield):  Zinc phosphate starts very acidic (low pH) and can irritate the pulp, especially in deep cavities.  A varnish/liner seals dentinal tubules  reduces acid penetration + post-op sensitivity."},{id:"cem_mcq_48",question:"You are preparing a deep Class I cavity for a composite restoration. After excavation, the Remaining Dentin Thickness (RDT) is estimated to be 0.4 mm. There is no pulp exposure. According to the RDT-based pulp protection rules, which protocol is most appropriate?",options:["Place a spot liner of calcium hydroxide at the deepest point, cover with a GIC/RMGIC base, then proceed with bonding and composite.","Apply cavity varnish and restore directly cover with a GIC/RMGIC base, then proceed with bonding and composite.","Place a ZOE liner over the entire pulpal floor, then cover with a GIC/RMGIC base, then proceed with bonding and composite.","Place a thick zinc phosphate base directly on dentin, cover with a GIC/RMGIC base, then proceed with bonding and composite. "],correctAnswerIndex:0,explanation:" RDT < 0.5 mm (0.4 mm here) = very deep dentin  you protect the pulp with a spot Ca(OH) 2 liner (only at the deepest area), then cover it with a base (GIC/RMGIC) for sealing/support, then restore."},{id:"cem_mcq_49",question:"A patient presents with a fractured incisor requiring an all-ceramic (lithium disilicate) veneer. You need a cement that offers the highest esthetics, translucency, and bond strength. Which material is most indicated?",options:["Zinc Phosphate Cement","Resin Cement","Zinc Polycarboxylate Cement","Resin-Modified Glass Ionomer (RMGIC) "],correctAnswerIndex:1,explanation:"Resin Cement Why (exam logic):  Veneers (esp. lithium disilicate) depend on strong adhesive bonding + shade control/translucency  resin cement (usually light-cure for thin veneers) gives the best esthetics and highest bond strength."},{id:"cem_mcq_50",question:"Which comparison is MOST accurate?",options:["RMGIC is anhydrous; compomer contains water","RMGIC has chemical tooth bonding; compomer usually requires a bonding agent","Compomer releases more fluoride than RMGIC","RMGIC sets by polymerization only"],correctAnswerIndex:1,explanation:"RMGIC has chemical adhesion + dual set; compomer is mainly resin-based and needs bonding agent ."},{id:"cem_mcq_51",question:"Best material to AVOID directly under a composite restoration is:",options:["RMGIC liner (as indicated)","Calcium hydroxide (spot) covered by base","ZOE","Resin-compatible liner/base"],correctAnswerIndex:2,explanation:"Eugenol inhibits resin polymerization ."},{id:"cem_mcq_52",question:"A classic sedative temporary restoration material is:",options:["Zinc phosphate","ZOE/IRM","Pure GIC Type I","Resin cement"],correctAnswerIndex:1,explanation:"ZOE/IRM is widely used for temporary/sedative effects."},{id:"cem_mcq_53",question:"In a deep cavity with symptoms, a common protective sequence is:",options:["Zinc phosphate directly on pulp-side dentin","Spot Ca(OH)   cover with base (often GIC/RMGIC)  restore","Varnish only  restore composite","Compomer only with no adhesive"],correctAnswerIndex:1,explanation:"Ca(OH) 2 for biologic protection , then a stronger base for seal/support . ADVANCE MCQ"},{id:"cem_mcq_54",question:"What is the primary role of White Rosin in Zinc Oxide Eugenol (ZOE) powder?",options:["To increase the pH.","To accelerate the setting reaction.","To increase the antibacterial properties.","To reduce brittleness and improve film thickness. "],correctAnswerIndex:3,explanation:"White rosin mainly reduces brittleness and improves handling/film characteristics."},{id:"cem_mcq_55",question:"Regarding the Hydrodynamic Theory of Pain, how does a varnish reduce sensitivity under an amalgam restoration?",options:["It releases ions that hyperpolarize the nerve.","It provides significant thermal insulation.","It promotes the formation of reparative dentin.","It seals the dentinal tubules, preventing fluid movement. "],correctAnswerIndex:3,explanation:"Varnish seals dentinal tubules , reducing fluid movement  less sensitivity."},{id:"cem_mcq_56",question:"Which scenario presents the highest risk of post-operative sensitivity when using Zinc Phosphate?",options:["Cementing a crown on a vital tooth with 0.5 mm RDT and no varnish .","Cementing a crown on a tooth with a previous root canal.","Cementing a crown on a vital tooth with 2.0 mm RDT .","Cementing an orthodontic band on enamel. "],correctAnswerIndex:0,explanation:"Thin dentin ( low RDT ) + no tubule seal + zinc phosphates initial acidity = highest sensitivity risk."},{id:"cem_mcq_57",question:"Which component of zinc phosphate cement liquid is most responsible for controlling the reaction rate ?",options:["Eugenol","Free phosphoric acid","Dissolved aluminum and zinc salts (buffers)","Distilled water "],correctAnswerIndex:2,explanation:"Dissolved aluminum and zinc salts (buffers) Why (exam logic):  Al  and Zn  salts act as buffers in the liquid.  They partially neutralize phosphoric acid , moderating the acidbase reaction , which slows the set and provides a usable working time .  Free phosphoric acid drives the reaction (too fast/acidic by itself).  Water is essential but does not control the rate.  Eugenol is unrelated (ZOE cement, not zinc phosphate)."},{id:"cem_mcq_58",question:"Why is Calcium Hydroxide specifically used for Apexification in non-vital immature teeth?",options:["It provides significant structural reinforcement to the thin root walls.","It creates a hermetic chemical bond to the dentin walls.","Its low pH stimulates osteoclasts to remodel bone.","Its high alkalinity causes superficial necrosis, inducing calcified barrier formation. "],correctAnswerIndex:3,explanation:"Reason: Ca(OH) 2 has a very high pH (~1112.5)  creates a superficial zone of coagulation necrosis at the apex and is antibacterial . This environment stimulates adjacent tissues to lay down a hard-tissue apical barrier (calcified barrier such as cementum/osteodentin), which is the goal of apexification ."},{id:"cem_mcq_59",question:"A student leaves the bottle of Zinc Phosphate liquid uncapped overnight. Next day, they use it to mix cement. How will the handling properties be affected?",options:["The setting time will be significantly delayed (slower set).","The acidity will decrease, making it less irritating.","The compressive strength will increase.","The setting time will be accelerated (flash set). "],correctAnswerIndex:3,explanation:"The setting time will be accelerated (flash set). Why: Zinc phosphate liquid contains phosphoric acid + water . If left uncapped, water evaporates , making the liquid more concentrated and more reactive -> shorter working time and faster/flash set (often with a thicker, harder-to-handle mix)."},{id:"cem_mcq_62",question:"A dentist notices the zinc phosphate liquid in the bottle has turned cloudy. What is the most likely cause, and what clinical effect will it have?",options:["The phosphoric acid has oxidized; the cement will be weaker.","Water has been absorbed from humidity; the cement will set too fast.","The buffer salts have precipitated; the cement will be too acidic.","Water has evaporated , causing crystallization/precipitation ; the cement will set too slowly . "],correctAnswerIndex:3,explanation:"Cloudiness usually means water loss  crystallization ; less water = poorer ionization  slower reaction/longer setting time ."},{id:"cem_mcq_63",question:"What is the clinical consequence of over-drying (desiccating) dentin before placing a resin cement?",options:["It increases the bond strength by removing water.","It collapses the collagen network, preventing resin infiltration.","It causes the pulp to calcify immediately.","It accelerates the setting of the resin. "],correctAnswerIndex:1,explanation:"Over-drying collapses the demineralized collagen mesh, so the resin/primer cant infiltrate properly  weak hybrid layer, lower bond strength, more microleakage/post-op sensitivity."},{id:"cem_mcq_64",question:"When cementing with Zinc Phosphate, retention is primarily achieved via:",options:["Covalent bonding to collagen.","Macromechanical interlocks and casting geometry.","Chelation to calcium ions.","Formation of a hybrid layer. "],correctAnswerIndex:1,explanation:"Zinc phosphate does not chemically bond to tooth structure. Retention is mainly mechanical : friction + cement interlocking into surface irregularities , and it depends heavily on prep/casting geometry (taper, height, surface area)."},{id:"cem_mcq_65",question:"Zinc polycarboxylate cement adheres chemically to tooth structure via chelation to calcium . Which of the following restorative materials will it also chemically bond to ?",options:["Gutta-percha","Feldspathic porcelain","Stainless steel","Cast gold alloy "],correctAnswerIndex:2,explanation:"Stainless steel Why (high-yield):  Zinc polycarboxylate can chelate metal oxides .  Stainless steel has a stable oxide layer , allowing chemical interaction.  Gold alloys are noble  minimal oxide  no chemical bond .  Porcelain needs silane coupling , not polycarboxylate chelation.  Gutta-percha is inert and does not chemically bond."},{id:"cem_mcq_66",question:"What is the primary function of a Silane Coupling Agent when repairing a fractured porcelain crown with composite resin ?",options:["To neutralize the acidity of hydrofluoric acid","To opacify the metal substructure","To etch the porcelain surface","To link the inorganic silica of the porcelain to the organic resin matrix "],correctAnswerIndex:3,explanation:"Why (high-yield):  Silane is bifunctional :  One end bonds to silica (glass phase) of porcelain  The other end copolymerizes with methacrylate resin  This creates a chemical bridge between ceramic and composite, greatly improving bond strength."},{id:"cem_mcq_67",question:"You remove a temporary crown cemented with ZOE . Before cementing the final crown with a resin cement , why must the preparation be vigorously cleaned with pumice or alcohol?",options:["ZOE lowers the pH of the dentin, neutralizing the adhesive.","Residual eugenol penetrates dentin and inhibits resin polymerization.","ZOE leaves a smear layer that is impervious to acid etch.","ZOE reacts with the silane coupling agent. "],correctAnswerIndex:1,explanation:"Why (high-yield):  Eugenol is a free-radical scavenger , which inhibits resin polymerization .  Residual eugenol can remain in dentin after temporary cement removal.  Pumice/alcohol cleaning reduces eugenol contamination, allowing proper bonding and curing of resin"},{id:"cem_mcq_68",question:"Why are light-cureonly resin cements contraindicated for cementing metal PFM crowns?",options:["The heat of the curing light expands the metal excessively.","Light cannot penetrate the metal substructure to cure the cement.","They do not bond to metal.","The metal chemically inhibits the photoinitiator. "],correctAnswerIndex:1,explanation:"Why (exam logic):  Metal blocks light completely.  A light-cureonly resin cement placed under a metal coping will not polymerize , remaining uncured  failure."},{id:"cem_mcq_69",question:"What is the definition of Film Thickness for a Type I Luting Cement according to ISO standards?",options:["Maximum 25 microns","Maximum 5 microns","Minimum 50 microns","Maximum 100 microns "],correctAnswerIndex:0,explanation:"Maximum 25 microns Why (high-yield): ISO standards require luting cements to flow into a film  25 m so that indirect restorations (crowns, inlays) seat fully without occlusal discrepancy or marginal opening."},{id:"cem_mcq_70",question:"Why is sandblasting (air abrasion) with alumina recommended before bonding to base metals or zirconia?",options:["To remove the oxide layer completely.","To increase surface energy and create micromechanical retention.","To implant silica particles for silanation.","To soften the metal for better adaptation. "],correctAnswerIndex:1,explanation:"Why (exam logic):  Air abrasion cleans and roughens the surface, increasing surface energy and surface area , which improves micromechanical interlocking with resin cements.  For zirconia , sandblasting is crucial to activate the surface so MDP-containing primers/cements can bond effectively."},{id:"cem_mcq_71",question:"What is the main advantage of bioceramic sealers in endodontics compared to ZOE-based sealers?",options:["They are hydrophilic, expand slightly on setting, and form hydroxyapatite.","They contain eugenol for sedation.","They shrink to ensure a tight fit.","They are easier to remove for retreatment. "],correctAnswerIndex:0,explanation:"Why (high-yield):  Bioceramic sealers (calcium silicatebased) are hydrophilic , use moisture in the canal to set, and show slight expansion , improving the seal.  They are bioactive , forming hydroxyapatite at the sealerdentin interface, which enhances sealing and biocompatibility.  ZOE sealers lack bioactivity and do not chemically integrate with dentin."}],T3=[...MT,...PT,...DT],E3=`
## 1) Core definitions (high-yield)

-  **Amalgam**: an alloy that contains **mercury** (**AgSn (silvertin) + mercury**).

-  **Amalgamation**: mixing **liquid mercury** with **one/more metals/alloys**  forms **amalgam**. (the **chemical reaction**)

-  **Trituration**: **mechanical mixing** of alloy powder + mercury in a **triturator (amalgamator)**. (the actual **physical mixing** of liquid and solid)

-  **Creep**: **time-dependent deformation under stress**  margins can **flow/protrude**  **marginal breakdown**.

-  **Delayed expansion (Zn-containing amalgam)**: **weeksmonths** expansion due to **H gas** when **moisture contaminates** the mix.

-  **Marginal breakdown**: gradual **fracture/ditching** at margin  **gaps** between amalgam and tooth.

---

## 2) Amalgam Alloy Powders (what forms exist?)

-  Alloy powder forms (because reaction occurs at the **interface**):

  -  **Lathe-cut (irregular particles)**: cut from an ingot; rougher; **more surface area**

  -  **Spherical (atomized droplets)**: smooth spheres; **less surface area**

  -  **Admix**: mixture of **lathe-cut AgSn + spherical AgCu**

-  Why does particle form matter clinically?

  -  More surface area (**lathe-cut**, smaller particles)  needs more **Hg** to wet surfaces  faster reaction/hardening but risk **higher Hg content** if not condensed well.

  -  Less surface area (**spherical**)  needs less **Hg**  often better final properties if handled right, but mix is very plastic.

![Forms of Amalgam Alloy Powders + Copper Classification + Alloy Components](assets/amalgam/amalgam_img_0.png)

---

## 3) Copper Classification (critical)

### A) Low-copper (conventional) alloys

-  Traditionally: **Ag** and **Sn** dominate, **Cu** is low (**~16%**)

-  Problem: forms ** phase (SnHg)**, which is **weak + corrodes easily**

-  Typical phases include:

  -  ** (AgSn)** = unreacted alloy core

  -  ** (AgHg)** = main matrix

  -  ** (SnHg)** = weak/corrosion-prone phase (undesirable)

### B) High-copper alloys

-  **Cu > ~6%** (often **1230%**)

-  Main goal: eliminate ****

-  Two types:

  -  **High-copper admix (dispersed phase)**:

    -  lathe-cut **AgSn + spherical AgCu eutectic**

  -  **High-copper single-composition (often spherical)**:

    -  each particle already contains **AgSnCu phases**

- 

### C) By zinc

-  **Zn-containing** vs **Zn-free**

### D) By number of alloy components

-  **Binary / Ternary / Quaternary**

-  Explanation of why we need these different types are given further we go into the topic

---

## 3) Indications & contraindications

### Indications

-  Moderate/large posterior cavities

-  When isolation is difficult

-  Stress-bearing areas / where longevity matters

### Contraindications

-  High esthetic demand

-  Very small conservative lesions (composite preferred)

-  Known mercury allergy / hypersensitivity suspicion

---

## 4) Advantages vs disadvantages

### Advantages

-  Good longevity, strong in compression

-  Less technique sensitive than composite (especially moisture-tolerant overall)

-  Self-sealing over time (via corrosion products)

### Disadvantages

-  Not esthetic

-  No chemical adhesion to tooth (needs mechanical retention / bonding systems if used)

-  Mercury concerns + environmental issues

---

## 5) Composition and what each element does

-  Typical components: **Ag, Sn, Cu  Zn  Pd/In**.

-  Roles (classic exam lines)

  -  **Silver (Ag)**:  strength,  expansion,  corrosion resistance

  -  **Tin (Sn)**:  strength,  creep,  corrosion (but helps workability)

  -  **Copper (Cu)**: (big one) eliminates ****,  strength,  creep,  corrosion resistance

  -  **Zinc (Zn)**: deoxidizer (oxygen scavenger)  better handling/plasticity; BUT moisture contamination  delayed expansion

  -  **Indium / Palladium**: handling/performance modifiers in some systems

---

## 6) Alloy powder types (how theyre made) + clinical behavior

-  Lathe-cut: ingot is cut/milled  irregular particles; tends to resist condensation more  needs higher pressure.

-  Spherical: atomized molten alloy droplets  spheres; more plastic, needs less Hg, but harder to build tight proximal contour (Class II overhang risk).

---

## 7) Critical concept: how powder becomes the final set structure

-  Big Idea: How does amalgam set?

-  What happens right after mixing alloy powder with mercury?

-  When you triturate:

  -  **1. Surface dissolution**: The outer layer of each alloy particle dissolves into Hg.

  -  **2. Hg diffusion inward**: Hg diffuses into the alloy particle at the same time.

  -  **3. Supersaturation  precipitation**: Once Hg is too full of dissolved metals, new Hg-containing crystals precipitate in the Hg.

  -  **4. Plastic  hard**: At first, Hg is still present as liquid  mass is plastic (packable). As precipitates form, free Hg decreases  mass hardens (sets).

  -  **5. Unreacted cores remain**: Because Hg is not enough to dissolve all particles, the set amalgam ends up as a composite:

    -  Unreacted alloy cores = strong filler

    -  Reaction products = matrix that binds everything

-  **Key exam line**: Set amalgam = **unreacted alloy particles embedded in a mercury-containing matrix**.

![How Amalgam Sets (flow diagram)](assets/amalgam/amalgam_img_1.png)

-  (Thats why set amalgam is basically a composite: unreacted particles embedded in a reacted matrix.)

-  Lets use an analogy glue and rocks

-  Basically, mercury attacks the surface of the **AgSn (AgSn)** alloy particles, dissolving silver and tin from the outer layer. These dissolved metals then react with mercury and precipitate as new mercury-containing phasesmainly **AgHg ()** and, in low-copper alloys, **SnHg ()**.

-  The **AgHg ()** phase forms the main matrix (good glue), binding the remaining unreacted **AgSn cores (rocks)** together to create the final set amalgam structure.

-  The **SnHg ()** phase is the bad glue because it is weak and corrodes easily, so it worsens marginal breakdown over time.

-  Thats why we add copper: copper pulls tin away from the SnHg route and forms **CuSn ()** instead, so **** is prevented or eliminated (explained in copper segment).

-  If u can understand this u can easily understand composite and cements as well as they are the exact same process just different liquids and different rocks (actual rocks lol or u can say glass/silica)

![Oxide Film Disruption  Hg Dissolves Surface  Reaction Products Form](assets/amalgam/amalgam_img_3.png)

---

## Amalgamation reaction + phases (this is the must know)

-  **Amalgamation**: mixing liquid mercury with one/more metals/alloys  forms amalgam.

-  **Trituration**: mechanical mixing of alloy powder + mercury in a triturator (amalgamator).

-  **Amalgamation reaction + phases (this is the must know)**

### Key phase names

-  ** (gamma)**: unreacted alloy core **AgSn**

-  ****: matrix **AgHg** (main binder)

-  ****: weak/corrosion-prone **SnHg** (the bad phase)

-  ** (eta prime)**: **CuSn** (good corrosion-resistant CuSn product)

![Set Amalgam: A Composite Matrix](assets/amalgam/amalgam_img_2.png)

---

## Phase Table (as in your notes)

| Phase Name | Symbol | Formula | Role in the "Rocks and Glue" | Key Properties |
|---|---|---|---|---|
| **Gamma** | **** | **AgSn** | The "Rocks" (Unreacted Core) | The main component of the strong alloy particle. **strongest phase** |
| **Epsilon** | **** | **CuSn** | The "Copper Source" (Inside the Rocks) | Found within the alloy particles; it helps supply the copper needed to kill the weak phase. |
| **Gamma 1** | **** | **AgHg** | The "Main Glue" (Matrix) | The primary binder that holds the structure together. |
| **Gamma 2** | **** | **SnHg** | The "Weak Glue" (Low-Copper Only) | The weakest phase; unstable, prone to corrosion and creep. |
| **Eta Prime** | **** | **CuSn** | The "Reinforcement" (High-Copper Only) | The reaction product formed when Tin reacts with Copper. |

---

## Low-copper (conventional) setting reaction

-  **AgSn + Hg   (AgHg) +  (SnHg) + unreacted **

-  Final microstructure: unreacted ** cores** embedded in ** +  matrix**.

-  **** is weakest + corrodes most  drives marginal breakdown over time. (we don't want this)

-  So WHY WE NEED COPPER is to remove the gamma 2 phase; how ? explained below

---

## High-copper: WHY  is prevented/eliminated (critical question)

-  Explained in detail in their respective headings

-  Normally it is a reaction between silver-tin and mercury but to reduce gamma 2 phase we add copper in 2 ways:

  -  one is adding as a separate compound which is silver-copper compound **AgCu**

  -  And 2nd is we add it in the silver tin compound as silver-tin-copper called the **CuSn (Epsilon )**

-  Explained in detail in their respective headings

![Why we need copper slide / set amalgam matrix emphasis](assets/amalgam/amalgam_img_4.png)

---

## The Chemical "Preference" Mechanism

-  The elimination of the weak Gamma 2 (****) phase happens because of a chemical competition for Tin (**Sn**).

-  The Conflict: Tin can react with either Mercury (**Hg**) or Copper (**Cu**).

-  The Preference: Tin has a much higher chemical affinity for Copper than it does for Mercury.

-  The Result: Tin is "pulled away" from the mercury to form the strong Eta-prime phase (**CuSn**).

-  Conclusion: Because the tin is busy reacting with copper, it is unavailable to react with mercury. This effectively blocks the formation of the weak Gamma 2 "bad glue."

-  This can occur in a single phase reaction or a two phase reaction as discussed below

---

## High-copper types

### A) Admixed high-copper (lathe-cut AgSn + spherical AgCu)

-  Here 2 compounds are mixed therefore its called admixed

-  silver-tin and silver-copper

-  Early: ** + some ** form

-  Then tin diffuses to AgCu particles  **** forms at their surface

-  Secondary reaction consumes ****  **** (so **** ends up minimal/absent)

-  In this the SnHg is formed and then tin leaves mercury and goes with copper so its a 2 phase reaction

-  In admixed high-copper amalgam,  may form early, but a secondary CuSn reaction converts it into , so  is eliminated.

-  Phase 1:

  -  Reaction: **AgSn + Hg  Gamma 1 (AgHg) + Gamma 2 (SnHg)**

-  Phase 2:

  -  Reaction: **Gamma 2 + AgCu  Eta-prime (CuSn)  + Gamma 1**

-  The Eta phase surrounds the unreacted core making it more resistant to further mercury attacks

-  **** forms a protective CuSn reaction layer around unreacted cores, reducing **** formation and improving corrosion/creep resistance.

![The Admixed Reaction: A Two-Step Process](assets/amalgam/amalgam_img_5.png)

### B) Single-composition high-copper (often spherical)

-  No SnHg is formed a single reaction

-  Forms ** + **, with little/no ****  excellent creep + corrosion resistance

-  Benefit vs risk vs admix: better early strength/low creep, but very plastic  contour control issues (proximal overhang/contacts) unless technique is good.

- 

-  Extended explanation

### Key Idea

-  In single-composition high-copper alloys, every single particle contains the copper needed to kill the weak phase.

-  This copper is stored in the Epsilon phase (****) which is chemically **CuSn**.

-  The chemistry is set up so tin reacts with this copper to form Eta-prime (****) instead of forming **SnHg**

-  We basically add the copper in the silver -tin alloy instead of being a separate compound .

### Single-Composition High-Copper Alloys have NO Weak Phase:

-  The Setup: In these alloys, the Copper is not a separate ingredient. It is melted directly into the Silver-Tin particle (as the Epsilon phase).

-  The Release: When Mercury attacks the surface, it dissolves the particle, releasing both Tin and Copper at the exact same spot.

-  The Race:

  -  Mercury tries to grab the Tin to form the weak Gamma 2 glue.

  -  Copper tries to grab the Tin to form the strong Eta-prime crystals.

-  The Winner: Because the Copper is right there (Proximity) and Tin loves Copper more (Affinity), they snap together instantly.

-  The Result: The Tin is "stolen" by the Copper before Mercury even has a chance to react with it.

-  Bottom Line: The reaction is so fast and local that the weak Sn-Hg phase never gets the time to form.

---

## Reaction Summary (The Mechanism)

-  The Copper Source: The unreacted alloy particles contain Epsilon (****) phase (**CuSn**) and Gamma (****) phase.

-  The Reaction **(AgSn + CuSn) + Hg  AgHg + CuSn + Unreacted Core ((AgSn + CuSn))**

-  Translation: (Gamma + Epsilon) + Mercury  Gamma 1 + Eta-prime + Unreacted Core

- 

-  What Forms:

  -  Gamma 1 (****): The main matrix/binder (**AgHg**).

  -  Eta-prime (****): The CopperTin reaction product (**CuSn**).

  -  Gamma 2 (****): Eliminated. Because the Epsilon phase is right there supplying copper, the Tin reacts with it immediately, preventing the weak Sn-Hg phase.

  - 

-  Final Structure:

-  Unreacted high-copper alloy particles (containing Gamma and Epsilon) embedded in a Gamma 1 matrix, with Eta-prime crystals dispersed throughout.

---

## Benefit vs. Risk (vs. Admixed High-Copper) EXTRA can skip

| Benefits | Risks / Handling Issues |
|---|---|
| Excellent creep resistance (due to Eta-prime locking the matrix) | Fresh mix is very plastic ("mushy") |
| Better corrosion resistance (No Gamma 2) | Harder to build proximal contour and tight contacts in Class II |
| Highest early strength (ready in 1 hour) | Higher risk of overhangs if technique is poor |

-  One-Liner to Memorize

-  Single-composition particles contain Epsilon phase (**CuSn**) which reacts to form Gamma 1 + Eta-prime; this eliminates Gamma 2 for low creep/high strength but makes the mix very plastic.

![Mercury Reaction in High-Copper Alloy (Instant Reaction / Final Structure)](assets/amalgam/amalgam_img_6.png)

---

## 9) Manipulation (clinical control)

### Mercury/alloy ratio (big clinical lever)

-  Needs to be enough for a coherent plastic mass after trituration, but not so high that final set has too much weak matrix phase.

-  Generally it is **1:1**

-  More Hg  more **/ matrix**, less unreacted core   strength,  creep,  corrosion risk.

-  Spherical powders generally need less Hg (lower surface area/volume).

![Key Phases in Dental Amalgam (low vs high copper)](assets/amalgam/amalgam_img_7.png)

### Trituration (mixing)

-  Goal: break oxide layer + wet particles so reaction can proceed.

-  How to know the correct time (critical question):

  -  Undertriturated: grainy, dull  weak, rough surface

  -  Proper: cohesive, smooth, shiny rounded mass

  -  Overtriturated: very shiny, mushy, sticks to capsule, shorter working time

### Condensation

-  Goal: pack dense, adapt to walls, reduce porosity, and express excess Hg.

-  Key rules from your text + slides:

  -  Start promptly; keep field absolutely dry

  -  Condense in increments; each increment should look shiny (Hg at surface helps bond next increment)

  -  Lathe-cut needs higher pressure; spherical needs less (too much pressure can punch through)

-  When to discard mix (critical question):

-  If it loses plasticity, becomes difficult to condense, wont regain a shiny condensed surface, or you start getting voids/layering  discard and triturate fresh.

---

## The Consequences of Improper Manipulation

-  This covers exactly what happens when you mess up the above variables.

-  This section is critical for explaining why a restoration fails years later.

### 1. Trituration (Mixing Time & Speed)

| Error Type | Appearance of Mix | Clinical Consequence (The Result) |
|---|---|---|
| Under-Trituration (Too Slow/Short) | Grainy, Dull, Crumbly. Like dry sand. | High Porosity: The particles don't wet properly, leaving air gaps.<br>Weakness: Voids make it break easily.<br>Corrosion: Rough surface traps plaque.<br>Expansion: Can cause post-op sensitivity. |
| Normal Mix | Shiny, Smooth. Separates from the capsule in one mass. | Optimal Strength: Minimum voids and proper setting time. |
| Over-Trituration (Too Fast/Long) | Soupy, Sticky, Shiny. May feel hot to the touch. | Short Working Time: It sets too fast, so you can't pack it properly.<br>High Contraction: It shrinks too much, leaving gaps at the margins (leakage).<br>Stickiness: Adheres to instruments, making it hard to handle. |

![Under-trituration vs Normal Mix vs Over-trituration](assets/amalgam/amalgam_img_8.png)

### 2. Condensation (Packing Pressure)

-  The goal of condensation is to adapt the material to the walls and squeeze out excess mercury.

-  Low Condensation Pressure (Weak Packing):

  -  High Residual Mercury: You failed to squeeze the extra mercury out. This leaves a "Mercury-Rich" restoration (More Weak Matrix, Less Strong Core).

  -  Result: Drastic loss of strength and Increased Creep.

  -  Voids: Leaves air pockets between layers (lamination defects).

-  Delayed Condensation (Waiting too long):

  -  The Problem: The matrix crystals have already started to grow and lock.

  -  The Result: Packing it late fractures these new crystals. The filling will be weak and crumbly because you broke the internal skeleton as it was forming.

![Condensation: Low Pressure vs Delayed Condensation](assets/amalgam/amalgam_img_9.png)

### 3. Mercury : Alloy Ratio

-  Too Much Mercury (**>50%**):

  -  Microstructure: You create too much Gamma 1 (Glue) and not enough Gamma (Rocks).

  -  Result: The restoration is Weaker (glue is weaker than rock) and has High Creep (glue moves).

-  Too Little Mercury (**<45-50%**):

  -  Microstructure: Not enough liquid to wet the particles.

  -  Result: A Grainy, Porous mix (similar to under-trituration). The particles don't stick together, leading to a rough, pitted surface that corrodes.

![Too Much Mercury vs Too Little Mercury](assets/amalgam/amalgam_img_10.png)

### One-Liner Summary for Exam Questions:

-  Under-trituration = Grainy/Weak/Corrodes.

-  Over-trituration = Sticky/Shrinks/Sets too fast.

-  Low Condensation Pressure = Leaves too much Mercury behind (Weak/Creep).

-  More Mercury = More Weak Matrix.

---

## 10) Properties you must link to causes

### A) Dimensional change (setting)

-  Amalgam can contract or expand depending mainly on Hg content + condensation.

-  More Hg remaining when ** crystals impinge**  expansion

-  Less Hg / higher condensation pressure / smaller particles / longer trituration  favors net contraction

- 

![Dimensional Change in Amalgam](assets/amalgam/amalgam_img_12.png)

### B) Delayed expansion (Zn + moisture)  the pain question

-  Moisture contamination of Zn-containing amalgam  **H gas**  internal pressure  expansion starting days later and continuing **weeksmonths**  can cause severe postoperative pain and protrusion.

-  So zinc is a double-edged sword (critical question):

  -  Benefit: deoxidizer  better handling/plasticity

  -  Risk: if moisture contaminates  delayed expansion (pain)

-  .

![Zinc in Dental Amalgam: A Double-Edged Sword](assets/amalgam/amalgam_img_13.png)

### C) Strength (and why fractures happen)

-  Amalgam is strong in compression, weak in tension  avoid thin sections/unsupported amalgam.

-  Strength drops with: bad trituration, delayed condensation, high porosity, high final Hg.

### D) Creep  marginal breakdown (classic chain)

-  High creep  marginal flow/protrusion  unsupported flash fractures  ditched margin.

-  High-copper has much lower creep mainly because **** is absent and ** strengthens** the structure.

---

## Why it Matters Clinically

-  why dentists care about that ditch. Its not just cosmetic; its a biological risk.

-  Plaque Trap: A smooth margin is easy to clean. A "ditched" margin acts like a canyon, trapping food debris and plaque that a toothbrush can't reach.

-  Secondary Decay: Because bacteria sit undisturbed in that ditch, they produce acid, leading to recurrent caries (new decay) right next to the filling.

-  Corrosion: The deep crevice creates a unique chemical environment that accelerates corrosion, weakening the filling further.

![High creep  marginal flow  flash fracture  ditched margin](assets/amalgam/amalgam_img_14.png)

---

## E) Tarnish vs corrosion

-  Tarnish: surface discoloration (often **Ag sulfide**), not necessarily mechanical failure

-  Corrosion: property degradation; **** is the big corrosion-sensitive phase (low-copper worst)

---

## 2. Corrosion: The Structural Destruction

-  Corrosion is the actual degradation of the material (dissolution of metal) in the bulk of the restoration.

-  Mechanism: Electrochemical attack (Galvanic Corrosion). The saliva acts as an electrolyte.

-  The "Battery" Effect Different phases of amalgam have different electrical potentials:

  -  Cathode (Strong): ** (AgSn)** and ** (AgHg)** are noble/strong.

  -  Anode (Weak): ** (SnHg)** is the most electronegative (active).

-  The Failure The **** phase acts as the anode and is "eaten away" or dissolved.

-  Consequences

  -  Porosity: The restoration becomes porous and spongy.

  -  Weakness: Dramatic loss of strength (**50% strength loss in 5 years** for low-copper amalgam).

  -  Mercury Release: The mercury from the **** phase is released back into the restoration, reacting with remaining **** to form more **** and **** (known as **Mercuroscopic Expansion**).

- 

-  Positive side: corrosion products can seal the margin and reduce microleakage over time self sealing ability is due to these products

-  Here are the corrosion product names:

  -  Tin Oxide

  -  Tin Hydroxychloride

  -  Copper Oxide (found in high-copper amalgams)

  -  Paratacamite (found in high-copper amalgams)

- 

-  \\\\

![Corrosion: battery effect + consequences + corrosion products](assets/amalgam/amalgam_img_15.png)

---

## Galvanism (Galvanic Shock)

-  Definition: A sudden electrical pain caused by a "battery effect" in the mouth.

-  Requirements:

  -  1. Two Different Metals: e.g., Gold Crown (top) vs. Amalgam Filling (bottom).

  -  2. Electrolyte: Saliva connects them.

  -  3. Contact: Biting down touches the metals together.

-  Mechanism: When the metals touch, an electrical current flows between them, passing through the tooth and shocking the nerve.

-  Resolution: The pain usually stops after a few days because the amalgam forms a tarnish layer (oxides), which acts as an insulator and breaks the circuit.

![Galvanic Shock in the Mouth (Oral Battery)](assets/amalgam/amalgam_img_16.png)

---

## 11) Common exam clinical problems (answers in note form)

### Pain on chewing 1 day after placement

-  Most likely:

  -  High occlusion (hyperocclusion)  adjust occlusion

-  Tooth cracks from weakened cusps / over-reduction  may need cusp coverage/restoration redesign

-  Not delayed expansion (thats usually days later).

### Mechanism of marginal breakdown + prevention

-  Mechanism: creep + low tensile strength + corrosion at weak/unsupported margins  fracture/ditching.

-  Prevention:

  -  Choose high-copper alloy (low creep, no ****)

  -  Correct cavity design (avoid unsupported enamel/amalgam)

  -  Proper trituration + prompt condensation

  -  Adequate condensation pressure (esp. lathe-cut)

  -  Remove Hg-rich surface layer; proper carving; finish/polish appropriately

---

## 12) Mercury safety (short, factual, exam-safe)

-  Allergy to mercury/amalgam is rare; true hypersensitivity needs clinical confirmation.

-  Major reviews generally find no clear link between amalgam and systemic illness in the general population; agencies still advise precautionary minimization for certain groups.

-  Quantifiable exposure: studies/reviews often estimate a few g/day of absorbed mercury from amalgams, generally below tolerable daily intakes used by regulators/WHO frameworks.

-  Office hygiene: encapsulated systems, good ventilation, high-volume suction + water spray during removal, avoid dry polishing (highest vapor release), proper scrap disposal.

`,_3=`
## 1) Core definitions (high-yield)

-  **Amalgam**: an alloy that contains **mercury** (**AgSn(silvertin) + mercury**).
-  **Amalgamation**: mixing **liquid mercury** with **one/more metals/alloys**  forms **amalgam**. (the **chemical reaction**)
-  **Trituration**: **mechanical mixing** of alloy powder + mercury in a **triturator(amalgamator)**. (the actual **physical mixing** of liquid and solid)
-  **Creep**: **time-dependent deformation under stress**  margins can **flow/protrude**  **marginal breakdown**.
-  **Delayed expansion (Zn-containing amalgam)**: **weeksmonths** expansion due to **H gas** when **moisture contaminates** the mix.
-  **Marginal breakdown**: gradual **fracture/ditching** at margin  **gaps** between amalgam and tooth.

---

## 2) Amalgam Alloy Powders (what forms exist?)

-  Alloy powder forms (because reaction occurs at the **interface**):
-  **Lathe-cut (irregular particles)**: cut from an ingot; rougher; **more surface area**
-  **Spherical (atomized droplets)**: smooth spheres; **less surface area**
-  **Admix**: mixture of **lathe-cut AgSn + spherical AgCu**

-  Why does particle form matter clinically?
-  More surface area (**lathe-cut**, smaller particles)  needs more **Hg** to wet surfaces  faster reaction/hardening but risk **higher Hg content** if not condensed well.
-  Less surface area (**spherical**)  needs less **Hg**  often better final properties if handled right, but mix is very plastic.

![Forms of Amalgam Alloy Powders](assets/amalgam_forms_powders.png)

---

## 3) Copper Classification (critical)

### A) Low-copper (conventional) alloys

-  Traditionally: **Ag** and **Sn** dominate, **Cu** is low (**~16%**)
-  Problem: forms ** phase (SnHg)**, which is weak + corrodes easily
-  Typical phases include:
-  ** (AgSn)** = unreacted alloy core
-  ** (AgHg)** = main matrix
-  ** (SnHg)** = weak/corrosion-prone phase (undesirable)

### B) High-copper alloys

-  **Cu > ~6%** (often **1230%**)
-  Main goal: **eliminate **
-  Two types:
-  **High-copper admix (dispersed phase)**
  -  lathe-cut **AgSn** + spherical **AgCu eutectic**
-  **High-copper single-composition (often spherical)**
  -  each particle already contains **AgSnCu** phases

---

## 4) Indications & Contraindications

-  **Indications**
  -  Moderate/large posterior cavities
  -  When isolation is difficult
  -  Stress-bearing areas / where longevity matters
-  **Contraindications**
  -  High esthetic demand
  -  Very small conservative lesions (composite preferred)
  -  Known mercury allergy / hypersensitivity suspicion

---

## 5) Advantages vs Disadvantages

-  **Advantages**
  -  Good longevity, strong in compression
  -  Less technique sensitive than composite (especially moisture-tolerant overall)
  -  **Self-sealing** over time (via corrosion products)
-  **Disadvantages**
  -  Not esthetic
  -  No chemical adhesion to tooth (needs mechanical retention)
  -  Mercury concerns + environmental issues

---

## 6) Composition and What Each Element Does

-  Typical components: **Ag, Sn, Cu  Zn  Pd/In**
-  Roles (classic exam lines):
-  **Silver (Ag)**: ** strength**, ** expansion**, ** corrosion resistance**
-  **Tin (Sn)**: ** strength**, ** creep**, ** corrosion** (but helps workability)
-  **Copper (Cu)**:  **eliminates **, ** strength**, ** creep**, ** corrosion resistance**
-  **Zinc (Zn)**: deoxidizer;  **moisture contamination  delayed expansion**
-  **Indium/Palladium**: handling/performance modifiers

---

## 7) How Amalgam Sets: Rocks and Glue

-  Set amalgam behaves like a **composite**:
-  **Unreacted alloy cores (rocks)** = strong filler
-  **Reaction products (glue/matrix)** = matrix binding everything
-  Key exam line: **Set amalgam = unreacted alloy particles embedded in a mercury-containing matrix.**

### Phase Hierarchy (Rocks and Glue)

| Phase Name | Symbol | Formula | Role | Key Properties |
| ---| ---| ---| ---| ---|
| **Gamma** | **** | **AgSn** | Rocks (Unreacted Core) | **Strongest phase** |
| **Epsilon** | **** | **CuSn** | Copper source | Supplies Cu to kill  |
| **Gamma 1** | **** | **AgHg** | Main glue (matrix) | Primary binder |
| **Gamma 2** | **** | **SnHg** | Weak glue | **Weakest phase**; unstable, prone to corrosion |
| **Eta Prime** | **** | **CuSn** | Reinforcement | High-Copper reaction product; reduces creep |

---

## 8) Why We Need Copper (Eliminating )

-  The **Chemical Preference** Mechanism:
-  Tin (**Sn**) has a much higher chemical affinity for **Copper (Cu)** than for **Mercury (Hg)**.
-  Tin is pulled away to form ** (CuSn)**.
-  This effectively **blocks** the formation of the weak **** "bad glue."

### A) Admixed High-Copper (2-Phase Reaction)
-  **Phase 1**: Initial reaction forms **** and some ****.
-  **Phase 2**: Secondary reaction consumes **** as Tin diffuses to **Ag-Cu** particles to form ****.
-   ends up minimal/absent.

### B) Single-Composition High-Copper (1-Phase Reaction)
-  Every particle contains **Epsilon phase ()**.
-  Tin reacts with available Copper **instantly** to form ****.
-  **No  is ever formed.**

---

## 9) Manipulation (Clinical Control)

-  **Mercury/Alloy Ratio**: Generally **1:1**.
-  **More Hg**  ** weak matrix**, ** strength**, ** creep**.
-  **Spherical powders** need **less Hg** (lower surface area).

-  **Trituration (Mixing)**:
-  **Undertriturated**: Grainy, dull  **weak**, rough.
-  **Proper**: Cohesive, smooth, shiny.
-  **Overtriturated**: Soupy, sticky  **short working time**, **high contraction**.

-  **Condensation (Packing)**:
-  Goal: Adapt to walls and **express excess Hg**.
-  **Low pressure**  leaves "Mercury-rich" restoration (**weak/high creep**).
-  **Delayed condensation**  fractures growing crystals (**brittle/crumbly**).

-  **Carving & Finishing**:
-  Carve when it offers **resistance** (ringing feel).
-  **Final polishing delayed ~24h** to allow complete setting.

---

## 10) Clinical Consequences Table

| Error Type | Appearance | Result |
| ---| ---| ---|
| **Under-Trituration** | Grainy, Dull | High Porosity, Weakness, Corrosion |
| **Over-Trituration** | Soupy, Sticky | High Contraction, Sets too fast |
| **Low Condensation** | Voids, Layering | High Residual Hg, Low Strength, High Creep |
| **Moisture + Zn** | - | **Delayed Expansion**, Post-op Pain |

---

## 11) Tarnish vs Corrosion

-  **Tarnish**: Surface discoloration (**Ag sulfide**); usually no mechanical failure.
-  **Corrosion**: Structural destruction via **Galvanic Battery Effect**.
-  **Anode (Weak)**: ** (SnHg)** is dissolved/eaten away.
-  **Self-sealing**: Corrosion products (Tin Oxide, etc.) can seal margins over time.

---

## 12) Mercury Safety

-  **Office Hygiene**:
-  Use **encapsulated systems**.
-  **High-volume suction** + **water spray** during removal.
-  Avoid **dry polishing** (vapor release).
-  Mercury allergy is **rare**; true hypersensitivity needs confirmation.
`,Uv=["Amalgam = Alloy (Ag-Sn-Cu) + Mercury (Hg).","Gamma-2 (Sn-Hg) is the weakest, most corrosion-prone phase.","High-Copper alloys eliminate Gamma-2 by forming Eta-Prime (Cu-Sn).","Trituration: Under = Grainy; Over = Sticky/Fast Set.","Zinc + Moisture = Delayed Expansion (H2 gas) causing pain.","Creep defined as time-dependent deformation under stress.","Corrosion products provide a 'self-sealing' ability."],LT=[{id:"am_mcq_1",question:"Dental amalgam is best defined as:",options:["Pure mercury used as a filling","An alloy that contains mercury","An alloy of only silver and tin","A resin-based restorative material"],correctAnswerIndex:1,explanation:"Amalgam = an alloy containing mercury ."},{id:"am_mcq_2",question:"Amalgamation means:",options:["Cutting alloy ingot into particles","Chemical reaction of Hg with metals/alloys to form amalgam","Carving anatomy after condensation","Polishing after 24 hours"],correctAnswerIndex:1,explanation:"Amalgamation is the reaction process ."},{id:"am_mcq_3",question:"Trituration means:",options:["Chemical setting only","Mechanical mixing of alloy powder + mercury in a triturator","Expressing mercury during condensation","Corrosion of  "],correctAnswerIndex:1,explanation:"Trituration = physical mixing in an amalgamator."},{id:"am_mcq_3_1",question:`A triturated amalgam mix comes out grainy and dull and later produces a weak, porous restoration. The operator suspects the main objective of trituration was not achieved.
The PRIMARY purpose of trituration is to:`,options:["Express excess mercury so the final restoration contains <40% Hg","Disrupt the oxide layer and uniformly wet alloy particles so mercury can diffuse/react evenly, creating a cohesive plastic mass","Produce immediate hardening by completing all   formation inside the capsule","Prevent   formation by converting tin directly into  before condensation"],correctAnswerIndex:1,explanation:"Triturations main job is to break/disrupt the oxide film on alloy particles and thoroughly wet them with mercury, so Hg can diffuse in and metals can dissolve out evenly. That gives a cohesive, plastic, packable mass and a uniform reaction."},{id:"am_mcq_4",question:"Creep is:",options:["Instant elastic strain","Time-dependent plastic deformation under stress","Moisture expansion due to Zn","Surface discoloration only"],correctAnswerIndex:1,explanation:"Creep = slow flow under load."},{id:"am_mcq_5",question:"Marginal breakdown is:",options:["Only tarnish on surface","gap formation","Polymerization shrinkage","Hygroscopic expansion"],correctAnswerIndex:1,explanation:"Margins fracture/ditch  gaps."},{id:"am_mcq_6",question:"A patient has a 15-year-old conventional (low-copper) amalgam on a mandibular molar. The restoration shows a raised flash at the margin with a surrounding ditch, and the explorer catches in the defect. The area has become a plaque trap and a small recurrent lesion is suspected. This marginal failure pattern is MOST primarily due to which material property?",options:["Tarnish","Corrosion resistance","Delayed expansion","Creep"],correctAnswerIndex:3,explanation:"Creep is the time-dependent deformation that causes marginal flash and subsequent fracture/ditching."},{id:"am_mcq_14",question:"Low-copper alloys usually contain copper:",options:["0%","~16%","1230%",">60%"],correctAnswerIndex:1,explanation:"Conventional = low Cu ."},{id:"am_mcq_15",question:"High-copper alloys are defined as:",options:["Cu < 1%","Cu 15%","Cu > ~6% (often 1230%)","Cu > 80%"],correctAnswerIndex:2,explanation:"High-copper = >6% Cu ."},{id:"am_mcq_16",question:" (gamma) phase is:",options:["Ag  Hg ","Sn    Hg","Ag  Sn (unreacted core)","Cu  Sn "],correctAnswerIndex:2,explanation:" = Ag  Sn rocks."},{id:"am_mcq_17",question:"  phase is:",options:["Ag  Hg  (matrix)","Sn    Hg (weak)","Ag  Sn (core)","Cu  Sn (epsilon)"],correctAnswerIndex:0,explanation:"  = main glue matrix ."},{id:"am_mcq_18",question:"  phase is:",options:["Ag  Hg ","Sn    Hg (weak/corrosion-prone)","Cu  Sn ","Cu  Sn"],correctAnswerIndex:1,explanation:"  = bad glue ."},{id:"am_mcq_19",question:" (eta-prime) phase is:",options:["Cu  Sn ","Ag  Sn","Ag  Hg ","Sn    Hg"],correctAnswerIndex:0,explanation:" = Cu  Sn  (good)."},{id:"am_mcq_20",question:" (epsilon) phase is:",options:["Cu  Sn","Cu  Sn ","Ag  Hg ","Sn    Hg"],correctAnswerIndex:0,explanation:" = Cu  Sn copper source (inside particles). Setting reactions (low-copper vs high-copper)"}],OT=[{id:"am_mcq_21",question:"Low-copper setting produces:",options:[" only","  +   + unreacted "," only","No reaction products"],correctAnswerIndex:1,explanation:"Low-copper    +   + cores ."},{id:"am_mcq_22",question:"The microstructure of set amalgam is best described as:",options:["Pure   with no particles","Unreacted cores embedded in reacted matrix","Only copper-tin crystals","Only mercury remaining"],correctAnswerIndex:1,explanation:"Amalgam = composite (rocks in glue)."},{id:"am_mcq_23",question:"Why is   called the bad phase?",options:["It is the strongest phase","It is weak and most corrosion-prone","It improves proximal contacts","It eliminates creep"],correctAnswerIndex:1,explanation:"   corrosion + weakness + marginal breakdown ."},{id:"am_mcq_34",question:"The plastic consistency right after mixing is because:",options:["No reaction occurs","Liquid Hg remains while precipitation is forming","All Hg is already consumed","The matrix band provides plasticity"],correctAnswerIndex:1,explanation:"Liquid Hg + ongoing reaction  packable mass."},{id:"am_mcq_35",question:"The primary matrix that binds the structure is:",options:[""," "," ",""],correctAnswerIndex:1,explanation:"  = primary matrix ."},{id:"am_mcq_36",question:"Which microstructural phase is the strongest component of a set dental amalgam?",options:["  (Sn    Hg)","  (Ag  Hg  )"," (Ag  Sn, unreacted alloy core)"," (Cu  Sn  )"],correctAnswerIndex:2,explanation:" (Ag  Sn) Reasoning: The unreacted  (Ag  Sn) cores are the strongest rock-like component;   is the weakest, while   is the main matrix and  is reinforcing but not the primary strongest phase overall."},{id:"am_mcq_37",question:"Silver (Ag) generally:",options:["Decreases strength","Increases strength and corrosion resistance","Causes delayed expansion","Eliminates  "],correctAnswerIndex:1,explanation:"Ag   strength,  corrosion resistance."},{id:"am_mcq_38",question:"Tin (Sn) tends to:",options:["Increase strength and decrease creep","Decrease strength and increase creep/corrosion","Eliminate  ","Prevent corrosion entirely"],correctAnswerIndex:1,explanation:"Sn   creep/corrosion,  strength (but improves workability)."},{id:"am_mcq_39",question:"Copper (Cu) in dental amalgam mainly makes the amalgam:",options:["Weaker and more likely to bend ( creep)","Stronger and less likely to deform ( creep)","Softer so it carves easier but breaks more","More likely to expand days later in every case"],correctAnswerIndex:1,explanation:"Copper improves mechanical performance:  strength and  creep (less deformation)."},{id:"am_mcq_40",question:"Zinc (Zn) is primarily a:",options:["Oxygen scavenger","Matrix phase+gamma 2 reducer","Corrosion product","Filler only"],correctAnswerIndex:0,explanation:"Zn reduces oxide formation during melting."},{id:"am_mcq_41",question:`A 45-year-old with long-standing GERD comes for a routine check. Several mandibular molars have old amalgam restorations that look standing proud (raised above the surrounding tooth). The restorations are intact and the patient has had no recent dental treatment.
What is the MOST likely cause of this standing proud appearance?`,options:["Delayed expansion of amalgam from moisture contamination during placement","Creep (time-dependent flow) of amalgam under occlusal load","Chemical erosion of surrounding enamel/dentin, making the tooth wear away around the restoration","Galvanic action physically lifting the restoration"],correctAnswerIndex:2,explanation:"Chemical erosion/loss of tooth structure around the restoration (GERD-related acid wear) makes the amalgam appear elevated."},{id:"am_mcq_42",question:"Mercury/alloy ratio must be:",options:["Always maximal to improve strength","Enough for plastic mass, but low enough to avoid weak matrix excess","Zero in spherical alloys","Increased after trituration if mix is dry"],correctAnswerIndex:1,explanation:"Balance plasticity vs final properties."},{id:"am_mcq_43",question:"Adding mercury after trituration is:",options:["Recommended","Contraindicated","Required for spherical alloys","Needed to reduce creep"],correctAnswerIndex:1,explanation:"Post-addition of Hg is contraindicated ."},{id:"am_mcq_44",question:"Undertitrated mix looks:",options:["Grainy, dull, crumbly","Smooth rounded shiny mass","Soupy sticky very shiny","Black tarnished"],correctAnswerIndex:0,explanation:"Undertriturated = grainy/dull ."},{id:"am_mcq_45",question:"Properly triturated mix looks:",options:["Dull and sandy","Smooth, cohesive, rounded, shiny","Watery and flat","Powdery only"],correctAnswerIndex:1,explanation:"Proper mix = cohesive shiny mass."},{id:"am_mcq_46",question:"Overtriturated mix tends to be:",options:["Grainy and stiff","Very shiny, mushy, sticky, shorter working time","Impossible to carve at all","Always expands severely"],correctAnswerIndex:1,explanation:"Overtriturated = soupy/sticky , sets faster."},{id:"am_mcq_47",question:`During placement of a Class II amalgam, the operator uses heavy, well-directed condensation in small increments and removes the mushy mercury-rich material that rises to the surface after each increment.
The PRIMARY purpose of this condensation technique is to:`,options:["Increase the   matrix content so the restoration becomes more plastic and easier to carve","Improve adaptation and density by reducing voids and residual mercury, thereby improving strength and lowering creep","Promote delayed expansion by trapping moisture and hydrogen gas within the restoration","Accelerate tarnish formation so microleakage seals immediately"],correctAnswerIndex:1,explanation:"Condensation aims to pack amalgam densely, adapt to cavity walls, minimize porosity, and express excess mercury, which increases strength and reduces creep/marginal breakdown."},{id:"am_mcq_48",question:"Lathe-cut alloys generally need:",options:["Lower condensation pressure","Higher condensation pressure","No pressure","Only ultrasonic condensation"],correctAnswerIndex:1,explanation:"Lathe-cut resists condensation  needs more pressure ."},{id:"am_mcq_49",question:"A sign of good bonding between increments is:",options:["Each increment is matte and dry","Shiny surface after condensation of each increment","Overfilled cavity is avoided","Carving starts immediately"],correctAnswerIndex:1,explanation:"Shiny surface indicates enough Hg for increment bonding ."}],qT=[{id:"am_mcq_50",question:"A triturated mix should be discarded when:",options:["Its still plastic and cohesive","It loses plasticity and causes voids/layering","It is freshly mixed","It is shiny"],correctAnswerIndex:1,explanation:"Partially set mix  weak + voids ."},{id:"am_mcq_51",question:"While shaping a freshly condensed amalgam restoration, you want to start carving at the point that minimizes marginal pull-away and preserves anatomy. Which clinical sign BEST indicates the correct carving time?",options:["The surface appears highly shiny and wet, and the instrument glides with no resistance","A light explorer stroke produces a clean shaving and a distinct ringing/scraping sound, with the material resisting deformation","The matrix band can be removed easily and the amalgam still feels rubbery to a burnisher","Carving should be postponed until the next appointment (24 hours) to avoid any risk of fracture"],correctAnswerIndex:1,explanation:"Carve when it resists , not too early."},{id:"am_mcq_52",question:"Starting carving too early can cause:",options:["Better margins","Pulling material away from margins","Increased  formation","Elimination of  "],correctAnswerIndex:1,explanation:"Too plastic  margins can be pulled away."},{id:"am_mcq_53",question:"What is the BEST next step to prevent marginal damage and still achieve a smooth final restoration?",options:["Immediately polish with a dry bur using firm pressure to obtain high luster","wait 30 mins and then Burnish vigorously with heavy force to force mercury to the surface for a smoother finish","Perform gentle burnishing/smoothing now, and delay final polishing until the next visit","Re-triturate a new mix and add a thin layer of fresh amalgam over the surface to improve luster"],correctAnswerIndex:2,explanation:"Polish after adequate strength develops (often ~24h)."},{id:"am_mcq_54",question:"Dry polishing is discouraged mainly because it can:",options:["Stop corrosion products forming","Heat the surface and increase mercury vapor release","Eliminate creep","Increase proximal contact tightness"],correctAnswerIndex:1,explanation:"Heat  Hg vapor  use wet polishing."},{id:"am_mcq_55",question:"Which alloy component is most responsible for this delayed expansion phenomenon when moisture is incorporated into the mix?",options:["Silver","Copper","Zinc","Tin"],correctAnswerIndex:2,explanation:"When moisture contaminates an amalgam mix, zinc can react and generate hydrogen gas, which builds internal pressure and produces delayed expansion starting a few days after placementmaking the restoration feel high and painful.."},{id:"am_mcq_56",question:"Delayed expansion usually begins:",options:["Within minutes","Same day only","35 days after placement and may continue months","Only at 24 hours"],correctAnswerIndex:2,explanation:"Delayed expansion is days later , continues weeksmonths."},{id:"am_mcq_57",question:"Delayed expansion is caused by production of:",options:["CO ","H  gas","O ","NH "],correctAnswerIndex:1,explanation:"Zn + moisture  hydrogen gas ."},{id:"am_mcq_58",question:"Amalgam is generally:",options:["Strong in tension, weak in compression","Strong in compression, weak in tension","Equal in all directions","Strong only at 1 hour"],correctAnswerIndex:1,explanation:"Amalgam resists compression best."},{id:"am_mcq_59",question:"High early strength is an advantage because:",options:["It increases delayed expansion","It reduces risk of early fracture if patient bites soon","It increases  ","It prevents corrosion permanently"],correctAnswerIndex:1,explanation:"Early strength reduces early fracture risk."},{id:"am_mcq_60",question:`A dentist designs a cavity preparation. For amalgam, they place retentive undercuts and grooves. For composite, they keep the preparation more conservative and rely on etch + bond. For GIC, minimal retention is needed.
Why is cavity design (retentive form) a bigger concern for amalgam than for composite and GIC?`,options:["Amalgam bonds micromechanically to enamel, so it needs undercuts to protect the bond","Amalgam needs macromechanical retention","Amalgam chemically bonds to dentin, so undercuts are optional","Amalgam polymerizes and shrinks, so undercuts prevent it from pulling away"],correctAnswerIndex:1,explanation:"Amalgam doesnt adhere to tooth, so it needs macromechanical undercuts, while composite bonds micromechanically (etch+bond) and GIC bonds chemically, allowing conservative preps."},{id:"am_mcq_61",question:"Correct sequence is:",options:["Creep  bleaching  staining  caries","Creep  marginal flow/protrusion  unsupported flash  fracture  ditch","Creep  H   delayed expansion  ditch","Creep  stronger margins"],correctAnswerIndex:1,explanation:"Thats the classic marginal ditching mechanism."},{id:"am_mcq_62",question:`A dentist is choosing an amalgam for a large posterior Class II restoration where margins must last long-term.
Why do we usually choose a high-copper amalgam instead of a low-copper amalgam?`,options:["High-copper has more creep, so it flows better and seals margins","High-copper has less creep and less corrosion, so margins break down less","High-copper expands more, so it always feels high","High-copper is weaker, so it is easier to carve"],correctAnswerIndex:1,explanation:"High-copper alloys remove   (weak/corrosion-prone) by converting tin into  (Cu  Sn  )  lower creep + less corrosion + better marginal durability."},{id:"am_mcq_63",question:"Tarnish is:",options:["Bulk structural dissolution","Surface discoloration","Hydrogen expansion","Time-dependent flow"],correctAnswerIndex:1,explanation:"Tarnish is mainly surface discoloration.(often sulfides)"},{id:"am_mcq_64",question:"Corrosion causes:",options:["Only cosmetic change","Material degradation","Only improved strength","Permanent insulation against galvanism"],correctAnswerIndex:1,explanation:"Corrosion = structural destruction .Material degradation + porosity + strength loss"},{id:"am_mcq_65",question:"In low-copper amalgam, the most anodic (most attacked) phase is:",options:[" and  "," ","","Enamel"],correctAnswerIndex:1,explanation:"  is least noble , corrodes most."},{id:"am_mcq_66",question:"A beneficial effect of corrosion products is:",options:["Increased polymerization","Sealing the toothamalgam interface","Guaranteed elimination of ditching","Increased Hg vapor release"],correctAnswerIndex:1,explanation:"Corrosion products can reduce microleakage over time."},{id:"am_mcq_68",question:"While checking occlusion after placing a new posterior amalgam, you ask the patient to bite. The patient reports an instant electric shock sensation that occurs only when the teeth contact. Your supervisor tells you to check the opposing tooth and you find a metal crown. What is the MOST likely explanation?",options:["Delayed expansion from moisture contamination","Galvanic shock due to contact between dissimilar metals through saliva","Normal setting contraction causing microleakage pain","Creep of amalgam causing marginal protrusion"],correctAnswerIndex:1,explanation:"When two different metals (e.g., fresh amalgam and an opposing metal crown) touch, saliva acts as an electrolyte, completing a circuit and causing a sudden sharp electric pain."},{id:"am_mcq_69",question:`The patient returns 2 years after a posterior amalgam. You detect a small marginal ditch with an explorer, but there is no softness, no radiographic recurrent caries, and the patient is asymptomatic. You decide to monitor rather than replace immediately because amalgam margins can become more resistant to microleakage over time.
The MOST important reason small marginal discrepancies may not automatically mean contamination/recurrent caries is that amalgam develops which feature at the toothrestoration interface?`,options:["Polymerization shrinkage stresses that close the gap","A resin-based adhesive hybrid layer","Self-sealing by corrosion products","Enamel remineralizes into the metal margin forming a new enamel bridge"],correctAnswerIndex:2,explanation:"Amalgam can self-seal because tin-containing corrosion products accumulate at the interface and block microleakage, so a small ditch isnt automatically contaminate"},{id:"am_mcq_71",question:"Pain on chewing 1 day after an amalgam restoration is MOST likely due to:",options:["Delayed expansion","Hyperocclusion","H  gas pressure peak","Secondary caries"],correctAnswerIndex:1,explanation:"Delayed expansion is days later; day-1 pain = high occlusion/cracks ."},{id:"am_mcq_72",question:"Delayed expansion pain is typically:",options:["Within 10 minutes","Same day only","1012 days later","Only after 5 years"],correctAnswerIndex:2,explanation:"Delayed expansion symptoms occur days later , can be severe."},{id:"am_mcq_73",question:"A major prevention step for delayed expansion is:",options:["Increase moisture exposure","Keep field absolutely dry during condensation","Carve earlier","Use dry polishing"],correctAnswerIndex:1,explanation:"Moisture incorporation triggers the Zn reaction."},{id:"am_mcq_74",question:"Best clinical indication for choosing dental amalgam over composite is:",options:["Small Class I pit caries in a dry, well-isolated field","Class III anterior proximal lesion where esthetics matters most","Large Class II MOD restoration in a high-caries-risk patient where moisture control is poor and margins are in heavy occlusion","Any posterior cavity when the patient requests tooth-colored fillings"],correctAnswerIndex:2,explanation:"Amalgam is strongest and most reliable in large posterior stress-bearing restorations, especially when isolation is difficult and the case needs durability. ."},{id:"am_mcq_75",question:"Contraindication for amalgam:",options:["Difficult isolation","High esthetic demand","Large occlusal cavity","Need high compressive strength"],correctAnswerIndex:1,explanation:"Esthetics favors tooth-colored materials."},{id:"am_mcq_76",question:"Best practice during amalgam removal to reduce exposure is:",options:["Dry cutting without suction","Water spray + high-volume suction","Heating restoration to soften","Incinerating scrap"],correctAnswerIndex:1,explanation:"Reduces aerosol and Hg vapor."},{id:"am_mcq_77",question:"Scrap amalgam and mercury-contaminated waste should be:",options:["Heat sterilized/incinerated","Stored sealed and disposed properly","Flushed down sink","Vacuumed from carpet"],correctAnswerIndex:1,explanation:"Heat releases Hg vapor; proper sealed disposal is required.(not heated)"},{id:"am_mcq_78",question:"True hypersensitivity/allergy to amalgam is:",options:["Extremely common","Rare (<1% is often cited for contact reactions)","Guaranteed in all patients","Impossible"],correctAnswerIndex:1,explanation:"Allergic reactions are rare ."}],A3=[...LT,...OT,...qT],Fv={subject:ie.DENTAL_MATERIALS,content:`
---

## 1) What GIC is (definition + why it exists)

-  **Glass ionomer** is the generic name for materials based on the reaction of **glass powder + polyacrylic acid**.

-  It is **fluoroaluminosilicate glass + polyalkenoic acid**.

-  Developed in the **1970s** to:
  -  Improve clinical performance compared with **silicate cements**.
  -  Reduce risk of **pulp damage**.

-  **GIC is a water-based cement**.

### A) Why polyacrylic acid matters

-  The use of **polyacrylic acid** makes GIC capable of **bonding to tooth structure** (**chemical adhesion**).

-  GIC is considered superior to many cements because it is:
  -  **Adherent**
  -  **Translucent**

-  Various formulas exist depending on intended clinical application.

-  In newer formulations:
  -  Water-soluble polymers and polymerizable monomers have replaced part of the liquid content.
  -  Metal, metal-ceramic, and ceramic particles have been added to enhance mechanical properties.
  -  Products can be **chemical-cure**, **light-cure**, or **dual-cure**.

---

## 2) Advantages & disadvantages (high-yield, exam format)

### A) Advantages

-  **Adhesion & seal**
  -  Bonds to **enamel and dentin** (**inherent adhesion**).
  -  Good **marginal seal**.
  -  Minimal cavity preparation often required (because it bonds).

-  **Fluoride / anticariogenic**
  -  Significant **fluoride release**.
  -  **Fluoride recharge** possible (**fluoride reservoir**).
  -  **Anticariogenic** property.

-  **Thermal properties**
  -  Coefficient of thermal expansion similar to tooth structure.
  -  Low thermal conductivity (insulating effect).

-  **Esthetics & biology**
  -  Tooth-coloured.
  -  Biocompatible.

-  **Clinical evidence**
  -  Conventional GI: supported by **~10-year clinical studies**.

### B) Disadvantages

-  **Esthetics / surface finish**
  -  More opaque than resin/composite.
  -  Less polishable than resin/composite.
  -  Less esthetic than composite.

-  **Strength / fracture / wear**
  -  Brittle.
  -  Low tensile strength.
  -  Low fracture resistance.
  -  Poor wear resistance.

-  **Moisture sensitivity (during setting)**
  -  Water sensitive during setting phase.
  -  If not protected  surface can become white/chalky and crazed.

-  **Clinical limitations**
  -  May debond readily in difficult conditions.
  -  Technique sensitive (needs good moisture control + surface protection).
  -  Poor longevity in xerostomic patients.

---

## 3) Clinical uses (where GIC is used)

### A) Clinical use lecture classification (Type IIX)

-  Types list:
  -  Type I: Luting
  -  Type II: Restorative
  -  Type III: Liner/Base
  -  Type IV: Pit & fissure sealant
  -  Type V: Orthodontic luting (bands/brackets)
  -  Type VI: Core build-up
  -  Type VII: High fluoride releasing
  -  Type VIII: ART (atraumatic restorative treatment)
  -  Type IX: Paediatric GIC

-  Table (quick recall):

| Type | Use |
|---|---|
| Type I | Luting |
| Type II | Restorative |
| Type III | Liner/Base |
| Type IV | Pit & fissure sealant |
| Type V | Orthodontic luting (bands/brackets) |
| Type VI | Core build-up |
| Type VII | High fluoride releasing |
| Type VIII | ART (atraumatic restorative treatment) |
| Type IX | Paediatric GIC |

-  **Type IIX classification graphic:**

![Glass Ionomer Cement Classification (Type IIX)](/assets/type_i_luting_type_ii_restorative_1.png)

### B) Type-specific notes

-  **Type I (Luting)**
  -  Crowns, bridges.
  -  Ortho bands/brackets (depending on product).

-  **Type II (Restorative)**
  -  Class III and Class V (esthetic cervical/anterior), nonhigh stress areas.
  -  Deciduous restorations in suitable situations.

-  Repair of margins / minimal cavity preparations (tunnel, conservative).

-  **Type III (Liner/Base)**
  -  Liner/base under restorations.
  -  Sandwich concept commonly taught clinically (**GIC base + composite on top**) for marginal seal/fluoride benefit (product dependent).

-  **Pit & fissure sealing (Type IV)**
  -  Flowable/low viscosity GIC forms used for pits/fissures and sealing sensitive cervical areas in some product categories.

-  **Core build-up (Type VI)**
  -  Core build-up indications exist especially for specific high-viscosity/packable systems.
  -  (Some sources note encapsulated systems improve consistency.)

---

## 4) Classification

### A) Classification (by clinical use)

-  Type I: Luting crowns, bridges, and orthodontic brackets.

-  Type IIa: Esthetic restorative cements.

-  Type IIb: Reinforced restorative cements.

-  Type III: Lining cements, base.

### B) Skinner classification

-  Type I  Luting.

-  Type II  Restorative.

-  Type III  Liner and base.

-  original (conventional) GIC: **silicate glass particles + polyacrylic acid solution**. Other variations are discussed later.

### C) Sturdevant classification (By formulation / modification style)

-  Traditional / Conventional GIC.

-  Metal-modified GIC:
  -  (a) **Cermet**
  -  (b) **Miracle Mix**

-  Light-cured GIC.

-  Hybrid (**Resin-modified GIC**).

-  Polyacid-modified resin composite (**Compomer**).

-  Note: Sturdevant here is basically telling you the family tree of GIC modifications.

---

## 5) Chemistry and setting (conventional GIC)

### A) Same chemistry across typesdifferent powder/particle size

-  Chemistry is essentially the same across types **IIII**.

-  Variations are mainly in:
  -  Powder composition.
  -  Particle size.
  -  **P/L ratio** (powder/liquid ratio).

-  Consistency varies widely among manufacturers:
  -  Low viscosity  very flowable mixes.
  -  High viscosity  packable mixes.

-  Typical particle sizes by indication:
  -  Restorative: larger particles (**~50 m**).
  -  Luting: finer particles (**~15 m**).

---

## 6) Composition (IMP)

### A) Glass (powder) composition: whats inside and why

-  The glass composition varies among manufacturers, but always includes:
  -  **Silica**
  -  **Calcia**
  -  **Alumina**
  -  **Fluoride**

-  Key concept: the **alumina : silica ratio** is critical for reactivity with polyacrylic acid.

-  To increase radiopacity, add higher atomic number metal oxides (e.g., **barium**, **strontium**).

-  It is **fluoroaluminosilicate glass**.

### B) Liquid composition (conventional vs modern) (IMP)

-  Older liquids:
  -  Aqueous polyacrylic acid solutions (**~4050%**).
  -  Problems:
    -  High viscosity.
    -  Short shelf life (gelation).

-  Current liquids (common modern approach):
  -  Copolymers of:
    -  **Itaconic acid**
    -  **Maleic acid**
    -  **Tricarboxylic acids**
  -  These improve stability/handling compared with early polyacrylic acid-only liquids.

### C) Tartaric acid (rate-controlling additive): what it does (list exactly)

-  **Tartaric acid**:
  -  Allows a wider range of glasses to be used.
  -  Improves handling.
  -  Decreases viscosity.
  -  Lengthens shelf life before gelation.
  -  Increases working time.
  -  Shortens setting time.

-  **Itaconic acid**
  -  Promotes glassliquid reactivity.
  -  Prevents gelation of polyacrylic acid liquid (improves shelf stability).

-  **Maleic acid**
  -  Stronger acid effect  helps the cement harden faster and become less moisture sensitive earlier.

-  **Tartaric acid (HIGH-YIELD)**:
  -  Controls the speed profile of setting by affecting pH and glass dissolution rate.
  -  In practice gives better handling; described as controlling pH during setting and typically increasing working time.
  -  Acts as a temporary decoy to delay hardening so you have time to mix (working time), then triggers a rapid snap set once it is used up (setting time).

---



## 7) Setting reaction (what happens after mixing powder + liquid) (IMP)

### A) Water is CRITICAL (two roles)

-  Water is not just a solvent:
  -  **1) Reaction medium**
    -  Ions released from glass need an aqueous phase to move and react.
  -  **2) Part of the set structure (maturation)**
    -  The matrix becomes a hydrated gel over time; early water imbalance disrupts the matrix formation.

-  Thats why early contamination/dehydration can destroy surface integrity.

### B) Critical role of water (exam framing)

-  Water is essential, but it must be carefully balanced:
  -  **Function:** Water hydrates the salts, allows cross-linking, and acts as the medium for cation transport.
  -  **Balance:**
    -  Too much water dilutes ions  weak, opaque restoration.
    -  Too little water  desiccation  cracking and crazing.
  -  **Types of water:**
    -  Loosely bound: easily lost to desiccation.
    -  Tightly bound: part of the hydration shell; as this increases with aging, it improves the strength and modulus of elasticity of the base.

-  **GICWhy Water is Critical (balance + types of water):**

![Critical Role of Water](/assets/critical_role_of_water_step_by_step_ion_release_cross_linking_maturation_1.png)

### C) Step-by-step (ion release  cross-linking  maturation)

-  **Step 1: Acid attack on glass surface (DECOMPOSITION)**
  -  Polyacid releases **H** that attacks the glass surface  glass dissolves at reactive sites.

-  **Step 2: Ion release (leaching) (Migration)**
  -  Glass releases ions into the aqueous medium:
    -  **Ca**, **Al**, plus **Na** and **F**

-  **Step 3: Early cross-linking (initial set) (Gelation)**
  -  **Ca** first cross-links the carboxylate groups (**COO**) on polyacrylic acid chains  forms calcium polyacrylate gel network (initial hardening).

-  **Setting Reaction Diagram:**

![Final Set Microstructure](/assets/final_set_microstructure_what_the_set_cement_is_1.png)

-  **Step 4: Post-set hardening / maturation / strengthening**
  -  Over time, **Al** contributes stronger cross-linking (more stable polysalt network), improving final properties.
  -  Over the next **~24 hours**: **Ca is replaced by Al** (maturation/strengthening).
  -  Further slow maturation: even after the first day, the material continues to mature, improving its translucency and resistance to acid attack and desiccation (drying out).
  -  **Na** and **F** do not participate in cross-linking:
    -  Some Na may replace H on carboxyl groups.
    -  F disperses within the matrix phase and remains available for release.
  -  The cross-linked phase becomes hydrated over time as it matures.
  -  The undissolved glass particles become sheathed by a silica-rich gel layer formed on their surfaces.

---

## 8) Final set microstructure (what the set cement is)

-  A set GIC consists of:
  -  Undissolved glass particles
    -  Coated with **silica gel**
  -  Embedded in an amorphous matrix of:
    -  Hydrated **calcium** and **aluminum polysalts**
    -  Containing **fluoride**

-  **GIC Setting Reaction + Final Set Microstructure:**

![Set GIC Microstructure](/assets/set_gic_microstructure_new.png)

---

## 9) Mechanism of adhesion to tooth (IMP)

-  GIC bonds to tooth mainly by **chemical interaction**, not just sticking.

### A) Surface conditioning prepares the tooth

-  A mild **polyacrylic acid conditioner**:
  -  Removes/cleans smear layer surface.
  -  Increases surface energy and wettability.
  -  Improves chemical bonding.

-  Example commonly taught: **~10% polyacrylic acid for ~10 seconds** (product protocols vary).

### B) What bonds to what?

-  Carboxylate groups (**COO**) from the cement interact with **calcium ions** in hydroxyapatite (enamel/dentin).
  -  Commonly described as **chelation / ionic bonding**.

### C) Early stage assistance: wetting + hydrogen bonding (why glossy matters clinically)

-  Freshly mixed GIC has available carboxyl groups and water; rapid intimate contact supports early adhesion phenomena (including hydrogen bonding interactions described in maturation literature) before the more stable ionic exchange develops.

-  Key exam line you can safely use:
  -  GIC bonds to teeth by ion exchange/chelation between polyacid carboxyl groups and tooth calcium, with development of an ion-rich interfacial layer.

-  Cavity illustration is not accuratejust to give an idea.

-  **GIC Chemical Adhesion to Tooth (COO chelation to Ca):**

![Chemical Adhesion](/assets/c_early_stage_assistance_wetting_hydrogen_bonding_why_glossy_matters_clinically_1.png)

---

## 10) Clinical manipulation (cementing + restorative): the do it right or it fails section

### A) Conditions required for cementing fixed prostheses (8.1)

-  For luting, these must be satisfied:
  -  Prepared tooth surface must be clean and blotted dry.
  -  Entire intaglio surface must be coated with luting cement and seated completely.
  -  Excess cement must be removed at the appropriate time.

### B) Surface preparation (conditioning)  details + purpose (8.2) (IMP)

-  Goal: sustained adhesion requires a properly prepared tooth surface.

-  Options described:
  -  Clean with pumice slurry to remove smear layer.
  -  OR condition/etch with:
    -  **Phosphoric acid 3437%**, or
    -  **Polyacrylic acid 1020%**

-  Typical time:
  -  **1020 seconds** conditioning.
  -  Then **2030 seconds** water rinse.

-  Drying:
  -  Surface should be dried but not desiccated.
  -  Must remain uncontaminated by saliva/blood.

-  If residual dentin thickness is **< 0.5 mm**:
  -  Use a **calcium hydroxide liner** (**Ca(OH)**).

-  Surface conditioning (IMP):
  -  Introduced by **McLean and Wilson (1977)** and termed surface conditioning.
  -  Purpose: mainly remove smear layer so GIC bonds to dentin, not the smear layer; improves wetting, promotes ion exchange, increases surface energy.
  -  Polyacrylic acid options mentioned:
    -  **10%**, **25%**, or **40%** solutions (examples given).
    -  Often recommended: passive **10 seconds** of **10%**, or **1015 seconds** of **1025%**.
  -  Other acids listed:
    -  **10% citric acid**
    -  **3% hydrogen peroxide**
    -  **25% tannic acid**
    -  **10% EDTA**

### C) Material preparation (mixing rules that control bonding) (8.3) (can skip)

-  Follow the manufacturers **P/L ratio**.

-  Mixing surface:
  -  Paper pad or cool, dry glass slab (retards reaction, extends working time).
  -  Slab should not be colder than the dew point.

-  Dispense just before mixing (to avoid water evaporation  changes acid/water ratio).

-  Incorporate powder rapidly:
  -  Usually half powder first (**515 s**), then remaining powder quickly.
  -  Mix by folding until a uniform, glossy appearance is achieved.

-  Mixing time limit: should not exceed **~45 s** (may be less for some products).

-  **Glossy appearance = critical:**
  -  Indicates unreacted polyacid is still present  needed for good bonding.

-  **Dull appearance = bad sign:**
  -  Indicates acid has reacted too much  fewer free carboxyl groups for bonding.

![Placement and Early Protection](/assets/8_4_placement_and_early_protection_moisture_control_imp_1.png)

### D) Placement and early protection (moisture control) (8.4) (IMP)

#### 1) Restorative placement

-  Cavity should be slightly overfilled.

-  Freshly mixed GIC is **hygroscopic** (absorbs water).

-  Immediately after placement, protect surface for **~5 minutes** using a plastic matrix:
  -  Prevents gaining/losing water during initial set.
  -  Too much water can dilute matrix-forming ions  disrupt hydrated matrix formation.

-  After matrix removal:
  -  Coat surface immediately with varnish supplied with GIC or **petrolatum**.

![Resin Modified GIC](/assets/page_16_1.png)

-  Finishing:
  -  Avoid excessive drying (dehydration  surface damage).

-  Decks effect of water on cement (very exam-friendly) (very IMP)
  -  Dehydration  fissuring/cracking as water of hydration is lost.
  -  Saliva exposure early  surface softening because vital cement-forming ions are lost.
  -  Moisture contamination sensitivity:
    -  Some sources suggest up to **24 hours**.
    -  Others recommend protection for **1030 minutes** after placement.

-  Failure pattern if not protected:
  -  Surface becomes chalky/crazed and more opaque.

-  **GIC Placement and Early Protection:**
  
  

#### 2) Luting placement

-  Apply by plastic instrument to prosthesis.

-  Excess cement can be removed:
  -  Immediately upon seating, or
  -  After the time stated by manufacturer.

-  No matrix needed for initial set.

-  After complete removal of excess:
  -  Coat margins with varnish to allow proper maturation.

---

## 11) Fluoride release (what happens after setting)

-  After setting, GIC releases fluoride in amounts comparable to silicate cement.

-  In vitro studies show potential inhibition of enamel/dentin demineralization.

-  Not all clinical studies confirm prevention of secondary caries vs other materials (e.g., composites).

---

## 12) Biological and mechanical properties (conventional GIC)

### A) Biocompatibility

-  Pulpal response to GIC is favorable and generally mild.

-  Reasons for mild response:
  -  High buffering capacity of hydroxyapatite.
  -  Large molecular weight of polyacrylic acid prevents it from entering dentinal tubules.

-  Comparative pulp reaction: **ZOE < Glass Ionomer < Zinc Phosphate**.

-  Acidity: the powder-to-liquid ratio influences the acidity of the material.

-  Deep cavities: manufacturers recommend using a **Ca(OH)** liner when the restoration is within **0.5 mm** of the dental pulp.

### B) Solubility & disintegration

-  Initial solubility: high due to the leaching of intermediate products.

-  Setting time: the complete setting reaction takes **24 hours**.

-  Protection: cement should be protected from saliva during this initial **24-hour** period.

### C) Anticariogenic properties

-  Fluoride is released from the matrix at the time of mixing.

-  Physical integrity: fluoride can be released without affecting the physical properties of the cement.

-  Release pattern:
  -  Initial release is high but declines after **3 months**.
  -  Following this decline, fluoride release continues for a long period.

-  Fluoride reservoir: GIC can take up fluoride during topical fluoride treatments and release it again, acting as a fluoride reservoir.

### D) Strength, stiffness, and toughness

-  Key comparisons:
  -  Compressive strength: similar to **zinc phosphate**.
  -  Diametral tensile: slightly higher than zinc phosphate.
  -  Modulus of elasticity: about half that of zinc phosphate  GIC is less stiff, more elastic deformation.
  -  Because it is less stiff, GIC is less desirable than zinc phosphate to support an all-ceramic crown (greater tensile stress may develop in the crown under load).

-  Fracture toughness (as listed):

| Material | Fracture toughness (Avg) |
|---|---:|
| Hybrid Composite | **~1.84** |
| Hybrid GIC (Restoration) | **1.37** |
| Resin Cement | **1.30** |
| Amalgam | **~1.29** |
| Compomer | **~1.10** |
| Hybrid GIC (Luting) | **~0.94** |
| Conventional GIC (Restoration) | **0.72** |
| High-Viscosity GIC | **~0.59** |
| Metal-Reinforced GIC (Cermet) | **0.51** |
| Conventional GIC (Luting) | **~0.32** |
| Metal-Reinforced GIC (Admixture) | **0.30** |

-  Hybrid GIC is the strongest GIC (as noted).

### E) Wear

-  Restorative GICs are more vulnerable to wear than composites in toothbrush abrasion and simulated occlusal wear tests.

---

## 13) Related cement Zinc polycarboxylate cement (keep separate so you dont mix it with GIC)

-  Added as it has the same chemical bond.

### A) Working time and viscosity (figure description in text)

-  Working time:
  -  Polycarboxylate  **2.5 min**
  -  Zinc phosphate  **5 min**

-  Relative viscosities as they set:
  -  Zinc phosphate is initially more viscous but longer seating time compared with polycarboxylate and GIC.

### B) Excess cement removal (polycarboxylate)

-  Polycarboxylate passes through a rubbery stage.

-  Do not remove excess during rubbery stage:
  -  You may pull cement from margins  voids.

-  Remove excess:
  -  Immediately after cementing, or
  -  After it becomes hard.
  -  (If removing later, coat prosthesis outer surface with a separating medium.)

### C) Control of working time (polycarboxylate)

-  Cool slab lengthens working time but can thicken polyacrylic acid (hinders mixing).

-  Refrigerating powder is useful: retards reaction without raising liquid viscosity.

-  Polycarboxylate is more viscous than similar GIC mix but becomes thinner at high shear:
  -  Clinically: rapid spatulation + fast seating lowers viscosity for complete seating.

### D) Mechanical/biological snapshot (polycarboxylate)

-  Compressive strength (lower than zinc phosphate).

-  More elastic than zinc phosphate  harder to remove after setting.

-  Acids dissolve it; low P/L ratio increases solubility.

### E) Why polycarboxylate is mentioned (and why GIC uses similar chemistry)

-  Polycarboxylate cement is important because it was one of the first cements to show true chemical adhesion to tooth.

-  What gives polycarboxylate its adhesion?
  -  Liquid is polyacrylic acid; carboxyl groups chelate calcium in enamel/dentin  chemical bond.

-  Why is that relevant to GIC?
  -  GIC also relies on polyacrylic acid carboxyl groups for bonding to tooth calciumsame core adhesion chemistry idea, but with a different powder system (ion-leachable glass) and additional benefits like fluoride release.

---

## 14) Metal-reinforced glass ionomer cements (why they exist + what they actually do)

### A) What is added

-  Metallic fillers to improve stress-bearing capacity:
  -  Alloy admixture: silver alloy powder particles mixed in  grayish, radiopaque.
  -  Cermet: silver sintered to glass particles  grayish, radiopaque.

-  Same concerns/procedures as conventional GIC apply.

### B) Fluoride release differences (as described)

-  Release decreases over time.

-  Cermet releases less fluoride because some glass is metal-coated.

-  Alloy admixture releases more because metal is not bonded to glass  more exposed glass surface for leaching.

### C) Where they are useful

-  Core buildups for cast crowns.

-  Restoratives on occlusal surfaces of primary molars.

-  Benefit: adhesion + fluoride release.

### D) Limitations (must-know)

-  Limited as an alternative to amalgam/composite for posterior restorations.

-  In vitro: weaker than resin composite cores  do not use if cement is **> 40%** of total core buildup; use pins/retention forms if needed.

-  Metallic fillers do not significantly improve fracture toughness compared with other restorative glass ionomers.

-  No improvement in clinical performance/life expectancy for Class II in deciduous teeth vs conventional GIC.

-  Practical advantage: harden rapidly  can finish sooner (useful in pedodontics).

---

## 15) High-viscosity GIC and ART (atraumatic restorative treatment)

### A) What ART is (concept)

-  Developed for regions without electricity/water infrastructure.

-  Uses hand instruments for:
  -  Opening cavity.
  -  Removing carious dentin.
  -  Mixing material.

-  GIC is the natural choice because:
  -  Releases fluoride.
  -  Bonds chemically to tooth structure.
  -  Helpful when complete caries removal is difficult due to limited facilities.

### B) Why high-viscosity versions were developed

-  Smaller glass particle sizes + higher P/L ratio.

-  Higher compressive strength.

-  Excellent packability/handling.

-  Encapsulated packaging increases consistency and acceptance.

### C) ART clinical steps (as listed)

-  Steps:
  -  1. Isolate with cotton rolls.
  -  2. Access lesion with hand instrument.
  -  3. Remove soft caries with excavator.
  -  4. Use weak acid to prepare tooth and enhance chemical bonding.
  -  5. Place high-viscosity GIC using finger pressure.

### D) Survival rates

-  Permanent teeth single-surface restorations retained:
  -  **99%** after **1 year**
  -  **88%** after **3 years**

-  Sealant retention:
  -  **90%** after **1 year**
  -  **71%** after **3 years**

-  **6.3-year** cumulative survival:
  -  ART high-viscosity GIC: **66.1%**
  -  Amalgam: **57.0%**

-  Short-term practice studies:
  -  Suitable alternative to amalgam for Class I & II in primary teeth.
  -  Conventional prep improves Class II outcomes vs ART-only.

-  Retrospective Class II high-viscosity GIC survival:
  -  **100%** at **1.5 years**
  -  **93%** at **3.5 years**
  -  **60%** at **6 years**

---

## 16) Resin-Modified Glass Ionomer Cement (Hybrid Ionomer)

### A) Definition / concept

-  Replace part of the GIC liquid with water-soluble methacrylate-based monomers  resin-modified GIC.

-  Can be chemical-cure, light-cure, or dual-cure.

-  GIC acid-base reaction occurs along with resin polymerization.
  

### B) Chemistry and setting (whats inside)

-  Liquid: water solution of:
  -  Polyacrylic acid.
  -  **HEMA**.
  -  Polyacrylic acid modified with methacrylate.

-  Powder:
  -  Fluoroaluminosilicate glass of conventional GIC.
  -  Initiators (e.g., **camphorquinone** for light curing) and/or chemical cure system.

### C) Reaction behavior

-  Acid-base begins on mixing.

-  Continues after polymerization but at a slower rate (less water, slower in solid phase).

### D) Bonding mechanism

-  Same basic chelation mechanism as conventional GIC.

-  Some speculate about hybrid layer infiltration into tubules, but:
  -  No conclusive evidence.
  -  Some studies show an indistinct/structureless layer at interface; others show no resin infiltration into etched dentin.

-  Higher bond strengths to teeth/composites reported vs conventional GIC, likely due to micromechanical interlocking to roughened surface.

### E) Drawbacks you must not forget

-  Resin polymerization causes more shrinkage than conventional GIC  can increase microleakage.

-  Lower water and carboxylic acid contents reduce wetting  more microleakage than conventional GIC.

-  **HEMA** release can cause pulpal inflammation and allergic contact dermatitis  less biocompatible than conventional GIC.

-  Temperature rise during polymerization is another drawback.

### F) Liner/base role and sandwich technique

-  Hybrid ionomer base/liner acts as intermediate bonding layer under composite:
  -  Adhesion to dentin reduces gap formation at gingival margins in dentin/cementum.
  -  Helps compensate for composite polymerization shrinkage.
  -  Reduces technique sensitivity.
  -  Provides fluoride anticariogenic effect.

-  Recommended for Class II and V composite restorations in moderate/high caries risk.

### G) For Class V (cervical) restorations + Root caries (RMGIC preferred)

-  Bonds well to dentin/cementum (ionic/chemical bond)  Class V margins often on root surface, where composite bond is more technique-sensitive.

-  More forgiving in moisture control  cervical area hard to isolate; slight moisture contamination hurts composite bonding more.

-  Low polymerization-shrinkage stress compared with composites  less chance of marginal gap at gingival margin.

-  Fluoride release  helpful because Class V areas often have higher caries risk (especially root caries).

-  Thermal expansion closer to tooth + elastic stress absorption  cervical region flexes (abfraction); RMGIC tolerates stress and mismatch better than brittle materials.

-  Good marginal seal on root + less post-op sensitivity than many alternatives in real clinical conditions.

-  Compared to conventional GIC:
  -   Higher fracture toughness, better tolerates moisture, and has lower wear.

-  Thats why its a go-to for Class V cervical lesions, especially when the gingival margin is on dentin/cementum and isolation is difficult.

### H) Compared with conventional GIC, RMGIC generally

-   Tolerates moisture better (early set)  resin polymerization gives an early set and reduces the extreme early water sensitivity.

-   Has higher fracture toughness / flexural strength  resin network improves crack resistance and toughness.

-   Shows better wear resistance than conventional GIC in many clinical situations (though it still usually wears more than composites).

### I) Water uptake and expansion (high-yield)

-  **HEMA** increases water absorption  expansion up to **~8% by volume**.

-  Linked to fracture of all-ceramic crowns in some contexts (core buildup or luting).

---

## 17) Calcium Aluminate Glass Ionomer Cements (hybrid calcium aluminate + GIC)

### A) What it is

-  Hybrid material designed for luting fixed prostheses, between calcium aluminate cement and GIC.

### B) Calcium aluminate component (hydraulic cement behavior)

-  Made by sintering high-purity **AlO + CaO** (**~1:1 molar ratio**)  monocalcium aluminate.

-  When mixed with water:
  -  Dissolves **Ca**, **Al(OH)**, **OH**.
  -  Weak acid-base reaction begins (powder base, water weak acid).
  -  At low water-to-cement ratios: immediate precipitation of hydrates  growth/hardening over time.

### C) Hybrid calcium aluminate GIC ingredients

-  Powder includes:
  -  Calcium aluminate.
  -  Polyacrylic acid.
  -  Tartaric acid.
  -  Strontium-fluoro-alumino-glass.
  -  Strontium fluoride.

-  Liquid:
  -  **~99.6% water + 0.4% additives** controlling setting.

### D) What each part contributes

-  Glass ionomer components: early properties (viscosity, setting time, strength).

-  Calcium aluminate: basic pH during curing, reduced microleakage, excellent biocompatibility, long-term stability/strength.

-  Polyacrylic acid dual function:
  -  Cross-linked by Ca from both glass and calcium aluminate.
  -  Dispersing agent for calcium aluminate.

-  Final material: composite of hydrated ceramic + cross-linked polyacrylate polymer.

-  Packaged in capsules for mechanical mixing.

### E) Reported handling/film thickness/expansion

-  Surface hydroxyapatite formation in phosphate buffer reported.

---

## 18) Compomer (polyacid-modified composite)

### A) Definition (what it is trying to combine)

-  Polyacid-modified composite made by incorporating GIC glass particles into a water-free polyacid liquid monomer with an initiator.

-  Rationale: combine fluoride release of GIC with durability of resin composite.

-  Properties are distinct from both composites and glass ionomers.

### B) Chemistry and setting

-  Usually a one-paste, light-cure restorative (also powder-liquid systems for luting exist).

-  Water-free materials contain:
  -  1. Nonreactive inorganic fillers.
  -  2. Reactive silicate glass particles.
  -  3. Sodium fluoride.
  -  4. Polyacid-modified monomers + photoactivators.

-  Setting:
  -  Photopolymerization of acidic monomer starts the set.
  -  Intraoral water uptake starts a slow acid-base reaction  fluoride release.

-  Moisture-sensitive  packaged to prevent moisture absorption.

### C) Bonding mechanism

-  Restorative compomers need a dentin-bonding agent prior to placement (they lack water, so they are not self-adhesive like GIC/hybrid ionomer).

-  Powder-liquid compomer luting systems can be self-adhesive because water in liquid makes mix acidic (like hybrid ionomers).

### D) Clinical manipulation / uses

-  Mainly in low-stress areas (Class III and V) or as alternative to GIC/composite.

-  Tooth should be etched before bonding agent + compomer.

-  Finished like resin composites.

### E) Water uptake effects (important)

-  Water absorption up to **~3.5% by weight** helps complete acid-base reaction and fluoride release.

-  Compomers release less fluoride than conventional GICs and hybrid ionomers.

-  Strength changes on storage:
  -  Compressive/flexural strength can decrease in saline (linked to water uptake + acid-base reaction).
  -  Surface hardness and microtensile strength may be unchanged.

-  Silane-treated reactive glass reduces water uptake and increases strength.

### F) Clinical performance notes

-  Not all compomers perform acceptably in Class V; color stability can be problematic (refractive index changes + staining).

-  24-month study: similar to composite sealants except marginal integrity.

-  Performs as well as resin composites for Class I & II restorations and acceptable for orthodontic band luting.

---

## 19) Resin cements

-  Resin cements polymerize by:
  -  Chemical cure.
  -  Light cure.
  -  Dual cure (majority today).

-  Light-cure resin cement used for cementing porcelain veneers due to polymerization concerns under thick prostheses.

-  Some systems aim to eliminate etch/prime/bond steps using acidic side-chain monomers (e.g., phosphoric acid groups) that bond to calcium  self-adhesive resin cement.

-  Clinical manipulation:
  -  Monomer component is irritating to pulp.
  -  If remaining dentin **< 0.5 mm**  liner protection is important.
  -  Chemically cured resin cements: mixed **2030 s**; slow activation gives extended working time; strength increases as cure completes.
  -  Gel stage can appear around **90 s** after mixing in some systems; excess removal at gel stage is typical (as described).

---

## 20) CRITICAL QUESTIONS

### A) Q1) Water plays two critical roles in the setting of conventional GIC. What are they and how do they work?

-  Answer:
  -  **1) Reaction medium:** water allows the acid to attack glass and ions (**Ca/Al/etc.**) to dissolve, move, and react so the polysalt matrix can form.
  -  **2) Hydration/maturation:** the cross-linked matrix becomes hydrated over time as the cement matures; losing this water (dehydration) can cause cracking/crazing, while early contamination can wash out cement-forming ions and soften the surface.

### B) Q2) Under what condition might zinc phosphate cement be preferred over GIC for luting of ceramic crowns?

-  Answer:
  -  When higher stiffness/support is needed: GIC has about half the modulus of zinc phosphate, so it is less stiff and can allow more elastic deformation.
  -  Under occlusal load this can increase tensile stresses in an all-ceramic crown; therefore zinc phosphate may be preferred for better rigid support.

### C) Q3) For ART, why is a high-viscosity GIC the most appropriate material?

-  Answer:
  -  Because ART relies on hand instruments and minimal infrastructure, the ideal material must be:
    -  Chemically adhesive to tooth structure.
    -  Fluoride releasing (anticariogenic support).
    -  Workable in hand-mixed/field conditions.
  -  High-viscosity GICs also have improved packability and higher strength due to smaller particle sizes and higher P/L ratio.

### D) Q4) What are the advantages of incorporating polymerizing resin in GICs (resin-modified/hybrid ionomers)?

-  Answer:
  -  Enables chemical/light/dual cure, improving early set control.
  -  Can improve early strength, extend working time (especially with some formulations), and increase translucency.
  -  Often shows higher tensile strength and improved bonding/interlocking on conditioned surfaces.
  -  But must be balanced against:
    -  Polymerization shrinkage.
    -  Increased microleakage risk.
    -  Water uptake/expansion.
    -  HEMA biocompatibility concerns.

### E) Q5) How does the compomer differ from resin-based composite?

-  Answer:
  -  Compomer is a polyacid-modified composite: includes reactive GIC glass and polyacid-modified monomers.
  -  Sets first by photopolymerization, then undergoes a slow acid-base reaction after water uptake, leading to fluoride release.
  -  Restorative compomers require a dentin bonding agent (not self-adhesive like conventional GIC).

### F) Q6) What is the setting mechanism of calcium aluminate GIC?

-  Answer:
  -  Calcium aluminate part behaves like a hydraulic cement: dissolves ions in water, then hydrates precipitate and harden over time.
  -  Simultaneously, the GIC portion undergoes the typical acid-base reaction, with polyacrylic acid cross-linking by Ca ions leached from both the glass and calcium aluminate, producing a composite of hydrated ceramic + cross-linked polyacrylate polymer.
  `,keyPoints:["Composition: Fluoroaluminosilicate glass + Polyacrylic acid (Al:Si ratio critical).","Setting: Acid-base reaction. Ca (initial set) replaced by Al (maturation).","Adhesion: Chemical chelation to Calcium in enamel/dentin.","Water's Role: Critical for reaction & stability (Loss=Crazing, Excess=Weakness).","Modifications: RMGIC (Dual cure, HEMA), Compomer (Needs bond), ART (High viscosity).","Clinical: Condition with 10% Polyacrylic acid. Protect with varnish immediately."]},C3=`
# GIC Notes

---

## 1) What GIC is

-  **Glass ionomer cement (GIC)** = reaction of **fluoroaluminosilicate glass powder + polyalkenoic acid (polyacrylic acid) + water**.

-  Developed to improve older materials (silicate) and reduce pulpal irritation; a **water-based cement**.

-  Core feature: **chemical adhesion** to tooth structure (not just retention by shape).

---

## 2) Composition (whats inside)

-  **Powder (glass)** contains:

  -  **Silica**, **alumina**, **calcia**, **fluoride** (fluoroaluminosilicate glass).

  -  Radiopacifiers may be added: **barium / strontium** compounds.

-  **Liquid (polyacid + water)**

  -  Older: concentrated **polyacrylic acid (~4050%)** (more viscous, shorter shelf life).

  -  Modern: polyacid systems often include copolymers (e.g., **itaconic/maleic**-type components) to improve stability/handling.

-  **Tartaric acid** (high-yield additive)

  -  Improves handling; decreases viscosity.

  -  ** working time** but ** setting time** (gives a better working window and then faster set).

---

## 3) Setting reaction (Conventional GIC) (must know)

-  **Acid attack on glass**  glass surface dissolves  releases ions:

  -  **Ca**, **Al**, plus **F** (and others depending on glass).

-  **Initial set**:

  -  **Ca** cross-links polyacid carboxyl groups (**COO**)  early gel network.

-  **Maturation (post-set strengthening)**:

  -  Over time **Al** forms stronger cross-links  stronger polysalt matrix.

  -  Strength and stability improve over **~24 hours and beyond** (maturation continues).

-  **Final set structure**:

  -  **Unreacted glass particles** remain as fillers.

  -  Particles are often coated by a **silica-rich gel**.

  -  Matrix is a **hydrated Ca/Al polysalt** containing fluoride.

-  **Water is critical (2 roles)**

  -  **Reaction medium** for ion transport and acid-base reaction.

  -  **Hydration/maturation** component of the set matrix (early water gain/loss damages surface).

---

## 4) Adhesion to tooth (why it bonds)

-  Main bonding is **chemical/ionic**:

  -  Cement **carboxylate groups (COO)** interact with **calcium in hydroxyapatite**.

-  **Conditioning** (typical concept):

  -  Mild polyacrylic-acid conditioning removes/weakens smear layer and improves wetting, so bonding occurs to dentin/enamel rather than to the smear layer.

![Chemical Adhesion](/assets/c_early_stage_assistance_wetting_hydrogen_bonding_why_glossy_matters_clinically_1.png)

---

## 5) Advantages vs Disadvantages (exam style)

### A) Advantages

-  **Chemical adhesion** to enamel/dentin  good seal and less aggressive preparation.

-  **Fluoride release + recharge**  anticariogenic + fluoride reservoir.

-  **Thermal expansion similar to tooth** and low thermal conductivity.

-  **Biocompatible** and tooth-colored.

### B) Disadvantages

-  **Brittle**, low tensile strength, lower fracture toughness vs composite.

-  **Wear resistance is lower** than composites  limits heavy occlusal use.

-  **Moisture sensitive early**:

  -  Early water contamination  surface softening / ion loss.

  -  Early dehydration  cracking/crazing.

  -  Needs surface protection during early set/maturation.

---

## 6) Clinical uses (Type IIX quick map)

![GIC Classification](/assets/type_i_luting_type_ii_restorative_1.png)

-  **Type I**: luting.

-  **Type II**: restorative.

-  **Type III**: liner/base.

-  **Type IV**: pit & fissure sealant.

-  **Type V**: orthodontic luting.

-  **Type VI**: core build-up.

-  **Type VII**: high fluoride release.

-  **Type VIII**: ART.

-  **Type IX**: paediatric.

---

## 7) ART (why GIC fits)

-  **ART (Atraumatic Restorative Treatment)** uses hand instruments and minimal infrastructure.

-  GIC is suitable because it:

  -  Bonds chemically to tooth.

  -  Releases fluoride.

  -  Works in conservative preparations.

-  **High-viscosity GIC**: smaller particles + higher P/L ratio  improved handling/packability and higher strength for ART-style placement.

---

## 8) Other Related Materials (more detail than before)

### A) Metal-modified GIC (why it exists + what it is)

-  Purpose: improve stress-bearing capacity and radiopacity compared with conventional GIC.

-  Two classic forms:

  -  **Alloy admixture**: silver alloy powder mixed into GIC  gray, radiopaque.

  -  **Cermet**: silver is sintered onto glass particles  gray, radiopaque.

-  Still retains: chemical adhesion and some fluoride release.

-  Limitations:

  -  Metallic fillers do **not** reliably convert it into an amalgam-like posterior material.

  -  Clinical performance improvements can be limited; used selectively (e.g., some core build-ups, some primary tooth indications).

---

### B) Compomer (polyacid-modified composite)  what it actually is

-  A hybrid concept between **composite resin** and **GIC**, but it behaves closer to resin.

-  Composition idea:

  -  Resin-based matrix that contains **reactive glass fillers** capable of acid-base reaction later.

  -  Initially **water-free** at placement.

-  Setting mechanism (two stages):

  -  **1) Light-cured polymerization first** (like composite).

  -  **2) Later water uptake** in the mouth triggers a **slow acid-base reaction**  fluoride release.

-  Bonding:

  -  Restorative compomers usually need a **bonding agent** (not truly self-adhesive like conventional GIC).

-  Fluoride:

  -  Releases fluoride, but typically **less than conventional GIC/RMGIC**.

---

### C) Resin-Modified Glass Ionomer Cement (RMGIC)

-  **Definition**: Hybrid ionomer = conventional GIC + water-soluble methacrylate resin (often HEMA).

-  **Setting**: Sets by two reactions together: acidbase + resin polymerization; acidbase continues later but slower.

-  **Composition**:
  -  **Liquid**: polyacrylic acid + HEMA + methacrylated polyacid (water-based).
  -  **Powder**: fluoroaluminosilicate glass + initiators (light/chemical/dual).

-  **Bonding**: Bonds mainly by chemical chelation to tooth calcium + some micromechanical interlocking (true hybrid layer not consistent).

-  **Pros vs conventional GIC**:
  -  Earlier set + better early moisture tolerance.
  -  Higher toughness/flexural strength.
  -  Better wear (still less than composite).

-  **Cons**:
  -  Resin shrinkage + reduced wetting  more microleakage risk than conventional GIC.
  -  HEMA release  pulpal irritation/allergy.
  -  Polymerization heat.
  -  Water uptake  hygroscopic expansion (up to ~8% vol)  possible risk under all-ceramic crowns.

-  **Clinical Use**:
  -  **Sandwich technique**: base/liner to seal dentin/cementum margins + reduce composite shrinkage gaps + add fluoride.
  -  **Class V & Root Caries**: Preferred because it bonds to dentin/cementum, tolerates moisture better, lower shrinkage stress than composite, fluoride release, better marginal seal/less sensitivity.

---

### D) Calcium aluminateGIC hybrid (what it is, why its different)

-  Hybrid between:

  -  A **calcium aluminate hydraulic cement** component (hydrates in water).

  -  A **glass ionomer** acid-base component.

-  Why its made:

  -  Intended for luting with improved stability/biocompatibility in some systems.

-  Core setting concept:

  -  Calcium aluminate hydrates form as it reacts with water.

  -  Polyacrylic acid is cross-linked by Ca released from both the glass and calcium aluminate.

  -  Final material is a composite of **hydrated ceramic + cross-linked polyacrylate matrix**.

---

### D) Resin cements (only the essentials to not confuse with GIC)

-  Polymerization systems:

  -  **Chemical-cure**, **light-cure**, **dual-cure**.

-  Self-adhesive resin cements:

  -  Use acidic functional monomers that can bond to calcium (reduce etch/prime steps in some systems).

-  Practical:

  -  Monomers can be irritating; deep dentin needs protection (liner when very thin dentin remains).

`,Gv={subject:ie.DENTAL_MATERIALS,content:C3,keyPoints:["Composition: Fluoroaluminosilicate glass + Polyacrylic acid (Al:Si ratio critical).","Setting: Acid-base reaction. Ca (initial set) replaced by Al (maturation).","Adhesion: Chemical chelation to Calcium in enamel/dentin.","Water's Role: Critical for reaction & stability (Loss=Crazing, Excess=Weakness).","Modifications: RMGIC (Dual cure, HEMA), Compomer (Needs bond), ART (High viscosity).","Clinical: Condition with 10% Polyacrylic acid. Protect with varnish immediately."]},BT=[{id:"gic_mcq_1",question:"Conventional glass ionomer cement mainly sets by",options:["Acid base reaction in water based system","Free radical curing of resin monomers","Thermal fusion of glass powder particles","Chelation only without matrix formation"],correctAnswerIndex:0,explanation:"Conventional GIC hardens through an acid base reaction between polyacid and reactive glass. Ions released from the glass cross link the polyacid chains to form a polysalt matrix."},{id:"gic_mcq_2",question:"The main powder component in conventional GIC is",options:["Fluoroaluminosilicate reactive glass powder","Zinc oxide powder with aromatic oil additive","Calcium hydroxide with fillers and pigments","Silica filler with silane coupling coating"],correctAnswerIndex:0,explanation:"The reactive glass is designed to release calcium and aluminum ions during the acid attack. Those ions are essential for early set and later maturation."},{id:"gic_mcq_3",question:"The main liquid component in conventional GIC is",options:["Polyalkenoic acid in an aqueous solution","Phosphoric acid with buffering stabilizers","Eugenol containing oil based accelerator paste","Methacrylate monomers with photo initiators"],correctAnswerIndex:0,explanation:"The liquid provides polyacid chains with carboxyl groups needed for cross linking and tooth bonding. Modern systems often use copolymers to improve shelf stability."},{id:"gic_mcq_4",question:"The ion most responsible for early gelation in GIC is",options:["Calcium ions forming early ionic cross links","Aluminum ions forming immediate strong links","Fluoride ions producing early crystal growth","Sodium ions acting as main cross link source"],correctAnswerIndex:0,explanation:"Calcium is released earlier and creates the first gel network. Aluminum contributes more to later strengthening and maturation."},{id:"gic_mcq_5",question:"The primary bonding of GIC to tooth structure occurs by",options:["Ionic interaction with calcium in tooth mineral","Resin tag formation within opened tubules","Covalent linkage to exposed collagen network","Weak surface attraction without true adhesion"],correctAnswerIndex:0,explanation:"Carboxyl groups in the polyacid chelate calcium in hydroxyapatite. This creates chemical adhesion to enamel and dentin."},{id:"gic_mcq_6",question:"The anticariogenic effect of GIC is mainly linked to release of",options:["Fluoride ions from the set cement matrix","Calcium ions that harden enamel prisms","Aluminum ions that sterilize dentin tubules","Sodium ions that buffer plaque acidity"],correctAnswerIndex:0,explanation:"Fluoride release can inhibit demineralization and support remineralization. GIC can also take up fluoride later and release it again."},{id:"gic_mcq_7",question:"A key limitation of conventional restorative GIC is",options:["Brittleness with low fracture resistance","High tensile strength with tough behavior","Superior wear resistance on occlusal load","Excellent polish and high translucency"],correctAnswerIndex:0,explanation:"Conventional GIC is relatively brittle and weaker in tension. That is why it performs poorly in high stress occlusal areas."},{id:"gic_mcq_8",question:"Before placing conventional GIC, a common surface conditioner is",options:["Polyacrylic acid used briefly then rinsed","Concentrated phosphoric acid for long etch","Hydrofluoric acid used to roughen dentin","Silane primer applied to dentin surface"],correctAnswerIndex:0,explanation:"Mild polyacrylic acid cleans the surface and removes smear layer without aggressive demineralization. This improves wetting and chemical bonding."},{id:"gic_mcq_9",question:"After conditioning for GIC, the tooth surface should be",options:["Blotted dry, moist surface not overdried","Air dried until chalky white appearance","Left with visible water pooling on dentin","Coated with resin bonding agent routinely"],correctAnswerIndex:0,explanation:"Overdrying can reduce proper interaction and may pull water from the cement. A lightly moist surface supports chemical interaction and maturation."},{id:"gic_mcq_10",question:"Freshly placed conventional GIC should be protected early mainly to",options:["Prevent water gain or water loss during set","Prevent oxygen inhibition at surface layer","Prevent rapid light cure temperature rise","Prevent silane hydrolysis from contamination"],correctAnswerIndex:0,explanation:"Early water imbalance damages the developing matrix. Too much water causes washout and weakness, too little causes cracking and chalky surface."},{id:"gic_mcq_11",question:"The complete setting and maturation of conventional GIC is best described as",options:["Continues for about a day with maturation","Completed in minutes after initial gelation","Finished immediately after first surface hard","Stops once the restoration feels hard"],correctAnswerIndex:0,explanation:"GIC gains strength over time as the matrix matures and cross linking becomes more stable. The first hard feel is not the end of the reaction."},{id:"gic_mcq_12",question:"Type I GIC is most associated with",options:["Luting crowns and fixed prosthesis work","Posterior bulk restorations under heavy load","Enamel etch replacement for orthodontics","Composite repair bonding on ceramic surface"],correctAnswerIndex:0,explanation:"Type I is formulated as a luting cement with finer particles and flow suitable for seating restorations."},{id:"gic_mcq_13",question:"Type II GIC is most associated with",options:["Restorative fillings such as cervical lesions","Luting thin crowns with very low film thickness","Etching enamel to create micro retention pattern","Casting investment expansion control in lab"],correctAnswerIndex:0,explanation:"Type II is restorative grade GIC. It is used where chemical adhesion and fluoride are useful, especially in lower stress sites."},{id:"gic_mcq_14",question:"The best description of fluoride behavior of GIC is",options:["Initial burst then long term low level release","No meaningful release after the first hour","Release occurs only if resin is not present","Release causes major loss of cement strength"],correctAnswerIndex:0,explanation:"Fluoride release is highest early then declines, but continues for a long period. GIC can also be recharged with topical fluoride."},{id:"gic_mcq_15",question:"In very deep cavities close to pulp, the commonly advised liner is",options:["Calcium hydroxide as a protective base liner","Phosphoric acid as a deep conditioning step","Silane primer to improve cement coupling","Eugenol liner to strengthen the GIC matrix"],correctAnswerIndex:0,explanation:"Calcium hydroxide can protect the pulp when remaining dentin is very thin. It reduces risk of pulpal irritation from early acidity."}],HT=[{id:"gic_mcq_16",question:"Tartaric acid in conventional GIC is best known for",options:["Increasing working time while shortening set","Shortening working time while delaying set","Eliminating moisture sensitivity completely","Preventing fluoride release from cement matrix"],correctAnswerIndex:0,explanation:"Tartaric acid improves handling by giving more working time and then a faster snap set. It also helps reduce viscosity and improves consistency."},{id:"gic_mcq_17",question:"Water in GIC is best described as",options:["Reaction medium and part of set structure","Temporary solvent that must evaporate fully","Only needed for fluoride release, not setting","Only needed in powder, not in the liquid"],correctAnswerIndex:0,explanation:"Water allows ion transport during setting and later becomes part of the hydrated matrix. Early imbalance disrupts formation of the set structure."},{id:"gic_mcq_18",question:"Early saliva contamination of conventional GIC most likely causes",options:["Surface softening due to washout of ions","Higher strength due to extra hydration water","Deeper bonding due to increased tubule opening","Faster set due to dilution of polyacid chains"],correctAnswerIndex:0,explanation:"Saliva can wash out essential ions and disrupt early matrix formation, producing a weak, softened surface and poor margins."},{id:"gic_mcq_19",question:"Early dehydration of conventional GIC most likely causes",options:["Surface crazing and cracking with opacity","Improved strength due to tighter ion packing","Increased working time due to slowed reaction","Increased fluoride recharge due to open pores"],correctAnswerIndex:0,explanation:"Loss of water prevents proper hydration of the matrix and can cause cracks and chalky appearance. This reduces wear resistance and seal quality."},{id:"gic_mcq_20",question:"Restorative GIC particle size compared with luting GIC is typically",options:["Larger for restorative, finer for luting","Finer for restorative, larger for luting","Same size, only powder liquid ratio differs","Same size, only color additives are changed"],correctAnswerIndex:0,explanation:"Restorative needs packability and bulk strength, so larger particles are common. Luting needs thin film and flow, so finer particles are used."},{id:"gic_mcq_21",question:"Increasing powder to liquid ratio generally results in",options:["Higher viscosity and higher compressive strength","Lower viscosity and improved marginal wetting","Lower strength and higher long term solubility","Longer working time and delayed final set"],correctAnswerIndex:0,explanation:"More powder means more glass and more ions to form a denser matrix. It improves strength but reduces working time and increases mix stiffness."},{id:"gic_mcq_22",question:"A glossy mix appearance is clinically valued because it suggests",options:["More free carboxyl groups remain for bonding","Full completion of set reaction has occurred","Fluoride release is completed and stabilized","Maximum strength has already been achieved"],correctAnswerIndex:0,explanation:"A glossy surface indicates the mix is still reactive and has free polyacid groups that can bond to tooth mineral. A dull mix often indicates over reaction before placement."},{id:"gic_mcq_23",question:"A practical reason to avoid long slow mixing of GIC is",options:["Reaction progresses, reducing adaptation and bond","Resin polymerization begins, shrinking the cement","Tubules become occluded, preventing wetting","Fluoride becomes trapped, preventing anticaries effect"],correctAnswerIndex:0,explanation:"Prolonged mixing advances the acid base reaction early, reducing working time and leaving less ability for the cement to wet and bond effectively."},{id:"gic_mcq_24",question:"Immediate surface protection after placement is mainly to",options:["Control early water exchange at the surface","Prevent oxygen inhibition of radical curing","Prevent light activation from curing too fast","Prevent saliva from etching enamel prisms"],correctAnswerIndex:0,explanation:"The surface is the most vulnerable area early. Protection prevents washout and dehydration that damage marginal seal and surface integrity."},{id:"gic_mcq_25",question:"Initial solubility of GIC is relatively higher because",options:["Intermediate products can leach early in set","Resin phase dissolves and leaves voids rapidly","Glass fully dissolves into saliva during first hour","Hydroxyapatite buffers dissolve the cement mass"],correctAnswerIndex:0,explanation:"Early in setting, the matrix is immature and intermediate ions can leach. This is why the first day is critical for protection."},{id:"gic_mcq_26",question:"Conventional GIC is less desirable under some all ceramic crowns mainly because it has",options:["Lower stiffness that can increase ceramic tensile stress","Higher stiffness that concentrates stress at the margin","No chemical bond so it always debonds from enamel","No fluoride release so caries risk rises immediately"],correctAnswerIndex:0,explanation:"Lower modulus means more deformation under load, potentially increasing tensile stress in brittle ceramics. A stiffer base can reduce flexure in some crown systems."},{id:"gic_mcq_27",question:"Which description best fits RMGIC",options:["Acid base reaction plus resin polymerization","Only acid base reaction with no resin component","Only resin polymerization with no glass reaction","Only chelation bond with no hardening matrix"],correctAnswerIndex:0,explanation:"RMGIC has traditional GIC chemistry plus a resin component that cures, often by light or dual cure. The acid base continues slower after polymerization."},{id:"gic_mcq_28",question:"A specific drawback introduced by RMGIC is",options:["Polymerization shrinkage with leakage risk","Complete loss of fluoride release over time","Inability to bond to dentin and cementum","Extreme brittleness compared to conventional GIC"],correctAnswerIndex:0,explanation:"Resin curing causes shrinkage stress which can open margins. Conventional GIC does not have this resin shrinkage component."},{id:"gic_mcq_29",question:"A component linked with allergy or irritation in RMGIC is",options:["HEMA in the resin containing liquid system","Fluoride in the reactive glass component","Calcium in the early cross linking phase","Alumina in the glass network structure"],correctAnswerIndex:0,explanation:"HEMA can leach and has been associated with pulpal irritation and contact dermatitis in susceptible individuals."},{id:"gic_mcq_30",question:"Compomer differs most from conventional GIC because it",options:["Light cures mainly, acid base occurs after water uptake","Sets immediately only by acid base cross linking","Bonds chemically without any bonding system step","Contains no fluoride capable glass or any ion release"],correctAnswerIndex:0,explanation:"Compomers are resin based materials that cure by polymerization first. Later water uptake allows a delayed acid base type reaction and some fluoride release."}],UT=[{id:"gic_mcq_31",question:"A newly placed conventional GIC turns chalky and rough within minutes. Most likely cause is",options:["Water imbalance during early setting at surface","Excess fluoride release dissolving matrix rapidly","Oxygen inhibition preventing full polymer cure","Heat rise causing internal void formation"],correctAnswerIndex:0,explanation:"Early exposure to moisture or dehydration disrupts the hydrated matrix before it stabilizes. The surface becomes chalky and crazed, and the margin seal becomes weak."},{id:"gic_mcq_32",question:"A conventional GIC surface becomes soft after patient rinses repeatedly soon after placement. The best mechanism is",options:["Washout of ions needed for matrix development","Collapse of collagen network from over etching","Resin phase inhibition from oxygen exposure","Thermal expansion mismatch causing microcracks"],correctAnswerIndex:0,explanation:"Early saliva exposure can leach calcium and aluminum ions and disrupt the forming polysalt matrix. The surface layer becomes weak and easily abraded."},{id:"gic_mcq_33",question:"Over drying dentin before conventional GIC placement can lead to",options:["Poor set and sensitivity due to water draw from cement","Improved bond due to higher surface energy always","No change since GIC is moisture independent early","Stronger matrix due to reduced dilution effects"],correctAnswerIndex:0,explanation:"GIC needs water for ion mobility and hydration. Desiccated dentin can pull water from the cement, disrupting set and increasing post operative sensitivity."},{id:"gic_mcq_34",question:"The main reason polyacrylic acid is preferred over phosphoric acid before GIC is",options:["Preserves calcium for chemical adhesion while cleaning smear","Produces deeper etch for resin tag type retention","Eliminates need for any protection after placement","Creates higher fluoride release by exposing more glass"],correctAnswerIndex:0,explanation:"GIC relies on chemical bonding to calcium in tooth mineral. Aggressive phosphoric acid can remove too much mineral and interfere with optimal chemical interaction."},{id:"gic_mcq_35",question:"In the sandwich technique, GIC base is placed mainly to",options:["Improve seal and fluoride at dentin margins","Increase composite translucency and polish","Increase composite curing time for control","Replace bonding agent requirement entirely"],correctAnswerIndex:0,explanation:"Dentin and cementum margins are more leakage prone with composite due to shrinkage stress and technique sensitivity. GIC provides chemical adhesion and fluoride release at those margins."},{id:"gic_mcq_36",question:"A disadvantage of RMGIC compared to conventional GIC is mainly",options:["Shrinkage stress from resin cure can open margins","Immediate water sensitivity is worse than conventional","Fluoride release becomes absent after curing","Chemical adhesion to dentin becomes impossible"],correctAnswerIndex:0,explanation:"RMGIC adds resin polymerization which produces shrinkage and stress. This can increase microleakage compared with conventional GIC, even though bond strength may be higher."},{id:"gic_mcq_37",question:"A clinical concern with RMGIC relevant to ceramics can be",options:["Water uptake and expansion in resin containing systems","Complete lack of maturation after initial cure","Total loss of adhesion in moist field always","Absence of fluoride release due to resin barrier"],correctAnswerIndex:0,explanation:"Resin components can increase water absorption and expansion. In some clinical contexts, dimensional change and stress can contribute to ceramic complications."},{id:"gic_mcq_38",question:"Metal reinforced GIC was developed mainly to",options:["Improve stress bearing capacity and radiopacity","Increase translucency for anterior esthetics","Eliminate fluoride release for better polish","Replace bonding systems for composite restorations"],correctAnswerIndex:0,explanation:"Adding metallic fillers improves handling in certain stress bearing indications and increases radiopacity. It does not transform GIC into a high toughness posterior restorative like composite."},{id:"gic_mcq_39",question:"Compared to other GIC types, metal reinforced GIC generally shows",options:["Limited improvement in fracture toughness overall","Dramatic improvement making it ideal for Class II","Complete elimination of moisture sensitivity early","Much higher esthetics suitable for veneers"],correctAnswerIndex:0,explanation:"Metal fillers do not greatly improve fracture toughness compared with other restorative GICs. Clinical performance gains are limited, so indications remain selective."},{id:"gic_mcq_40",question:"High viscosity GIC differs mainly by",options:["Higher powder content and improved packability","Lower powder content and extended working time","Resin polymerization as the only set reaction","No fluoride release due to dense glass coating"],correctAnswerIndex:0,explanation:"High viscosity versions use higher powder to liquid and often smaller particles, improving strength and handling. They are designed for ART and similar situations."},{id:"gic_mcq_41",question:"ART primarily uses high viscosity GIC because it",options:["Bonds chemically and tolerates field conditions","Requires perfect isolation and rubber dam use","Needs light cure so electricity is necessary","Depends on resin tags for dentin retention"],correctAnswerIndex:0,explanation:"ART is designed for minimal equipment settings. High viscosity GIC can be placed with hand instruments, bonds chemically, and provides fluoride benefits."},{id:"gic_mcq_42",question:"A key early step after removing the matrix for GIC restoration is",options:["Apply a surface coating such as varnish or petrolatum","Etch enamel again to deepen microretention","Light cure for additional resin polymerization","Sandblast surface to raise surface energy"],correctAnswerIndex:0,explanation:"After initial protection, coating reduces further water exchange during maturation. This preserves surface integrity and reduces early dissolution and cracking."},{id:"gic_mcq_43",question:"The fluoride reservoir concept means GIC can",options:["Take up fluoride and later release it again","Release fluoride only during first few minutes","Permanently lock fluoride with no later diffusion","Release fluoride only if sealed with varnish"],correctAnswerIndex:0,explanation:"Fluoride ions can diffuse into the material from topical sources and later diffuse back out. This supports ongoing anticaries benefit in high risk patients."},{id:"gic_mcq_44",question:"If a GIC mix is made too runny by adding liquid, the likely long term outcome is",options:["Lower strength with greater solubility and wear","Higher strength with better resistance to abrasion","Higher stiffness with improved ceramic support","Faster maturation with reduced moisture sensitivity"],correctAnswerIndex:0,explanation:"Lower powder content reduces available ions and produces a more porous weaker matrix. This increases wear and marginal breakdown risk."},{id:"gic_mcq_45",question:"In compomer placement, a frequent cause of debonding is",options:["Omission of bonding system step on dentin","Excess water contamination before light cure","Use of polyacrylic acid conditioner on enamel","Immediate varnish coating after placement"],correctAnswerIndex:0,explanation:"Compomers are resin based and generally require a bonding agent for predictable adhesion. They do not inherently bond like conventional GIC. TRAP EXTREME 4660 Long stems, clinical traps, concept heavy"},{id:"gic_mcq_46",question:"A student conditions dentin, then aggressively air dries until it looks chalky. They place conventional GIC and coat it late. Two days later, margins show cracking and sensitivity. The best explanation is",options:["Desiccation disrupted hydration and early matrix stability","Oxygen inhibition prevented full resin cure at surface","Heat from curing caused pulpal pressure changes","Fluoride burst caused dissolution of the entire matrix"],correctAnswerIndex:0,explanation:"Conventional GIC depends on water as reaction medium and as part of the hydrated structure. Over drying removes surface moisture and can pull water from cement, causing incomplete hydration, microcracking, weaker margins, and sensitivity."},{id:"gic_mcq_47",question:"A clinician mixes GIC slowly until it looks dull and loses shine. They place it anyway. It debonds early despite proper isolation. The best mechanism is",options:["Reduced availability of free carboxyl groups for bonding","Excess resin tags created a weak hybrid layer zone","Fluoride release caused immediate cohesive failure","Glass particles dissolved completely leaving voids"],correctAnswerIndex:0,explanation:"A dull mix often means the reaction advanced before placement. Fewer free carboxyl groups remain to interact with tooth calcium, reducing wetting, adaptation, and chemical adhesion."},{id:"gic_mcq_48",question:"A very cold glass slab is used for mixing. Condensation forms on the slab surface. The restoration later appears weak and opaque. The most accurate explanation is",options:["Added water contaminated the mix and diluted ion formation","Cooling increased polymerization shrinkage of resin phase","Condensation increased alumina content reducing reactivity","Cooling created more calcium cross links improving strength"],correctAnswerIndex:0,explanation:"Condensed water is direct contamination. Extra water can dilute the early ionic environment and disrupt matrix formation, producing weak opaque material and poor surface integrity."},{id:"gic_mcq_49",question:"A patient rinses repeatedly within minutes after conventional GIC placement and the surface becomes soft. Which is the most defensible mechanism",options:["Early washout of ions before matrix becomes stable","Oxygen inhibition prevented polymerization of surface","Acid etch collapsed collagen and reduced infiltration","Thermal mismatch caused immediate marginal cracking"],correctAnswerIndex:0,explanation:"In the earliest phase, the cement surface can lose calcium and aluminum ions into oral fluids. That compromises the developing polysalt matrix and creates a soft surface layer."},{id:"gic_mcq_50",question:"A Class II composite restoration has a gingival margin on dentin in a high caries risk patient. Best strategy to reduce gap risk is",options:["Use a sandwich base to seal dentin margin chemically","Use compomer alone to combine both properties","Use zinc phosphate base to increase fluoride release","Use resin cement base to eliminate polymerization stress"],correctAnswerIndex:0,explanation:"Composite shrinkage stress makes dentin margins vulnerable to microleakage. A GIC or RMGIC base can bond to dentin and provide fluoride at the margin, improving seal and reducing sensitivity and caries risk."},{id:"gic_mcq_51",question:"Someone claims water is only a solvent in GIC and strength improves when all water is removed. The best correction is",options:["Water is also structural, loss causes cracking and weakness","Water only affects color, not strength or adhesion","Water is irrelevant after the first minute of set","Water is harmful, removal always increases strength"],correctAnswerIndex:0,explanation:"Water is needed for ion transport and becomes part of the hydrated matrix. Removing water disrupts hydration and causes shrinkage, crazing, and loss of integrity."},{id:"gic_mcq_52",question:"A ceramic crown fractures after luting with RMGIC in a heavy bruxer. Which material related factor is most consistent with known behavior",options:["Water uptake and expansion in resin containing system","Total absence of acid base reaction after curing","Fluoride release created massive porosity immediately","Complete dehydration increased stiffness beyond ceramic"],correctAnswerIndex:0,explanation:"RMGIC includes hydrophilic resin components and can absorb water, potentially expanding. In a brittle ceramic under stress, any additional stress and dimensional change can contribute to crack propagation."},{id:"gic_mcq_53",question:"A faculty member prefers zinc phosphate rather than GIC for some all ceramic crowns. The best rationale is",options:["Higher stiffness gives more rigid support to brittle ceramic","Strong fluoride reservoir improves enamel remineralization","Higher elasticity reduces stress concentration at margin","Faster setting eliminates need for moisture protection"],correctAnswerIndex:0,explanation:"A lower modulus cement may allow more flex under load, increasing tensile stress in the ceramic. A stiffer cement can provide more rigid support in selected cases."},{id:"gic_mcq_54",question:"A compomer restoration in a cervical lesion debonds. The operator used no bonding system because they assumed it bonds like GIC. The best explanation is",options:["Compomer is resin based and typically needs adhesive bonding","Compomer has no fluoride release so adhesion fails always","Compomer sets only by acid base and stays weak","Compomer requires varnish coating to form chemical bond"],correctAnswerIndex:0,explanation:"Compomers are polyacid modified composites. They cure mainly by polymerization and usually require an adhesive system for dentin bonding, unlike conventional GIC chemical adhesion."},{id:"gic_mcq_55",question:"A clinician says fluoride release weakens GIC so high fluoride versions must be mechanically poor. The best correction is",options:["Fluoride release can occur without major integrity loss","Fluoride release always dissolves the matrix extensively","Fluoride release stops once varnish is applied","Fluoride release occurs only in the first minute"],correctAnswerIndex:0,explanation:"Fluoride release is mainly by diffusion and ion exchange and can occur without significant loss of bulk properties. Mechanical weakness is more related to brittleness and tensile limits, not fluoride release alone."},{id:"gic_mcq_56",question:"In ART, the most important reason high viscosity GIC is preferred is",options:["Chemical adhesion and fluoride benefit in limited conditions","Mandatory light curing that ensures full depth conversion","Perfect isolation requirement to prevent immediate failure","Reliance on resin tags for retention in dentin tubules"],correctAnswerIndex:0,explanation:"ART is designed for minimal equipment and imperfect conditions. High viscosity GIC offers packability, chemical adhesion, and fluoride release, and works with hand instrumentation."},{id:"gic_mcq_57",question:"A student asks why finishing conventional GIC too early is discouraged. Best answer is",options:["Maturation is ongoing and dehydration risk is higher early","Resin polymerization remains incomplete for several days","Fluoride release has not started until after polishing","Conditioning cannot work unless finishing is delayed"],correctAnswerIndex:0,explanation:"Conventional GIC continues to mature for many hours. Early finishing can expose the surface to dehydration and disrupt the immature matrix, increasing wear and cracking risk."},{id:"gic_mcq_58",question:"A clinician claims conditioning before GIC is useless because GIC bonds anyway. Best correction is",options:["Conditioning cleans smear layer and improves wetting and bonding","Conditioning creates deep resin tags as main retention method","Conditioning removes fluoride so anticaries effect decreases","Conditioning increases brittleness so it is usually avoided"],correctAnswerIndex:0,explanation:"Smear layer can block chemical interaction and reduce surface energy. Mild conditioning improves wetting and allows better ionic interaction at the interface."},{id:"gic_mcq_59",question:"A high caries risk patient has multiple cervical root lesions and isolation is difficult. Most defensible material choice is",options:["RMGIC due to dentin bonding and cervical performance","Conventional GIC because it always has higher toughness","Composite because it always seals dentin better than GIC","Amalgam because it bonds chemically to cementum"],correctAnswerIndex:0,explanation:"Cervical lesions often involve dentin or cementum margins. RMGIC provides chemical adhesion and fluoride and is more forgiving in moisture challenged cervical areas than composite."},{id:"gic_mcq_60",question:"A student asks why GIC needs protection even after it feels hard. Best explanation is",options:["Maturation continues and hydration stability develops over time","Once hard, the reaction stops and protection is only cosmetic","Only fluoride release continues, strength is fixed immediately","Protection is needed only to keep color stable, not chemistry"],correctAnswerIndex:0,explanation:"Early hardness reflects initial gelation, not full maturation. Cross linking becomes more stable and hydration structure develops with time, and early water imbalance can still damage surface and margin"}],S3=[...BT,...HT,...UT],k3=String.raw`

## **Dental Ceramics **

### **1) Introduction / Definition**

- Dental ceramics are **tooth-colored restorative materials** and are considered among the **most durable esthetic materials** used in dentistry.
- Ceramics are **crystalline compounds** made of metallic + non-metallic components, and their properties differ from their individual constituents.
- Traditional porcelain production used **kaolin + silica + feldspar**; blending these produced porcelains with **translucency + added strength** needed for dental restorations.
- Porcelains are described as **decorative vs dental porcelains**. Dental porcelains have **little or no kaolin** and are often more correctly described as **dental glasses**.
- General concept: porcelain is basically a **glassy silica network** based on silica + feldspar, with other additives in smaller amounts.

## 
![Image](images/ceramics/glassy_silica_network.jpg)

## **General Properties**

- **Biocompatibility:** Highly biocompatible; do not react with oral fluids; resistant to corrosion.
- **Esthetics:** Excellent potential to match natural tooth color (hue, chroma, value) and translucency.
- **Insulation:** Excellent thermal and electrical insulators (unlike metals).
- **Brittleness:** High compressive strength but low tensile strength. Susceptible to fracture from surface flaws (micro-cracks).
- **Hardness:** Generally harder than tooth enamel, which can lead to wear of opposing natural teeth if the ceramic is rough.

---

## **2) Composition of Dental Porcelain **

### **A) Feldspar (major component)**

- **6080%**. Chemically: potassium and sodium aluminosilicates:

- KOAlO6SiO and NaOAlO6SiO

- Naturally occurring. When heated, it fuses around **1290C**, becomes glassy, and (if not overheated) **retains form without rounding**, helping restorations keep shape during fusing.
- Functions (important exam wording):

- **Basic glass forme**r; potassium feldspar forms a crystalline mineral **leucite** along with the glass phase.
- **Sodium** lowers the fusion temperature.
- **Potassium** increases viscosity of molten glass  helps control porcelain flow/slumping during firing.

### **B) Silica (quartz)**

- **1525%**; obtained by grinding pure quartz.
- Acts as **refractory skeleton**  provides **strength and hardness** during fusing; remains unchanged during firing; dispersed throughout the glassy phase.

### **C) Kaolin (clay)(skip)**

- Hydrated aluminosilicate: **AlO2SiO2HO**, about **35%** (mainly in decorative porcelain).
- Gives **opacity** to the mass; some systems may use sugar or starch instead.
- Modern dental porcelain:it **does not contain kaolin**, so it can be viewed as **feldspathic glass with crystalline inclusions**.

### **D) Alumina (AlO)**

- Single-crystal alumina is **sapphire**; blue sapphire is alumina with Fe and Ti impurities.
- Replaces some silica in glass matrix; gives **strength + opacity**; alters softening point and **increases viscosity during firing**.

### **E) Metallic pigments (shade modifiers)**

- About **1%**; used to match natural tooth shades. Pigments are stable at fusion temperature and are typically metal oxides (tin, nickel, cobalt, titanium, iron, gold).

![Image](images/ceramics/metallic_pigments.png)

### **F) Glass modifiers(fluxes)**

- **Types:** Oxides of Potassium, Sodium, or Calcium.
- Metal ions added to control: **fusion temperature, sintering temperature, thermal contraction coefficient, solubility**. They can lower fusion temperature and increase flow during firing, and remove impurities. 
- *Drawback:* Too high a concentration reduces chemical durability (resistance to fluids).

**G) Fluxes**

- Low-fusing glasses added to reduce the temperature needed to **sinter porcelain powder particles together**.

![Image](images/ceramics/fluxes.png)

---

## **3) Manufacture of Porcelain Powder (how the powder is made)**

### **Fritting (core manufacturing method)**

- Components are mixed and fused, then **quenched in water while red hot**. Quenching causes cracking/fracturing throughout the fused mass  forming a **frit**, which is then ground to a fine powder.
- Porcelain fusion in the lab is described as essentially **remelting the fluxes**.
- ![Image](images/ceramics/fritting.png)

### **Phases after manufacturing / firing**

- Two principal phases:

- **Glass phase**: formed during firing process.
- **Crystalline/mineral phase**: includes silica, alumina, and certain metallic oxides (coloring agents/opacifiers) such as iron/tin/titanium oxides.

![Image](images/ceramics/phases_after_firing.jpg)

---

## **4) Applications of Dental Ceramics (where used)**

- Single unit crowns: **Porcelain jacket crown (PJC)**, **PFM (metal-ceramic crown)**, **castable glass ceramic crowns**.
- Veneers for crowns/bridges; artificial teeth; inlays/onlays; ceramic orthodontic brackets; prefabricated labial veneers.

---

## **4. Classification of Dental Ceramics**

### **A. By Fusing Temperature**

- High Fusing (>1300C): Used for denture teeth.
- Medium Fusing (1100C  1300C): Used for denture teeth and presintered zirconia.
- Low Fusing (850C  1100C): Used for crown and bridge veneer ceramic.
- Ultra-low Fusing (<850C): Used for veneers on titanium or special alloys.

![Image](images/ceramics/classification_fusing.jpg)

### **B. By Microstructure (Crystal Phase)**

- Glass-based (Amorphous): High translucency, lower strength.
- Glass-based with Fillers (Leucite, Lithium Disilicate): Balanced esthetics and strength.
- Crystalline-based (Alumina, Zirconia): High strength, high opacity, no glass matrix (polycrystalline).

![Image](images/ceramics/microstructure.jpg)

Can be seen on the above diagram in **Phases after manufacturing / firing**

as well 

### **C. By Fabrication Method**

- Sintering: Fusing powder particles by heat (e.g., Feldspathic porcelain).
- Castable/Heat-Pressed: Lost-wax technique used to press ceramic ingots (e.g., IPS Empress, e.max).
- Slip-Casting: Building a core on a porous die, sintering, then infiltrating with glass (e.g., In-Ceram).
- CAD/CAM: Milled from ceramic blocks (hard machining or soft machining).

---

## **6) Porcelain Fabrication (clinical/lab workflow in the )**

![Image](images/ceramics/fabrication.jpg)

### **Step 1: Platinum foil on the die**

- Working die is covered with **platinum foil ~0.025 mm** thick.
- Purpose:

- Retains porcelain mix in shape during firing
- Determines accuracy/fit of the restoration

### **Step 2: Build-up with porcelain slurry**

- Porcelain powder is mixed with water or supplied liquid and applied over platinum foil. The steps listed:

- **Compaction**
- **Firing**
- **Glazing**
- **Cooling**

**A) Compaction (condensation)**

- Defined as condensing mixed powder over the die by
- Process of packing porcelain powder/liquid mix.
- **Methods:** Vibration, Spatulation, Brush technique.
- **Purpose:** To remove excess water and reduce air voids.
- **Result:** Why it matters: condensation reduces **firing shrinkage and porosity**.

**THE MOST IMPORTANT STEP **

| **Error** | **Consequence (The Result)** |
| --- | --- |
| **Trapped Air / Voids** | The crown becomes **porous** (full of tiny holes), making it weaker and potentially opaque/chalky. |
| **Excess Water Left In** | The particles remain too far apart, leading to **excessive firing shrinkage**. |
| **Poor Packing Density** | The crown may distort or end up undersized, meaning it **won't fit the die** correctly after firing. |

### **B) Sintering (Firing)**

**Summary Checklist for Firing:**

**To ensure high-quality dental restorations, follow these essential firing precautions:**

- **Pre-Drying Phase: Perform a 510 minute pre-heat at the furnace door to eliminate moisture and prevent steam explosions.**
- Vacuum Application: Maintain the correct vacuum pressure (hPa) to remove air and achieve maximum translucency in the ceramic.
- **Controlled Cooling: Use a long-term or slow-cool cycle to avoid internal stress and prevent the material from cracking.**
- Regular Calibration: Calibrate the furnace monthly with silver wire to ensure the temperature remains accurate and prevents over-firing.
- Quality Assurance: These steps guarantee that the transition from a "Medium Bisque" to a finished product remains precise and stable.




- **Firing = complete *sintering* of powder particles together.(heating to melt and have them joined )**
- Heating the particles until they fuse at contact points.

- **Vacuum Firing:** Essential to reduce porosity. Air pressure is reduced, causing air bubbles to expand and escape or be compressed to negligible sizes upon return to atmospheric pressure.
-  firing mainly sinters(join) particles into a homogeneous mass.
- Done in a **muffle (electric) oven** with a pyrometer.
- **Stages:** Low bisque, Medium bisque, High bisque.

| **Stage** | **Surface Appearance** | **Internal Structure** | **Physical Properties** | **Use Case** |
| --- | --- | --- | --- | --- |
| **1. Low Bisque** | **Matte & Dull.** No shine; looks like dry chalk or plaster. | High porosity. Particles have just begun to "handshake" (initial necking). | **Very fragile.** Edges can be easily rubbed away with a finger. | Best for **initial build-up** and adding bulk ceramic material. |
| **2. Medium Bisque** | **Slight Sheen.** A faint "eggshell" or satin glow starts to appear. | Porosity is decreasing. Particles are bonding significantly. | **Stronger but carvable.** Can be shaped with abrasive stones/burs. | **The "Try-In" stage.** Dentist checks the fit and bite in the patient's mouth. |
| **3. High Bisque** | **Smooth & Glassy.** Surface is mostly sealed; looks like a real tooth. | Minimal porosity. The ceramic has reached near-maximum density. | **Very Hard.** Harder than natural tooth enamel; difficult to adjust. | **Final Characterization.** Ready for the final glaze or stain layer. |

**keep the ceramic away from the furnace walls,why?**

- Temperature is not uniform near the heating elements/walls  you can get overheating on one side.
- Uneven heating causes thermal gradients  warpage/slumping, uneven sintering, internal stresses.
- It also reduces direct radiant heat hot spots and helps the restoration heat more evenly from all sides.

![Image](images/ceramics/sintering_furnace.jpg)


### 

### **C) Glazing + Cooling**

- Glazing stage is reached in the last firing. Can be:

- **Self-glaze** (surface glass flow)
- **Applied glaze** (adding low-fusing glass)

- Self-glaze is preferred because applied glaze contains more glass modifiers, has lower firing temperature, and has **lower resistance to oral fluids**.
- Purpose of glazing: produce a **smooth, shiny, impervious** surface.
- Cooling should be gradual and uniform to avoid **crazing**.

![Image](images/ceramics/glazing_cooling.jpg)

---

## **7) Properties of Fused Porcelain (high-yield points)**

### **Strength profile (why ceramics fail)**

- Firing shrinkage occurs; compensated by oversized crown design and precise compaction + firing control.
- Porcelain has good strength but is **brittle** and tends to fracture.
- **Compressive strength high**, but **tensile strength low** due to unavoidable surface defects (porosities, microscopic cracks).
- **Shear strength low** because of lack of ductility from complex porcelain structure.

### **What affects strength (exam list)**

- Composition
- Surface integrity: microscopic cracks/porosities reduce strength
- Firing procedure: inadequate firing and over-firing weaken structure

![Image](images/ceramics/strength_factors.jpg)

### **Physical/clinical behavior**

- High elastic modulus.(will not bend)
- Much harder than natural teeth  can wear opposing natural teeth; wear resistance higher than natural teeth.
- Low thermal conductivity.
- Coefficient of thermal expansion close to natural teeth; fired porcelain is dimensionally stable.
- Chemical stability: insoluble/impermeable to oral fluids, resistant to most solvents; excellent esthetics and biocompatibility.

---

## **8) Ceramic Strengthening (how ceramics are made tougher/stronger)**

- Modern strengthening comes from modifying porcelain microstructure; major contribution: adding a **secondary crystalline phase**; newer all-ceramic systems use various reinforcement crystals.
- Two strategic approaches described:

- **Core + veneer concept**: high-strength but less esthetic core veneered with lower-strength esthetic porcelain.
- Develop a single ceramic with both good esthetics + high strength by reinforcement (no additional layer needed).

### **Mechanisms: IMP**

- Minimize stress concentration by proper restoration design.
- Reduce size/number of surface flaws  large increase in strength (one reason for glazing).
- Interrupt crack propagation:

- Tough particles absorb crack energy and reduce driving force (example: alumina dispersion).
- Crystal structural change under stress absorbs crack energy (example: zirconia transformation toughening; partially stabilized zirconia PSZ smart ceramic).

---

## **9) Metal-Ceramic Restorations (PFM)**

## **Metal-Ceramic Systems (PFM/MC)**

- **Concept:** A metal substructure (coping) provides strength, veneered with porcelain for esthetics.
- **Layers:**

- **Opaque Porcelain:** Masks the metal color; initiates the bond.
- **Body (Dentin) Porcelain:** Provides bulk shade.
- **Incisal (Enamel) Porcelain:** Provides translucency.
- **Glaze:** Seals surface flaws.

(images/ceramics/pfm_layers_1.jpg)

(images/ceramics/pfm_layers_2.jpg)

### **Bonding Mechanisms (Porcelain to Metal)**

- **Chemical bonding**: metal oxides on alloy react with porcelain to form chemical bond:

- Noble alloys: tin + indium oxides
- Base alloys: chromium oxides or titanium oxides

- **Mechanical Interlocking:** Sandblasting the metal creates micro-retention it flows into surface irregularities  mechanical interlocking.

- **Compressive Bonding (Thermal Compatibility):**If porcelain contracts less than alloy on cooling, porcelain is left in residual compression  higher applied stress required to fail the bond. The Coefficient of Thermal Expansion (CTE) of the metal must be *slightly higher* than the porcelain. Upon cooling, the metal shrinks more, placing the porcelain in compression (porcelain is strong in compression).

![bonding_mechanisms](images/ceramics/bonding_mechanisms.jpg)

### **Technical Failures in PFM**

- **Delamination:** Separation at the metal-oxide interface (oxide improperly formed).
- **Cohesive Fracture:** Breakage within the porcelain itself (stress or flaws).
- **Porosity:** Caused by improper condensation or firing without vacuum.

---

## **10) Requirements for Alloys Used in PFM**

Alloy must:

- Withstand porcelain firing without melting or sag (creep). Melting range should be **100150C higher** than porcelain firing temperature.
- Contract slightly more than porcelain  creates residual compression (compressive bonding).
- Have high modulus of elasticity and high yield strength  rigid metallic support.

---

## **11) Requirements for Porcelain Used in PFM + Practical Thicknesses**

- Porcelain must have close coefficient of thermal expansion/contraction with metal to avoid thermal stresses during cooling.
- Practical tooth preparation guideline (important numbers):

- About **1.5 mm** tooth structure removed to allow space for:

- metal coping **0.30.5 mm**
- porcelain veneer **~1.0 mm**

- Opaque porcelain is applied around **0.3 mm**, fired, then built with translucent porcelain; final glaze applied.

![PFM](images/ceramics/pfm_requirements.jpg)


---

## **12) Types of Alloys Used for PFM IMP**

- **Noble metal alloys**: high gold, gold-palladium, palladium-silver, high palladium.
- **Base metal alloys**: silver-palladium, nickel-chromium, titanium alloys.

**1. High Noble Alloys (High Gold)**

- **Definition:** Contains at least 40% Gold and at least 60% total noble metal content (Gold + Platinum/Palladium).
- **Advantages:**

- **Biocompatibility:** Most "tissue-friendly" option; non-corrosive and non-allergenic.
- **Fit/Accuracy:** Low casting shrinkage (approx. 1.2%) allows for the most precise margins.
- **Esthetics:** Warm yellow color is easier to mask with thin layers of porcelain.
- **Bonding:** Forms a predictable, thin oxide layer for chemical bonding.

- **Disadvantages:**

- **Mechanical Weakness:** Low Modulus of Elasticity (flexible). Requires thicker metal coping to prevent porcelain cracking.
- **Low "Sag" Resistance:** Low melting temperature means metal can deform under high heat.
- **Cost:** Extremely expensive.

**2. Noble Alloys (Silver-Palladium / High Palladium)**

- **Definition:** Contains at least 25% noble metal content. (Note: Silver-Palladium is Noble, not base metal).
- **Advantages:**

- **Strength:** Stiffer and harder than high gold; better resistance to sagging.
- **Cost-Effective:** Cheaper than high-gold while maintaining noble properties.
- **Thermal Compatibility:** CTE matches most porcelains well.

- **Disadvantages:**

- **Silver Greening:** Silver can vaporize and tint porcelain greenish-yellow.
- **Oxidation:** Palladium-Copper versions form dark, heavy oxides that are hard to hide.

**3. Base Metal Alloys (Ni-Cr, Co-Cr)**

- **Definition:** Contains less than 25% noble metal (usually 0%).
- **Advantages:**

- **High Modulus of Elasticity:** Stiffest alloys; can be cast very thin (0.10.3 mm) for long-span bridges.
- **High Melting Point:** No risk of sagging during firing.
- **Low Cost:** Most economical choice.

- **Disadvantages:**

- **Biocompatibility:** Nickel is a common allergen; can cause gingival tattooing.
- **Poor Castability:** High casting shrinkage (approx. 2.3%) makes marginal fit difficult.
- **Bonding Failures:** Thick, dark oxide layer can lead to porcelain peeling (adhesive failure).

## **4. Summary Table for Exams**

| **Feature** | **High Noble (Gold)** | **Noble (Ag-Pd)** | **Base Metal (Ni-Cr)** |
| --- | --- | --- | --- |
| **Noble Content** | 60% | 25% | < 25% |
| **Stiffness** | Low (Needs Bulk) | Medium | High (Can be Thin) |
| **Casting Shrinkage** | Low (Best Fit) | Moderate | High (Hard to Fit) |
| **Esthetics** | Excellent (Yellow) | Good (Silver) | Poor (Dark Oxides) |
| **Major Risk** | Sagging in furnace | "Greening" of porcelain | Nickel Allergy |

---

| **Metal Alloy Type** | **Melting Range (C)** | **Sag Resistance** | **Best Usage Case** |
| --- | --- | --- | --- |
| **High Noble (Au-Pt-Pd)** | 1,150C  1,300C | High | Premium restorations and biocompatibility |
| **Noble (Pd-Ag or Pd-Cu)** | 1,200C  1,380C | Very High | High-stress areas and long-span bridges |
| **Base Metal (Co-Cr)** | 1,320C  1,450C | Excellent | Maximum rigidity and thin-walled castings |
| **Base Metal (Ni-Cr)** | 1,250C  1,350C | Good | General purpose; high strength-to-weight |

---

## **13) Tooth Preparation Notes for**

- Provide space for metal coping.
- Shoulder for porcelain, chamfer or bevel for metal coping to promote metal flow and better marginal esthetics.
- Capillary technology (Captech): metal substructure formed with melting metal loaded wax strips.
- Bonded platinum foil: two platinum foils; outer tin-plated for porcelain bonding; inner foil removed before cementation; outer remains bonded to ceramic; reduces coping space (alternate approach).

---

## **14) Nature of the Ceramo-Metallic Bond (3 mechanisms)**

- **Mechanical bonding**: if porcelain wets metal effectively, it flows into surface irregularities  mechanical interlocking.
- **Chemical bonding**: metal oxides on alloy react with porcelain to form chemical bond:

- Noble alloys: tin + indium oxides
- Base alloys: chromium oxides or titanium oxides

- **Compressive bonding**: if porcelain contracts less than alloy on cooling, porcelain is left in residual compression  higher applied stress required to fail the bond.

---

## **15) Failure of Ceramo-Metal Bond (what pattern means what)**

- With gold alloys and porcelain, strong bonds form; in testing, **cohesive failure of porcelain** usually indicates **good bonding** between metal and porcelain.
- With base metal alloys, failure tends to occur at the interface (**adhesive failure**) because of:

- high compressive residual stress due to excessive alloy shrinkage
- excessive oxidation at the interface

---

## **16) Full Ceramic Restorations **

### **A) Alumina inserts / aluminous porcelain**

Add aluminium ceramic(aluminum oxide ) as a core instead of normal porcelain core 

- Earlier porcelain jacket crowns (high fusing feldspathic porcelains) fractured easily. Alumina-reinforced porcelain (1965) with increased alumina content **4050%** overcame this problem.
- Used as **inner layer (core)** of jacket crown; acts as stronger core ceramic instead of metal core; conventional body/enamel porcelains are condensed and fired over it.
- Strength: about **twice as strong** as conventional porcelains;** sufficient for anterior teeth; considered inadequate for posterior; less expensive than metal-ceramic and requires less tooth removal.**

### **B) Sintered alumina core ceramics (Incerams)**

- Alumina core is made over die and fired  strengthens core + reduces porosity; outer core painted with glass slurry and fired again; dentin/enamel porcelains then built and fired over core.
- **Crowns have good fit and marginal adaptation, good esthetics; reported as best strength among all-ceramic restorations; described as strong enough for anterior bridge use.**

**In this the alumina particles are joined with each other instead of just floating in a glass matrix**

(images/ceramics/pfm_requirements_2.png)

### **C) Injection molded / pressed ceramics (IPS Empress)**

- Injection molding used to make core layer:

- plastic mass heated to **180C**
- injected under air pressure **1,500 psi**
- fired at **1300C** to form core

- Better fit than hand condensation due to lower firing shrinkage.
- No metal coping  improved esthetics; strength similar to aluminous core materials. Limitation: complexity + cost + special equipment; may fracture in posterior use.

**Make a negative replica of the crown heat the ceramic to be liquid and press it in shape of the mould with pressure **

### **. Benefits & Limitations **

- **Esthetics:** Excellent. Because there is no metal "coping" underneath to block light, the tooth looks translucent and natural.
- **Strength:** Good (~160 MPa for original Empress), but **not strong enough for molars** or bridges (Zirconia is used for that now).
- **Use:** Best for **Front teeth (Veneers, Anterior Crowns)** where beauty is more important than biting force.

**Bottom Line:** You can think of it as "High-Pressure Die Casting" for porcelain.

### **D) Castable glass ceramics (DICOR) + polycrystalline ceramics**

**DICOR casting process (high-yield steps):**

- Desired shape formed in glass then heat treated.
- Glass casting similar to metal casting:(see casting same process just use molten ceramic instead of metal)

- wax pattern invested in phosphate-bonded investment
- wax burnout at **950C**
- molten ceramic cast centrifugally at ~**1350C**
- results in transparent glass crown  heat treated at **1075C for 10 hours**

**C and D are the same basic process use lost wax technique to make mould and then use pressure or centrifugal casting to get a ceramic crown **

| **Feature** | **C (DICOR)** | **D (IPS Empress / Pressed)** |
| --- | --- | --- |
| **Mould Method** | **Lost Wax** | **Lost Wax** |
| **Fill Force** | **Centrifugal (Spinning)** | **Pressure (Plunger)** |
| **Material State** | **Liquid (Molten Glass)** | **Viscous (Soft Taffy)** |
| **Final Result** | **Glass-Ceramic Crown** | **Glass-Ceramic Crown** |

**Ceramming (heat treatment effect):**

- Causes partial crystallization to mica-like crystals:

- slightly reduces translucency
- significantly increases strength

- Final shading via external staining; strength comparable to aluminous porcelains.
- Casting technique offers accurate fit and may be strong enough for posterior use without alloy substructure.

**Y-TZP zirconia (polycrystalline smart ceramic)**

- Based on yttrium tetragonal zirconia polycrystals; yttrium oxide blended with zirconium oxide  partially stabilized zirconia.
- Very high flexural strength reported (**9001200 MPa**) and high fracture toughness; attributed to polycrystalline structure and **transformation toughening** (crystal structure change under stress).

**What zirconia is:**

**Zirconia (ZrO)** is a very strong dental ceramic used mainly for **crowns/bridges**, made as **industrial discs/blocks** and shaped by **CAD/CAM milling**, then **sintered (fired)** to full strength. Its key advantage is **transformation toughening**: when a crack tries to grow, zirconia changes crystal phase locally and **puts the crack under compression**, so the crack **stops**  thats why zirconia is the **toughest** common ceramic.

 **Transformation toughening**:

This might be stupid analogy but think of it someone trying to open ur bag and ur not letting it be opened 



- **The "Bag Opening" = The Crack**

- When a material breaks, it is basically being pulled apart (Tensile Stress). The "zipper" is trying to slide open.

- **"You Compressing the Bag" = The Crystal Expansion**

- Just as the bag tries to open, the Zirconia crystals next to it suddenly **get bigger** (Phase Transformation).
- This sudden expansion pushes against the "bag" from the outside.

- **"Not letting it be opened" = Compressive Stress**

- Your hands squeezing the bag represent the **Compressive Force**. It is physically impossible for the bag (crack) to open if the pressure pushing it closed is stronger than the pressure pulling it open.
![Image](images/ceramics/bag_analogy.jpg)

### **1. The Science (Simplified)**

Zirconia exists in two different crystal shapes depending on temperature and pressure:

- **Tetragonal Phase:** The "Standard" shape. It is compact and stable at room temperature (in the crown).
- **Monoclinic Phase:** The "Expanded" shape. It is about **4% larger** in volume.

### **2. How it Works (The Mechanism)**

- **The Threat:** A tiny crack starts to form in the Zirconia (from chewing or grinding).
- **The Trigger:** The high energy/stress at the tip of the crack disturbs the nearby crystals.
- **The Transformation:** This stress causes the nearby **Tetragonal** crystals to instantly snap into the **Monoclinic** phase.
- **The Effect:** Because the Monoclinic phase is **bigger**, the crystals expand.
- **The Result ( clamping):** This expansion **squeezes the crack shut**. It compresses the area around the crack tip, preventing it from growing any further.
![Transformation toughening](images/ceramics/transformation_toughening.jpg)
---

## **17) CAD-CAM Ceramic Systems (what it is + pros/cons)**

- CAD-CAM = computer-aided design and computer-aided machining system.
- Produces ceramic restoration in **a single appointment** by scanning prepared tooth; scanner captures preparation and a milling machine reproduces it from a ceramic block by grinding with diamond discs.
- Can do complex 34 surface restorations including cusp replacement; can manufacture ceramic veneers using newer systems (example mentioned: Cerec 3).
- **Advantages**: one appointment, reduced chair time, no impression required, **negligible porosity.**
- **Disadvantages:** costly equipment; scanning is technique sensitive.

### **Summary Verdict**

**Most homogeneous / least structural defects / most consistent quality:**  **CAD/CAM industrial blocks
****Summary Verdict**

- **Best for Strength consistency? YES (Industrial blocks).**
- **Best for Speed? YES (1 visit).**
- **Best for Marginal Seal? No (Gold is king, but CAD/CAM is excellent).**
- **Best for Beauty? No (Hand-layered is better for front teeth).**

---

## **18) Porcelain Veneers (key facts + numbers)**

- Veneers improve the appearance of stained/discolored teeth.
- A thin shell closely adapted to the prepared tooth; labial enamel removal about **0.5 mm**; veneers are normally **0.5 -- 0.8 mm thick**.
- Materials/techniques: feldspathic porcelain, glass ceramic, pressed ceramic, or CAD-CAM. Veneers are bonded to enamel using composite resin luting agents.
- | **Feature** | **Metal Substrate (PFM)** | **Silica-Based Ceramic (Veneer/Inlay)** |
| --- | --- | --- |
| **Primary Tool**  **used to prepare the intaglio (inner) surface of a crown or veneer for bonding.** | Sandblasting ( | Hydrofluoric Acid (HF) |
| **Action** | Physical "pitting" of surface | Selective dissolution of glass phase |
| **Bonding Agent** | Oxide Layer (Chemical) | Silane (Chemical) |
| **Zirconia Note** | Sandblast only | **Do not HF etch** (no glass phase) |

---

| **Material** | **Step 1: Surface Texture** | **Step 2: Chemical Primer** |
| --- | --- | --- |
| **Glass Ceramic** (Feldspathic, Leucite, E.max) | **HF Etch** (Dissolves glass to create pits) | **Silane** (Bonds to the exposed silica) |
| **Zirconia** (Polycrystalline) | **Sandblast** (Creates roughness; HF creates no pattern here) | **MDP Primer** (Special primer for Zirconia; Silane doesn't work well) |
| **Metal** (Gold, PFM) | **Sandblast **(Increases surface area) | **Metal Primer** |

Tooth preparation for different materials 

| **Material** | **Occlusal / Incisal** | **Labial / Buccal** | **Lingual** | **Margin Design** |
| --- | --- | --- | --- | --- |
| **Full Metal (Gold)** | 1.0 mm (Non-functional)  1.5 mm (Functional) | 0.5  1.0 mm | 0.5  1.0 mm | **Chamfer** |
| **PFM (Porcelain Fused to Metal)** | 1.5  2.0 mm | 1.2  1.5 mm | 0.5 mm (Metal collar)  1.2 mm (Porcelain coverage) | **Shoulder** (Labial)  **Chamfer** (Lingual) |
| **All-Ceramic (e.g., E.max)** | 1.5  2.0 mm | 1.0  1.5 mm | 1.0  1.5 mm | **Deep Chamfer** or **Shoulder** (Rounded internal line angles) |
| **Zirconia (Monolithic)** | 1.0  1.5 mm | 0.5  1.0 mm | 0.5  1.0 mm | **Chamfer** |

---

## **19) Ceramic Summary**

- **bonding Mechanisms:** Chemical (oxides), Mechanical (sandblasting), Compressive (CTE mismatch)
- **Phases:** Glassy (translucency), Crystalline (strength/opacity)
- **Porcelain Components:** Feldspar (matrix), Silica (strength), Kaolin (opacity/handling)
- **Feldspathic Porcelain:** Aesthetic but brittle; used for veneers
- **Alumina/Zirconia:** High strength crystalline ceramics; Zirconia has transformation toughening
- **PFM Layers:** Opaque -> Body -> Incisal -> Glaze
- **Processing:** Sintering (firing), Heat pressing (IPS Empress), Slip casting (In-Ceram), CAD/CAM
- **Glazing:** Reduces flaws, smooths surface
- **Zirconia:** Y-TZP, very strong, transformation toughening inhibits crack propagation

`,I3={content:String.raw`
# Dental Ceramics  Summary Notes

---

## 1) Introduction / definition
- Dental ceramics are **toothcolored restorative materials** and are considered among the **most durable esthetic materials** in dentistry.
- They are **crystalline compounds** made of metallic + nonmetallic components, so their properties differ from each constituent.
- **Traditional porcelain:** kaolin + silica + feldspar (decorative porcelains). **Dental porcelains** have little/no kaolin  more accurately dental glasses (glassy silica network based on silica + feldspar with smaller additives).

### General properties
- **Biocompatible:** inert in oral fluids; corrosionresistant.
- **Esthetics:** excellent color match (hue/chroma/value) + translucency.
- **Insulators:** low thermal + electrical conductivity (unlike metals).
- **Brittle:** high compressive strength, low tensile strength  cracks start at surface flaws (microcracks/porosity).
- **Hard:** can wear opposing enamel if surface is rough (polish/glaze matters).

---

## 2) Composition of dental porcelain (what each does)

### A) Feldspar (major; ~6080%)
- Potassium/sodium aluminosilicates.
- On heating, fuses  glassy phase; helps restoration keep form during fusing.
- **Exam functions:**
  - Basic glass former
  - forms leucite (crystalline) + glass phase
  - sodium lowers fusion temperature
  - potassium increases molten viscosity  controls flow/slumping during firing

### B) Silica / quartz (~1525%)
- Refractory skeleton; provides strength/hardness during fusing; remains largely unchanged and is dispersed in glass phase.

### C) Kaolin (clay) (mainly decorative; dental porcelain usually minimal/none)
- Gives opacity (traditional). Modern dental porcelain: essentially feldspathic glass with crystalline inclusions.

### D) Alumina (AlO)
- Increases strength + opacity; replaces some silica; alters softening point and increases viscosity during firing.

### E) Metallic pigments (~1%)
- Shade modifiers; stable metal oxides (e.g., tin/nickel/cobalt/titanium/iron/gold oxides).

### F) Glass modifiers / fluxes
- Oxides of K/Na/Ca etc to control: fusion/sintering temp, thermal contraction/CTE, solubility and flow.
- Too much modifier  chemical durability (more soluble/less resistant).

---

## 3) How porcelain powder is made (fritting) + phases

### Fritting (core method)
- Mix components  fuse  quench in water while red hot  cracked frit  grind into fine powder.

### After firing: two principal phases
- **Glass phase:** (formed during firing)
- **Crystalline/mineral phase:** (e.g., silica, alumina, certain metallic oxides/opacifiers/colorants)

---

## 4) Applications (where used)
- **Crowns:** porcelain jacket crown (PJC), PFM (metalceramic), castable glassceramic crowns
- **Veneers:** (crowns/bridges), artificial teeth, inlays/onlays, ceramic orthodontic brackets, prefabricated labial veneers

---

## 5) Classification (exam)

### A) By fusing temperature
- **High fusing (>1300C):** denture teeth
- **Medium (11001300C):** denture teeth; presintered zirconia
- **Low (8501100C):** crown/bridge veneer ceramic
- **Ultralow (<850C):** veneers on titanium or special alloys

### B) By microstructure (crystal phase)
- **Glassbased (amorphous):** highest translucency, lowest strength
- **Glassbased with fillers** (leucite, lithium disilicate): balance of esthetics + strength
- **Crystalline/polycrystalline** (alumina, zirconia): highest strength, higher opacity, no glass matrix

### C) By fabrication method
- Sintering (powderlayered feldspathic)
- Heatpressed / castable (lostwax press ingots)
- Slipcasting + glass infiltration (InCeram)
- CAD/CAM milling (hard/soft machining blocks)

---

## 6) Porcelain fabrication (lab workflow)  key definitions you must know

### Step 1: Platinum foil on die (~0.025 mm)
- Retains porcelain during firing
- Helps accuracy/fit

### Step 2: Buildup with porcelain slurry (powder + water/special liquid) then:

### A) Condensation / compaction (MOST IMPORTANT)
**Definition:** packing/condensing the wet porcelain on the die (vibration/spatulation/brush) to:
- remove excess water
- remove trapped air/voids
- increase packing density

**Why it matters:**
-  porosity (fewer internal flaws)
-  firing shrinkage
- improves fit and strength

**Common errors  results:**
- trapped air/voids  porous, weak, chalky/opaque
- excess water  excessive firing shrinkage; distortion/undersized restoration
- poor packing density  poor fit; weak structure

### B) Sintering (firing)  what it means
**Definition:** heating porcelain powder so particles fuse at contact points (necking) and densify into a coherent mass.
- **Vacuum firing:** reduces porosity by removing/expanding entrapped air  better translucency and strength consistency.

**Bisque stages (clinical meaning)**
- **Low bisque:** matte/dull, high porosity, very fragile  good for adding bulk
- **Medium bisque:** slight sheen, less porosity, stronger but carvable  common tryin stage
- **High bisque:** smooth/glassy, minimal porosity, very hard  final contour/characterization before glaze

**Firing precautions (high yield)**
- Predry (510 min at furnace door) to remove moisture and avoid steam defects
- Correct vacuum pressure (improves translucency/porosity control)
- Controlled/slow cooling to avoid internal stress and cracking
- Regular furnace calibration (temp accuracy prevents over/underfiring)
- Keep restoration away from furnace walls/heating elements  more uniform heat; less warpage/hot spots/internal stresses

### C) Glazing + cooling  what glazing is
**Glazing** = final surface vitrification to produce a smooth, shiny, impervious surface that:
- seals surface microcracks/porosity  improves strength (fewer crack starters)
- reduces plaque retention and staining
- reduces abrasion/wear of opposing teeth compared with rough surfaces

**Types**
- **Selfglaze:** surface glass flows during final firing (often preferred)
- **Applied glaze:** add lowfusing glass layer; lower firing temp but more modifiers  generally less resistant to oral fluids than selfglaze

**Cooling** must be gradual/uniform  avoids crazing (microcrack network) and residual thermal stress.

---

## 7) Why ceramics fail (strength profile)
- Brittle material; failure begins at flaws (porosity, microcracks, scratches).
- Tensile stress at flaws drives crack growth; compressive strength is high but tensile strength is low.

### What affects strength (exam list)
- composition
- surface integrity (flaws  strength a lot)
- firing procedure (inadequate firing or overfiring weakens structure)

---

## 8) Ceramic strengthening (how we increase toughness/strength)
- **Design:** reduce stress concentrators (sharp internal angles, thin connectors, unsupported porcelain).
- **Reduce surface flaws:** proper finishing + polishing + glazing.
- **Interrupt crack propagation:**
  - **alumina dispersion:** tough particles absorb crack energy and reduce driving force
  - **zirconia transformation toughening (PSZ/YTZP):** stressinduced crystal change absorbs energy and creates compressive zone at crack tip

---

## 9) Metalceramic restorations (PFM)  layering, requirements, alloys, failures

### PFM concept
- Metal coping/framework provides strength + rigidity; porcelain veneer provides esthetics.

### Porcelain layering (what each layer does)
- **Opaque porcelain:** masks metal color and initiates bond (thin masking layer)
- **Body/dentin porcelain:** main shade and bulk contour
- **Incisal/enamel porcelain:** translucency and incisal effects
- **Glaze:** seals surface flaws and produces smooth surface

### PFM porcelain requirements (accurate)
- **Thermal compatibility:** metal should have slightly higher CTE than porcelain  porcelain ends in slight compression after cooling; mismatch  tensile stress  crazing/cracking.
- Porcelain firing temp must be below alloy solidus; alloy must resist sag/creep during firing.
- **Bond requirement:** controlled oxide layer on metal for chemical bonding (too little oxide = weak bond; too thick oxide = weak interface).
- Coping must be stiff (high modulus/yield) so it doesnt flex; flexure puts porcelain in tension  fracture.

### Bonding mechanisms (metal  porcelain)
- **Chemical:** oxide layer on metal bonds with porcelain (noble alloys often via Sn/In oxides; base alloys via Cr/Ti oxides).
- **Mechanical:** sandblasting creates microretention; porcelain wets/locks into roughness.
- **Compressive (thermal):** CTE design leaves porcelain in residual compression.

### Typical thickness / reduction (teaching ranges)
- **Metal coping:** 0.30.5 mm (about 0.3 mm minimum for rigidity)
- **Opaque porcelain:** 0.20.3 mm
- **Veneering porcelain (body+incisal total):** ~0.81.2 mm (commonly ~1.0 mm)
- **Facial reduction for PFM:** ~1.21.5 mm
- **Occlusal/incisal reduction:** ~1.52.0 mm depending on functional cusp/incisal design

### PFM alloy types (what you must know)

#### 1) High Noble (Highgold; AuPtPd)
- **Definition:** 40% Au and 60% total noble metal.
- **Pros:** best corrosion resistance/biocompatibility; good fit (lower casting shrinkage); predictable thin oxide for bonding; easier to mask warm color.
- **Cons:** lower modulus (more flexible)  may need thicker coping; lower sag resistance; very expensive.

#### 2) Noble (PdAg / HighPd / PdCu systems)
- **Definition:** 25% total noble metal.
- **Pros:** stronger/stiffer than highgold; better sag resistance; often good CTE match to porcelains; cheaper than highgold.
- **Cons:** Ag can cause porcelain greening; some PdCu systems form darker/heavier oxides that are harder to mask.

#### 3) Predominantly base (NiCr, CoCr, Ti alloys)
- **Definition:** <25% noble metal.
- **Pros:** very high modulus (stiff)  can be thinner and support porcelain well; high melting range  excellent sag resistance; low cost.
- **Cons:** biocompatibility issues (Ni allergy in some patients); casting shrinkage higher (fit is harder); oxide can be thick/dark  porcelain bond problems/delamination risk.

### Common PFM failures (pattern recognition)
- **Delamination/adhesive failure:** separation at interface (often oxide problems or contamination).
- **Cohesive porcelain fracture:** crack within porcelain (often from flexure, flaws, occlusal overload).
- **Porosity:** poor condensation, trapped air, or incorrect vacuum firing.

`},zv=["Bonds: Chemical (oxides), Mechanical (sandblasting), Compressive (CTE mismatch)","Phases: Glassy (translucency), Crystalline (strength/opacity)","Porcelain Components: Feldspar (matrix), Silica (strength), Kaolin (opacity/handling)","Feldspathic Porcelain: Aesthetic but brittle; used for veneers","Alumina/Zirconia: High strength crystalline ceramics; Zirconia has transformation toughening","PFM Layers: Opaque -> Body -> Incisal -> Glaze","Processing: Sintering (firing), Heat pressing (IPS Empress), Slip casting (In-Ceram), CAD/CAM","Glazing: Reduces flaws, smooths surface","Zirconia: Y-TZP, very strong, transformation toughening inhibits crack propagation"],FT=[{id:"cer_mcq_easy_1",question:"What is the primary chemical structure of dental porcelain?",options:["A crystalline metal lattice","An amorphous glassy silica network","A resin polymer chain","A carbon-based fiber"],correctAnswerIndex:1,explanation:`Dental porcelain is essentially a glass (amorphous solid) based on a silica ($SiO_2$) and
feldspar network.`},{id:"cer_mcq_easy_2",question:'Which component is known as the "basic glass former" in dental porcelain?',options:["Kaolin","Silica","Feldspar","Alumina"],correctAnswerIndex:2,explanation:"Feldspar (6080%) melts to form the glass matrix that holds everything else together."},{id:"cer_mcq_easy_3",question:"In a PFM crown, which layer is responsible for masking the dark metal color?",options:["Body Porcelain","Incisal Porcelain","Opaque Porcelain","Glaze"],correctAnswerIndex:2,explanation:`The opaque layer is the first layer applied; it blocks light transmission to hide the metal coping
completely.`},{id:"cer_mcq_easy_4",question:"Dental ceramics are generally strongest in which type of force?",options:["Tensile","Shear","Compression","Torsion"],correctAnswerIndex:2,explanation:`Like stone or concrete, ceramics can withstand heavy crushing (compression) but break easily if
pulled apart (tension).`},{id:"cer_mcq_easy_5",question:'Which alloy type is the most "tissue-friendly" (biocompatible) and resistant to corrosion?',options:["Nickel-Chromium","Cobalt-Chromium","High Noble - Gold","Silver-Palladium"],correctAnswerIndex:2,explanation:`High Gold alloys are chemically inert and do not react with body fluids, making them the most
biocompatible option.`},{id:"cer_mcq_easy_6",question:"The process of firing porcelain powder to make it solid is called:",options:["Casting","Sintering","Etching","Milling"],correctAnswerIndex:1,explanation:`Sintering is the fusion of powder particles via heat to form a solid mass without melting it
completely into a liquid.`},{id:"cer_mcq_easy_7",question:"Which acid is used to etch the internal surface of a glass-ceramic (like e.max) crown?",options:["Phosphoric Acid","Hydrofluoric Acid - HF","Hydrochloric Acid","Polyacrylic Acid"],correctAnswerIndex:1,explanation:`HF acid selectively dissolves the glass matrix to create micropores for bonding. Other acids are
not strong enough to eat glass.`},{id:"cer_mcq_easy_8",question:'What is the main purpose of "glazing" a restoration?',options:["To change the shade","To create a smooth, shiny, and sealed surface","To melt the metal coping","To increase the size of the crown"],correctAnswerIndex:1,explanation:`Glazing seals microscopic surface flaws (increasing strength) and creates a glossy surface that
is hygienic and does not abrade opposing teeth.`},{id:"cer_mcq_easy_9",question:'Which material is known as "Ceramic Steel" due to its high strength?',options:["Feldspathic Porcelain","Zirconia","Leucite","Composite"],correctAnswerIndex:1,explanation:`Zirconia has very high flexural strength (900+ MPa) and fracture toughness, comparable to
some metals.`},{id:"cer_mcq_easy_10",question:'"Fritting" is a process used in the manufacturing of:',options:["Gold alloys","Porcelain powder","Zirconia blocks","Wax patterns"],correctAnswerIndex:1,explanation:"Fritting involves quenching hot glass in water to shatter it into the powder used by dental labs."},{id:"cer_mcq_easy_11",question:'Which component is added to porcelain to provide "translucency"?',options:["Kaolin","Opaque oxides","Silica/Feldspar - glass phase","Titanium"],correctAnswerIndex:2,explanation:`The glassy phase allows light to pass through, mimicking natural enamel. Crystalline additives
usually add opacity.`},{id:"cer_mcq_easy_12",question:'The "Try-In" of a crown is best done at which firing stage?',options:["Low Bisque","Medium Bisque","High Bisque","Glazed"],correctAnswerIndex:1,explanation:`At Medium Bisque, the crown is strong enough to handle but porous enough to make
adjustments with a stone.`},{id:"cer_mcq_easy_13",question:"A PFM crown consists of porcelain fused to:",options:["A composite core","A metal substructure - coping","A zirconia core","A fiber post"],correctAnswerIndex:1,explanation:"PFM stands for Porcelain Fused to Metal."},{id:"cer_mcq_easy_14",question:"Which porcelain layer mimics the natural enamel of the tooth?",options:["Body","Opaque","Incisal","Gingival"],correctAnswerIndex:2,explanation:"Incisal porcelain is translucent and placed at the cutting edge to look like enamel."},{id:"cer_mcq_easy_15",question:'"Sag resistance" is a property required for:',options:["The porcelain powder","The metal alloy","The cement","The die stone"],correctAnswerIndex:1,explanation:`The metal must not sag (deform) under its own weight when heated to near-melting
temperatures during porcelain firing.`}],GT=[{id:"cer_mcq_medium_16",question:"Why is potassium added to feldspathic porcelain?",options:["To lower fusion temperature","To increase viscosity and prevent slumping","To create a chemical bond","To act as a pigment"],correctAnswerIndex:1,explanation:`Potassium oxide ($K_2O$) makes the molten glass "thicker" (more viscous) so the crown holds
its shape and doesn't melt into a puddle during firing.`},{id:"cer_mcq_medium_17",question:"Which firing method is essential to reduce porosity in dental porcelain?",options:["Open air firing","Vacuum firing","Pressure firing","Steam firing"],correctAnswerIndex:1,explanation:`A vacuum sucks out air trapped between particles. If not removed, the air bubbles make the
porcelain opaque and weak.`},{id:"cer_mcq_medium_18",question:'In PFM bonding, the "Compressive Bond" is achieved because:',options:["Metal and porcelain contract at the same rate.","Porcelain contracts more than metal.","Metal contracts slightly more than porcelain.","The opaque layer expands."],correctAnswerIndex:2,explanation:`The metal shrinks more upon cooling (higher CTE), effectively "clamping" the porcelain.
Porcelain is strong under this compressive force.`},{id:"cer_mcq_medium_19",question:'Which element is responsible for the "greening" discoloration of porcelain?',options:["Gold","Palladium","Silver","Indium"],correctAnswerIndex:2,explanation:"Silver has a high vapor pressure; it vaporizes during firing and stains the porcelain yellow-green."},{id:"cer_mcq_medium_20",question:"What is the major disadvantage of Base Metal (Ni-Cr) alloys compared to Gold?",options:["Lower strength","Low modulus of elasticity","Excessive oxide formation and casting shrinkage","Low melting temperature"],correctAnswerIndex:2,explanation:`Base metals shrink significantly (leading to poor fit) and form thick, dark oxides that can cause
bond failure or delamination.`},{id:"cer_mcq_medium_21",question:'"Transformation Toughening" involves a crystal phase change from:',options:["Monoclinic to Tetragonal","Tetragonal to Monoclinic","Cubic to Hexagonal","Amorphous to Crystalline"],correctAnswerIndex:1,explanation:`Stress triggers the metastable Tetragonal crystals to expand into Monoclinic crystals (4%
expansion), which seals the crack.`},{id:"cer_mcq_medium_22",question:'Which material allows for "etchable" bonding due to its glass content?',options:["Zirconia","Alumina","Lithium Disilicate - e.max","Gold"],correctAnswerIndex:2,explanation:`Lithium Disilicate is a glass-ceramic. You can etch the glass phase. Zirconia is polycrystalline
(no glass) and cannot be etched.`},{id:"cer_mcq_medium_23",question:'The "Lost Wax" technique is NOT used for:',options:["Pressed Ceramics - Empress","Cast Gold","CAD/CAM Milled Zirconia","PFM Copings"],correctAnswerIndex:2,explanation:`CAD/CAM is a subtractive method (milling from a block), not a casting/pressing method, so it
does not use the lost wax process.`},{id:"cer_mcq_medium_24",question:'The primary function of "Condensation" during porcelain build-up is to:',options:["Mix the shades","Remove excess water to reduce firing shrinkage","Heat the porcelain","Apply the glaze"],correctAnswerIndex:1,explanation:`Packing particles tightly reduces the empty space that would cause massive shrinkage when the
water evaporates.`},{id:"cer_mcq_medium_25",question:`Which PFM failure is characterized by porcelain breaking away from the metal (clean
metal surface exposed)?`,options:["Cohesive failure","Adhesive failure","Tensile failure","Shear failure"],correctAnswerIndex:1,explanation:`Adhesive failure means the bond between materials failed. Cohesive failure is a break within
one material.`},{id:"cer_mcq_medium_26",question:'Why is Zirconia considered "opaque" compared to glass ceramics?',options:["It contains kaolin.","It has a high crystalline content and no glass matrix.","It is always covered in opaque porcelain.","It absorbs all light."],correctAnswerIndex:1,explanation:`Crystals scatter light. Since Zirconia is 100% crystalline (polycrystalline), it naturally blocks more
light than glass-based materials.`},{id:"cer_mcq_medium_27",question:"What is the approximate shrinkage of porcelain during firing?",options:["1-5%","10-15%","30-40%","0%"],correctAnswerIndex:2,explanation:`Porcelain powder is mixed with water. As water is removed and particles sinter, the volume
shrinks massively (30-40%), requiring the build-up to be oversized.`},{id:"cer_mcq_medium_28",question:'"Soft Machining" of Zirconia refers to:',options:["Milling the block after it is fully sintered.","Milling the block in a pre-sintered - chalk-like state.","Hand-carving the wax.","Using soft burs."],correctAnswerIndex:1,explanation:'It is easier and faster to mill the soft "green" Zirconia before it is fired to full hardness.'},{id:"cer_mcq_medium_29",question:'To prevent "sagging" of a long-span PFM bridge during firing, the alloy must have:',options:["A low melting temperature.","A high melting temperature - thermal stability.","High noble content.","Low stiffness."],correctAnswerIndex:1,explanation:"The alloy must remain solid and rigid at the high temperatures used to fire the porcelain."},{id:"cer_mcq_medium_30",question:"Silane is used to bond:",options:["Zirconia to Tooth","Metal to Tooth","Silica-based ceramic to Resin Cement","Enamel to Dentin"],correctAnswerIndex:2,explanation:`Silane acts as a chemical coupler/bridge between the inorganic silica in the crown and the
organic matrix of the resin cement.`}],zT=[{id:"cer_mcq_hard_31",question:`Which oxides are specifically added to Noble alloys to form the chemical bond with
porcelain?`,options:["Gold and Platinum oxides","Tin, Indium, or Iron oxides","Sulfur and Phosphorus","Calcium and Potassium"],correctAnswerIndex:1,explanation:`Noble metals (Au, Pt) don't oxidize. Trace base metals (Sn, In, Fe) migrate to the surface to form
the oxide layer needed for chemical bonding.`},{id:"cer_mcq_hard_32",question:`The volume expansion associated with the Tetragonal-to-Monoclinic transformation in
Zirconia is approximately:`,options:["0.5%","35%","10%","20%"],correctAnswerIndex:1,explanation:`The ~4% volume increase is exactly what creates the compressive force that "pinches" the crack
shut.`},{id:"cer_mcq_hard_33",question:`Which phenomenon occurs if the Coefficient of Thermal Expansion (CTE) of porcelain is
higher than that of the metal?`,options:["Compressive bonding - Good","The porcelain will craze or crack - Crazing","The metal will melt","The porcelain will detach immediately"],correctAnswerIndex:1,explanation:`If porcelain shrinks more than metal (higher CTE), it puts the porcelain in tension (pulling apart),
causing surface cracks called crazing.`},{id:"cer_mcq_hard_34",question:`The melting range of a PFM alloy must be at least how many degrees higher than the
porcelain firing temperature?`,options:["10C","50C","100150C","500C"],correctAnswerIndex:2,explanation:`This safety margin prevents the metal framework from creeping or sagging (deforming) during
the firing cycles.`},{id:"cer_mcq_hard_35",question:'In the "In-Ceram" (Slip-Casting) technique, the core strength is achieved by:',options:["Sintering feldspar.","Glass infiltration into a porous alumina network.","Transformation toughening.","Casting molten glass."],correctAnswerIndex:1,explanation:`A porous alumina skeleton is created, and then a low-viscosity glass is melted over it to soak
into the pores (infiltration), removing porosity.`},{id:"cer_mcq_hard_36",question:'Which ion acts as a "flux" to disrupt the silica network and lower fusion temperature?',options:["Aluminum - $Al^{3+}$","Sodium - $Na^+$","Silicon - $Si^{4+}$","Zirconium - $Zr^{4+}$"],correctAnswerIndex:1,explanation:"Alkali metal ions (Na, K) are fluxes that break Si-O bonds to lower the melting point of the glass."},{id:"cer_mcq_hard_37",question:'"Devitrification" of dental porcelain refers to:',options:["The desired formation of leucite crystals.","The unwanted crystallization of the glass matrix due to repeated firing.","The process of glazing.","The removal of air bubbles."],correctAnswerIndex:1,explanation:`If porcelain is fired too many times, the glass can crystallize (devitrify), making it milky/cloudy
and physically weak.`},{id:"cer_mcq_hard_38",question:"The theoretical strength of ceramic is reduced in practice primarily due to:",options:["Griffith flaws - micro-cracks.","Lack of carbon.","High water content.","Excessive glazing."],correctAnswerIndex:0,explanation:`Griffith's theory explains that brittle materials fail at low stresses due to microscopic surface
defects that concentrate stress at a single point.`},{id:"cer_mcq_hard_39",question:'Why does Dicor (Castable Glass) require a "Ceramming" heat treatment?',options:["To melt the glass.","To grow mica crystals within the glass for strength.","To remove the investment material.","To change the color."],correctAnswerIndex:1,explanation:`The cast object is initially weak amorphous glass. Heating it (ceramming) precipitates mica
crystals, turning it into a stronger glass-ceramic.`},{id:"cer_mcq_hard_40",question:'A "Platinum Foil Matrix" technique is used for PJC (Porcelain Jacket Crowns) because:',options:["The foil remains in the crown for strength.","The foil is removed after firing, allowing for a better fit than a metal coping.","The foil dissolves into the porcelain.","It prevents the porcelain from shrinking."],correctAnswerIndex:1,explanation:`The foil supports the wet porcelain during firing but is peeled out at the end, leaving a pure
porcelain crown with good adaptation.`},{id:"cer_mcq_hard_41",question:`Which surface treatment is contraindicated for Zirconia because it fails to create
retentive patterns?`,options:["Sandblasting with Alumina","Tribochemical Silica Coating - CoJet","Hydrofluoric Acid Etching","Application of MDP Primer"],correctAnswerIndex:2,explanation:`HF acid works by dissolving glass. Zirconia has no glass phase. Acid etching does nothing but
clean it; it does not create retention.`},{id:"cer_mcq_hard_42",question:'The "sag" of a metal bridge is most closely related to which mechanical property?',options:["Creep","Hardness","Resilience","Toughness"],correctAnswerIndex:0,explanation:`Creep is the time-dependent deformation of a material under constant stress (gravity/weight of
the bridge) at high temperatures.`},{id:"cer_mcq_hard_43",question:"Leucite ($KAlSi_2O_6$) is created in feldspathic porcelain primarily to:",options:["Increase opacity.","Increase the Thermal Expansion Coefficient - CTE.","Decrease the melting point.","Improve polishability."],correctAnswerIndex:1,explanation:`Metals expand/contract a lot. Glass does not. Leucite is a crystal with high expansion that is
added to the glass so it expands/contracts with the metal, preventing cracks.`},{id:"cer_mcq_hard_44",question:`Which primer monomer is specifically designed to bond to metal oxides
(Zirconia/Alumina/Metal)?`,options:["Bis-GMA","10-MDP","HEMA","TEGDMA"],correctAnswerIndex:1,explanation:`10-MDP is the gold standard phosphate monomer that chemically bonds to the oxide surface of
Zirconia and metals.`},{id:"cer_mcq_hard_45",question:'"Capillary Technology" (Captek) utilizes gold-impregnated wax sheets to:',options:["Create a solid gold pontic.","Create a composite metal coping via capillary action.","Glaze the porcelain.","Etch the tooth."],correctAnswerIndex:1,explanation:`When heated, the wax burns off and molten gold flows (via capillary action) into the porous
platinum/gold structure, creating a dense coping.`}],N3=[{id:"cer_mcq_hard_46",question:`Scenario: A patient returns 2 years after receiving a PFM crown on #8. The gum line has
receded, revealing a dark gray line at the margin. The crown itself is intact. What is the most
likely cause?`,options:["Porcelain fracture.","Metal collar visibility due to supragingival margin placement - or recession.","Adhesive failure of the cement.","Green discoloration from silver."],correctAnswerIndex:1,explanation:`Traditional PFMs often have a metal collar at the margin for fit. If the gum recedes, this metal
becomes visible. This is an esthetic failure, not a material failure.`},{id:"cer_mcq_hard_47",question:`Scenario: You are cementing a Zirconia crown. You try it in, it fits perfectly. You clean
the inside with phosphoric acid, rinse, and apply cement. A week later, the crown falls off.
The cement is on the tooth, the crown is clean. What went wrong?`,options:["The cement was expired.","Phosphoric acid deactivated the zirconia surface - blocked oxide sites.","You should have used HF acid.","Zirconia cannot be cemented, only screwed in."],correctAnswerIndex:1,explanation:`Phosphoric acid cleans Zirconia, but the Phosphate ions bind to the oxide sites, blocking the
MDP primer from bonding. You must use a dedicated cleaner (e.g., Ivoclean) or sandblast, NOT phosphoric
acid.`},{id:"cer_mcq_hard_48",question:`Scenario: A lab sends back a PFM bridge. You notice tiny bubble-like porosities on the
surface of the porcelain. What was the likely error in the lab?`,options:["Fired under too high vacuum.","Improper condensation or failure to vacuum fire.","Too much opaque layer.","The metal was too thick."],correctAnswerIndex:1,explanation:`Porosity is caused by trapped air. This happens if the technician didn't pack the powder
(condense) well enough to squeeze air out, or if the vacuum pump failed during firing.`},{id:"cer_mcq_hard_49",question:`Scenario: You are prepping tooth #30 for a monolithic Zirconia crown. The patient has a
heavy bruxing habit. Which reduction/prep style is most appropriate to prevent wear on the
opposing tooth?`,options:["Minimal reduction - 0.5mm and high polish of the occlusal surface.","Aggressive reduction - 2.0mm and glazing.","Feather edge prep.","Use a PFM instead."],correctAnswerIndex:0,explanation:`Polished Zirconia is very kind to opposing teeth (less abrasive than glaze). Because Zirconia is
strong, you can be conservative (0.5mm) and polish it well. Glaze wears off and exposes rough ceramic.`},{id:"cer_mcq_hard_50",question:`Scenario: A PFM crown fractures. The break leaves a thin layer of opaque porcelain
covering the metal. What does this indicate?`,options:["Poor bond between metal and opaque - Adhesive failure.","Good metal-ceramic bond; the failure was within the porcelain - Cohesive failure.","The metal was too smooth.","The opaque layer was too thick."],correctAnswerIndex:1,explanation:`Since porcelain (opaque) is still stuck to the metal, the chemical bond held. The material broke
within itself (cohesive). This suggests trauma or occlusion issues, not a manufacturing bond error.`},{id:"cer_mcq_hard_51",question:`Scenario: You cement a Feldspathic Veneer. As soon as you cure the cement, the veneer
cracks in half. The prep was conservative (enamel). What is the most likely error?`,options:["The veneer was too thick.","You used a light-cure cement.","The veneer was not fully seated or had a premature contact point during seating.","HF acid weakened the veneer."],correctAnswerIndex:2,explanation:`Feldspathic porcelain is extremely brittle before bonding. If you force it down on an uneven spot
or if it's not perfectly seated when pressure is applied, it will snap.`},{id:"cer_mcq_hard_52",question:`Scenario: A patient complains that their new PFM crown looks "chalky" and opaque
compared to the adjacent natural tooth. The lab followed the shade guide correctly. What
prep error likely caused this?`,options:["Excessive reduction.","Under-reduction - insufficient space.","Using a shoulder margin.","Using a noble alloy."],correctAnswerIndex:1,explanation:`If you don't reduce enough tooth (e.g., only 0.8mm), the lab has to squeeze in the metal and
opaque. They have no room left for the translucent incisal porcelain, resulting in a lifeless, opaque crown.`},{id:"cer_mcq_hard_53",question:`Scenario: During the try-in of an e.max (Lithium Disilicate) crown, you adjust the
occlusion with a diamond bur. What MUST you do before final cementation?`,options:["Nothing, just cement it.","Glaze it again in the furnace or use a purely mechanical polishing kit.","Sandblast the occlusal surface.","Dip it in alcohol."],correctAnswerIndex:1,explanation:`Grinding creates micro-cracks. If you don't re-glaze or meticulously polish to remove these
defects, the crown will likely fracture from that rough spot later.`},{id:"cer_mcq_hard_54",question:`Scenario: A PFM bridge rocks on the die. The technician decides to cut the bridge
connector, solder it, and re-fire the porcelain. Is this acceptable?`,options:["Yes, soldering is standard.","No, you cannot solder after porcelain is added without damaging the porcelain.","Yes, but only with a laser.","No, because the metal will shrink."],correctAnswerIndex:1,explanation:`Standard soldering requires heat that would melt or ruin the porcelain. Post-ceramic soldering is
very risky; usually, the porcelain must be stripped or the bridge remade.`},{id:"cer_mcq_hard_55",question:`Scenario: You are choosing a shade for a PFM crown. The patient has very translucent
enamel tips. Which porcelain layer should the technician emphasize to match this?`,options:["Body porcelain.","Opaque porcelain.","Incisal porcelain.","Aluminous core."],correctAnswerIndex:2,explanation:`The Incisal layer is the translucent layer that mimics the "see-through" nature of natural tooth
tips (halo effect).`},{id:"cer_mcq_hard_56",question:`Scenario: A patient has a Nickel allergy. They need a long-span posterior bridge (high
load). Which alloy system is the safest AND most rigid alternative?`,options:["High Gold - Type IV.","Cobalt-Chromium - Co-Cr.","Pure Titanium.","Silver-Palladium."],correctAnswerIndex:1,explanation:`Co-Cr is a Base Metal (very stiff/rigid for long spans) but does not contain Nickel, avoiding the
allergy. High Gold might be too flexible for a very long span and is expensive.`},{id:"cer_mcq_hard_57",question:`Scenario: A Zirconia crown comes back from the lab appearing larger than the die. The
lab claims they milled it correctly. What is the likely manufacturing error?`,options:["They used the wrong shrinkage factor.","They sintered it for too long.","They used a presintered block.","They forgot to glaze it."],correctAnswerIndex:0,explanation:`Zirconia shrinks ~25% during sintering. The computer must enlarge the milling file by a precise
"shrinkage factor" to compensate. If the factor is wrong, the final crown won't fit.`},{id:"cer_mcq_hard_58",question:`Scenario: You are removing an old crown. It is white on the outside but has a dark metal
core. When you cut into it, sparks fly, and it is extremely hard to cut, ruining several burs.
What is the alloy?`,options:["High Noble Gold.","Base Metal - Ni-Cr or Co-Cr.","Titanium.","Silver-Palladium."],correctAnswerIndex:1,explanation:`Base metals are notoriously hard and difficult to cut, often producing sparks and destroying
diamonds/carbides. Gold cuts softly like butter.`},{id:"cer_mcq_hard_59",question:`Scenario: An all-ceramic crown on a molar fractures after 6 months. Analysis shows the
fracture initiated at the internal surface (cement interface). What is a probable cause?`,options:["Occlusal overload.","Sharp line angle on the tooth prep.","The patient ate ice.","The porcelain was over-glazed."],correctAnswerIndex:1,explanation:`Ceramics are brittle and hate sharp corners. A sharp line angle on the prep acts as a stress riser
on the inside of the crown, causing a crack to start from the inside out.`},{id:"cer_mcq_hard_60",question:`Scenario: A dentist sandblasts the internal surface of a Zirconia crown with 50-micron
alumina at high pressure (4 bar). The crown fits well but fractures a month later. Why?`,options:["Sandblasting is not recommended.","The pressure was too high, causing micro-cracks and phase transformation damage.","The cement reacted with the alumina.","Zirconia absorbs water."],correctAnswerIndex:1,explanation:`While sandblasting is necessary for Zirconia bonding, it must be gentle (low pressure ~2 bar,
small particles). Excessive blasting induces surface damage and phase transformation that weakens the
restoration.


Bonus: Gypsum Die for Porcelain Work`},{id:"cer_mcq_hard_61",question:`What type of gypsum is used to make a working die for porcelain/indirect restorations,
and why?`,options:["Type II plaster - highest strength and least expansion","Type III dental stone - low strength but best detail reproduction","Type IV die stone - high strength and low expansion for accurate margins","Type V dental stone - lowest expansion for maximum accuracy"],correctAnswerIndex:2,explanation:`Key: Type IV = high-strength, low-expansion die stone for accurate margins and abrasion
resistance during lab work.`}],R3=[...FT,...GT,...zT,...N3],M3=[...R3],VT=String.raw`
# **Properties of Dental Materials:summary**

**(Physical + Chemical + Mechanical + Rheological + Optical + Manufacturing + Electrical + Biological)**  
---

## **1\) Thermal Properties**

*Dental materials face constant thermal cycling (hot coffee ~60C  ice cream ~0C). Their response controls marginal seal, longevity, and pulpal safety.*

### **A) Dimensional Change & Integrity**

**1\) Coefficient of Thermal Expansion (CTE, )**

* **Definition:** Fractional change in length per 1C temperature change.  
* **Clinical Significance (Percolation):** Ideally, restorative CTE should **match enamel/dentin**.  
* **Mismatch scenario:** Composites often have **higher CTE** than enamel.  
  * Cold drink  composite contracts **more** than tooth  microscopic marginal gap opens  
  * Saliva/bacteria are sucked in  then warming closes gap and **traps** fluids  
* **Outcome:** **Percolation**  recurrent caries, marginal staining, post-op sensitivity.

**PFM bonding rule (CTE compatibility):**

* Metal substructure must have **slightly higher CTE** than porcelain.  
* Cooling after firing  metal contracts slightly more  porcelain placed under **compression**  fewer craze lines (porcelain strong in compression).

---

**2\) Glass Transition Temperature (Tg)**

* **Definition:** Temperature range where a polymer changes from **glassy/brittle**  **rubbery/flexible**.  
* **Clinical relevance:** Dental polymers (acrylic, composite resins) must have **Tg well above 37C** (mouth temperature).  
* **If Tg is too low**  hot drinks can soften/warp denture base or reduce rigidity.

---

### **B) Heat Transfer**

**3\) Thermal Conductivity (k)**

* **Definition:** Rate of heat flow through a material.  
* **Clinical relevance:**  
  * Enamel/dentin = **poor conductors** (natural insulation)  
  * Metals (amalgam/gold) = **high conductors**  thermal shock can reach pulp  
  * Deep cavity removes insulation  place **base/liner** (low conductivity) under metal restorations  reduces pulpal pain.

**4\) Thermal Diffusivity ()**

* **Definition:** Rate at which a temperature change spreads through a material.  
  * **Key relation:**  = k / (  c) where k=conductivity, =density, c=specific heat  
* **Clinical relevance:** More clinically useful than conductivity alone.  
  * Denture base should have **low diffusivity**  heat reaches mucosa slowly  warning time to avoid burns (acrylic helps).

---

### **C) State Changes**

**5\) Melting point / Fusion temperature (pure metals)**

* **Definition:** Temperature where a pure solid becomes liquid.  
* **Example reference:** **Pure gold = 1064C**.

**6\) Melting range (alloys): Liquidus & Solidus**

* **Liquidus:** Above this, alloy is **100% liquid** (casting: must heat above this).  
* **Solidus:** Below this, alloy is **100% solid** (soldering: stay below this so components dont melt).  
* **Melting range = Liquidus  Solidus**

**7\) Eutectic temperature**

* **Definition:** Specific alloy composition with **lowest melting temperature**, often melting sharply like a pure metal.  
* **Clinical relevance**  
* **During soldering:**

  * Solder melts quickly and completely

  * Parent crown/bridge alloy (higher solidus) does NOT melt

* ** Accurate joints, minimal distortion, predictable results**

---
`,WT=String.raw`

### **Before We Start: How to Think About Properties**

**To use dental materials safely and intelligently, we first need:**

1. **Clear definitions**

   * **What each property actually means (strength, toughness, rheology, solubility, etc.).**

2. **Clinical correlation *(the more important part)***

   * **How that property affects:**

     * **Operative (restorations, liners, composites)**

     * **Ortho (wires, adhesives)**

     * **Prostho (impressions, cements, denture bases, crowns)**

**This may feel like a lot of theory, but the goal is simple:**

**Know the few key properties that actually change how you select, handle, and evaluate materials in the clinicand the way they are asked in exams.**

# **MECHANICAL PROPERTIES**

*The fundamental relationship between force and deformation.*

## **1\) Stress ()**

***Definition:***  
 *Stress is the **internal resistance** of a material to an external load.*  
 *When an external force is applied, the material pushes back internally to maintain its structurethis internal reaction is stress.*

***Formula (Docs-friendly):***  
 *Stress \= Force / Area*

***Written as:***  
 * \= F / A*

***Units:***

* *Pascal (Pa)*

* *Megapascal (MPa)*

* *Common dental unit: MPa \= N/mm*

***Clinical example:***

1. *When a patient bites on a restoration, the biting force is distributed over the restorations surface area, creating stress within the material. If the force is concentrated over a very small area (stress concentration), the stress becomes very high and may overload the restoration or tooth structure, leading to fracture of the restoration or even a cusp.*  
2. *So clinically, we try to avoid **excessively high stress** by improving occlusal contacts and distributing forces evenly.*  
1. ***Denture note (occlusal table):***  
   *If a denture tooth has a very large (wide) occlusal table, the chewing load is less efficient and tends to increase lateral/tipping forces. This can lead to poor cutting/biting efficiency and may destabilize the denture (more tipping/rocking). Therefore, denture teeth are often designed with a more appropriate occlusal table width to improve efficiency and stability.*  
2. ***However:** If the occlusal table is made **too narrow**, the same chewing force is applied over a smaller contact area, which can increase the pressure transmitted to the denture-bearing tissues. This may concentrate load on the mucosa/gingiva (especially if the denture is unstable), leading to **tissue soreness and sore spots**.*  
3. ***Clinical principle:** Aim for an occlusal table width that balances **chewing efficiency and denture stability** while avoiding excessive stress concentration on the supporting tissues.*

*![image1](/assets/mechanical/image1.png)*

## ***2\.*****Strain ()**  **Definition:** The amount of deformation (change in shape) that occurs in response to stress.

When a material is subjected to stress, it physically changes dimensions (stretches, compresses, or twists). Strain measures this change relative to the original length.

 **Formula**: Strain () \= L / L  
  L \= change in length  
  L \= original length

 Units: Dimensionless (often expressed as a percentage, %).

**Dental bridge example:**  
 If a dental bridge bends slightly in the middle under chewing forces, the **force from chewing is the stress**, and the **bending/deformation of the bridge is the strain**.

* **Impression material / chewing gum analogy:**  
   When you **pull** an impression material (or something elastic like chewing gum), the **pulling force you apply is the stress**, and the **material elongating/stretching is the strain**.

**One-line rule to remember:**  
**Stress \= the load you apply (cause).**

**Strain \= the deformation that happens (effect).**

![image2](/assets/mechanical/image2.png)

## **3\. The Stress-Strain Curve Zones**

**The StressStrain Relationship** 

**Stress ()** causes **strain ()**.  
 A **stressstrain curve** shows how a material deforms as you increase the load.

We uses a metal diagram showing if u applies the stress on a material what phases it undergoes on a  stress strain curve

*![image3](/assets/mechanical/image3.png)*

# 

# **Elastic Region (The "Spring" Zone):**

##### **1.Elastic Modulus (Stiffness):** slope of the elastic (linear) part of the stressstrain curve \= Modulus of Elasticity (E).  This tells you how rigid (stiff) or flexible a material is.

* Higher E (steeper slope) \= more rigid / stiffer  
    very little strain (bending) for a given stress.  
   Example idea:Porcelain / glass-like materials are extremely stiff, so they dont bend much.

* **Lower E (less steep slope) \= more flexible**  
    more strain (bending) for the same stress.  
   Example: metals with lower E flex more.

* It is the **stiffness** of the material  i.e., **how much it bends/strains for a given stress**.  
  * *High Modulus:* Rigid (e.g., PFM Metal Framework).  
    * *Low Modulus:* Flexible (e.g., Class V filling to flex with the tooth)

##### **2.Resilience \= area under the curve in the elastic region only**

##### **3.proportional limit:**  The **highest point on the stressstrain curve where stress is directly proportional to strain** (the end of the perfectly straight/linear region).

**After this point:**  
 The curve stops being perfectly linear, so **stress and strain no longer have a constant proportional relationship** (Hookes law no longer strictly applies).

Why we care about this because this  affects modulus of elasticity and we care about that alot 

#### **Why it matters clinically**

1. **Predictable deflection (using E)**

* Below the proportional limit, stress  strain, so **calculations based on E are accurate**.

* Above it, the curve becomes nonlinear, so **E no longer predicts bending/deflection reliably**.

2. **Safety margin for springback behavior**

* For things that must act like springs (wires, clasps), you want them to work **within the proportional/elastic range**.

* A higher proportional limit means the material can take **more stress while still behaving elastically/linearly**.

3. **Early warning before permanent distortion**

* The proportional limit is usually **close to** the onset of non-ideal behavior that leads toward plastic deformation.

* In frameworks/bridges/wires, once you start leaving the linear elastic range, you risk **distortion, loss of fit, or fatigue**.

So if **Straight line (stress and strain increase together evenly)** \= **safe**  material springs back.

**Line starts to curve** \= **warning**  you may be near **yield**, so stop to avoid permanent bend.

#### **Simple one-liner**

**E tells you how stiff. The proportional limit tells you how far you can load it and still trust that stiffness and get a clean springback.**

**Elastic limit: the maximum stress a material can take and still return completely to its original shape when the load is removed.**

* **Below elastic limit: returns to original shape (no permanent change).**

* **Beyond elastic limit: permanent deformation occurs  it will not fully return to its original position.**

**(Elastic limit is basically the boundary between elastic and plastic behavior.)**

**It's pretty hard to see in metals so we use another terminology called the yield strength** 

**Yield Strength (y)**  
**Definition: The stress required to produce 0.2% permanent (plastic) strain (also called 0.2% proof stress**

## **1\) Modulus of Elasticity (E) and Stiffness in Dental Alloys**

**High E \= stiffer (less bending)**  
**Low E \= more flexible (more bending)**

### **1\) Base-metal alloys (very stiff)**

* **CobaltChromium (CoCr)**  **very high stiffness**  
* **NickelChromium (NiCr)**  **very high stiffness**  
  **Clinical meaning:** frameworks can be thinner and still resist flexing.

### **2\) Stainless steel (stiff)**

* Used in orthodontics; still **high stiffness**, but generally discussed more as a wire material.

### **3\) Noble alloys (less stiff than base metals)**

**Noble alloys \= high noble (gold-rich) or palladium-based alloys.**

* **Gold alloys (Type III/IV, high noble)**  **lower modulus than CoCr / NiCr**  
* **Palladium-based noble alloys**  **moderate to high modulus**, but in many dental teaching comparisons, **base metals are still stiffer**.

**Clinical meaning:**  
If you use a **gold/high-noble framework**, it may need to be **bulkier/thicker** than a base-metal framework to achieve the same rigidity (same no-flex behavior).

---

### **Orthodontic Wires: Stiffness (E) vs Springback (Resilience)**

### **Common wire stiffness order (for similar size wires)**

* **Stainless steel** \= **stiff**  
* **Beta-titanium (TMA)** \= **moderate stiffness**  
* **NiTi** \= **low stiffness**, but **high springback** (resilience)

**Key clinical idea:**

* **NiTi**: bends easily but springs back strongly  best for **initial alignment** with light continuous forces.  
* **Stainless steel**: stiff control  best for **working/finishing, detailing, sliding mechanics**.  
* **TMA**: middle ground and easy to bend  good for **loops and adjustments**.

---

## **How wire stiffness changes with radius (ORTHO SPECIFIC)**

When you change the **thickness** of a wire, stiffness changes **a LOT**.

### **A) Bending stiffness (like when a wire flexes up/down)**

**Bending stiffness  E  r** (for a round wire)  
So **radius is to the 4th power** (super sensitive).

**Quick memory examples:**

* If **radius doubles**  stiffness increases **2 \= 16**  
* If **diameter doubles**  stiffness also increases **16** (because diameter  radius)

Even small changes matter:

* Increase radius by **10%**  stiffness  **(1.1)  1.46**  about **46% stiffer**

### **B) Axial stiffness (pulling along its length)**

**Axial stiffness  E  r**  
(less dramatic than bending)

### **C) Torsional stiffness (twisting)**

For a round wire, torsional stiffness also scales strongly with size (commonly taught as ** r**).

![image4](/assets/mechanical/image4.png)

To make it simple if u increase the radius if the wire is twice as thicker it will be 16 times hard to bend 4 times hard to pull it and 16 times harder to twist it

That's why when we were making adams clasp  from a 0.7mm wire it was so difficult on the other hand  finger spring and z spring were so easy as they were 0.5mm wire 

**Wire thickness (radius) effect  super important rule**  
 For a round wire, thickness affects stiffness a LOT:

* If the **radius doubles** (wire becomes twice as thick):

  * **Bending stiffness** becomes **16** higher (r)  16 harder to bend

  * **Pulling (axial) stiffness** becomes **4** higher (r)  4 harder to stretch/pull

  * **Twisting (torsional) stiffness** becomes **16** higher (r)  16 harder to twist

**One-line memory:**  
 **Small increase in wire thickness  huge increase in bending and twisting stiffness (r).**

### **One-line summary** 

* **E (modulus) \= stiffness (how much it bends).**  
* **Base metals (CoCr, NiCr) are very stiff; gold/noble alloys are less stiff  need more bulk for the same rigidity.**  
* **Orthodontic wires:** Stainless steel **stiff**, TMA **medium**, NiTi **low stiffness but high springback**.  
* **Wire thickness rule:** **bending stiffness  r**  small increase in radius makes wire much stiffer.

## ---

## **2)Resilience (elastic energy storage)**

**Definition:** The **energy a material can absorb and store in the elastic range** (i.e., **without permanent deformation) and then release when the load is removed.**

### Where on the stressstrain curve:

* **Resilience \= area under the curve in the elastic region only**

* Practically: **up to the yield point / elastic limit**

* This is the blue shaded area in many diagrams.

**Meaning (simple):**  
 It is the **energy absorbed before permanent deformation begins**.

**So is it energy required to permanently bend something?**  
 Not exactly.

* **Resilience \= energy absorbed up to the start of permanent bending (yield).**

**how much energy a material can absorb and still be unaffected**

**Energy that can absorbed and return or its original position** 

**Clinical example:**

* **Mouthguards**: need high **resilience** so they can absorb impact and spring back (no permanent deformation).

**Orthodontic wire examples (Resilience / springback)** 

* **NiTi (NickelTitanium)  early alignment**

  * **Very high springback / high resilience**

  * Can be deflected a lot in crowded teeth and still returns

  * Gives **light, more constant forces** over a long activation range

* **TMA / Beta-titanium  mid-stage, loops & bends**

  * **Moderate springback** (between NiTi and stainless steel)

  * Easier to bend than NiTi, good for **loops and adjustments**

  * Useful when you want flexibility \+ ability to customize

* **Stainless steel  working/finishing**

  * **High stiffness (high modulus)**  less deflection

  * **Lower springback than NiTi**

  * Best for **control, detailing, sliding mechanics**, and maintaining arch form

**One-line memory:**  
 **NiTi \= maximum springback**  **TMA \= workable \+ moderate springback**  **Stainless steel \= stiff control,**

**One-line memory:**  
 **Resilience \= elastic energy before yield.**

![image5](/assets/mechanical/image5.png)

## **Plastic Region (The "Dent" Zone):**

### **3)Yield Strength (y)**

**Definition:** The **amount of stress required to start permanent (plastic) deformation**.  
**Yield Strength:** The exact point where the material stops springing back and permanently deforms. If a bridge passes this point, it is ruined.

**Why we use 0.2% yield strength (proof stress)**  
 Plastic deformation (permanent strain) starts gradually in many metals, so there isnt always a sharp, obvious yield point on the stressstrain curve. Also, the first tiny amount of permanent strain is hard to detect directly.

**So we define a measurable standard: 0.2% yield strength (0.2% proof stress).**

* It is the **stress required to produce 0.2% permanent (plastic) strain**.

* **0.2% strain \= 0.002** (as a decimal).

* Method (conceptually): draw a line **parallel to the elastic slope**, but shifted to start at **0.2% strain** on the x-axis; where it meets the curve is the **0.2% yield strength**.

**Meaning:**  
 At stresses **below** this value  deformation is mostly elastic (material springs back).  
 At stresses **at/above** this value  the material has **measurable permanent deformation**.

**Clinical link:**  
 If a bridge/framework is stressed beyond its yield strength (especially the 0.2% proof value), it can become **permanently distorted**  misfit, open margins, occlusal issues.

If a material has low yield strength meaning less strength is required to bend it 

It tells how easily it bends do not confuse with modulus of elasticity which is how much it bends 

**Important distinction (so you dont mix terms):**

* **Yield strength (y)** tells you **how easily it permanently bends**.

* **Modulus (E)** tells you **how much it elastically bends** before permanent change.

**One-line example:**  
 A wire with **low yield strength** will **get permanently bent** with a smaller load compared to a wire with high yield strength.

### **Why not call it plastic deformation?**

Because plastic deformation is the **result** (how much permanent strain occurred), while yield strength is the **cause threshold** (how much stress is needed to cause a standard amount of permanent strain).

Because the exact start of plastic deformation can be unclear, we use the yield strength (often 0.2% proof stress) to define the onset of plastic deformation on the stressstrain curve.

Clinically we want every material to have a very large yield point so that it is very hard to ruin it or deform it 

 **In most clinical situations, higher yield strength is safer** because it means the material is **harder to permanently bend or distort**.

**Why higher yield strength is usually better:**

* Needs **more stress** before permanent deformation starts

* Maintains **fit, margins, occlusion, and appliance shape** under chewing/handling forces

* Reduces risk of **distortion** in frameworks and wires

**Where this matters most (high priority):**

* **Bridges / PFM frameworks / RPD frameworks**

* **Implant bars/frameworks**

* **Working/finishing orthodontic wires (stainless steel)**

**But the correct exam line is:**  
 Higher yield strength is generally preferred, **provided other required properties are also met** (e.g., stiffness/modulus, toughness, corrosion resistance, workability).

**One-line memory:**  
 **Higher yield strength \= harder to permanently bend \= more clinically durable shape**

### **UTS (Ultimate Tensile Strength)**

**Definition:** The **maximum stress** a material can withstand in tension before it starts to fail.  
 On a stressstrain curve, it is the **highest point (peak)** of the curve.

**What happens after UTS (metals):**

* After reaching UTS, the material begins **necking** (local thinning).

* Then the stress the sample can carry **drops** until **fracture**.

The **maximum tensile stress** a material can withstand before **fracture**.

**Clinical meaning (dentistry):**

* **High UTS \= the material can withstand higher tensile stress before it fractures.**

* Relevant for: **bridges/frameworks, orthodontic wires, cast/forged metals**, and any component under pulling/bending forces.

**Remember:**

* **Yield strength** \= stress where **permanent bending starts**

* **UTS** \= stress where the material reaches its **maximum strength** before necking/fracture

**Definition:** Toughness is the **total energy a material absorbs before it fractures**.  
 **On the stressstrain curve:** it is the **total area under the entire curve** (elastic \+ plastic parts) up to fracture.

**Meaning (simple):**  
 The total amount of energy required to break something.

**Do NOT confuse with fracture toughness:**

* **Toughness** \= overall energy absorption until fracture (bulk behavior).

* **Fracture toughness** \= **resistance to crack propagation** (behavior when a crack/defect is present).

**Examples (dentistry):**

* **Zirconia:** relatively **tough for a ceramic** (more crack-resistant, harder to break than many ceramics).

* **Porcelain:** **brittle** (low energy absorption; tends to crack/shatter suddenly).

### **Fracture Toughness (KIC)**

**Definition:**  
 Fracture toughness is a materials **resistance to crack growth (crack propagation)**.  
 It tells you **how hard it is for an existing crack to spread** and cause sudden failure.

**Why it matters:**  
 In real life, materials often contain **tiny flaws or microcracks**. A material can have high strength, but if its fracture toughness is low, a small crack can rapidly grow and the material can fracture catastrophically.

**How to think of it (simple):**

* **High fracture toughness:** cracks tend to **stop or grow slowly**  more damage-tolerant

* **Low fracture toughness:** cracks **run fast**  brittle, sudden fracture

![image6](/assets/mechanical/image6.png)

**On a stressstrain curve:**  
 Fracture toughness is **not** the same as area under the curve.

* Area under curve \= **toughness (energy to fracture)**

* Fracture toughness \= **crack resistance**

**Units (common):** MPam

**Dental relevance examples (conceptual):**

* **Glass/porcelain:** low fracture toughness  cracks spread easily

* **Metals:** high fracture toughness  cracks are less likely to run suddenly

* **Zirconia:** higher fracture toughness than many ceramics (crack resistance is improved)(HOW in ceramic )

**One-line memory:**  
 **Fracture toughness \= resistance to crack propagation.**

## **Other Mechanical Properties**

### **1\) Tensile Strength**

**Definition:** The maximum stress a material can withstand when being **pulled** before it fractures.  
 (Usually refers to **UTS** on the stressstrain curve.)

**Example:** Orthodontic wires must resist tensile/bending forces without breaking.

**Even though amalgam is a metal, it is much stronger in compression than in tension.**

So **thin or unsupported margins/edges** are prone to **fracture**, which is why amalgam restorations need **adequate bulk minimum of 1.5 mm** and **well-supported cavity design**

Dental ceramics and enamel are strong in compression but **weak in tension.**

**![image7](/assets/mechanical/image7.png)**

**Typically brittle materials are weak in tensile strength but strong in compression reasoning in ceramics** 

---

### **2\) Compressive Strength**

**Definition:** The maximum stress a material can withstand when being **compressed (pushed/squeezed)** before it crushes or fails.

**Example:** Dental ceramics and enamel perform well under compression.

Amalgam is **strong in compression but weaker in tension** (so thin edges can fracture if unsupported).

Most materials are **stronger in compression than in tension**, because **tensile forces open cracks/defects**, while compression tends to **close them**.

Metals are stronger in both 

---

### **3\) Impact Strength**

**Definition:** The ability of a material to **absorb sudden shock/impact energy** without fracturing.  
 (Related to toughness under rapid loading.)

**Impact Strength (examples)**

* **Mouthguards** should have **high impact strength** so they can absorb sudden blows without cracking.

 **For restorations Impact strength (shock resistance) tends to be:**  
 **Resin composite \> Amalgam \> Glass ionomer cement (GIC)**  
 **Why**

* **Composite (higher impact strength):** polymer resin matrix can **absorb and dissipate energy**, and crack growth is slowed by fillers/resin bonding  less shattering.

* **Amalgam (lower impact strength than composite):** its relatively **brittle in tension** with limited ability to absorb sudden energy  thin/unsupported parts can chip/fracture.

* **GIC (low impact strength):** more **brittle** (glass \+ ionic matrix)  cracks propagate easily, so it fractures with sudden /shock.

**One-line note:**  
 **Composite \= more shock-resistant; Amalgam and GIC \= more brittle (especially GIC**

**Low impact strength materials (brittle)**

* **Dental ceramics** have **low impact strength**  they can **chip or fracture** if dropped or struck.

* **Denture base acrylic (PMMA)** has **lower impact strength than mouthguard materials**, so dentures can **fracture if dropped**, especially on hard surfaces.  
  


**Impact strength tells us whether a material will break or not when a large amount of energy is applied very quickly.**

### **Simple comparison (for memory)**

* **Toughness:**

   **Total energy to break it (slow or fast).**

* **Impact strength:**

   **How well it survives a sudden blow.**

**When we try to break something like a stick or something we try to do in in a fast jerk if we do it slowly it dosent break as smoothly** 

---

### **4\) Ductility**

**Definition:** The ability of a material to undergo **plastic deformation in tension** (can be drawn into wire) before fracture.  
 Measured by **% elongation** or **reduction in area**.

**Example:** Metals used for wires and bending procedures need good ductility.

**Gold**  especially **pure/annealed gold (gold foil)**  is considered the **most ductile dental material** (can be stretched/drawn without breaking).

**How we measure it:**

* **% elongation** (how much it lengthens before breaking)

* **% reduction in area**

**Simple meaning :**  
 How much a wire can be stretched (permanently) before it breaks.

**Important note:**  
 This is about **plastic stretch before fracture**, not just elastic stretch.

This is pulling force 

![image8](/assets/mechanical/image8.png)

---

### **5\) Malleability**

**Definition:** The ability of a material to undergo **plastic deformation in compression** (can be hammered/rolled into sheets) without cracking.

**Example:** Gold is the most ductile and  highly malleable (can be made into thin foils/sheets).

This is pushing force or compression force

![image9](/assets/mechanical/image9.png)

### 6\) **Brittleness**

**Definition:**  
 Brittleness is the tendency of a material to **fracture suddenly with little or no plastic deformation**.

**Simple meaning:**  
 **It breaks without bending.glass like** 

**On the stressstrain curve:**

* **Very small plastic region** (almost no dent zone)

* **Low strain at fracture**

* **Low toughness** (small area under curve)

**Related properties:**

* Brittle materials usually have **low fracture toughness** (cracks spread easily).

* Brittle  soft. A material can be **hard but brittle** (e.g., ceramics).

**Dental examples (brittle):**

* **Porcelain / dental ceramics**

* **Enamel** (brittle compared to dentin)

* **Glass ionomer cement (GIC)**

* **Denture porcelain teeth** (more brittle than resin teeth)

**Less brittle (more ductile/energy-absorbing):**

* **Metals** (gold alloys, stainless steel, CoCr, NiCr)

* **Resin composites** (generally tougher than ceramics)

**Clinical importance:**  
 Brittle materials should not be left **thin or unsupported**  they crack/chip easily.  
 So we use: **adequate thickness \+ rounded internal line angles \+ good support** (avoid sharp corners/stress concentration).

### **Brittleness  Clinical Summary (Margin Design)**

**Core rule:** Brittle materials fracture if they are **thin** or **unsupported**  they need **bulk and support** at margins.

#### **1\) Amalgam (low edge strength)**

* **Problem:** Thin amalgam margins snap.

* **Result:** **Marginal fracture/ditching**  leakage \+ recurrent caries.

* **Margin design:** **90 butt joint**; **no bevels**.

#### **2\) Porcelain / ceramics (low fracture toughness)**

* **Problem:** Cracks propagate easily, especially in thin areas.

* **Result:** **Chipping or catastrophic fracture**.

* **Margin design:** **Shoulder / heavy chamfer** \+ **adequate thickness** (avoid feather edges).  
* ![image10](/assets/mechanical/image10.png)

#### **3\) Unsupported enamel**

* **Problem:** Enamel is brittle without dentin support.

* **Result:** Margin fractures under chewing.

* **Fix:** Remove **unsupported enamel rods**.

#### **Quick comparison**

* **Amalgam:** brittle  **butt joint** (no bevel).

* **Porcelain:** brittle  **shoulder/heavy chamfer** (bulk).

* **Gold:** ductile  **bevel/feather** (can thin \+ burnish).

![image11](/assets/mechanical/image11.png)

### **7)Hardness:**

**Hardness \= surface scratch/indentation resistance.** 

Clinically, it mainly tells you **(1) how fast the restoration itself wears** and **(2) how much it *might* wear the opposing surface**  but **opposing-tooth wear depends MORE on surface roughness/polish than hardness alone.**

## **What hardness *correlates with* (clinically useful)**

* **Higher hardness  better selfwear resistance**  
  (keeps anatomy/occlusion longer; less scratching)  
* **Higher hardness  harder to finish/adjust/polish**  
  (more bur time, more heat, more difficulty getting a smooth surface)  
* **Higher hardness \+ rough surface  more antagonist wear** (enamel gets abraded)

  ## **What hardness does *NOT* guarantee**

* **Hard  automatically more abrasive.**  
  A **high-hardness but well-polished** surface can be gentle, while a **less-hard but rough** surface can still abrade.  
* **Hardness  strength.**  
  Strength \= load before fracture/bending; hardness \= surface resistance.

  ## **Different materials  how hardness plays out clinically**

  ### **Very hard / hard surfaces**

**Ceramics (porcelain) and zirconia**

* **Self-wear:** very low (they stay shiny/anatomic)  
* **Opposing enamel:** can be **high wear if rough** (after adjustment or if glaze is removed)  
* **Clinical key:** **polish matters more than glaze** for antagonist friendliness; rough ceramic is the enemy.

**Porcelain denture teeth**

* **Harder**  keep cusps (good self-wear resistance)  
* Can be **more abrasive** to opposing natural teeth if occlusion/polish isnt ideal.


  ### **Natural tooth reference**

**Enamel**

* Hard, but can still wear if the opposing surface is rough/harder and unpolished.

  ### **Medium hardness (varies)**

**Composites**

* Usually **wear more than ceramics** (can lose occlusal anatomy over time)  
* Often **kinder to opposing enamel** than rough ceramics because theyre less hard and can be polished smoothly.

**Amalgam**

* **Good in compression**, but surface can wear/ditch over time compared to ceramics  
* Generally **less abrasive to opposing enamel** than rough ceramics (again: surface \+ microstructure matter).

  ### **Lower hardness**

**Gold / high noble**

* **Softer**  can wear a bit, but tends to be **kind to opposing enamel**  
* Great when you want a restoration that doesnt act like sandpaper.

**Acrylic denture teeth (PMMA)**

* **Low hardness**  wears faster (flat cusps over time)  
* Usually **gentler** on opposing teeth than porcelain denture teeth.

## **Base-metal alloys (CoCr, NiCr): hardness correlation \+ clinical relevance**

**Hardness level:** generally **high** (harder than noble gold alloys, often harder than many restorative metals).

### **What that means clinically**

1. **They resist scratching and surface wear (self-wear)**

* CoCr / NiCr surfaces dont get scratched easily  durable metal surface.

* Useful where you want the metal surface to stay intact (e.g., metal components rubbing/contacts).

2. **They are harder to adjust, finish, and polish**

* Chairside: more difficult to cut/shape; burs wear faster; takes longer to get a smooth polish.

* Lab: finishing and polishing is more demanding than gold.

3. **Opposing tooth wear**

* A **high-hardness metal** can contribute to wear of the opposing surface **if left rough** (after adjustment).

* But metals (including base metals) are usually **less abrasive than rough ceramics** because polished metal can be very smooth.

* **Clinical key:** after adjusting CoCr/NiCr, **polish it properly** to reduce antagonist wear.

### **Quick comparison line (exam-friendly)**

* **Ceramic hardness \+ roughness  highest risk of opposing enamel wear.**

* **Base-metal alloys are hard, but when well polished they are usually relatively enamel-friendly.**

* **Gold is softer and typically the most kind to opposing enamel (but may wear itself more).**

  ## **The simplest clinical rule**

* If its **hard \+ rough**  **it will abrade the opposing tooth.**  
* If its **hard \+ highly polished**  **much safer.**  
* If its **soft**  **it may wear itself** (lose anatomy), but is often kinder to the opposing tooth.

**B. The "Confusables" Table**

| Concept A | Concept B | The Difference |
| :---- | :---- | :---- |
| **Ductility** | **Malleability** | **Ductility** \= Pulling into a wire (Tension). **Malleability** \= Hammering into a sheet (Compression). **Most malleable dental material:** **Gold** (especially **pure/annealed gold**, e.g., gold foil). **Memory line: Ductile \= wire**  Gold is best **Malleable \= sheet/foil**  Gold is best  |
| **Stress** | **Strain** | **Stress** \= The internal force (Pressure). **Strain** \= The physical shape change (Deformation). |
| **Hardness** | **Abrasion** | **Hardness** \= Resistance to indentation. **Abrasion** \= Resistance to rubbing/wear. A material can be hard but still wear away (abrade) opposing teeth\! |

---
`,Lm=String.raw`

# THERMAL PROPERTIES

### The physics of hot and cold in the mouth.

## 1. Coefficient of Thermal Expansion

The Coefficient of Thermal Expansion is arguably the most critical thermal property for the long-term clinical success of a dental restoration.

### 1. Definition & Formula
The CTE measures the **fractional change in length** (or volume) of a material for every degree of temperature change. Or:
*CTE is the fractional change in length per unit change in temperature*

- **In Simple Terms:** It describes how much a material "breathes" (expands or contracts) when exposed to hot or cold stimuli.
CTE tells how much a material expands or contracts for each 1C change in temperature, relative to its original length.

**Formula:**
**L =   L  T**

or
Change in length = Coefficient of thermal expansion  Original length  Change in temperature

**Where:**
- **L** = change in length
- **** = coefficient of thermal expansion (this is what we are talking about)
- **L** = original length
- **T** = temperature change

| Material | CTE (ppm/C) | Match to Tooth | Clinical Risk |
| --- | --- | --- | --- |
| **Enamel** | **~11.4** | **Standard** | **N/A** |
| **Dentin** | **~8.3** | **Standard** | **N/A** |
| Ceramics | ~12.0 | Excellent | Very low leakage risk. |
| Glass Ionomer | 10.0 - 11.0 | Best Match | Expands almost exactly like Enamel |
| Gold Alloy | ~14.0 | Good | Reliable long-term seal. |
| Amalgam | ~25.0 | Moderate | Initial leakage; later sealed by corrosion products. |
| Composite | ~30  50 | Poor | High percolation risk; relies heavily on bond strength. |
| Unfilled Acrylic | ~80+ | Terrible | Guaranteed leakage; used for temporaries only. |

### 2. Clinical Relevance: Percolation
If a restorative material expands or contracts at a different rate than the tooth (mismatch in ****), it leads to failure.

- **The Problem:**
  1. **Cold Stimulus:** Patient drinks ice water. If the filling contracts more than the tooth, a gap opens at the margin.
  2. **Percolation:** Saliva and bacteria are sucked into this gap.
  3. **Warm Stimulus:** Patient drinks hot tea. The filling expands and seals the gap, trapping the bacteria inside.

- **The Result:** Recurrent decay and tooth sensitivity.

![Image](/assets/thermal/thermal_p3_img0.png)

### 3. Clinical Consequences
A significant CTE mismatch leads to four primary clinical failures:
- **Microleakage:** Visible staining at the margins of the restoration.
- **Recurrent Caries:** Secondary decay forming under the filling due to trapped bacteria.
- **Post-Operative Sensitivity:** Fluid movement in the gap stimulates the nerve (based on the Hydrodynamic Theory of Pain).
- **Bond Failure:** Repeated thermal cycling causes "fatigue stress," eventually snapping the adhesive layer.

**Key Takeaway:** Since composites cannot match the tooth's CTE, we rely on **Bonding Agents** to mechanically resist these forces. If the bond is weak, thermal cycling will inevitably tear the filling away from the tooth wall.

**PFM Rule:** The metal substructure must have a slightly higher CTE than porcelain so that, on cooling after firing, the metal contracts more and places the porcelain in compressionreducing craze cracks (porcelain is strong in compression).

![Image](/assets/thermal/thermal_p4_img0.png)

**One-line exam takeaway:**
CTE mismatch causes percolation; close CTE matching (or compressive porcelain in PFM) preserves marginal integrity.

---

## 2. Thermal Diffusivity ()

### 1. Definition
The rate at which a temperature change spreads through a material (how fast heat/cold reaches the other side).

**The Formula:**
** = k / (  c)**

or
Diffusivity = conductivity  heat-storage ability (density  specific heat).

**What each term means:**
- **** (thermal diffusivity)  how fast temperature changes spread
- **k**  thermal conductivity (how much a material allows temperature to go through)
- ****  density
- **c**  specific heat

**Why this makes sense:**
- Higher **k**  heat moves more easily  **** increases
- Higher **** or **c**  material needs more energy to change temperature  **** decreases

**Why it matters clinically:**
Diffusivity tells you **speed**, not amount. It predicts how quickly tissues feel temperature changes.

### 2. Clinical Relevance
Thermal diffusivity is often more clinically relevant than simple conductivity because it accounts for a material's mass and its ability to store heat (thermal inertia).

#### **A. Denture Bases**
**1. Acrylic (PMMA)**
- **Thermal Insulation:** Acts as a barrier: low thermal conductivity/diffusivity  temperature change reaches the palate more slowly.
- **Delayed Sensation (Reduced Thermal Feedback):** Palatal temperature is felt less quickly/less intensely  reduced natural temperature perception (patient may not notice temperature change as fast on the palate).

**2. Metal (Co-Cr)**
- **High Diffusivity (Rapid Temperature Transfer):** Transfers hot/cold rapidly  palate feels temperature changes quickly (more natural thermal sensation).
- **Natural Sensation:** Restores temperature perception closer to a natural palate (often improves comfort/food temperature awareness).
- **Instant Discomfort to Extremes:** Very hot/cold stimuli can be felt almost immediately on mucosa  patient may withdraw/spit quickly.

#### **B. Restorations**
- **Pulp Protection:** Materials with low diffusivity (such as Calcium Hydroxide liners or Zinc Phosphate bases) are excellent thermal insulators. They delay the heat pulse from a drill or hot foods, protecting the dental pulp from sudden thermal shock.

### 3. Relative comparison (high  low ****)
- **Dental amalgam:** high (transmits heat very fast)
- **Enamel:** moderate
- **Composite resin:** similar to enamel
- **Dentin:** low (excellent natural insulator)
- **Zinc phosphate cement:** low (good insulator)

**Common exam trap**
-  Low diffusivity means no temperature sensation
-  Correct: Low diffusivity means **delayed** sensation (protective).

**One-line exam takeaway:**
Thermal diffusivity measures speed of temperature spread.
For restorations we need lower conductivity and diffusivity to protect the pulp
For dentures its a double swordboth have benefits and risks

---

## 3. Thermal Conductivity (K or )

### 1. Definition
The measure of how easily heat flows through a material.

**The Definition:**
Thermal conductivity is the quantity of heat that passes through a material of unit thickness and unit area, per unit time, when the temperature difference between its opposite faces is one degree.

- **The Difference:** While Diffusivity measures **speed** (how fast), Conductivity measures the **amount** of energy.
- **High Conductivity:** Heat passes through easily (Conductors).
- **Low Conductivity:** Heat is blocked (Insulators).

**The Formula:**
It is defined as the number of calories that pass through a specimen of 1 cm thickness and 1 cm cross-sectional area per second, given a 1C temperature difference.

**K = (Heat  Thickness) / (Area  Time  T)**

### 2. Clinical Relevance
The goal in dentistry is generally to protect the living pulp from thermal changes.

#### A. Large Metallic Restorations (Amalgam/Gold)
- **The Problem:** Metals have high thermal conductivity. If a deep cavity is filled directly with amalgam, the cold from ice cream or heat from coffee will conduct straight through the metal to the pulp, causing sharp pain.
- **The Solution:** You must place an **Insulating Base** (like Zinc Phosphate or Calcium Hydroxide) under the metal filling. This layer has low conductivity and blocks the heat flow.

![Image](/assets/thermal/thermal_p6_img0.png)

### 3. Comparison of Materials
*Units: cal / sec / cm / C / cm (approx.)*

| Material | Conductivity (K) | Classification |
| --- | --- | --- |
| **Pure Gold** | **0.710** | **Super Conductor** |
| **Dental Amalgam** | **0.055** | **Conductor** (Requires base) |
| Zinc Phosphate | 0.0028 | Insulator (Used as base) |
| Composite Resin | 0.0026 | Insulator (Safe without base) |
| Glass Ionomer | ~0.0017 | Insulator (Matches Dentin closely) |
| **Enamel** | **0.0022** | **Natural Insulator** |
| **Dentin** | **0.0015** | **Natural Insulator** |

### 4. Thermal Diffusivity vs. Conductivity
Thermal conductivity and thermal diffusivity are correlated; if one increases the other might also increase.

| Property | Definition | Clinical "Golden Rule" |
| --- | --- | --- |
| **Conductivity** | The **quantity** of heat passed. | **Metal fillings need a Base.** Metal conducts heat instantly to the pulp; a cement base (0.5mm) acts as an insulator. |
| **Diffusivity** | The **speed** of heat passed. | **Denture bases need LOW diffusivity.** This gives the patient reaction time (to spit out hot soup) before burning their palate. |

`,P3=[],D3=[],L3=[],O3=[],q3=VT+`

---

`+WT+`

---

`+Lm,po=["Thermal Diffusivity = Speed of heat transfer (k / Cp)","Thermal Conductivity = Quantity of heat transfer","Denture Base: Low diffusivity is desired for insulation but reduces sensation.","Metal Base: High diffusivity restores sensation but transmits hot/cold shock.","CTE Mismatch leads to percolation (microleakage).","Amalgam needs a base because it is a thermal conductor.","Zirconia has transformation toughening (tetragonal to monoclinic expansion)."],xf=e=>e==="FCPS"?`
      **CONTEXT: Postgraduate FCPS Part 1 (Dentistry/Medicine)**
      - **Level:** Advanced/Specialist.
      - **Focus:** High-yield "Golden File" past paper topics, specific values, deep mechanism of action, and exclusions.
      - **Key References:** Snell's Clinical Anatomy (not Gray's students), BRS Physiology, Robbins Basic Pathology, Katzung (Pharma).
      - **Tone:** Concise, technical, focusing on exam keywords and buzzwords used by CPSP.
    `:e==="ORE"?`
      **CONTEXT: ORE (Overseas Registration Exam) - UK**
      - **Level:** UK General Dental Council (GDC) Registration Standard.
      - **Focus:** UK Guidelines (NICE, SDCEP, FGDP, SIGN), Medical Emergencies in Dental Practice, Law & Ethics (GDC Standards), Evidence-Based Dentistry.
      - **Key References:** Oxford Handbook of Clinical Dentistry, Master Dentistry Vol 1 & 2, Pink Book (Essential of Oral Path), GDC Standards.
      - **Tone:** Professional, safety-critical, guideline-focused. Emphasize "Best Practice" in the UK.
    `:`
      **CONTEXT: Undergraduate BDS (Bachelor of Dental Surgery)**
      - **Level:** University Professional Exam / Finals.
      - **Focus:** Building core concepts, detailed anatomy/physiology, standard textbook definitions and classifications.
      - **Key References:** Ten Cate's Oral Histology, Guyton/Ganong Physiology, BD Chaurasia/Gray's Anatomy, Carranza's Periodontology, Phillips Science of Dental Materials.
      - **Tone:** Educational, explanatory, academic.
    `,B3=async(e,t,n)=>{if(e===ie.DENTAL_MATERIALS&&n){const u=n.toLowerCase();if(u==="properties - thermal"||u.includes("thermal properties")||u.includes("properties")&&u.includes("thermal"))return{subject:ie.DENTAL_MATERIALS,content:Lm,keyPoints:po}}if(e===ie.DENTAL_MATERIALS&&n&&(n.toLowerCase().includes("properties")||n.toLowerCase()==="physical & mechanical properties")){const u=n.toLowerCase();return u.includes("summary")?{subject:ie.DENTAL_MATERIALS,content:VT,keyPoints:po}:u.includes("mechanical")?{subject:ie.DENTAL_MATERIALS,content:WT,keyPoints:po}:u.includes("thermal")?{subject:ie.DENTAL_MATERIALS,content:Lm,keyPoints:po}:{subject:ie.DENTAL_MATERIALS,content:q3,keyPoints:po}}if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("impression"))return{subject:ie.DENTAL_MATERIALS,content:FM,keyPoints:UM};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("gypsum"))return{subject:ie.DENTAL_MATERIALS,content:GM,keyPoints:zM};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("investment"))return{subject:ie.DENTAL_MATERIALS,content:f3,keyPoints:p3};if(e===ie.DENTAL_MATERIALS&&n&&(n.toLowerCase().includes("gic")||n.toLowerCase().includes("glass ionomer")))return n.toLowerCase().includes("summary")?{subject:ie.DENTAL_MATERIALS,content:Gv.content,keyPoints:Gv.keyPoints}:{subject:ie.DENTAL_MATERIALS,content:Fv.content,keyPoints:Fv.keyPoints};if(e===ie.DENTAL_MATERIALS&&n&&(n.toLowerCase().includes("cement")||n.toLowerCase().includes("liner")||n.toLowerCase().includes("base")))return{subject:ie.DENTAL_MATERIALS,content:w3,keyPoints:x3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("casting"))return{subject:ie.DENTAL_MATERIALS,content:y3,keyPoints:b3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("composite")&&n.toLowerCase().includes("detailed"))return{subject:ie.DENTAL_MATERIALS,content:Lv,keyPoints:Vh};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("composite")&&n.toLowerCase().includes("summary"))return{subject:ie.DENTAL_MATERIALS,content:$M,keyPoints:Vh};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase()==="composite")return{subject:ie.DENTAL_MATERIALS,content:Lv,keyPoints:Vh};if(e===ie.DENTAL_MATERIALS&&n&&(n.toLowerCase().includes("adhesion")||n.toLowerCase().includes("bonding")))return{subject:ie.DENTAL_MATERIALS,content:JM,keyPoints:QM};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("wax")&&n.toLowerCase().includes("detailed"))return{subject:ie.DENTAL_MATERIALS,content:Hv,keyPoints:Wh};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("wax")&&n.toLowerCase().includes("summary"))return{subject:ie.DENTAL_MATERIALS,content:XM,keyPoints:Wh};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase()==="wax")return{subject:ie.DENTAL_MATERIALS,content:Hv,keyPoints:Wh};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("metals summary"))return{subject:ie.DENTAL_MATERIALS,content:t3,keyPoints:e3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase()==="alloys")return{subject:ie.DENTAL_MATERIALS,content:i3,keyPoints:n3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("base metal"))return{subject:ie.DENTAL_MATERIALS,content:a3,keyPoints:r3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("wrought"))return{subject:ie.DENTAL_MATERIALS,content:o3,keyPoints:s3};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("noble"))return{subject:ie.DENTAL_MATERIALS,content:c3,keyPoints:l3};if(e===ie.DENTAL_MATERIALS&&n&&(n.toLowerCase().includes("ceramic")||n.toLowerCase().includes("porcelain")))return n.toLowerCase().includes("summary")?{subject:ie.DENTAL_MATERIALS,content:I3.content,keyPoints:zv}:{subject:ie.DENTAL_MATERIALS,content:k3,keyPoints:zv};if(e===ie.DENTAL_MATERIALS&&n&&n.toLowerCase().includes("amalgam"))return n.toLowerCase().includes("summary")?{subject:ie.DENTAL_MATERIALS,content:_3,keyPoints:Uv}:{subject:ie.DENTAL_MATERIALS,content:E3,keyPoints:Uv};const i=new wf({apiKey:"PLACEHOLDER_API_KEY"}),a=xf(t),o=n?`Specific Topic: **${n}** (under subject ${e})`:`Subject: **${e}`,l=await i.models.generateContent({model:"gemini-3-flash-preview",contents:`
    ${a}
    
    Provide a high-yield summary for the ${o}.
    Ensure the content is strictly tailored to the reference books and level of difficulty specified in the context above.
    Start with a "Exam Scope" sentence defining what is most important for this specific topic in the exam.
    `,config:{responseMimeType:"application/json",responseSchema:{type:Ct.OBJECT,properties:{subject:{type:Ct.STRING},content:{type:Ct.STRING},keyPoints:{type:Ct.ARRAY,items:{type:Ct.STRING}}},required:["subject","content","keyPoints"]}}});return JSON.parse(l.text)},jT=async(e,t=5,n,i,a="Medium")=>{if(e===ie.DENTAL_MATERIALS&&i&&(i.toLowerCase().includes("properties")||i.toLowerCase()==="physical & mechanical properties")){let y=[];switch(a){case"Easy":y=[...P3];break;case"Hard":y=[...L3];break;case"Challenge":y=[...O3];break;case"Medium":default:y=[...D3];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("impression")){let y=[];switch(a){case"Easy":y=[...Mv];break;case"Hard":y=[...Dv];break;case"Challenge":y=[...Mv,...Pv,...Dv];break;case"Medium":default:y=[...Pv];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("gypsum")){let y=[];switch(a){case"Easy":y=[...VM];break;case"Hard":y=[...jM];break;case"Challenge":y=[...YM];break;case"Medium":default:y=[...WM];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("investment")){let y=[];switch(a){case"Easy":y=[...CT];break;case"Hard":y=[...kT];break;case"Challenge":y=[...g3];break;case"Medium":default:y=[...ST];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("casting")){let y=[];switch(a){case"Easy":y=[...IT];break;case"Hard":y=[...RT];break;case"Challenge":y=[...v3];break;case"Medium":default:y=[...NT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&(i.toLowerCase().includes("cement")||i.toLowerCase().includes("liner")||i.toLowerCase().includes("base"))){let y=[];switch(a){case"Easy":y=[...MT];break;case"Hard":y=[...DT];break;case"Challenge":y=[...T3];break;case"Medium":default:y=[...PT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("composite")){let y=[];switch(a){case"Easy":y=[...wT];break;case"Hard":y=[...TT];break;case"Challenge":y=[...KM];break;case"Medium":default:y=[...xT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&(i.toLowerCase().includes("adhesion")||i.toLowerCase().includes("bonding"))){let y=[];switch(a){case"Easy":y=[...Ov];break;case"Hard":y=[...Bv];break;case"Challenge":y=[...Ov,...qv,...Bv];break;case"Medium":default:y=[...qv];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("wax")){let y=[];switch(a){case"Easy":y=[...ET];break;case"Hard":y=[...AT];break;case"Challenge":y=[...ZM];break;case"Medium":default:y=[..._T];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("amalgam")){let y=[];switch(a){case"Easy":y=[...LT];break;case"Hard":y=[...qT];break;case"Challenge":y=[...A3];break;case"Medium":default:y=[...OT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&(i.toLowerCase().includes("gic")||i.toLowerCase().includes("glass ionomer"))){let y=[];switch(a){case"Easy":y=[...BT];break;case"Hard":y=[...UT];break;case"Challenge":y=[...S3];break;case"Medium":default:y=[...HT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&i.toLowerCase().includes("metal")){let y=[];switch(a){case"Easy":y=[...u3];break;case"Hard":y=[...h3];break;case"Challenge":y=[...m3];break;case"Medium":default:y=[...d3];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}if(e===ie.DENTAL_MATERIALS&&i&&(i.toLowerCase().includes("ceramic")||i.toLowerCase().includes("porcelain"))){let y=[];switch(a){case"Easy":y=[...FT];break;case"Hard":y=[...zT];break;case"Challenge":y=[...M3];break;case"Medium":default:y=[...GT];break}const v=y.sort(()=>.5-Math.random());return v.slice(0,Math.min(t,v.length))}const o=new wf({apiKey:"PLACEHOLDER_API_KEY"});let l=xf(n);const u=e==="Comprehensive Mega Test";let m="";if(u){const y=i;m=`Comprehensive Exam covering: ${y}`,l=`You are generating a mixed-subject exam test for the ${n} curriculum. The student has completed the following modules: ${y}. Ensure questions are fairly distributed across these subjects.`}else m=i?`Topic: **${i}** (Subject: ${e})`:`Subject: **${e}**`;let d="";switch(a){case"Easy":d="Questions should be straightforward recall, definitions, or basic concept checks. Options should be clearly distinct.";break;case"Medium":d="Questions should be clinical scenarios or application-based. Options should have good distractors but a clear best answer.";break;case"Hard":case"Challenge":d="Questions should be complex clinical vignettes, requiring multi-step reasoning, diagnosis of rare presentations, or management of complications. Options should be very close distractors requiring precise knowledge.";break}const p=await o.models.generateContent({model:"gemini-3-flash-preview",contents:`
    You are an expert dental exam item-writer (FCPS/ADC style). Generate MCQs ONLY from modules marked as COMPLETED.

    INPUTS YOU WILL RECEIVE:
    1) COMPLETED_MODULES: ${m}
    2) MODULE_CONTENT: ${u?"Comprehensive Exam - Random Selection from Internal Knowledge Base aligned with Curriculum":l}

    STRICT RULES (MUST FOLLOW):
    - Use ONLY the modules listed in COMPLETED_MODULES.
    - Create Single Best Answer MCQs (AD), exactly one correct option.
    - Do not use "All of the above" or "None of the above".
    ${u?"- Since this is a Mega Test, use your expert internal knowledge to generate high-yield questions for these subjects, strictly adhering to the curriculum level.":"- Explanations must be based ONLY on MODULE_CONTENT (no outside knowledge)."}
    - Difficulty distribution: 60% Medium, 25% Hard, 15% Easy.
    - Include at least 25% clinical vignette questions.
    - Avoid duplicates and repeated stems.

    **Difficulty Level: ${a}**
    ${d}

    Generate ${t} questions following these requirements:
    - If FCPS: Questions should be one-best-type (BCQ) often tricky, focusing on "Most common", "Most specific", or "First line".
    - If ORE: Questions should focus on UK guidelines, safety, ethical dilemmas, and "Single Best Answer" (SBA) format.
    - If BDS: Questions should focus on core curriculum, definitions, classification, and standard treatment planning.
    ${u?"":"- Ensure the explanation cites the logic from the relevant reference books mentioned in the context."}
    `,config:{responseMimeType:"application/json",responseSchema:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{id:{type:Ct.STRING},question:{type:Ct.STRING},options:{type:Ct.ARRAY,items:{type:Ct.STRING}},correctAnswerIndex:{type:Ct.NUMBER},explanation:{type:Ct.STRING}},required:["id","question","options","correctAnswerIndex","explanation"]}}}});return JSON.parse(p.text)},YT=async(e,t="BDS")=>{const n=new wf({apiKey:"PLACEHOLDER_API_KEY"}),i=xf(t);return(await n.models.generateContent({model:"gemini-3-pro-preview",contents:`
    You are an AI Tutor.
    ${i}

    Student Question: "${e}"
    
    Answer the question strictly adhering to the depth and references required for the selected stream.
    Use Markdown for formatting.
    `,config:{thinkingConfig:{thinkingBudget:2e3}}})).text};function Vv(e){const t=[],n=String(e||"");let i=n.indexOf(","),a=0,o=!1;for(;!o;){i===-1&&(i=n.length,o=!0);const l=n.slice(a,i).trim();(l||!o)&&t.push(l),a=i+1,i=n.indexOf(",",a)}return t}function $T(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const H3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,U3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,F3={};function Wv(e,t){return(F3.jsx?U3:H3).test(e)}const G3=/[ \t\n\f\r]/g;function z3(e){return typeof e=="object"?e.type==="text"?jv(e.value):!1:jv(e)}function jv(e){return e.replace(G3,"")===""}class Yo{constructor(t,n,i){this.normal=n,this.property=t,i&&(this.space=i)}}Yo.prototype.normal={};Yo.prototype.property={};Yo.prototype.space=void 0;function KT(e,t){const n={},i={};for(const a of e)Object.assign(n,a.property),Object.assign(i,a.normal);return new Yo(n,i,t)}function qo(e){return e.toLowerCase()}class wn{constructor(t,n){this.attribute=n,this.property=t}}wn.prototype.attribute="";wn.prototype.booleanish=!1;wn.prototype.boolean=!1;wn.prototype.commaOrSpaceSeparated=!1;wn.prototype.commaSeparated=!1;wn.prototype.defined=!1;wn.prototype.mustUseProperty=!1;wn.prototype.number=!1;wn.prototype.overloadedBoolean=!1;wn.prototype.property="";wn.prototype.spaceSeparated=!1;wn.prototype.space=void 0;let V3=0;const Ge=Xr(),Mt=Xr(),Om=Xr(),we=Xr(),pt=Xr(),rs=Xr(),In=Xr();function Xr(){return 2**++V3}const qm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:Mt,commaOrSpaceSeparated:In,commaSeparated:rs,number:we,overloadedBoolean:Om,spaceSeparated:pt},Symbol.toStringTag,{value:"Module"})),jh=Object.keys(qm);class Tf extends wn{constructor(t,n,i,a){let o=-1;if(super(t,n),Yv(this,"space",a),typeof i=="number")for(;++o<jh.length;){const l=jh[o];Yv(this,jh[o],(i&qm[l])===qm[l])}}}Tf.prototype.defined=!0;function Yv(e,t,n){n&&(e[t]=n)}function hs(e){const t={},n={};for(const[i,a]of Object.entries(e.properties)){const o=new Tf(i,e.transform(e.attributes||{},i),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),t[i]=o,n[qo(i)]=i,n[qo(o.attribute)]=i}return new Yo(t,n,e.space)}const QT=hs({properties:{ariaActiveDescendant:null,ariaAtomic:Mt,ariaAutoComplete:null,ariaBusy:Mt,ariaChecked:Mt,ariaColCount:we,ariaColIndex:we,ariaColSpan:we,ariaControls:pt,ariaCurrent:null,ariaDescribedBy:pt,ariaDetails:null,ariaDisabled:Mt,ariaDropEffect:pt,ariaErrorMessage:null,ariaExpanded:Mt,ariaFlowTo:pt,ariaGrabbed:Mt,ariaHasPopup:null,ariaHidden:Mt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pt,ariaLevel:we,ariaLive:null,ariaModal:Mt,ariaMultiLine:Mt,ariaMultiSelectable:Mt,ariaOrientation:null,ariaOwns:pt,ariaPlaceholder:null,ariaPosInSet:we,ariaPressed:Mt,ariaReadOnly:Mt,ariaRelevant:null,ariaRequired:Mt,ariaRoleDescription:pt,ariaRowCount:we,ariaRowIndex:we,ariaRowSpan:we,ariaSelected:Mt,ariaSetSize:we,ariaSort:null,ariaValueMax:we,ariaValueMin:we,ariaValueNow:we,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function JT(e,t){return t in e?e[t]:t}function XT(e,t){return JT(e,t.toLowerCase())}const W3=hs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:rs,acceptCharset:pt,accessKey:pt,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:pt,autoFocus:Ge,autoPlay:Ge,blocking:pt,capture:null,charSet:null,checked:Ge,cite:null,className:pt,cols:we,colSpan:null,content:null,contentEditable:Mt,controls:Ge,controlsList:pt,coords:we|rs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:Om,draggable:Mt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:pt,height:we,hidden:Om,high:we,href:null,hrefLang:null,htmlFor:pt,httpEquiv:pt,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:pt,itemRef:pt,itemScope:Ge,itemType:pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:we,manifest:null,max:null,maxLength:we,media:null,method:null,min:null,minLength:we,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:we,pattern:null,ping:pt,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:pt,required:Ge,reversed:Ge,rows:we,rowSpan:we,sandbox:pt,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:we,sizes:null,slot:null,span:we,spellCheck:Mt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:we,step:null,style:null,tabIndex:we,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:Mt,width:we,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:pt,axis:null,background:null,bgColor:null,border:we,borderColor:null,bottomMargin:we,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:we,leftMargin:we,link:null,longDesc:null,lowSrc:null,marginHeight:we,marginWidth:we,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:we,rules:null,scheme:null,scrolling:Mt,standby:null,summary:null,text:null,topMargin:we,valueType:null,version:null,vAlign:null,vLink:null,vSpace:we,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:we,security:null,unselectable:null},space:"html",transform:XT}),j3=hs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:In,accentHeight:we,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:we,amplitude:we,arabicForm:null,ascent:we,attributeName:null,attributeType:null,azimuth:we,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:we,by:null,calcMode:null,capHeight:we,className:pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:we,diffuseConstant:we,direction:null,display:null,dur:null,divisor:we,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:we,enableBackground:null,end:null,event:null,exponent:we,externalResourcesRequired:null,fill:null,fillOpacity:we,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:rs,g2:rs,glyphName:rs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:we,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:we,horizOriginX:we,horizOriginY:we,id:null,ideographic:we,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:we,k:we,k1:we,k2:we,k3:we,k4:we,kernelMatrix:In,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:we,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:we,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:we,overlineThickness:we,paintOrder:null,panose1:null,path:null,pathLength:we,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:we,pointsAtY:we,pointsAtZ:we,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:In,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:In,rev:In,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:In,requiredFeatures:In,requiredFonts:In,requiredFormats:In,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:we,specularExponent:we,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:we,strikethroughThickness:we,string:null,stroke:null,strokeDashArray:In,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:we,strokeOpacity:we,strokeWidth:null,style:null,surfaceScale:we,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:In,tabIndex:we,tableValues:null,target:null,targetX:we,targetY:we,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:In,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:we,underlineThickness:we,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:we,values:null,vAlphabetic:we,vMathematical:we,vectorEffect:null,vHanging:we,vIdeographic:we,version:null,vertAdvY:we,vertOriginX:we,vertOriginY:we,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:we,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:JT}),ZT=hs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),e1=hs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:XT}),t1=hs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Y3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},$3=/[A-Z]/g,$v=/-[a-z]/g,K3=/^data[-\w.:]+$/i;function au(e,t){const n=qo(t);let i=t,a=wn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&K3.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace($v,J3);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!$v.test(o)){let l=o.replace($3,Q3);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=Tf}return new a(i,t)}function Q3(e){return"-"+e.toLowerCase()}function J3(e){return e.charAt(1).toUpperCase()}const $o=KT([QT,W3,ZT,e1,t1],"html"),vr=KT([QT,j3,ZT,e1,t1],"svg");function Kv(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function n1(e){return e.join(" ").trim()}var Ha={},Yh,Qv;function X3(){if(Qv)return Yh;Qv=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,m=`
`,d="/",p="*",y="",v="comment",E="declaration";function A(S,I){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];I=I||{};var L=1,P=1;function G(xe){var be=xe.match(t);be&&(L+=be.length);var j=xe.lastIndexOf(m);P=~j?xe.length-j:P+xe.length}function J(){var xe={line:L,column:P};return function(be){return be.position=new q(xe),ne(),be}}function q(xe){this.start=xe,this.end={line:L,column:P},this.source=I.source}q.prototype.content=S;function V(xe){var be=new Error(I.source+":"+L+":"+P+": "+xe);if(be.reason=xe,be.filename=I.source,be.line=L,be.column=P,be.source=S,!I.silent)throw be}function ve(xe){var be=xe.exec(S);if(be){var j=be[0];return G(j),S=S.slice(j.length),be}}function ne(){ve(n)}function F(xe){var be;for(xe=xe||[];be=de();)be!==!1&&xe.push(be);return xe}function de(){var xe=J();if(!(d!=S.charAt(0)||p!=S.charAt(1))){for(var be=2;y!=S.charAt(be)&&(p!=S.charAt(be)||d!=S.charAt(be+1));)++be;if(be+=2,y===S.charAt(be-1))return V("End of comment missing");var j=S.slice(2,be-2);return P+=2,G(j),S=S.slice(be),P+=2,xe({type:v,comment:j})}}function me(){var xe=J(),be=ve(i);if(be){if(de(),!ve(a))return V("property missing ':'");var j=ve(o),ce=xe({type:E,property:C(be[0].replace(e,y)),value:j?C(j[0].replace(e,y)):y});return ve(l),ce}}function ke(){var xe=[];F(xe);for(var be;be=me();)be!==!1&&(xe.push(be),F(xe));return xe}return ne(),ke()}function C(S){return S?S.replace(u,y):y}return Yh=A,Yh}var Jv;function Z3(){if(Jv)return Ha;Jv=1;var e=Ha&&Ha.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.default=n;const t=e(X3());function n(i,a){let o=null;if(!i||typeof i!="string")return o;const l=(0,t.default)(i),u=typeof a=="function";return l.forEach(m=>{if(m.type!=="declaration")return;const{property:d,value:p}=m;u?a(d,p,m):p&&(o=o||{},o[d]=p)}),o}return Ha}var go={},Xv;function eP(){if(Xv)return go;Xv=1,Object.defineProperty(go,"__esModule",{value:!0}),go.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(d){return!d||n.test(d)||e.test(d)},l=function(d,p){return p.toUpperCase()},u=function(d,p){return"".concat(p,"-")},m=function(d,p){return p===void 0&&(p={}),o(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(a,u):d=d.replace(i,u),d.replace(t,l))};return go.camelCase=m,go}var yo,Zv;function tP(){if(Zv)return yo;Zv=1;var e=yo&&yo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(Z3()),n=eP();function i(a,o){var l={};return!a||typeof a!="string"||(0,t.default)(a,function(u,m){u&&m&&(l[(0,n.camelCase)(u,o)]=m)}),l}return i.default=i,yo=i,yo}var nP=tP();const iP=Xc(nP),su=i1("end"),mi=i1("start");function i1(e){return t;function t(n){const i=n&&n.position&&n.position[e]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function rP(e){const t=mi(e),n=su(e);if(t&&n)return{start:t,end:n}}function Co(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ew(e.position):"start"in e||"end"in e?ew(e):"line"in e||"column"in e?Bm(e):""}function Bm(e){return tw(e&&e.line)+":"+tw(e&&e.column)}function ew(e){return Bm(e&&e.start)+"-"+Bm(e&&e.end)}function tw(e){return e&&typeof e=="number"?e:1}class en extends Error{constructor(t,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let a="",o={},l=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?a=t:!o.cause&&t&&(l=!0,a=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof i=="string"){const m=i.indexOf(":");m===-1?o.ruleId=i:(o.source=i.slice(0,m),o.ruleId=i.slice(m+1))}if(!o.place&&o.ancestors&&o.ancestors){const m=o.ancestors[o.ancestors.length-1];m&&(o.place=m.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=u?u.line:void 0,this.name=Co(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}en.prototype.file="";en.prototype.name="";en.prototype.reason="";en.prototype.message="";en.prototype.stack="";en.prototype.column=void 0;en.prototype.line=void 0;en.prototype.ancestors=void 0;en.prototype.cause=void 0;en.prototype.fatal=void 0;en.prototype.place=void 0;en.prototype.ruleId=void 0;en.prototype.source=void 0;const Ef={}.hasOwnProperty,aP=new Map,sP=/[A-Z]/g,oP=new Set(["table","tbody","thead","tfoot","tr"]),lP=new Set(["td","th"]),r1="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cP(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let i;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=yP(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=gP(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:i,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?vr:$o,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=a1(a,e,void 0);return o&&typeof o!="string"?o:a.create(e,a.Fragment,{children:o||void 0},void 0)}function a1(e,t,n){if(t.type==="element")return uP(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return dP(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return mP(e,t,n);if(t.type==="mdxjsEsm")return hP(e,t);if(t.type==="root")return fP(e,t,n);if(t.type==="text")return pP(e,t)}function uP(e,t,n){const i=e.schema;let a=i;t.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=vr,e.schema=a),e.ancestors.push(t);const o=o1(e,t.tagName,!1),l=bP(e,t);let u=Af(e,t);return oP.has(t.tagName)&&(u=u.filter(function(m){return typeof m=="string"?!z3(m):!0})),s1(e,l,o,t),_f(l,u),e.ancestors.pop(),e.schema=i,e.create(t,o,l,n)}function dP(e,t){if(t.data&&t.data.estree&&e.evaluater){const i=t.data.estree.body[0];return i.type,e.evaluater.evaluateExpression(i.expression)}Bo(e,t.position)}function hP(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Bo(e,t.position)}function mP(e,t,n){const i=e.schema;let a=i;t.name==="svg"&&i.space==="html"&&(a=vr,e.schema=a),e.ancestors.push(t);const o=t.name===null?e.Fragment:o1(e,t.name,!0),l=vP(e,t),u=Af(e,t);return s1(e,l,o,t),_f(l,u),e.ancestors.pop(),e.schema=i,e.create(t,o,l,n)}function fP(e,t,n){const i={};return _f(i,Af(e,t)),e.create(t,e.Fragment,i,n)}function pP(e,t){return t.value}function s1(e,t,n,i){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=i)}function _f(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function gP(e,t,n){return i;function i(a,o,l,u){const d=Array.isArray(l.children)?n:t;return u?d(o,l,u):d(o,l)}}function yP(e,t){return n;function n(i,a,o,l){const u=Array.isArray(o.children),m=mi(i);return t(a,o,l,u,{columnNumber:m?m.column-1:void 0,fileName:e,lineNumber:m?m.line:void 0},void 0)}}function bP(e,t){const n={};let i,a;for(a in t.properties)if(a!=="children"&&Ef.call(t.properties,a)){const o=wP(e,a,t.properties[a]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&lP.has(t.tagName)?i=u:n[l]=u}}if(i){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function vP(e,t){const n={};for(const i of t.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&e.evaluater){const o=i.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else Bo(e,t.position);else{const a=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&e.evaluater){const u=i.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else Bo(e,t.position);else o=i.value===null?!0:i.value;n[a]=o}return n}function Af(e,t){const n=[];let i=-1;const a=e.passKeys?new Map:aP;for(;++i<t.children.length;){const o=t.children[i];let l;if(e.passKeys){const m=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(m){const d=a.get(m)||0;l=m+"-"+d,a.set(m,d+1)}}const u=a1(e,o,l);u!==void 0&&n.push(u)}return n}function wP(e,t,n){const i=au(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?$T(n):n1(n)),i.property==="style"){let a=typeof n=="object"?n:xP(e,String(n));return e.stylePropertyNameCase==="css"&&(a=TP(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&i.space?Y3[i.property]||i.property:i.attribute,n]}}function xP(e,t){try{return iP(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const i=n,a=new en("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=r1+"#cannot-parse-style-attribute",a}}function o1(e,t,n){let i;if(!n)i={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let o=-1,l;for(;++o<a.length;){const u=Wv(a[o])?{type:"Identifier",name:a[o]}:{type:"Literal",value:a[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}i=l}else i=Wv(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(i.type==="Literal"){const a=i.value;return Ef.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(i);Bo(e)}function Bo(e,t){const n=new en("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=r1+"#cannot-handle-mdx-estrees-without-createevaluater",n}function TP(e){const t={};let n;for(n in e)Ef.call(e,n)&&(t[EP(n)]=e[n]);return t}function EP(e){let t=e.replace(sP,_P);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function _P(e){return"-"+e.toLowerCase()}const $h={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},AP={};function Cf(e,t){const n=AP,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return l1(e,i,a)}function l1(e,t,n){if(CP(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return nw(e.children,t,n)}return Array.isArray(e)?nw(e,t,n):""}function nw(e,t,n){const i=[];let a=-1;for(;++a<e.length;)i[a]=l1(e[a],t,n);return i.join("")}function CP(e){return!!(e&&typeof e=="object")}const iw=document.createElement("i");function Sf(e){const t="&"+e+";";iw.innerHTML=t;const n=iw.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Mn(e,t,n,i){const a=e.length;let o=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,i.length<1e4)l=Array.from(i),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);o<i.length;)l=i.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function Vn(e,t){return e.length>0?(Mn(e,e.length,0,t),e):t}const rw={}.hasOwnProperty;function c1(e){const t={};let n=-1;for(;++n<e.length;)SP(t,e[n]);return t}function SP(e,t){let n;for(n in t){const a=(rw.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let l;if(o)for(l in o){rw.call(a,l)||(a[l]=[]);const u=o[l];kP(a[l],Array.isArray(u)?u:u?[u]:[])}}}function kP(e,t){let n=-1;const i=[];for(;++n<t.length;)(t[n].add==="after"?e:i).push(t[n]);Mn(e,0,0,i)}function u1(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ii(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const on=wr(/[A-Za-z]/),Zt=wr(/[\dA-Za-z]/),IP=wr(/[#-'*+\--9=?A-Z^-~]/);function zc(e){return e!==null&&(e<32||e===127)}const Hm=wr(/\d/),NP=wr(/[\dA-Fa-f]/),RP=wr(/[!-/:-@[-`{-~]/);function Pe(e){return e!==null&&e<-2}function mt(e){return e!==null&&(e<0||e===32)}function $e(e){return e===-2||e===-1||e===32}const ou=wr(new RegExp("\\p{P}|\\p{S}","u")),Qr=wr(/\s/);function wr(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ms(e){const t=[];let n=-1,i=0,a=0;for(;++n<e.length;){const o=e.charCodeAt(n);let l="";if(o===37&&Zt(e.charCodeAt(n+1))&&Zt(e.charCodeAt(n+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(n+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),a=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(i,n),encodeURIComponent(l)),i=n+a+1,l=""),a&&(n+=a,a=0)}return t.join("")+e.slice(i)}function Xe(e,t,n,i){const a=i?i-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(m){return $e(m)?(e.enter(n),u(m)):t(m)}function u(m){return $e(m)&&o++<a?(e.consume(m),u):(e.exit(n),t(m))}}const MP={tokenize:PP};function PP(e){const t=e.attempt(this.parser.constructs.contentInitial,i,a);let n;return t;function i(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Xe(e,t,"linePrefix")}function a(u){return e.enter("paragraph"),o(u)}function o(u){const m=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=m),n=m,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Pe(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const DP={tokenize:LP},aw={tokenize:OP};function LP(e){const t=this,n=[];let i=0,a,o,l;return u;function u(P){if(i<n.length){const G=n[i];return t.containerState=G[1],e.attempt(G[0].continuation,m,d)(P)}return d(P)}function m(P){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&L();const G=t.events.length;let J=G,q;for(;J--;)if(t.events[J][0]==="exit"&&t.events[J][1].type==="chunkFlow"){q=t.events[J][1].end;break}I(i);let V=G;for(;V<t.events.length;)t.events[V][1].end={...q},V++;return Mn(t.events,J+1,0,t.events.slice(G)),t.events.length=V,d(P)}return u(P)}function d(P){if(i===n.length){if(!a)return v(P);if(a.currentConstruct&&a.currentConstruct.concrete)return A(P);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(aw,p,y)(P)}function p(P){return a&&L(),I(i),v(P)}function y(P){return t.parser.lazy[t.now().line]=i!==n.length,l=t.now().offset,A(P)}function v(P){return t.containerState={},e.attempt(aw,E,A)(P)}function E(P){return i++,n.push([t.currentConstruct,t.containerState]),v(P)}function A(P){if(P===null){a&&L(),I(0),e.consume(P);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),C(P)}function C(P){if(P===null){S(e.exit("chunkFlow"),!0),I(0),e.consume(P);return}return Pe(P)?(e.consume(P),S(e.exit("chunkFlow")),i=0,t.interrupt=void 0,u):(e.consume(P),C)}function S(P,G){const J=t.sliceStream(P);if(G&&J.push(null),P.previous=o,o&&(o.next=P),o=P,a.defineSkip(P.start),a.write(J),t.parser.lazy[P.start.line]){let q=a.events.length;for(;q--;)if(a.events[q][1].start.offset<l&&(!a.events[q][1].end||a.events[q][1].end.offset>l))return;const V=t.events.length;let ve=V,ne,F;for(;ve--;)if(t.events[ve][0]==="exit"&&t.events[ve][1].type==="chunkFlow"){if(ne){F=t.events[ve][1].end;break}ne=!0}for(I(i),q=V;q<t.events.length;)t.events[q][1].end={...F},q++;Mn(t.events,ve+1,0,t.events.slice(V)),t.events.length=q}}function I(P){let G=n.length;for(;G-- >P;){const J=n[G];t.containerState=J[1],J[0].exit.call(t,e)}n.length=P}function L(){a.write([null]),o=void 0,a=void 0,t.containerState._closeFlow=void 0}}function OP(e,t,n){return Xe(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ss(e){if(e===null||mt(e)||Qr(e))return 1;if(ou(e))return 2}function lu(e,t,n){const i=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!i.includes(o)&&(t=o(t,n),i.push(o))}return t}const Um={name:"attention",resolveAll:qP,tokenize:BP};function qP(e,t){let n=-1,i,a,o,l,u,m,d,p;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(i=n;i--;)if(e[i][0]==="exit"&&e[i][1].type==="attentionSequence"&&e[i][1]._open&&t.sliceSerialize(e[i][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[i][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;m=e[i][1].end.offset-e[i][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const y={...e[i][1].end},v={...e[n][1].start};sw(y,-m),sw(v,m),l={type:m>1?"strongSequence":"emphasisSequence",start:y,end:{...e[i][1].end}},u={type:m>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},o={type:m>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[n][1].start}},a={type:m>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[i][1].end={...l.start},e[n][1].start={...u.end},d=[],e[i][1].end.offset-e[i][1].start.offset&&(d=Vn(d,[["enter",e[i][1],t],["exit",e[i][1],t]])),d=Vn(d,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",o,t]]),d=Vn(d,lu(t.parser.constructs.insideSpan.null,e.slice(i+1,n),t)),d=Vn(d,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(p=2,d=Vn(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):p=0,Mn(e,i-1,n-i+3,d),n=i+d.length-p-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function BP(e,t){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,a=ss(i);let o;return l;function l(m){return o=m,e.enter("attentionSequence"),u(m)}function u(m){if(m===o)return e.consume(m),u;const d=e.exit("attentionSequence"),p=ss(m),y=!p||p===2&&a||n.includes(m),v=!a||a===2&&p||n.includes(i);return d._open=!!(o===42?y:y&&(a||!v)),d._close=!!(o===42?v:v&&(p||!y)),t(m)}}function sw(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const HP={name:"autolink",tokenize:UP};function UP(e,t,n){let i=0;return a;function a(E){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(E){return on(E)?(e.consume(E),l):E===64?n(E):d(E)}function l(E){return E===43||E===45||E===46||Zt(E)?(i=1,u(E)):d(E)}function u(E){return E===58?(e.consume(E),i=0,m):(E===43||E===45||E===46||Zt(E))&&i++<32?(e.consume(E),u):(i=0,d(E))}function m(E){return E===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.exit("autolink"),t):E===null||E===32||E===60||zc(E)?n(E):(e.consume(E),m)}function d(E){return E===64?(e.consume(E),p):IP(E)?(e.consume(E),d):n(E)}function p(E){return Zt(E)?y(E):n(E)}function y(E){return E===46?(e.consume(E),i=0,p):E===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(E),e.exit("autolinkMarker"),e.exit("autolink"),t):v(E)}function v(E){if((E===45||Zt(E))&&i++<63){const A=E===45?v:y;return e.consume(E),A}return n(E)}}const Ko={partial:!0,tokenize:FP};function FP(e,t,n){return i;function i(o){return $e(o)?Xe(e,a,"linePrefix")(o):a(o)}function a(o){return o===null||Pe(o)?t(o):n(o)}}const d1={continuation:{tokenize:zP},exit:VP,name:"blockQuote",tokenize:GP};function GP(e,t,n){const i=this;return a;function a(l){if(l===62){const u=i.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return n(l)}function o(l){return $e(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function zP(e,t,n){const i=this;return a;function a(l){return $e(l)?Xe(e,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(d1,t,n)(l)}}function VP(e){e.exit("blockQuote")}const h1={name:"characterEscape",tokenize:WP};function WP(e,t,n){return i;function i(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),a}function a(o){return RP(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const m1={name:"characterReference",tokenize:jP};function jP(e,t,n){const i=this;let a=0,o,l;return u;function u(y){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(y),e.exit("characterReferenceMarker"),m}function m(y){return y===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(y),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),o=31,l=Zt,p(y))}function d(y){return y===88||y===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(y),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=NP,p):(e.enter("characterReferenceValue"),o=7,l=Hm,p(y))}function p(y){if(y===59&&a){const v=e.exit("characterReferenceValue");return l===Zt&&!Sf(i.sliceSerialize(v))?n(y):(e.enter("characterReferenceMarker"),e.consume(y),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(y)&&a++<o?(e.consume(y),p):n(y)}}const ow={partial:!0,tokenize:$P},lw={concrete:!0,name:"codeFenced",tokenize:YP};function YP(e,t,n){const i=this,a={partial:!0,tokenize:J};let o=0,l=0,u;return m;function m(q){return d(q)}function d(q){const V=i.events[i.events.length-1];return o=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,u=q,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(q)}function p(q){return q===u?(l++,e.consume(q),p):l<3?n(q):(e.exit("codeFencedFenceSequence"),$e(q)?Xe(e,y,"whitespace")(q):y(q))}function y(q){return q===null||Pe(q)?(e.exit("codeFencedFence"),i.interrupt?t(q):e.check(ow,C,G)(q)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(q))}function v(q){return q===null||Pe(q)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),y(q)):$e(q)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Xe(e,E,"whitespace")(q)):q===96&&q===u?n(q):(e.consume(q),v)}function E(q){return q===null||Pe(q)?y(q):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),A(q))}function A(q){return q===null||Pe(q)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),y(q)):q===96&&q===u?n(q):(e.consume(q),A)}function C(q){return e.attempt(a,G,S)(q)}function S(q){return e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),I}function I(q){return o>0&&$e(q)?Xe(e,L,"linePrefix",o+1)(q):L(q)}function L(q){return q===null||Pe(q)?e.check(ow,C,G)(q):(e.enter("codeFlowValue"),P(q))}function P(q){return q===null||Pe(q)?(e.exit("codeFlowValue"),L(q)):(e.consume(q),P)}function G(q){return e.exit("codeFenced"),t(q)}function J(q,V,ve){let ne=0;return F;function F(be){return q.enter("lineEnding"),q.consume(be),q.exit("lineEnding"),de}function de(be){return q.enter("codeFencedFence"),$e(be)?Xe(q,me,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(be):me(be)}function me(be){return be===u?(q.enter("codeFencedFenceSequence"),ke(be)):ve(be)}function ke(be){return be===u?(ne++,q.consume(be),ke):ne>=l?(q.exit("codeFencedFenceSequence"),$e(be)?Xe(q,xe,"whitespace")(be):xe(be)):ve(be)}function xe(be){return be===null||Pe(be)?(q.exit("codeFencedFence"),V(be)):ve(be)}}}function $P(e,t,n){const i=this;return a;function a(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return i.parser.lazy[i.now().line]?n(l):t(l)}}const Kh={name:"codeIndented",tokenize:QP},KP={partial:!0,tokenize:JP};function QP(e,t,n){const i=this;return a;function a(d){return e.enter("codeIndented"),Xe(e,o,"linePrefix",5)(d)}function o(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(d):n(d)}function l(d){return d===null?m(d):Pe(d)?e.attempt(KP,l,m)(d):(e.enter("codeFlowValue"),u(d))}function u(d){return d===null||Pe(d)?(e.exit("codeFlowValue"),l(d)):(e.consume(d),u)}function m(d){return e.exit("codeIndented"),t(d)}}function JP(e,t,n){const i=this;return a;function a(l){return i.parser.lazy[i.now().line]?n(l):Pe(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):Xe(e,o,"linePrefix",5)(l)}function o(l){const u=i.events[i.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Pe(l)?a(l):n(l)}}const XP={name:"codeText",previous:eD,resolve:ZP,tokenize:tD};function ZP(e){let t=e.length-4,n=3,i,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(i=n;++i<t;)if(e[i][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(i=n-1,t++;++i<=t;)a===void 0?i!==t&&e[i][1].type!=="lineEnding"&&(a=i):(i===t||e[i][1].type==="lineEnding")&&(e[a][1].type="codeTextData",i!==a+2&&(e[a][1].end=e[i-1][1].end,e.splice(a+2,i-a-2),t-=i-a-2,i=a+2),a=void 0);return e}function eD(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tD(e,t,n){let i=0,a,o;return l;function l(y){return e.enter("codeText"),e.enter("codeTextSequence"),u(y)}function u(y){return y===96?(e.consume(y),i++,u):(e.exit("codeTextSequence"),m(y))}function m(y){return y===null?n(y):y===32?(e.enter("space"),e.consume(y),e.exit("space"),m):y===96?(o=e.enter("codeTextSequence"),a=0,p(y)):Pe(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),m):(e.enter("codeTextData"),d(y))}function d(y){return y===null||y===32||y===96||Pe(y)?(e.exit("codeTextData"),m(y)):(e.consume(y),d)}function p(y){return y===96?(e.consume(y),a++,p):a===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(y)):(o.type="codeTextData",d(y))}}class nD{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(t,i):t>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(t,n,i){const a=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&bo(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),bo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),bo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);bo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);bo(this.left,n.reverse())}}}function bo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function f1(e){const t={};let n=-1,i,a,o,l,u,m,d;const p=new nD(e);for(;++n<p.length;){for(;n in t;)n=t[n];if(i=p.get(n),n&&i[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(m=i[1]._tokenizer.events,o=0,o<m.length&&m[o][1].type==="lineEndingBlank"&&(o+=2),o<m.length&&m[o][1].type==="content"))for(;++o<m.length&&m[o][1].type!=="content";)m[o][1].type==="chunkText"&&(m[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(t,iD(p,n)),n=t[n],d=!0);else if(i[1]._container){for(o=n,a=void 0;o--;)if(l=p.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(i[1].end={...p.get(a)[1].start},u=p.slice(a,n),u.unshift(i),p.splice(a,n-a+1,u))}}return Mn(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function iD(e,t){const n=e.get(t)[1],i=e.get(t)[2];let a=t-1;const o=[];let l=n._tokenizer;l||(l=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,m=[],d={};let p,y,v=-1,E=n,A=0,C=0;const S=[C];for(;E;){for(;e.get(++a)[1]!==E;);o.push(a),E._tokenizer||(p=i.sliceStream(E),E.next||p.push(null),y&&l.defineSkip(E.start),E._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),E._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),y=E,E=E.next}for(E=n;++v<u.length;)u[v][0]==="exit"&&u[v-1][0]==="enter"&&u[v][1].type===u[v-1][1].type&&u[v][1].start.line!==u[v][1].end.line&&(C=v+1,S.push(C),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(l.events=[],E?(E._tokenizer=void 0,E.previous=void 0):S.pop(),v=S.length;v--;){const I=u.slice(S[v],S[v+1]),L=o.pop();m.push([L,L+I.length-1]),e.splice(L,2,I)}for(m.reverse(),v=-1;++v<m.length;)d[A+m[v][0]]=A+m[v][1],A+=m[v][1]-m[v][0]-1;return d}const rD={resolve:sD,tokenize:oD},aD={partial:!0,tokenize:lD};function sD(e){return f1(e),e}function oD(e,t){let n;return i;function i(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(u)}function a(u){return u===null?o(u):Pe(u)?e.check(aD,l,o)(u):(e.consume(u),a)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function lD(e,t,n){const i=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Xe(e,o,"linePrefix")}function o(l){if(l===null||Pe(l))return n(l);const u=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(i.parser.constructs.flow,n,t)(l)}}function p1(e,t,n,i,a,o,l,u,m){const d=m||Number.POSITIVE_INFINITY;let p=0;return y;function y(I){return I===60?(e.enter(i),e.enter(a),e.enter(o),e.consume(I),e.exit(o),v):I===null||I===32||I===41||zc(I)?n(I):(e.enter(i),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),C(I))}function v(I){return I===62?(e.enter(o),e.consume(I),e.exit(o),e.exit(a),e.exit(i),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),E(I))}function E(I){return I===62?(e.exit("chunkString"),e.exit(u),v(I)):I===null||I===60||Pe(I)?n(I):(e.consume(I),I===92?A:E)}function A(I){return I===60||I===62||I===92?(e.consume(I),E):E(I)}function C(I){return!p&&(I===null||I===41||mt(I))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(i),t(I)):p<d&&I===40?(e.consume(I),p++,C):I===41?(e.consume(I),p--,C):I===null||I===32||I===40||zc(I)?n(I):(e.consume(I),I===92?S:C)}function S(I){return I===40||I===41||I===92?(e.consume(I),C):C(I)}}function g1(e,t,n,i,a,o){const l=this;let u=0,m;return d;function d(E){return e.enter(i),e.enter(a),e.consume(E),e.exit(a),e.enter(o),p}function p(E){return u>999||E===null||E===91||E===93&&!m||E===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(E):E===93?(e.exit(o),e.enter(a),e.consume(E),e.exit(a),e.exit(i),t):Pe(E)?(e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===null||E===91||E===93||Pe(E)||u++>999?(e.exit("chunkString"),p(E)):(e.consume(E),m||(m=!$e(E)),E===92?v:y)}function v(E){return E===91||E===92||E===93?(e.consume(E),u++,y):y(E)}}function y1(e,t,n,i,a,o){let l;return u;function u(v){return v===34||v===39||v===40?(e.enter(i),e.enter(a),e.consume(v),e.exit(a),l=v===40?41:v,m):n(v)}function m(v){return v===l?(e.enter(a),e.consume(v),e.exit(a),e.exit(i),t):(e.enter(o),d(v))}function d(v){return v===l?(e.exit(o),m(l)):v===null?n(v):Pe(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),Xe(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===l||v===null||Pe(v)?(e.exit("chunkString"),d(v)):(e.consume(v),v===92?y:p)}function y(v){return v===l||v===92?(e.consume(v),p):p(v)}}function So(e,t){let n;return i;function i(a){return Pe(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,i):$e(a)?Xe(e,i,n?"linePrefix":"lineSuffix")(a):t(a)}}const cD={name:"definition",tokenize:dD},uD={partial:!0,tokenize:hD};function dD(e,t,n){const i=this;let a;return o;function o(E){return e.enter("definition"),l(E)}function l(E){return g1.call(i,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function u(E){return a=ii(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(e.enter("definitionMarker"),e.consume(E),e.exit("definitionMarker"),m):n(E)}function m(E){return mt(E)?So(e,d)(E):d(E)}function d(E){return p1(e,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function p(E){return e.attempt(uD,y,y)(E)}function y(E){return $e(E)?Xe(e,v,"whitespace")(E):v(E)}function v(E){return E===null||Pe(E)?(e.exit("definition"),i.parser.defined.push(a),t(E)):n(E)}}function hD(e,t,n){return i;function i(u){return mt(u)?So(e,a)(u):n(u)}function a(u){return y1(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return $e(u)?Xe(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Pe(u)?t(u):n(u)}}const mD={name:"hardBreakEscape",tokenize:fD};function fD(e,t,n){return i;function i(o){return e.enter("hardBreakEscape"),e.consume(o),a}function a(o){return Pe(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const pD={name:"headingAtx",resolve:gD,tokenize:yD};function gD(e,t){let n=e.length-2,i=3,a,o;return e[i][1].type==="whitespace"&&(i+=2),n-2>i&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&e[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(a={type:"atxHeadingText",start:e[i][1].start,end:e[n][1].end},o={type:"chunkText",start:e[i][1].start,end:e[n][1].end,contentType:"text"},Mn(e,i,n-i+1,[["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t]])),e}function yD(e,t,n){let i=0;return a;function a(p){return e.enter("atxHeading"),o(p)}function o(p){return e.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&i++<6?(e.consume(p),l):p===null||mt(p)?(e.exit("atxHeadingSequence"),u(p)):n(p)}function u(p){return p===35?(e.enter("atxHeadingSequence"),m(p)):p===null||Pe(p)?(e.exit("atxHeading"),t(p)):$e(p)?Xe(e,u,"whitespace")(p):(e.enter("atxHeadingText"),d(p))}function m(p){return p===35?(e.consume(p),m):(e.exit("atxHeadingSequence"),u(p))}function d(p){return p===null||p===35||mt(p)?(e.exit("atxHeadingText"),u(p)):(e.consume(p),d)}}const bD=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cw=["pre","script","style","textarea"],vD={concrete:!0,name:"htmlFlow",resolveTo:TD,tokenize:ED},wD={partial:!0,tokenize:AD},xD={partial:!0,tokenize:_D};function TD(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ED(e,t,n){const i=this;let a,o,l,u,m;return d;function d(N){return p(N)}function p(N){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(N),y}function y(N){return N===33?(e.consume(N),v):N===47?(e.consume(N),o=!0,C):N===63?(e.consume(N),a=3,i.interrupt?t:R):on(N)?(e.consume(N),l=String.fromCharCode(N),S):n(N)}function v(N){return N===45?(e.consume(N),a=2,E):N===91?(e.consume(N),a=5,u=0,A):on(N)?(e.consume(N),a=4,i.interrupt?t:R):n(N)}function E(N){return N===45?(e.consume(N),i.interrupt?t:R):n(N)}function A(N){const te="CDATA[";return N===te.charCodeAt(u++)?(e.consume(N),u===te.length?i.interrupt?t:me:A):n(N)}function C(N){return on(N)?(e.consume(N),l=String.fromCharCode(N),S):n(N)}function S(N){if(N===null||N===47||N===62||mt(N)){const te=N===47,pe=l.toLowerCase();return!te&&!o&&cw.includes(pe)?(a=1,i.interrupt?t(N):me(N)):bD.includes(l.toLowerCase())?(a=6,te?(e.consume(N),I):i.interrupt?t(N):me(N)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(N):o?L(N):P(N))}return N===45||Zt(N)?(e.consume(N),l+=String.fromCharCode(N),S):n(N)}function I(N){return N===62?(e.consume(N),i.interrupt?t:me):n(N)}function L(N){return $e(N)?(e.consume(N),L):F(N)}function P(N){return N===47?(e.consume(N),F):N===58||N===95||on(N)?(e.consume(N),G):$e(N)?(e.consume(N),P):F(N)}function G(N){return N===45||N===46||N===58||N===95||Zt(N)?(e.consume(N),G):J(N)}function J(N){return N===61?(e.consume(N),q):$e(N)?(e.consume(N),J):P(N)}function q(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),m=N,V):$e(N)?(e.consume(N),q):ve(N)}function V(N){return N===m?(e.consume(N),m=null,ne):N===null||Pe(N)?n(N):(e.consume(N),V)}function ve(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||mt(N)?J(N):(e.consume(N),ve)}function ne(N){return N===47||N===62||$e(N)?P(N):n(N)}function F(N){return N===62?(e.consume(N),de):n(N)}function de(N){return N===null||Pe(N)?me(N):$e(N)?(e.consume(N),de):n(N)}function me(N){return N===45&&a===2?(e.consume(N),j):N===60&&a===1?(e.consume(N),ce):N===62&&a===4?(e.consume(N),D):N===63&&a===3?(e.consume(N),R):N===93&&a===5?(e.consume(N),X):Pe(N)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(wD,W,ke)(N)):N===null||Pe(N)?(e.exit("htmlFlowData"),ke(N)):(e.consume(N),me)}function ke(N){return e.check(xD,xe,W)(N)}function xe(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),be}function be(N){return N===null||Pe(N)?ke(N):(e.enter("htmlFlowData"),me(N))}function j(N){return N===45?(e.consume(N),R):me(N)}function ce(N){return N===47?(e.consume(N),l="",Ee):me(N)}function Ee(N){if(N===62){const te=l.toLowerCase();return cw.includes(te)?(e.consume(N),D):me(N)}return on(N)&&l.length<8?(e.consume(N),l+=String.fromCharCode(N),Ee):me(N)}function X(N){return N===93?(e.consume(N),R):me(N)}function R(N){return N===62?(e.consume(N),D):N===45&&a===2?(e.consume(N),R):me(N)}function D(N){return N===null||Pe(N)?(e.exit("htmlFlowData"),W(N)):(e.consume(N),D)}function W(N){return e.exit("htmlFlow"),t(N)}}function _D(e,t,n){const i=this;return a;function a(l){return Pe(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):n(l)}function o(l){return i.parser.lazy[i.now().line]?n(l):t(l)}}function AD(e,t,n){return i;function i(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Ko,t,n)}}const CD={name:"htmlText",tokenize:SD};function SD(e,t,n){const i=this;let a,o,l;return u;function u(R){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(R),m}function m(R){return R===33?(e.consume(R),d):R===47?(e.consume(R),J):R===63?(e.consume(R),P):on(R)?(e.consume(R),ve):n(R)}function d(R){return R===45?(e.consume(R),p):R===91?(e.consume(R),o=0,A):on(R)?(e.consume(R),L):n(R)}function p(R){return R===45?(e.consume(R),E):n(R)}function y(R){return R===null?n(R):R===45?(e.consume(R),v):Pe(R)?(l=y,ce(R)):(e.consume(R),y)}function v(R){return R===45?(e.consume(R),E):y(R)}function E(R){return R===62?j(R):R===45?v(R):y(R)}function A(R){const D="CDATA[";return R===D.charCodeAt(o++)?(e.consume(R),o===D.length?C:A):n(R)}function C(R){return R===null?n(R):R===93?(e.consume(R),S):Pe(R)?(l=C,ce(R)):(e.consume(R),C)}function S(R){return R===93?(e.consume(R),I):C(R)}function I(R){return R===62?j(R):R===93?(e.consume(R),I):C(R)}function L(R){return R===null||R===62?j(R):Pe(R)?(l=L,ce(R)):(e.consume(R),L)}function P(R){return R===null?n(R):R===63?(e.consume(R),G):Pe(R)?(l=P,ce(R)):(e.consume(R),P)}function G(R){return R===62?j(R):P(R)}function J(R){return on(R)?(e.consume(R),q):n(R)}function q(R){return R===45||Zt(R)?(e.consume(R),q):V(R)}function V(R){return Pe(R)?(l=V,ce(R)):$e(R)?(e.consume(R),V):j(R)}function ve(R){return R===45||Zt(R)?(e.consume(R),ve):R===47||R===62||mt(R)?ne(R):n(R)}function ne(R){return R===47?(e.consume(R),j):R===58||R===95||on(R)?(e.consume(R),F):Pe(R)?(l=ne,ce(R)):$e(R)?(e.consume(R),ne):j(R)}function F(R){return R===45||R===46||R===58||R===95||Zt(R)?(e.consume(R),F):de(R)}function de(R){return R===61?(e.consume(R),me):Pe(R)?(l=de,ce(R)):$e(R)?(e.consume(R),de):ne(R)}function me(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),a=R,ke):Pe(R)?(l=me,ce(R)):$e(R)?(e.consume(R),me):(e.consume(R),xe)}function ke(R){return R===a?(e.consume(R),a=void 0,be):R===null?n(R):Pe(R)?(l=ke,ce(R)):(e.consume(R),ke)}function xe(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||mt(R)?ne(R):(e.consume(R),xe)}function be(R){return R===47||R===62||mt(R)?ne(R):n(R)}function j(R){return R===62?(e.consume(R),e.exit("htmlTextData"),e.exit("htmlText"),t):n(R)}function ce(R){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),Ee}function Ee(R){return $e(R)?Xe(e,X,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):X(R)}function X(R){return e.enter("htmlTextData"),l(R)}}const kf={name:"labelEnd",resolveAll:RD,resolveTo:MD,tokenize:PD},kD={tokenize:DD},ID={tokenize:LD},ND={tokenize:OD};function RD(e){let t=-1;const n=[];for(;++t<e.length;){const i=e[t][1];if(n.push(e[t]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",t+=a}}return e.length!==n.length&&Mn(e,0,e.length,n),e}function MD(e,t){let n=e.length,i=0,a,o,l,u;for(;n--;)if(a=e[n][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=n,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(l=n);const m={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},p={type:"labelText",start:{...e[o+i+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",m,t],["enter",d,t]],u=Vn(u,e.slice(o+1,o+i+3)),u=Vn(u,[["enter",p,t]]),u=Vn(u,lu(t.parser.constructs.insideSpan.null,e.slice(o+i+4,l-3),t)),u=Vn(u,[["exit",p,t],e[l-2],e[l-1],["exit",d,t]]),u=Vn(u,e.slice(l+1)),u=Vn(u,[["exit",m,t]]),Mn(e,o,e.length,u),e}function PD(e,t,n){const i=this;let a=i.events.length,o,l;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){o=i.events[a][1];break}return u;function u(v){return o?o._inactive?y(v):(l=i.parser.defined.includes(ii(i.sliceSerialize({start:o.end,end:i.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),m):n(v)}function m(v){return v===40?e.attempt(kD,p,l?p:y)(v):v===91?e.attempt(ID,p,l?d:y)(v):l?p(v):y(v)}function d(v){return e.attempt(ND,p,y)(v)}function p(v){return t(v)}function y(v){return o._balanced=!0,n(v)}}function DD(e,t,n){return i;function i(y){return e.enter("resource"),e.enter("resourceMarker"),e.consume(y),e.exit("resourceMarker"),a}function a(y){return mt(y)?So(e,o)(y):o(y)}function o(y){return y===41?p(y):p1(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function l(y){return mt(y)?So(e,m)(y):p(y)}function u(y){return n(y)}function m(y){return y===34||y===39||y===40?y1(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function d(y){return mt(y)?So(e,p)(y):p(y)}function p(y){return y===41?(e.enter("resourceMarker"),e.consume(y),e.exit("resourceMarker"),e.exit("resource"),t):n(y)}}function LD(e,t,n){const i=this;return a;function a(u){return g1.call(i,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return i.parser.defined.includes(ii(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function OD(e,t,n){return i;function i(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),a}function a(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const qD={name:"labelStartImage",resolveAll:kf.resolveAll,tokenize:BD};function BD(e,t,n){const i=this;return a;function a(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):t(u)}}const HD={name:"labelStartLink",resolveAll:kf.resolveAll,tokenize:UD};function UD(e,t,n){const i=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):t(l)}}const Qh={name:"lineEnding",tokenize:FD};function FD(e,t){return n;function n(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Xe(e,t,"linePrefix")}}const Dc={name:"thematicBreak",tokenize:GD};function GD(e,t,n){let i=0,a;return o;function o(d){return e.enter("thematicBreak"),l(d)}function l(d){return a=d,u(d)}function u(d){return d===a?(e.enter("thematicBreakSequence"),m(d)):i>=3&&(d===null||Pe(d))?(e.exit("thematicBreak"),t(d)):n(d)}function m(d){return d===a?(e.consume(d),i++,m):(e.exit("thematicBreakSequence"),$e(d)?Xe(e,u,"whitespace")(d):u(d))}}const vn={continuation:{tokenize:jD},exit:$D,name:"list",tokenize:WD},zD={partial:!0,tokenize:KD},VD={partial:!0,tokenize:YD};function WD(e,t,n){const i=this,a=i.events[i.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return u;function u(E){const A=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(A==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:Hm(E)){if(i.containerState.type||(i.containerState.type=A,e.enter(A,{_container:!0})),A==="listUnordered")return e.enter("listItemPrefix"),E===42||E===45?e.check(Dc,n,d)(E):d(E);if(!i.interrupt||E===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),m(E)}return n(E)}function m(E){return Hm(E)&&++l<10?(e.consume(E),m):(!i.interrupt||l<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(e.exit("listItemValue"),d(E)):n(E)}function d(E){return e.enter("listItemMarker"),e.consume(E),e.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,e.check(Ko,i.interrupt?n:p,e.attempt(zD,v,y))}function p(E){return i.containerState.initialBlankLine=!0,o++,v(E)}function y(E){return $e(E)?(e.enter("listItemPrefixWhitespace"),e.consume(E),e.exit("listItemPrefixWhitespace"),v):n(E)}function v(E){return i.containerState.size=o+i.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(E)}}function jD(e,t,n){const i=this;return i.containerState._closeFlow=void 0,e.check(Ko,a,o);function a(u){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Xe(e,t,"listItemIndent",i.containerState.size+1)(u)}function o(u){return i.containerState.furtherBlankLines||!$e(u)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(u)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,e.attempt(VD,t,l)(u))}function l(u){return i.containerState._closeFlow=!0,i.interrupt=void 0,Xe(e,e.attempt(vn,t,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function YD(e,t,n){const i=this;return Xe(e,a,"listItemIndent",i.containerState.size+1);function a(o){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?t(o):n(o)}}function $D(e){e.exit(this.containerState.type)}function KD(e,t,n){const i=this;return Xe(e,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const l=i.events[i.events.length-1];return!$e(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const uw={name:"setextUnderline",resolveTo:QD,tokenize:JD};function QD(e,t){let n=e.length,i,a,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){i=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const l={type:"setextHeading",start:{...e[i][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",o?(e.splice(a,0,["enter",l,t]),e.splice(o+1,0,["exit",e[i][1],t]),e[i][1].end={...e[o][1].end}):e[i][1]=l,e.push(["exit",l,t]),e}function JD(e,t,n){const i=this;let a;return o;function o(d){let p=i.events.length,y;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){y=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(e.enter("setextHeadingLine"),a=d,l(d)):n(d)}function l(d){return e.enter("setextHeadingLineSequence"),u(d)}function u(d){return d===a?(e.consume(d),u):(e.exit("setextHeadingLineSequence"),$e(d)?Xe(e,m,"lineSuffix")(d):m(d))}function m(d){return d===null||Pe(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const XD={tokenize:ZD};function ZD(e){const t=this,n=e.attempt(Ko,i,e.attempt(this.parser.constructs.flowInitial,a,Xe(e,e.attempt(this.parser.constructs.flow,a,e.attempt(rD,a)),"linePrefix")));return n;function i(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const e4={resolveAll:v1()},t4=b1("string"),n4=b1("text");function b1(e){return{resolveAll:v1(e==="text"?i4:void 0),tokenize:t};function t(n){const i=this,a=this.parser.constructs[e],o=n.attempt(a,l,u);return l;function l(p){return d(p)?o(p):u(p)}function u(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),m}function m(p){return d(p)?(n.exit("data"),o(p)):(n.consume(p),m)}function d(p){if(p===null)return!0;const y=a[p];let v=-1;if(y)for(;++v<y.length;){const E=y[v];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function v1(e){return t;function t(n,i){let a=-1,o;for(;++a<=n.length;)o===void 0?n[a]&&n[a][1].type==="data"&&(o=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==o+2&&(n[o][1].end=n[a-1][1].end,n.splice(o+2,a-o-2),a=o+2),o=void 0);return e?e(n,i):n}}function i4(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const i=e[n-1][1],a=t.sliceStream(i);let o=a.length,l=-1,u=0,m;for(;o--;){const d=a[o];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(d===-2)m=!0,u++;else if(d!==-1){o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const d={type:n===e.length||m||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:i.start._bufferIndex+l,_index:i.start._index+o,line:i.end.line,column:i.end.column-u,offset:i.end.offset-u},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const r4={42:vn,43:vn,45:vn,48:vn,49:vn,50:vn,51:vn,52:vn,53:vn,54:vn,55:vn,56:vn,57:vn,62:d1},a4={91:cD},s4={[-2]:Kh,[-1]:Kh,32:Kh},o4={35:pD,42:Dc,45:[uw,Dc],60:vD,61:uw,95:Dc,96:lw,126:lw},l4={38:m1,92:h1},c4={[-5]:Qh,[-4]:Qh,[-3]:Qh,33:qD,38:m1,42:Um,60:[HP,CD],91:HD,92:[mD,h1],93:kf,95:Um,96:XP},u4={null:[Um,e4]},d4={null:[42,95]},h4={null:[]},m4=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:d4,contentInitial:a4,disable:h4,document:r4,flow:o4,flowInitial:s4,insideSpan:u4,string:l4,text:c4},Symbol.toStringTag,{value:"Module"}));function f4(e,t,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},o=[];let l=[],u=[];const m={attempt:V(J),check:V(q),consume:L,enter:P,exit:G,interrupt:V(q,{interrupt:!0})},d={code:null,containerState:{},defineSkip:C,events:[],now:A,parser:e,previous:null,sliceSerialize:v,sliceStream:E,write:y};let p=t.tokenize.call(d,m);return t.resolveAll&&o.push(t),d;function y(de){return l=Vn(l,de),S(),l[l.length-1]!==null?[]:(ve(t,0),d.events=lu(o,d.events,d),d.events)}function v(de,me){return g4(E(de),me)}function E(de){return p4(l,de)}function A(){const{_bufferIndex:de,_index:me,line:ke,column:xe,offset:be}=i;return{_bufferIndex:de,_index:me,line:ke,column:xe,offset:be}}function C(de){a[de.line]=de.column,F()}function S(){let de;for(;i._index<l.length;){const me=l[i._index];if(typeof me=="string")for(de=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===de&&i._bufferIndex<me.length;)I(me.charCodeAt(i._bufferIndex));else I(me)}}function I(de){p=p(de)}function L(de){Pe(de)?(i.line++,i.column=1,i.offset+=de===-3?2:1,F()):de!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=de}function P(de,me){const ke=me||{};return ke.type=de,ke.start=A(),d.events.push(["enter",ke,d]),u.push(ke),ke}function G(de){const me=u.pop();return me.end=A(),d.events.push(["exit",me,d]),me}function J(de,me){ve(de,me.from)}function q(de,me){me.restore()}function V(de,me){return ke;function ke(xe,be,j){let ce,Ee,X,R;return Array.isArray(xe)?W(xe):"tokenize"in xe?W([xe]):D(xe);function D(ge){return ue;function ue(Ce){const _e=Ce!==null&&ge[Ce],fe=Ce!==null&&ge.null,Ae=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return W(Ae)(Ce)}}function W(ge){return ce=ge,Ee=0,ge.length===0?j:N(ge[Ee])}function N(ge){return ue;function ue(Ce){return R=ne(),X=ge,ge.partial||(d.currentConstruct=ge),ge.name&&d.parser.constructs.disable.null.includes(ge.name)?pe():ge.tokenize.call(me?Object.assign(Object.create(d),me):d,m,te,pe)(Ce)}}function te(ge){return de(X,R),be}function pe(ge){return R.restore(),++Ee<ce.length?N(ce[Ee]):j}}}function ve(de,me){de.resolveAll&&!o.includes(de)&&o.push(de),de.resolve&&Mn(d.events,me,d.events.length-me,de.resolve(d.events.slice(me),d)),de.resolveTo&&(d.events=de.resolveTo(d.events,d))}function ne(){const de=A(),me=d.previous,ke=d.currentConstruct,xe=d.events.length,be=Array.from(u);return{from:xe,restore:j};function j(){i=de,d.previous=me,d.currentConstruct=ke,d.events.length=xe,u=be,F()}}function F(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function p4(e,t){const n=t.start._index,i=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;let l;if(n===a)l=[e[n].slice(i,o)];else{if(l=e.slice(n,a),i>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(i):l.shift()}o>0&&l.push(e[a].slice(0,o))}return l}function g4(e,t){let n=-1;const i=[];let a;for(;++n<e.length;){const o=e[n];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(o)}a=o===-2,i.push(l)}return i.join("")}function y4(e){const i={constructs:c1([m4,...(e||{}).extensions||[]]),content:a(MP),defined:[],document:a(DP),flow:a(XD),lazy:{},string:a(t4),text:a(n4)};return i;function a(o){return l;function l(u){return f4(i,o,u)}}}function b4(e){for(;!f1(e););return e}const dw=/[\0\t\n\r]/g;function v4(){let e=1,t="",n=!0,i;return a;function a(o,l,u){const m=[];let d,p,y,v,E;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),y=0,t="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(dw.lastIndex=y,d=dw.exec(o),v=d&&d.index!==void 0?d.index:o.length,E=o.charCodeAt(v),!d){t=o.slice(y);break}if(E===10&&y===v&&i)m.push(-3),i=void 0;else switch(i&&(m.push(-5),i=void 0),y<v&&(m.push(o.slice(y,v)),e+=v-y),E){case 0:{m.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,m.push(-2);e++<p;)m.push(-1);break}case 10:{m.push(-4),e=1;break}default:i=!0,e=1}y=v+1}return u&&(i&&m.push(-5),t&&m.push(t),m.push(null)),m}}const w4=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function x4(e){return e.replace(w4,T4)}function T4(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),o=a===120||a===88;return u1(n.slice(o?2:1),o?16:10)}return Sf(n)||e}const w1={}.hasOwnProperty;function E4(e,t,n){return typeof t!="string"&&(n=t,t=void 0),_4(n)(b4(y4(n).document().write(v4()(e,t,!0))))}function _4(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Qt),autolinkProtocol:ne,autolinkEmail:ne,atxHeading:o(cn),blockQuote:o(fe),characterEscape:ne,characterReference:ne,codeFenced:o(Ae),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Ae,l),codeText:o(ze,l),codeTextData:ne,data:ne,codeFlowValue:ne,definition:o(st),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(ot),hardBreakEscape:o(Kt),hardBreakTrailing:o(Kt),htmlFlow:o(Pn,l),htmlFlowData:ne,htmlText:o(Pn,l),htmlTextData:ne,image:o(si),label:l,link:o(Qt),listItem:o(bs),listItemValue:v,listOrdered:o(ea,y),listUnordered:o(ea),paragraph:o(xu),reference:N,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(cn),strong:o(Tu),thematicBreak:o(Eu)},exit:{atxHeading:m(),atxHeadingSequence:J,autolink:m(),autolinkEmail:_e,autolinkProtocol:Ce,blockQuote:m(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:ge,characterReference:ue,codeFenced:m(S),codeFencedFence:C,codeFencedFenceInfo:E,codeFencedFenceMeta:A,codeFlowValue:F,codeIndented:m(I),codeText:m(be),codeTextData:F,data:F,definition:m(),definitionDestinationString:G,definitionLabelString:L,definitionTitleString:P,emphasis:m(),hardBreakEscape:m(me),hardBreakTrailing:m(me),htmlFlow:m(ke),htmlFlowData:F,htmlText:m(xe),htmlTextData:F,image:m(ce),label:X,labelText:Ee,lineEnding:de,link:m(j),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:te,resourceDestinationString:R,resourceTitleString:D,resource:W,setextHeading:m(ve),setextHeadingLineSequence:V,setextHeadingText:q,strong:m(),thematicBreak:m()}};x1(t,(e||{}).mdastExtensions||[]);const n={};return i;function i(ae){let Te={type:"root",children:[]};const qe={stack:[Te],tokenStack:[],config:t,enter:u,exit:d,buffer:l,resume:p,data:n},We=[];let it=-1;for(;++it<ae.length;)if(ae[it][1].type==="listOrdered"||ae[it][1].type==="listUnordered")if(ae[it][0]==="enter")We.push(it);else{const xn=We.pop();it=a(ae,xn,it)}for(it=-1;++it<ae.length;){const xn=t[ae[it][0]];w1.call(xn,ae[it][1].type)&&xn[ae[it][1].type].call(Object.assign({sliceSerialize:ae[it][2].sliceSerialize},qe),ae[it][1])}if(qe.tokenStack.length>0){const xn=qe.tokenStack[qe.tokenStack.length-1];(xn[1]||hw).call(qe,void 0,xn[0])}for(Te.position={start:hr(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:hr(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},it=-1;++it<t.transforms.length;)Te=t.transforms[it](Te)||Te;return Te}function a(ae,Te,qe){let We=Te-1,it=-1,xn=!1,pi,rn,Dt,un;for(;++We<=qe;){const dt=ae[We];switch(dt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{dt[0]==="enter"?it++:it--,un=void 0;break}case"lineEndingBlank":{dt[0]==="enter"&&(pi&&!un&&!it&&!Dt&&(Dt=We),un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:un=void 0}if(!it&&dt[0]==="enter"&&dt[1].type==="listItemPrefix"||it===-1&&dt[0]==="exit"&&(dt[1].type==="listUnordered"||dt[1].type==="listOrdered")){if(pi){let Fi=We;for(rn=void 0;Fi--;){const $n=ae[Fi];if($n[1].type==="lineEnding"||$n[1].type==="lineEndingBlank"){if($n[0]==="exit")continue;rn&&(ae[rn][1].type="lineEndingBlank",xn=!0),$n[1].type="lineEnding",rn=Fi}else if(!($n[1].type==="linePrefix"||$n[1].type==="blockQuotePrefix"||$n[1].type==="blockQuotePrefixWhitespace"||$n[1].type==="blockQuoteMarker"||$n[1].type==="listItemIndent"))break}Dt&&(!rn||Dt<rn)&&(pi._spread=!0),pi.end=Object.assign({},rn?ae[rn][1].start:dt[1].end),ae.splice(rn||We,0,["exit",pi,dt[2]]),We++,qe++}if(dt[1].type==="listItemPrefix"){const Fi={type:"listItem",_spread:!1,start:Object.assign({},dt[1].start),end:void 0};pi=Fi,ae.splice(We,0,["enter",Fi,dt[2]]),We++,qe++,Dt=void 0,un=!0}}}return ae[Te][1]._spread=xn,qe}function o(ae,Te){return qe;function qe(We){u.call(this,ae(We),We),Te&&Te.call(this,We)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ae,Te,qe){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([Te,qe||void 0]),ae.position={start:hr(Te.start),end:void 0}}function m(ae){return Te;function Te(qe){ae&&ae.call(this,qe),d.call(this,qe)}}function d(ae,Te){const qe=this.stack.pop(),We=this.tokenStack.pop();if(We)We[0].type!==ae.type&&(Te?Te.call(this,ae,We[0]):(We[1]||hw).call(this,ae,We[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Co({start:ae.start,end:ae.end})+"): its not open");qe.position.end=hr(ae.end)}function p(){return Cf(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function v(ae){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function E(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=ae}function A(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=ae}function C(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function I(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ae.replace(/(\r?\n|\r)$/g,"")}function L(ae){const Te=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Te,qe.identifier=ii(this.sliceSerialize(ae)).toLowerCase()}function P(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ae}function G(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ae}function J(ae){const Te=this.stack[this.stack.length-1];if(!Te.depth){const qe=this.sliceSerialize(ae).length;Te.depth=qe}}function q(){this.data.setextHeadingSlurpLineEnding=!0}function V(ae){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function ve(){this.data.setextHeadingSlurpLineEnding=void 0}function ne(ae){const qe=this.stack[this.stack.length-1].children;let We=qe[qe.length-1];(!We||We.type!=="text")&&(We=nn(),We.position={start:hr(ae.start),end:void 0},qe.push(We)),this.stack.push(We)}function F(ae){const Te=this.stack.pop();Te.value+=this.sliceSerialize(ae),Te.position.end=hr(ae.end)}function de(ae){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=Te.children[Te.children.length-1];qe.position.end=hr(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Te.type)&&(ne.call(this,ae),F.call(this,ae))}function me(){this.data.atHardBreak=!0}function ke(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ae}function xe(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ae}function be(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ae}function j(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=Te,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function ce(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=Te,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Ee(ae){const Te=this.sliceSerialize(ae),qe=this.stack[this.stack.length-2];qe.label=x4(Te),qe.identifier=ii(Te).toLowerCase()}function X(){const ae=this.stack[this.stack.length-1],Te=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const We=ae.children;qe.children=We}else qe.alt=Te}function R(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ae}function D(){const ae=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ae}function W(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function te(ae){const Te=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Te,qe.identifier=ii(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function pe(ae){this.data.characterReferenceType=ae.type}function ge(ae){const Te=this.sliceSerialize(ae),qe=this.data.characterReferenceType;let We;qe?(We=u1(Te,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):We=Sf(Te);const it=this.stack[this.stack.length-1];it.value+=We}function ue(ae){const Te=this.stack.pop();Te.position.end=hr(ae.end)}function Ce(ae){F.call(this,ae);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(ae)}function _e(ae){F.call(this,ae);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(ae)}function fe(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function ze(){return{type:"inlineCode",value:""}}function st(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function cn(){return{type:"heading",depth:0,children:[]}}function Kt(){return{type:"break"}}function Pn(){return{type:"html",value:""}}function si(){return{type:"image",title:null,url:"",alt:null}}function Qt(){return{type:"link",title:null,url:"",children:[]}}function ea(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function bs(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function xu(){return{type:"paragraph",children:[]}}function Tu(){return{type:"strong",children:[]}}function nn(){return{type:"text",value:""}}function Eu(){return{type:"thematicBreak"}}}function hr(e){return{line:e.line,column:e.column,offset:e.offset}}function x1(e,t){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?x1(e,i):A4(e,i)}}function A4(e,t){let n;for(n in t)if(w1.call(t,n))switch(n){case"canContainEols":{const i=t[n];i&&e[n].push(...i);break}case"transforms":{const i=t[n];i&&e[n].push(...i);break}case"enter":case"exit":{const i=t[n];i&&Object.assign(e[n],i);break}}}function hw(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Co({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Co({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Co({start:t.start,end:t.end})+") is still open")}function C4(e){const t=this;t.parser=n;function n(i){return E4(i,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function S4(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function k4(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function I4(e,t){const n=t.value?t.value+`
`:"",i={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(i.className=["language-"+a[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o=e.applyData(t,o),o={type:"element",tagName:"pre",properties:{},children:[o]},e.patch(t,o),o}function N4(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function R4(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function M4(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=String(t.identifier).toUpperCase(),a=ms(i.toLowerCase()),o=e.footnoteOrder.indexOf(i);let l,u=e.footnoteCounts.get(i);u===void 0?(u=0,e.footnoteOrder.push(i),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(i,u);const m={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,m);const d={type:"element",tagName:"sup",properties:{},children:[m]};return e.patch(t,d),e.applyData(t,d)}function P4(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function D4(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function T1(e,t){const n=t.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+i}];const a=e.all(t),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=i:a.push({type:"text",value:i}),a}function L4(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return T1(e,t);const a={src:ms(i.url||""),alt:t.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,o),e.applyData(t,o)}function O4(e,t){const n={src:ms(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)}function q4(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,i),e.applyData(t,i)}function B4(e,t){const n=String(t.identifier).toUpperCase(),i=e.definitionById.get(n);if(!i)return T1(e,t);const a={href:ms(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function H4(e,t){const n={href:ms(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function U4(e,t,n){const i=e.all(t),a=n?F4(n):E1(t),o={},l=[];if(typeof t.checked=="boolean"){const p=i[0];let y;p&&p.type==="element"&&p.tagName==="p"?y=p:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<i.length;){const p=i[u];(a||u!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?l.push(...p.children):l.push(p)}const m=i[i.length-1];m&&(a||m.type!=="element"||m.tagName!=="p")&&l.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,d),e.applyData(t,d)}function F4(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let i=-1;for(;!t&&++i<n.length;)t=E1(n[i])}return t}function E1(e){const t=e.spread;return t??e.children.length>1}function G4(e,t){const n={},i=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<i.length;){const l=i[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function z4(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function V4(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function W4(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function j4(e,t){const n=e.all(t),i=n.shift(),a=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(t.children[0],l),a.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=mi(t.children[1]),m=su(t.children[t.children.length-1]);u&&m&&(l.position={start:u,end:m}),a.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,o),e.applyData(t,o)}function Y4(e,t,n){const i=n?n.children:void 0,o=(i?i.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let m=-1;const d=[];for(;++m<u;){const y=t.children[m],v={},E=l?l[m]:void 0;E&&(v.align=E);let A={type:"element",tagName:o,properties:v,children:[]};y&&(A.children=e.all(y),e.patch(y,A),A=e.applyData(y,A)),d.push(A)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,p),e.applyData(t,p)}function $4(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const mw=9,fw=32;function K4(e){const t=String(e),n=/\r?\n|\r/g;let i=n.exec(t),a=0;const o=[];for(;i;)o.push(pw(t.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=n.exec(t);return o.push(pw(t.slice(a),a>0,!1)),o.join("")}function pw(e,t,n){let i=0,a=e.length;if(t){let o=e.codePointAt(i);for(;o===mw||o===fw;)i++,o=e.codePointAt(i)}if(n){let o=e.codePointAt(a-1);for(;o===mw||o===fw;)a--,o=e.codePointAt(a-1)}return a>i?e.slice(i,a):""}function Q4(e,t){const n={type:"text",value:K4(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function J4(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const X4={blockquote:S4,break:k4,code:I4,delete:N4,emphasis:R4,footnoteReference:M4,heading:P4,html:D4,imageReference:L4,image:O4,inlineCode:q4,linkReference:B4,link:H4,listItem:U4,list:G4,paragraph:z4,root:V4,strong:W4,table:j4,tableCell:$4,tableRow:Y4,text:Q4,thematicBreak:J4,toml:xc,yaml:xc,definition:xc,footnoteDefinition:xc};function xc(){}const _1=-1,cu=0,ko=1,Vc=2,If=3,Nf=4,Rf=5,Mf=6,A1=7,C1=8,gw=typeof self=="object"?self:globalThis,Z4=(e,t)=>{const n=(a,o)=>(e.set(o,a),a),i=a=>{if(e.has(a))return e.get(a);const[o,l]=t[a];switch(o){case cu:case _1:return n(l,a);case ko:{const u=n([],a);for(const m of l)u.push(i(m));return u}case Vc:{const u=n({},a);for(const[m,d]of l)u[i(m)]=i(d);return u}case If:return n(new Date(l),a);case Nf:{const{source:u,flags:m}=l;return n(new RegExp(u,m),a)}case Rf:{const u=n(new Map,a);for(const[m,d]of l)u.set(i(m),i(d));return u}case Mf:{const u=n(new Set,a);for(const m of l)u.add(i(m));return u}case A1:{const{name:u,message:m}=l;return n(new gw[u](m),a)}case C1:return n(BigInt(l),a);case"BigInt":return n(Object(BigInt(l)),a);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new gw[o](l),a)};return i},yw=e=>Z4(new Map,e)(0),Ua="",{toString:eL}={},{keys:tL}=Object,vo=e=>{const t=typeof e;if(t!=="object"||!e)return[cu,t];const n=eL.call(e).slice(8,-1);switch(n){case"Array":return[ko,Ua];case"Object":return[Vc,Ua];case"Date":return[If,Ua];case"RegExp":return[Nf,Ua];case"Map":return[Rf,Ua];case"Set":return[Mf,Ua];case"DataView":return[ko,n]}return n.includes("Array")?[ko,n]:n.includes("Error")?[A1,n]:[Vc,n]},Tc=([e,t])=>e===cu&&(t==="function"||t==="symbol"),nL=(e,t,n,i)=>{const a=(l,u)=>{const m=i.push(l)-1;return n.set(u,m),m},o=l=>{if(n.has(l))return n.get(l);let[u,m]=vo(l);switch(u){case cu:{let p=l;switch(m){case"bigint":u=C1,p=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+m);p=null;break;case"undefined":return a([_1],l)}return a([u,p],l)}case ko:{if(m){let v=l;return m==="DataView"?v=new Uint8Array(l.buffer):m==="ArrayBuffer"&&(v=new Uint8Array(l)),a([m,[...v]],l)}const p=[],y=a([u,p],l);for(const v of l)p.push(o(v));return y}case Vc:{if(m)switch(m){case"BigInt":return a([m,l.toString()],l);case"Boolean":case"Number":case"String":return a([m,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const p=[],y=a([u,p],l);for(const v of tL(l))(e||!Tc(vo(l[v])))&&p.push([o(v),o(l[v])]);return y}case If:return a([u,l.toISOString()],l);case Nf:{const{source:p,flags:y}=l;return a([u,{source:p,flags:y}],l)}case Rf:{const p=[],y=a([u,p],l);for(const[v,E]of l)(e||!(Tc(vo(v))||Tc(vo(E))))&&p.push([o(v),o(E)]);return y}case Mf:{const p=[],y=a([u,p],l);for(const v of l)(e||!Tc(vo(v)))&&p.push(o(v));return y}}const{message:d}=l;return a([u,{name:m,message:d}],l)};return o},bw=(e,{json:t,lossy:n}={})=>{const i=[];return nL(!(t||n),!!t,new Map,i)(e),i},os=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?yw(bw(e,t)):structuredClone(e):(e,t)=>yw(bw(e,t));function iL(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function rL(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function aL(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||iL,i=e.options.footnoteBackLabel||rL,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let m=-1;for(;++m<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[m]);if(!d)continue;const p=e.all(d),y=String(d.identifier).toUpperCase(),v=ms(y.toLowerCase());let E=0;const A=[],C=e.footnoteCounts.get(y);for(;C!==void 0&&++E<=C;){A.length>0&&A.push({type:"text",value:" "});let L=typeof n=="string"?n:n(m,E);typeof L=="string"&&(L={type:"text",value:L}),A.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(m,E),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const S=p[p.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const L=S.children[S.children.length-1];L&&L.type==="text"?L.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...A)}else p.push(...A);const I={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(p,!0)};e.patch(d,I),u.push(I)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...os(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const uu=(function(e){if(e==null)return cL;if(typeof e=="function")return du(e);if(typeof e=="object")return Array.isArray(e)?sL(e):oL(e);if(typeof e=="string")return lL(e);throw new Error("Expected function, string, or object as test")});function sL(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uu(e[n]);return du(i);function i(...a){let o=-1;for(;++o<t.length;)if(t[o].apply(this,a))return!0;return!1}}function oL(e){const t=e;return du(n);function n(i){const a=i;let o;for(o in e)if(a[o]!==t[o])return!1;return!0}}function lL(e){return du(t);function t(n){return n&&n.type===e}}function du(e){return t;function t(n,i,a){return!!(uL(n)&&e.call(this,n,typeof i=="number"?i:void 0,a||void 0))}}function cL(){return!0}function uL(e){return e!==null&&typeof e=="object"&&"type"in e}const S1=[],dL=!0,Fm=!1,hL="skip";function k1(e,t,n,i){let a;typeof t=="function"&&typeof n!="function"?(i=n,n=t):a=t;const o=uu(a),l=i?-1:1;u(e,void 0,[])();function u(m,d,p){const y=m&&typeof m=="object"?m:{};if(typeof y.type=="string"){const E=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(m.type+(E?"<"+E+">":""))+")"})}return v;function v(){let E=S1,A,C,S;if((!t||o(m,d,p[p.length-1]||void 0))&&(E=mL(n(m,p)),E[0]===Fm))return E;if("children"in m&&m.children){const I=m;if(I.children&&E[0]!==hL)for(C=(i?I.children.length:-1)+l,S=p.concat(I);C>-1&&C<I.children.length;){const L=I.children[C];if(A=u(L,C,S)(),A[0]===Fm)return A;C=typeof A[1]=="number"?A[1]:C+l}}return E}}}function mL(e){return Array.isArray(e)?e:typeof e=="number"?[dL,e]:e==null?S1:[e]}function hu(e,t,n,i){let a,o,l;typeof t=="function"&&typeof n!="function"?(o=void 0,l=t,a=n):(o=t,l=n,a=i),k1(e,o,u,a);function u(m,d){const p=d[d.length-1],y=p?p.children.indexOf(m):void 0;return l(m,y,p)}}const Gm={}.hasOwnProperty,fL={};function pL(e,t){const n=t||fL,i=new Map,a=new Map,o=new Map,l={...X4,...n.handlers},u={all:d,applyData:yL,definitionById:i,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:l,one:m,options:n,patch:gL,wrap:vL};return hu(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const y=p.type==="definition"?i:a,v=String(p.identifier).toUpperCase();y.has(v)||y.set(v,p)}}),u;function m(p,y){const v=p.type,E=u.handlers[v];if(Gm.call(u.handlers,v)&&E)return E(u,p,y);if(u.options.passThrough&&u.options.passThrough.includes(v)){if("children"in p){const{children:C,...S}=p,I=os(S);return I.children=u.all(p),I}return os(p)}return(u.options.unknownHandler||bL)(u,p,y)}function d(p){const y=[];if("children"in p){const v=p.children;let E=-1;for(;++E<v.length;){const A=u.one(v[E],p);if(A){if(E&&v[E-1].type==="break"&&(!Array.isArray(A)&&A.type==="text"&&(A.value=vw(A.value)),!Array.isArray(A)&&A.type==="element")){const C=A.children[0];C&&C.type==="text"&&(C.value=vw(C.value))}Array.isArray(A)?y.push(...A):y.push(A)}}}return y}}function gL(e,t){e.position&&(t.position=rP(e))}function yL(e,t){let n=t;if(e&&e.data){const i=e.data.hName,a=e.data.hChildren,o=e.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const l="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:l}}n.type==="element"&&o&&Object.assign(n.properties,os(o)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function bL(e,t){const n=t.data||{},i="value"in t&&!(Gm.call(n,"hProperties")||Gm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function vL(e,t){const n=[];let i=-1;for(t&&n.push({type:"text",value:`
`});++i<e.length;)i&&n.push({type:"text",value:`
`}),n.push(e[i]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function vw(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function ww(e,t){const n=pL(e,t),i=n.one(e,void 0),a=aL(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}function wL(e,t){return e&&"run"in e?async function(n,i){const a=ww(n,{file:i,...t});await e.run(a,i)}:function(n,i){return ww(n,{file:i,...e||t})}}function xw(e){if(e)throw e}var Jh,Tw;function xL(){if(Tw)return Jh;Tw=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},o=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var p=e.call(d,"constructor"),y=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!y)return!1;var v;for(v in d);return typeof v>"u"||e.call(d,v)},l=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},u=function(d,p){if(p==="__proto__")if(e.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return Jh=function m(){var d,p,y,v,E,A,C=arguments[0],S=1,I=arguments.length,L=!1;for(typeof C=="boolean"&&(L=C,C=arguments[1]||{},S=2),(C==null||typeof C!="object"&&typeof C!="function")&&(C={});S<I;++S)if(d=arguments[S],d!=null)for(p in d)y=u(C,p),v=u(d,p),C!==v&&(L&&v&&(o(v)||(E=a(v)))?(E?(E=!1,A=y&&a(y)?y:[]):A=y&&o(y)?y:{},l(C,{name:p,newValue:m(L,A,v)})):typeof v<"u"&&l(C,{name:p,newValue:v}));return C},Jh}var TL=xL();const Xh=Xc(TL);function zm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function EL(){const e=[],t={run:n,use:i};return t;function n(...a){let o=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...a);function u(m,...d){const p=e[++o];let y=-1;if(m){l(m);return}for(;++y<a.length;)(d[y]===null||d[y]===void 0)&&(d[y]=a[y]);a=d,p?_L(p,u)(...d):l(null,...d)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function _L(e,t){let n;return i;function i(...l){const u=e.length>l.length;let m;u&&l.push(a);try{m=e.apply(this,l)}catch(d){const p=d;if(u&&n)throw p;return a(p)}u||(m&&m.then&&typeof m.then=="function"?m.then(o,a):m instanceof Error?a(m):o(m))}function a(l,...u){n||(n=!0,t(l,...u))}function o(l){a(null,l)}}const di={basename:AL,dirname:CL,extname:SL,join:kL,sep:"/"};function AL(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Qo(e);let n=0,i=-1,a=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(o){n=a+1;break}}else i<0&&(o=!0,i=a+1);return i<0?"":e.slice(n,i)}if(t===e)return"";let l=-1,u=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(o){n=a+1;break}}else l<0&&(o=!0,l=a+1),u>-1&&(e.codePointAt(a)===t.codePointAt(u--)?u<0&&(i=a):(u=-1,i=l));return n===i?i=l:i<0&&(i=e.length),e.slice(n,i)}function CL(e){if(Qo(e),e.length===0)return".";let t=-1,n=e.length,i;for(;--n;)if(e.codePointAt(n)===47){if(i){t=n;break}}else i||(i=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function SL(e){Qo(e);let t=e.length,n=-1,i=0,a=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){i=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?a<0?a=t:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||n<0||o===0||o===1&&a===n-1&&a===i+1?"":e.slice(a,n)}function kL(...e){let t=-1,n;for(;++t<e.length;)Qo(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":IL(n)}function IL(e){Qo(e);const t=e.codePointAt(0)===47;let n=NL(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function NL(e,t){let n="",i=0,a=-1,o=0,l=-1,u,m;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(a===l-1||o===1))if(a!==l-1&&o===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(m=n.lastIndexOf("/"),m!==n.length-1){m<0?(n="",i=0):(n=n.slice(0,m),i=n.length-1-n.lastIndexOf("/")),a=l,o=0;continue}}else if(n.length>0){n="",i=0,a=l,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+e.slice(a+1,l):n=e.slice(a+1,l),i=l-a-1;a=l,o=0}else u===46&&o>-1?o++:o=-1}return n}function Qo(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const RL={cwd:ML};function ML(){return"/"}function Vm(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function PL(e){if(typeof e=="string")e=new URL(e);else if(!Vm(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return DL(e)}function DL(e){if(e.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const i=t.codePointAt(n+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const Zh=["history","path","basename","stem","extname","dirname"];class I1{constructor(t){let n;t?Vm(t)?n={path:t}:typeof t=="string"||LL(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":RL.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Zh.length;){const o=Zh[i];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let a;for(a in n)Zh.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?di.basename(this.path):void 0}set basename(t){tm(t,"basename"),em(t,"basename"),this.path=di.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?di.dirname(this.path):void 0}set dirname(t){Ew(this.basename,"dirname"),this.path=di.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?di.extname(this.path):void 0}set extname(t){if(em(t,"extname"),Ew(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=di.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Vm(t)&&(t=PL(t)),tm(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?di.basename(this.path,this.extname):void 0}set stem(t){tm(t,"stem"),em(t,"stem"),this.path=di.join(this.dirname||"",t+(this.extname||""))}fail(t,n,i){const a=this.message(t,n,i);throw a.fatal=!0,a}info(t,n,i){const a=this.message(t,n,i);return a.fatal=void 0,a}message(t,n,i){const a=new en(t,n,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function em(e,t){if(e&&e.includes(di.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+di.sep+"`")}function tm(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ew(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function LL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const OL=(function(e){const i=this.constructor.prototype,a=i[e],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),qL={}.hasOwnProperty;class Pf extends OL{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=EL()}copy(){const t=new Pf;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];t.use(...i)}return t.data(Xh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(rm("data",this.frozen),this.namespace[t]=n,this):qL.call(this.namespace,t)&&this.namespace[t]||void 0:t?(rm("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=n.call(t,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ec(t),i=this.parser||this.Parser;return nm("parse",i),i(String(n),n)}process(t,n){const i=this;return this.freeze(),nm("process",this.parser||this.Parser),im("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(o,l){const u=Ec(t),m=i.parse(u);i.run(m,u,function(p,y,v){if(p||!y||!v)return d(p);const E=y,A=i.stringify(E,v);UL(A)?v.value=A:v.result=A,d(p,v)});function d(p,y){p||!y?l(p):o?o(y):n(void 0,y)}}}processSync(t){let n=!1,i;return this.freeze(),nm("processSync",this.parser||this.Parser),im("processSync",this.compiler||this.Compiler),this.process(t,a),Aw("processSync","process",n),i;function a(o,l){n=!0,xw(o),i=l}}run(t,n,i){_w(t),this.freeze();const a=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?o(void 0,i):new Promise(o);function o(l,u){const m=Ec(n);a.run(t,m,d);function d(p,y,v){const E=y||t;p?u(p):l?l(E):i(void 0,E,v)}}}runSync(t,n){let i=!1,a;return this.run(t,n,o),Aw("runSync","run",i),a;function o(l,u){xw(l),a=u,i=!0}}stringify(t,n){this.freeze();const i=Ec(n),a=this.compiler||this.Compiler;return im("stringify",a),_w(t),a(t,i)}use(t,...n){const i=this.attachers,a=this.namespace;if(rm("use",this.frozen),t!=null)if(typeof t=="function")m(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(d){if(typeof d=="function")m(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...y]=d;m(p,y)}else l(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function l(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(d.plugins),d.settings&&(a.settings=Xh(!0,a.settings,d.settings))}function u(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const y=d[p];o(y)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function m(d,p){let y=-1,v=-1;for(;++y<i.length;)if(i[y][0]===d){v=y;break}if(v===-1)i.push([d,...p]);else if(p.length>0){let[E,...A]=p;const C=i[v][1];zm(C)&&zm(E)&&(E=Xh(!0,C,E)),i[v]=[d,E,...A]}}}}const BL=new Pf().freeze();function nm(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function im(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function rm(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _w(e){if(!zm(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Aw(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ec(e){return HL(e)?e:new I1(e)}function HL(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function UL(e){return typeof e=="string"||FL(e)}function FL(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const GL="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Cw=[],Sw={allowDangerousHtml:!0},zL=/^(https?|ircs?|mailto|xmpp)$/i,VL=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Df(e){const t=WL(e),n=jL(e);return YL(t.runSync(t.parse(n),n),e)}function WL(e){const t=e.rehypePlugins||Cw,n=e.remarkPlugins||Cw,i=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Sw}:Sw;return BL().use(C4).use(n).use(wL,i).use(t)}function jL(e){const t=e.children||"",n=new I1;return typeof t=="string"&&(n.value=t),n}function YL(e,t){const n=t.allowedElements,i=t.allowElement,a=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,m=t.urlTransform||$L;for(const p of VL)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+GL+p.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),hu(e,d),cP(e,{Fragment:w.Fragment,components:a,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function d(p,y,v){if(p.type==="raw"&&v&&typeof y=="number")return l?v.children.splice(y,1):v.children[y]={type:"text",value:p.value},y;if(p.type==="element"){let E;for(E in $h)if(Object.hasOwn($h,E)&&Object.hasOwn(p.properties,E)){const A=p.properties[E],C=$h[E];(C===null||C.includes(p.tagName))&&(p.properties[E]=m(String(A||""),E,p))}}if(p.type==="element"){let E=n?!n.includes(p.tagName):o?o.includes(p.tagName):!1;if(!E&&i&&typeof y=="number"&&(E=!i(p,y,v)),E&&v&&typeof y=="number")return u&&p.children?v.children.splice(y,1,...p.children):v.children.splice(y,1),y}}}function $L(e){const t=e.indexOf(":"),n=e.indexOf("?"),i=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||i!==-1&&t>i||zL.test(e.slice(0,t))?e:""}function kw(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let i=0,a=n.indexOf(t);for(;a!==-1;)i++,a=n.indexOf(t,a+t.length);return i}function KL(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function QL(e,t,n){const a=uu((n||{}).ignore||[]),o=JL(t);let l=-1;for(;++l<o.length;)k1(e,"text",u);function u(d,p){let y=-1,v;for(;++y<p.length;){const E=p[y],A=v?v.children:void 0;if(a(E,A?A.indexOf(E):void 0,v))return;v=E}if(v)return m(d,p)}function m(d,p){const y=p[p.length-1],v=o[l][0],E=o[l][1];let A=0;const S=y.children.indexOf(d);let I=!1,L=[];v.lastIndex=0;let P=v.exec(d.value);for(;P;){const G=P.index,J={index:P.index,input:P.input,stack:[...p,d]};let q=E(...P,J);if(typeof q=="string"&&(q=q.length>0?{type:"text",value:q}:void 0),q===!1?v.lastIndex=G+1:(A!==G&&L.push({type:"text",value:d.value.slice(A,G)}),Array.isArray(q)?L.push(...q):q&&L.push(q),A=G+P[0].length,I=!0),!v.global)break;P=v.exec(d.value)}return I?(A<d.value.length&&L.push({type:"text",value:d.value.slice(A)}),y.children.splice(S,1,...L)):L=[d],S+L.length}}function JL(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let i=-1;for(;++i<n.length;){const a=n[i];t.push([XL(a[0]),ZL(a[1])])}return t}function XL(e){return typeof e=="string"?new RegExp(KL(e),"g"):e}function ZL(e){return typeof e=="function"?e:function(){return e}}const am="phrasing",sm=["autolink","link","image","label"];function eO(){return{transforms:[oO],enter:{literalAutolink:nO,literalAutolinkEmail:om,literalAutolinkHttp:om,literalAutolinkWww:om},exit:{literalAutolink:sO,literalAutolinkEmail:aO,literalAutolinkHttp:iO,literalAutolinkWww:rO}}}function tO(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:am,notInConstruct:sm},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:am,notInConstruct:sm},{character:":",before:"[ps]",after:"\\/",inConstruct:am,notInConstruct:sm}]}}function nO(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function om(e){this.config.enter.autolinkProtocol.call(this,e)}function iO(e){this.config.exit.autolinkProtocol.call(this,e)}function rO(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function aO(e){this.config.exit.autolinkEmail.call(this,e)}function sO(e){this.exit(e)}function oO(e){QL(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,lO],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),cO]],{ignore:["link","linkReference"]})}function lO(e,t,n,i,a){let o="";if(!N1(a)||(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!uO(n)))return!1;const l=dO(n+i);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function cO(e,t,n,i){return!N1(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function uO(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function dO(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],i=n.indexOf(")");const a=kw(e,"(");let o=kw(e,")");for(;i!==-1&&a>o;)e+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),o++;return[e,n]}function N1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Qr(n)||ou(n))&&(!t||n!==47)}R1.peek=wO;function hO(){this.buffer()}function mO(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function fO(){this.buffer()}function pO(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function gO(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ii(this.sliceSerialize(e)).toLowerCase(),n.label=t}function yO(e){this.exit(e)}function bO(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ii(this.sliceSerialize(e)).toLowerCase(),n.label=t}function vO(e){this.exit(e)}function wO(){return"["}function R1(e,t,n,i){const a=n.createTracker(i);let o=a.move("[^");const l=n.enter("footnoteReference"),u=n.enter("reference");return o+=a.move(n.safe(n.associationId(e),{after:"]",before:o})),u(),l(),o+=a.move("]"),o}function xO(){return{enter:{gfmFootnoteCallString:hO,gfmFootnoteCall:mO,gfmFootnoteDefinitionLabelString:fO,gfmFootnoteDefinition:pO},exit:{gfmFootnoteCallString:gO,gfmFootnoteCall:yO,gfmFootnoteDefinitionLabelString:bO,gfmFootnoteDefinition:vO}}}function TO(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:R1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,a,o,l){const u=o.createTracker(l);let m=u.move("[^");const d=o.enter("footnoteDefinition"),p=o.enter("label");return m+=u.move(o.safe(o.associationId(i),{before:m,after:"]"})),p(),m+=u.move("]:"),i.children&&i.children.length>0&&(u.shift(4),m+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(i,u.current()),t?M1:EO))),d(),m}}function EO(e,t,n){return t===0?e:M1(e,t,n)}function M1(e,t,n){return(n?"":"    ")+e}const _O=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];P1.peek=IO;function AO(){return{canContainEols:["delete"],enter:{strikethrough:SO},exit:{strikethrough:kO}}}function CO(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:_O}],handlers:{delete:P1}}}function SO(e){this.enter({type:"delete",children:[]},e)}function kO(e){this.exit(e)}function P1(e,t,n,i){const a=n.createTracker(i),o=n.enter("strikethrough");let l=a.move("~~");return l+=n.containerPhrasing(e,{...a.current(),before:l,after:"~"}),l+=a.move("~~"),o(),l}function IO(){return"~"}function NO(e){return e.length}function RO(e,t){const n=t||{},i=(n.align||[]).concat(),a=n.stringLength||NO,o=[],l=[],u=[],m=[];let d=0,p=-1;for(;++p<e.length;){const C=[],S=[];let I=-1;for(e[p].length>d&&(d=e[p].length);++I<e[p].length;){const L=MO(e[p][I]);if(n.alignDelimiters!==!1){const P=a(L);S[I]=P,(m[I]===void 0||P>m[I])&&(m[I]=P)}C.push(L)}l[p]=C,u[p]=S}let y=-1;if(typeof i=="object"&&"length"in i)for(;++y<d;)o[y]=Iw(i[y]);else{const C=Iw(i);for(;++y<d;)o[y]=C}y=-1;const v=[],E=[];for(;++y<d;){const C=o[y];let S="",I="";C===99?(S=":",I=":"):C===108?S=":":C===114&&(I=":");let L=n.alignDelimiters===!1?1:Math.max(1,m[y]-S.length-I.length);const P=S+"-".repeat(L)+I;n.alignDelimiters!==!1&&(L=S.length+L+I.length,L>m[y]&&(m[y]=L),E[y]=L),v[y]=P}l.splice(1,0,v),u.splice(1,0,E),p=-1;const A=[];for(;++p<l.length;){const C=l[p],S=u[p];y=-1;const I=[];for(;++y<d;){const L=C[y]||"";let P="",G="";if(n.alignDelimiters!==!1){const J=m[y]-(S[y]||0),q=o[y];q===114?P=" ".repeat(J):q===99?J%2?(P=" ".repeat(J/2+.5),G=" ".repeat(J/2-.5)):(P=" ".repeat(J/2),G=P):G=" ".repeat(J)}n.delimiterStart!==!1&&!y&&I.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&L==="")&&(n.delimiterStart!==!1||y)&&I.push(" "),n.alignDelimiters!==!1&&I.push(P),I.push(L),n.alignDelimiters!==!1&&I.push(G),n.padding!==!1&&I.push(" "),(n.delimiterEnd!==!1||y!==d-1)&&I.push("|")}A.push(n.delimiterEnd===!1?I.join("").replace(/ +$/,""):I.join(""))}return A.join(`
`)}function MO(e){return e==null?"":String(e)}function Iw(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const Nw={}.hasOwnProperty;function D1(e,t){const n=t||{};function i(a,...o){let l=i.invalid;const u=i.handlers;if(a&&Nw.call(a,e)){const m=String(a[e]);l=Nw.call(u,m)?u[m]:i.unknown}if(l)return l.call(this,a,...o)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}function PO(e,t,n,i){const a=n.enter("blockquote"),o=n.createTracker(i);o.move("> "),o.shift(2);const l=n.indentLines(n.containerFlow(e,o.current()),DO);return a(),l}function DO(e,t,n){return">"+(n?"":" ")+e}function LO(e,t){return Rw(e,t.inConstruct,!0)&&!Rw(e,t.notInConstruct,!1)}function Rw(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let i=-1;for(;++i<t.length;)if(e.includes(t[i]))return!0;return!1}function Mw(e,t,n,i){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&LO(n.stack,n.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function OO(e,t){const n=String(e);let i=n.indexOf(t),a=i,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===a?++o>l&&(l=o):o=1,a=i+t.length,i=n.indexOf(t,a);return l}function qO(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function BO(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function HO(e,t,n,i){const a=BO(n),o=e.value||"",l=a==="`"?"GraveAccent":"Tilde";if(qO(e,n)){const y=n.enter("codeIndented"),v=n.indentLines(o,UO);return y(),v}const u=n.createTracker(i),m=a.repeat(Math.max(OO(o,a)+1,3)),d=n.enter("codeFenced");let p=u.move(m);if(e.lang){const y=n.enter(`codeFencedLang${l}`);p+=u.move(n.safe(e.lang,{before:p,after:" ",encode:["`"],...u.current()})),y()}if(e.lang&&e.meta){const y=n.enter(`codeFencedMeta${l}`);p+=u.move(" "),p+=u.move(n.safe(e.meta,{before:p,after:`
`,encode:["`"],...u.current()})),y()}return p+=u.move(`
`),o&&(p+=u.move(o+`
`)),p+=u.move(m),d(),p}function UO(e,t,n){return(n?"":"    ")+e}function Lf(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function FO(e,t,n,i){const a=Lf(n),o=a==='"'?"Quote":"Apostrophe",l=n.enter("definition");let u=n.enter("label");const m=n.createTracker(i);let d=m.move("[");return d+=m.move(n.safe(n.associationId(e),{before:d,after:"]",...m.current()})),d+=m.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),d+=m.move("<"),d+=m.move(n.safe(e.url,{before:d,after:">",...m.current()})),d+=m.move(">")):(u=n.enter("destinationRaw"),d+=m.move(n.safe(e.url,{before:d,after:e.title?" ":`
`,...m.current()}))),u(),e.title&&(u=n.enter(`title${o}`),d+=m.move(" "+a),d+=m.move(n.safe(e.title,{before:d,after:a,...m.current()})),d+=m.move(a),u()),l(),d}function GO(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ho(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Wc(e,t,n){const i=ss(e),a=ss(t);return i===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}L1.peek=zO;function L1(e,t,n,i){const a=GO(n),o=n.enter("emphasis"),l=n.createTracker(i),u=l.move(a);let m=l.move(n.containerPhrasing(e,{after:a,before:u,...l.current()}));const d=m.charCodeAt(0),p=Wc(i.before.charCodeAt(i.before.length-1),d,a);p.inside&&(m=Ho(d)+m.slice(1));const y=m.charCodeAt(m.length-1),v=Wc(i.after.charCodeAt(0),y,a);v.inside&&(m=m.slice(0,-1)+Ho(y));const E=l.move(a);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:p.outside},u+m+E}function zO(e,t,n){return n.options.emphasis||"*"}function VO(e,t){let n=!1;return hu(e,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Fm}),!!((!e.depth||e.depth<3)&&Cf(e)&&(t.options.setext||n))}function WO(e,t,n,i){const a=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(i);if(VO(e,n)){const p=n.enter("headingSetext"),y=n.enter("phrasing"),v=n.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return y(),p(),v+`
`+(a===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const l="#".repeat(a),u=n.enter("headingAtx"),m=n.enter("phrasing");o.move(l+" ");let d=n.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(d)&&(d=Ho(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,n.options.closeAtx&&(d+=" "+l),m(),u(),d}O1.peek=jO;function O1(e){return e.value||""}function jO(){return"<"}q1.peek=YO;function q1(e,t,n,i){const a=Lf(n),o=a==='"'?"Quote":"Apostrophe",l=n.enter("image");let u=n.enter("label");const m=n.createTracker(i);let d=m.move("![");return d+=m.move(n.safe(e.alt,{before:d,after:"]",...m.current()})),d+=m.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),d+=m.move("<"),d+=m.move(n.safe(e.url,{before:d,after:">",...m.current()})),d+=m.move(">")):(u=n.enter("destinationRaw"),d+=m.move(n.safe(e.url,{before:d,after:e.title?" ":")",...m.current()}))),u(),e.title&&(u=n.enter(`title${o}`),d+=m.move(" "+a),d+=m.move(n.safe(e.title,{before:d,after:a,...m.current()})),d+=m.move(a),u()),d+=m.move(")"),l(),d}function YO(){return"!"}B1.peek=$O;function B1(e,t,n,i){const a=e.referenceType,o=n.enter("imageReference");let l=n.enter("label");const u=n.createTracker(i);let m=u.move("![");const d=n.safe(e.alt,{before:m,after:"]",...u.current()});m+=u.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(e),{before:m,after:"]",...u.current()});return l(),n.stack=p,o(),a==="full"||!d||d!==y?m+=u.move(y+"]"):a==="shortcut"?m=m.slice(0,-1):m+=u.move("]"),m}function $O(){return"!"}H1.peek=KO;function H1(e,t,n){let i=e.value||"",a="`",o=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(i);)a+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++o<n.unsafe.length;){const l=n.unsafe[o],u=n.compilePattern(l);let m;if(l.atBreak)for(;m=u.exec(i);){let d=m.index;i.charCodeAt(d)===10&&i.charCodeAt(d-1)===13&&d--,i=i.slice(0,d)+" "+i.slice(m.index+1)}}return a+i+a}function KO(){return"`"}function U1(e,t){const n=Cf(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}F1.peek=QO;function F1(e,t,n,i){const a=Lf(n),o=a==='"'?"Quote":"Apostrophe",l=n.createTracker(i);let u,m;if(U1(e,n)){const p=n.stack;n.stack=[],u=n.enter("autolink");let y=l.move("<");return y+=l.move(n.containerPhrasing(e,{before:y,after:">",...l.current()})),y+=l.move(">"),u(),n.stack=p,y}u=n.enter("link"),m=n.enter("label");let d=l.move("[");return d+=l.move(n.containerPhrasing(e,{before:d,after:"](",...l.current()})),d+=l.move("]("),m(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(m=n.enter("destinationLiteral"),d+=l.move("<"),d+=l.move(n.safe(e.url,{before:d,after:">",...l.current()})),d+=l.move(">")):(m=n.enter("destinationRaw"),d+=l.move(n.safe(e.url,{before:d,after:e.title?" ":")",...l.current()}))),m(),e.title&&(m=n.enter(`title${o}`),d+=l.move(" "+a),d+=l.move(n.safe(e.title,{before:d,after:a,...l.current()})),d+=l.move(a),m()),d+=l.move(")"),u(),d}function QO(e,t,n){return U1(e,n)?"<":"["}G1.peek=JO;function G1(e,t,n,i){const a=e.referenceType,o=n.enter("linkReference");let l=n.enter("label");const u=n.createTracker(i);let m=u.move("[");const d=n.containerPhrasing(e,{before:m,after:"]",...u.current()});m+=u.move(d+"]["),l();const p=n.stack;n.stack=[],l=n.enter("reference");const y=n.safe(n.associationId(e),{before:m,after:"]",...u.current()});return l(),n.stack=p,o(),a==="full"||!d||d!==y?m+=u.move(y+"]"):a==="shortcut"?m=m.slice(0,-1):m+=u.move("]"),m}function JO(){return"["}function Of(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function XO(e){const t=Of(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function ZO(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function z1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function e6(e,t,n,i){const a=n.enter("list"),o=n.bulletCurrent;let l=e.ordered?ZO(n):Of(n);const u=e.ordered?l==="."?")":".":XO(n);let m=t&&n.bulletLastUsed?l===n.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(m=!0),z1(n)===l&&p){let y=-1;for(;++y<e.children.length;){const v=e.children[y];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){m=!0;break}}}}m&&(l=u),n.bulletCurrent=l;const d=n.containerFlow(e,i);return n.bulletLastUsed=l,n.bulletCurrent=o,a(),d}function t6(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function n6(e,t,n,i){const a=t6(n);let o=n.bulletCurrent||Of(n);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=n.createTracker(i);u.move(o+" ".repeat(l-o.length)),u.shift(l);const m=n.enter("listItem"),d=n.indentLines(n.containerFlow(e,u.current()),p);return m(),d;function p(y,v,E){return v?(E?"":" ".repeat(l))+y:(E?o:o+" ".repeat(l-o.length))+y}}function i6(e,t,n,i){const a=n.enter("paragraph"),o=n.enter("phrasing"),l=n.containerPhrasing(e,i);return o(),a(),l}const r6=uu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function a6(e,t,n,i){return(e.children.some(function(l){return r6(l)})?n.containerPhrasing:n.containerFlow).call(n,e,i)}function s6(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}V1.peek=o6;function V1(e,t,n,i){const a=s6(n),o=n.enter("strong"),l=n.createTracker(i),u=l.move(a+a);let m=l.move(n.containerPhrasing(e,{after:a,before:u,...l.current()}));const d=m.charCodeAt(0),p=Wc(i.before.charCodeAt(i.before.length-1),d,a);p.inside&&(m=Ho(d)+m.slice(1));const y=m.charCodeAt(m.length-1),v=Wc(i.after.charCodeAt(0),y,a);v.inside&&(m=m.slice(0,-1)+Ho(y));const E=l.move(a+a);return o(),n.attentionEncodeSurroundingInfo={after:v.outside,before:p.outside},u+m+E}function o6(e,t,n){return n.options.strong||"*"}function l6(e,t,n,i){return n.safe(e.value,i)}function c6(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function u6(e,t,n){const i=(z1(n)+(n.options.ruleSpaces?" ":"")).repeat(c6(n));return n.options.ruleSpaces?i.slice(0,-1):i}const W1={blockquote:PO,break:Mw,code:HO,definition:FO,emphasis:L1,hardBreak:Mw,heading:WO,html:O1,image:q1,imageReference:B1,inlineCode:H1,link:F1,linkReference:G1,list:e6,listItem:n6,paragraph:i6,root:a6,strong:V1,text:l6,thematicBreak:u6};function d6(){return{enter:{table:h6,tableData:Pw,tableHeader:Pw,tableRow:f6},exit:{codeText:p6,table:m6,tableData:lm,tableHeader:lm,tableRow:lm}}}function h6(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function m6(e){this.exit(e),this.data.inTable=void 0}function f6(e){this.enter({type:"tableRow",children:[]},e)}function lm(e){this.exit(e)}function Pw(e){this.enter({type:"tableCell",children:[]},e)}function p6(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,g6));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function g6(e,t){return t==="|"?t:e}function y6(e){const t=e||{},n=t.tableCellPadding,i=t.tablePipeAlign,a=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:l,tableCell:m,tableRow:u}};function l(E,A,C,S){return d(p(E,C,S),E.align)}function u(E,A,C,S){const I=y(E,C,S),L=d([I]);return L.slice(0,L.indexOf(`
`))}function m(E,A,C,S){const I=C.enter("tableCell"),L=C.enter("phrasing"),P=C.containerPhrasing(E,{...S,before:o,after:o});return L(),I(),P}function d(E,A){return RO(E,{align:A,alignDelimiters:i,padding:n,stringLength:a})}function p(E,A,C){const S=E.children;let I=-1;const L=[],P=A.enter("table");for(;++I<S.length;)L[I]=y(S[I],A,C);return P(),L}function y(E,A,C){const S=E.children;let I=-1;const L=[],P=A.enter("tableRow");for(;++I<S.length;)L[I]=m(S[I],E,A,C);return P(),L}function v(E,A,C){let S=W1.inlineCode(E,A,C);return C.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function b6(){return{exit:{taskListCheckValueChecked:Dw,taskListCheckValueUnchecked:Dw,paragraph:w6}}}function v6(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:x6}}}function Dw(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function w6(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const a=t.children;let o=-1,l;for(;++o<a.length;){const u=a[o];if(u.type==="paragraph"){l=u;break}}l===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(e)}function x6(e,t,n,i){const a=e.children[0],o=typeof e.checked=="boolean"&&a&&a.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=n.createTracker(i);o&&u.move(l);let m=W1.listItem(e,t,n,{...i,...u.current()});return o&&(m=m.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),m;function d(p){return p+l}}function T6(){return[eO(),xO(),AO(),d6(),b6()]}function E6(e){return{extensions:[tO(),TO(e),CO(),y6(e),v6()]}}const _6={tokenize:N6,partial:!0},j1={tokenize:R6,partial:!0},Y1={tokenize:M6,partial:!0},$1={tokenize:P6,partial:!0},A6={tokenize:D6,partial:!0},K1={name:"wwwAutolink",tokenize:k6,previous:J1},Q1={name:"protocolAutolink",tokenize:I6,previous:X1},Hi={name:"emailAutolink",tokenize:S6,previous:Z1},fi={};function C6(){return{text:fi}}let Ur=48;for(;Ur<123;)fi[Ur]=Hi,Ur++,Ur===58?Ur=65:Ur===91&&(Ur=97);fi[43]=Hi;fi[45]=Hi;fi[46]=Hi;fi[95]=Hi;fi[72]=[Hi,Q1];fi[104]=[Hi,Q1];fi[87]=[Hi,K1];fi[119]=[Hi,K1];function S6(e,t,n){const i=this;let a,o;return l;function l(y){return!Wm(y)||!Z1.call(i,i.previous)||qf(i.events)?n(y):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(y))}function u(y){return Wm(y)?(e.consume(y),u):y===64?(e.consume(y),m):n(y)}function m(y){return y===46?e.check(A6,p,d)(y):y===45||y===95||Zt(y)?(o=!0,e.consume(y),m):p(y)}function d(y){return e.consume(y),a=!0,m}function p(y){return o&&a&&on(i.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(y)):n(y)}}function k6(e,t,n){const i=this;return a;function a(l){return l!==87&&l!==119||!J1.call(i,i.previous)||qf(i.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(_6,e.attempt(j1,e.attempt(Y1,o),n),n)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function I6(e,t,n){const i=this;let a="",o=!1;return l;function l(y){return(y===72||y===104)&&X1.call(i,i.previous)&&!qf(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(y),e.consume(y),u):n(y)}function u(y){if(on(y)&&a.length<5)return a+=String.fromCodePoint(y),e.consume(y),u;if(y===58){const v=a.toLowerCase();if(v==="http"||v==="https")return e.consume(y),m}return n(y)}function m(y){return y===47?(e.consume(y),o?d:(o=!0,m)):n(y)}function d(y){return y===null||zc(y)||mt(y)||Qr(y)||ou(y)?n(y):e.attempt(j1,e.attempt(Y1,p),n)(y)}function p(y){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(y)}}function N6(e,t,n){let i=0;return a;function a(l){return(l===87||l===119)&&i<3?(i++,e.consume(l),a):l===46&&i===3?(e.consume(l),o):n(l)}function o(l){return l===null?n(l):t(l)}}function R6(e,t,n){let i,a,o;return l;function l(d){return d===46||d===95?e.check($1,m,u)(d):d===null||mt(d)||Qr(d)||d!==45&&ou(d)?m(d):(o=!0,e.consume(d),l)}function u(d){return d===95?i=!0:(a=i,i=void 0),e.consume(d),l}function m(d){return a||i||!o?n(d):t(d)}}function M6(e,t){let n=0,i=0;return a;function a(l){return l===40?(n++,e.consume(l),a):l===41&&i<n?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check($1,t,o)(l):l===null||mt(l)||Qr(l)?t(l):(e.consume(l),a)}function o(l){return l===41&&i++,e.consume(l),a}}function P6(e,t,n){return i;function i(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),i):u===38?(e.consume(u),o):u===93?(e.consume(u),a):u===60||u===null||mt(u)||Qr(u)?t(u):n(u)}function a(u){return u===null||u===40||u===91||mt(u)||Qr(u)?t(u):i(u)}function o(u){return on(u)?l(u):n(u)}function l(u){return u===59?(e.consume(u),i):on(u)?(e.consume(u),l):n(u)}}function D6(e,t,n){return i;function i(o){return e.consume(o),a}function a(o){return Zt(o)?n(o):t(o)}}function J1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||mt(e)}function X1(e){return!on(e)}function Z1(e){return!(e===47||Wm(e))}function Wm(e){return e===43||e===45||e===46||e===95||Zt(e)}function qf(e){let t=e.length,n=!1;for(;t--;){const i=e[t][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const L6={tokenize:z6,partial:!0};function O6(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:U6,continuation:{tokenize:F6},exit:G6}},text:{91:{name:"gfmFootnoteCall",tokenize:H6},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:q6,resolveTo:B6}}}}function q6(e,t,n){const i=this;let a=i.events.length;const o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;a--;){const m=i.events[a][1];if(m.type==="labelImage"){l=m;break}if(m.type==="gfmFootnoteCall"||m.type==="labelLink"||m.type==="label"||m.type==="image"||m.type==="link")break}return u;function u(m){if(!l||!l._balanced)return n(m);const d=ii(i.sliceSerialize({start:l.end,end:i.now()}));return d.codePointAt(0)!==94||!o.includes(d.slice(1))?n(m):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),t(m))}}function B6(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[n+1],e[n+2],["enter",i,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(n,e.length-n+1,...u),e}function H6(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o=0,l;return u;function u(y){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(y),e.exit("gfmFootnoteCallLabelMarker"),m}function m(y){return y!==94?n(y):(e.enter("gfmFootnoteCallMarker"),e.consume(y),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(y){if(o>999||y===93&&!l||y===null||y===91||mt(y))return n(y);if(y===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return a.includes(ii(i.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(y),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(y)}return mt(y)||(l=!0),o++,e.consume(y),y===92?p:d}function p(y){return y===91||y===92||y===93?(e.consume(y),o++,d):d(y)}}function U6(e,t,n){const i=this,a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o,l=0,u;return m;function m(A){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(A){return A===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):n(A)}function p(A){if(l>999||A===93&&!u||A===null||A===91||mt(A))return n(A);if(A===93){e.exit("chunkString");const C=e.exit("gfmFootnoteDefinitionLabelString");return o=ii(i.sliceSerialize(C)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(A),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return mt(A)||(u=!0),l++,e.consume(A),A===92?y:p}function y(A){return A===91||A===92||A===93?(e.consume(A),l++,p):p(A)}function v(A){return A===58?(e.enter("definitionMarker"),e.consume(A),e.exit("definitionMarker"),a.includes(o)||a.push(o),Xe(e,E,"gfmFootnoteDefinitionWhitespace")):n(A)}function E(A){return t(A)}}function F6(e,t,n){return e.check(Ko,t,e.attempt(L6,t,n))}function G6(e){e.exit("gfmFootnoteDefinition")}function z6(e,t,n){const i=this;return Xe(e,a,"gfmFootnoteDefinitionIndent",5);function a(o){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):n(o)}}function V6(e){let n=(e||{}).singleTilde;const i={name:"strikethrough",tokenize:o,resolveAll:a};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function a(l,u){let m=-1;for(;++m<l.length;)if(l[m][0]==="enter"&&l[m][1].type==="strikethroughSequenceTemporary"&&l[m][1]._close){let d=m;for(;d--;)if(l[d][0]==="exit"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._open&&l[m][1].end.offset-l[m][1].start.offset===l[d][1].end.offset-l[d][1].start.offset){l[m][1].type="strikethroughSequence",l[d][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},l[d][1].start),end:Object.assign({},l[m][1].end)},y={type:"strikethroughText",start:Object.assign({},l[d][1].end),end:Object.assign({},l[m][1].start)},v=[["enter",p,u],["enter",l[d][1],u],["exit",l[d][1],u],["enter",y,u]],E=u.parser.constructs.insideSpan.null;E&&Mn(v,v.length,0,lu(E,l.slice(d+1,m),u)),Mn(v,v.length,0,[["exit",y,u],["enter",l[m][1],u],["exit",l[m][1],u],["exit",p,u]]),Mn(l,d-1,m-d+3,v),m=d+v.length-2;break}}for(m=-1;++m<l.length;)l[m][1].type==="strikethroughSequenceTemporary"&&(l[m][1].type="data");return l}function o(l,u,m){const d=this.previous,p=this.events;let y=0;return v;function v(A){return d===126&&p[p.length-1][1].type!=="characterEscape"?m(A):(l.enter("strikethroughSequenceTemporary"),E(A))}function E(A){const C=ss(d);if(A===126)return y>1?m(A):(l.consume(A),y++,E);if(y<2&&!n)return m(A);const S=l.exit("strikethroughSequenceTemporary"),I=ss(A);return S._open=!I||I===2&&!!C,S._close=!C||C===2&&!!I,u(A)}}}class W6{constructor(){this.map=[]}add(t,n,i){j6(this,t,n,i)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];i.push(t.slice()),t.length=0;let a=i.pop();for(;a;){for(const o of a)t.push(o);a=i.pop()}this.map.length=0}}function j6(e,t,n,i){let a=0;if(!(n===0&&i.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...i);return}a+=1}e.map.push([t,n,i])}}function Y6(e,t){let n=!1;const i=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&i.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=i.length-1;i[o]=i[o]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return i}function $6(){return{flow:{null:{name:"table",tokenize:K6,resolveAll:Q6}}}}function K6(e,t,n){const i=this;let a=0,o=0,l;return u;function u(F){let de=i.events.length-1;for(;de>-1;){const xe=i.events[de][1].type;if(xe==="lineEnding"||xe==="linePrefix")de--;else break}const me=de>-1?i.events[de][1].type:null,ke=me==="tableHead"||me==="tableRow"?q:m;return ke===q&&i.parser.lazy[i.now().line]?n(F):ke(F)}function m(F){return e.enter("tableHead"),e.enter("tableRow"),d(F)}function d(F){return F===124||(l=!0,o+=1),p(F)}function p(F){return F===null?n(F):Pe(F)?o>1?(o=0,i.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),E):n(F):$e(F)?Xe(e,p,"whitespace")(F):(o+=1,l&&(l=!1,a+=1),F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),l=!0,p):(e.enter("data"),y(F)))}function y(F){return F===null||F===124||mt(F)?(e.exit("data"),p(F)):(e.consume(F),F===92?v:y)}function v(F){return F===92||F===124?(e.consume(F),y):y(F)}function E(F){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(F):(e.enter("tableDelimiterRow"),l=!1,$e(F)?Xe(e,A,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):A(F))}function A(F){return F===45||F===58?S(F):F===124?(l=!0,e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),C):J(F)}function C(F){return $e(F)?Xe(e,S,"whitespace")(F):S(F)}function S(F){return F===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),I):F===45?(o+=1,I(F)):F===null||Pe(F)?G(F):J(F)}function I(F){return F===45?(e.enter("tableDelimiterFiller"),L(F)):J(F)}function L(F){return F===45?(e.consume(F),L):F===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),P):(e.exit("tableDelimiterFiller"),P(F))}function P(F){return $e(F)?Xe(e,G,"whitespace")(F):G(F)}function G(F){return F===124?A(F):F===null||Pe(F)?!l||a!==o?J(F):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(F)):J(F)}function J(F){return n(F)}function q(F){return e.enter("tableRow"),V(F)}function V(F){return F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),V):F===null||Pe(F)?(e.exit("tableRow"),t(F)):$e(F)?Xe(e,V,"whitespace")(F):(e.enter("data"),ve(F))}function ve(F){return F===null||F===124||mt(F)?(e.exit("data"),V(F)):(e.consume(F),F===92?ne:ve)}function ne(F){return F===92||F===124?(e.consume(F),ve):ve(F)}}function Q6(e,t){let n=-1,i=!0,a=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,m=0,d,p,y;const v=new W6;for(;++n<e.length;){const E=e[n],A=E[1];E[0]==="enter"?A.type==="tableHead"?(u=!1,m!==0&&(Lw(v,t,m,d,p),p=void 0,m=0),d={type:"table",start:Object.assign({},A.start),end:Object.assign({},A.end)},v.add(n,0,[["enter",d,t]])):A.type==="tableRow"||A.type==="tableDelimiterRow"?(i=!0,y=void 0,o=[0,0,0,0],l=[0,n+1,0,0],u&&(u=!1,p={type:"tableBody",start:Object.assign({},A.start),end:Object.assign({},A.end)},v.add(n,0,[["enter",p,t]])),a=A.type==="tableDelimiterRow"?2:p?3:1):a&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],y=_c(v,t,o,a,void 0,y),o=[0,0,0,0]),l[2]=n)):A.type==="tableCellDivider"&&(i?i=!1:(o[1]!==0&&(l[0]=l[1],y=_c(v,t,o,a,void 0,y)),o=l,l=[o[1],n,0,0])):A.type==="tableHead"?(u=!0,m=n):A.type==="tableRow"||A.type==="tableDelimiterRow"?(m=n,o[1]!==0?(l[0]=l[1],y=_c(v,t,o,a,n,y)):l[1]!==0&&(y=_c(v,t,l,a,n,y)),a=0):a&&(A.type==="data"||A.type==="tableDelimiterMarker"||A.type==="tableDelimiterFiller")&&(l[3]=n)}for(m!==0&&Lw(v,t,m,d,p),v.consume(t.events),n=-1;++n<t.events.length;){const E=t.events[n];E[0]==="enter"&&E[1].type==="table"&&(E[1]._align=Y6(t.events,n))}return e}function _c(e,t,n,i,a,o){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",u="tableContent";n[0]!==0&&(o.end=Object.assign({},$a(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const m=$a(t.events,n[1]);if(o={type:l,start:Object.assign({},m),end:Object.assign({},m)},e.add(n[1],0,[["enter",o,t]]),n[2]!==0){const d=$a(t.events,n[2]),p=$a(t.events,n[3]),y={type:u,start:Object.assign({},d),end:Object.assign({},p)};if(e.add(n[2],0,[["enter",y,t]]),i!==2){const v=t.events[n[2]],E=t.events[n[3]];if(v[1].end=Object.assign({},E[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const A=n[2]+1,C=n[3]-n[2]-1;e.add(A,C,[])}}e.add(n[3]+1,0,[["exit",y,t]])}return a!==void 0&&(o.end=Object.assign({},$a(t.events,a)),e.add(a,0,[["exit",o,t]]),o=void 0),o}function Lw(e,t,n,i,a){const o=[],l=$a(t.events,n);a&&(a.end=Object.assign({},l),o.push(["exit",a,t])),i.end=Object.assign({},l),o.push(["exit",i,t]),e.add(n+1,0,o)}function $a(e,t){const n=e[t],i=n[0]==="enter"?"start":"end";return n[1][i]}const J6={name:"tasklistCheck",tokenize:Z6};function X6(){return{text:{91:J6}}}function Z6(e,t,n){const i=this;return a;function a(m){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(m):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(m),e.exit("taskListCheckMarker"),o)}function o(m){return mt(m)?(e.enter("taskListCheckValueUnchecked"),e.consume(m),e.exit("taskListCheckValueUnchecked"),l):m===88||m===120?(e.enter("taskListCheckValueChecked"),e.consume(m),e.exit("taskListCheckValueChecked"),l):n(m)}function l(m){return m===93?(e.enter("taskListCheckMarker"),e.consume(m),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):n(m)}function u(m){return Pe(m)?t(m):$e(m)?e.check({tokenize:e5},t,n)(m):n(m)}}function e5(e,t,n){return Xe(e,i,"whitespace");function i(a){return a===null?n(a):t(a)}}function t5(e){return c1([C6(),O6(),V6(e),$6(),X6()])}const n5={};function i5(e){const t=this,n=e||n5,i=t.data(),a=i.micromarkExtensions||(i.micromarkExtensions=[]),o=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);a.push(t5(n)),o.push(T6()),l.push(E6(n))}const Ow=/[#.]/g;function r5(e,t){const n=e||"",i={};let a=0,o,l;for(;a<n.length;){Ow.lastIndex=a;const u=Ow.exec(n),m=n.slice(a,u?u.index:n.length);m&&(o?o==="#"?i.id=m:Array.isArray(i.className)?i.className.push(m):i.className=[m]:l=m,a+=m.length),u&&(o=u[0],a++)}return{type:"element",tagName:l||t||"div",properties:i,children:[]}}function eE(e,t,n){const i=n?l5(n):void 0;function a(o,l,...u){let m;if(o==null){m={type:"root",children:[]};const d=l;u.unshift(d)}else{m=r5(o,t);const d=m.tagName.toLowerCase(),p=i?i.get(d):void 0;if(m.tagName=p||d,a5(l))u.unshift(l);else for(const[y,v]of Object.entries(l))s5(e,m.properties,y,v)}for(const d of u)jm(m.children,d);return m.type==="element"&&m.tagName==="template"&&(m.content={type:"root",children:m.children},m.children=[]),m}return a}function a5(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,n=Object.keys(e);for(const i of n){const a=t[i];if(a&&typeof a=="object"){if(!Array.isArray(a))return!0;const o=a;for(const l of o)if(typeof l!="number"&&typeof l!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function s5(e,t,n,i){const a=au(e,n);let o;if(i!=null){if(typeof i=="number"){if(Number.isNaN(i))return;o=i}else typeof i=="boolean"?o=i:typeof i=="string"?a.spaceSeparated?o=Kv(i):a.commaSeparated?o=Vv(i):a.commaOrSpaceSeparated?o=Kv(Vv(i).join(" ")):o=qw(a,a.property,i):Array.isArray(i)?o=[...i]:o=a.property==="style"?o5(i):String(i);if(Array.isArray(o)){const l=[];for(const u of o)l.push(qw(a,a.property,u));o=l}a.property==="className"&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[a.property]=o}}function jm(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)jm(e,n);else if(typeof t=="object"&&"type"in t)t.type==="root"?jm(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function qw(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||qo(n)===qo(t)))return!0}return n}function o5(e){const t=[];for(const[n,i]of Object.entries(e))t.push([n,i].join(": "));return t.join("; ")}function l5(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}const c5=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],u5=eE($o,"div"),d5=eE(vr,"g",c5);function h5(e){const t=String(e),n=[];return{toOffset:a,toPoint:i};function i(o){if(typeof o=="number"&&o>-1&&o<=t.length){let l=0;for(;;){let u=n[l];if(u===void 0){const m=Bw(t,n[l-1]);u=m===-1?t.length+1:m+1,n[l]=u}if(u>o)return{line:l+1,column:o-(l>0?n[l-1]:0)+1,offset:o};l++}}}function a(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const u=n[n.length-1],m=Bw(t,u),d=m===-1?t.length+1:m+1;if(u===d)break;n.push(d)}const l=(o.line>1?n[o.line-2]:0)+o.column-1;if(l<n[o.line-1])return l}}}function Bw(e,t){const n=e.indexOf("\r",t),i=e.indexOf(`
`,t);return i===-1?n:n===-1||n+1===i?i:n<i?n:i}const Yr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tE={}.hasOwnProperty,m5=Object.prototype;function f5(e,t){const n=t||{};return Bf({file:n.file||void 0,location:!1,schema:n.space==="svg"?vr:$o,verbose:n.verbose||!1},e)}function Bf(e,t){let n;switch(t.nodeName){case"#comment":{const i=t;return n={type:"comment",value:i.data},Lc(e,i,n),n}case"#document":case"#document-fragment":{const i=t,a="mode"in i?i.mode==="quirks"||i.mode==="limited-quirks":!1;if(n={type:"root",children:nE(e,t.childNodes),data:{quirksMode:a}},e.file&&e.location){const o=String(e.file),l=h5(o),u=l.toPoint(0),m=l.toPoint(o.length);n.position={start:u,end:m}}return n}case"#documentType":{const i=t;return n={type:"doctype"},Lc(e,i,n),n}case"#text":{const i=t;return n={type:"text",value:i.value},Lc(e,i,n),n}default:return n=p5(e,t),n}}function nE(e,t){let n=-1;const i=[];for(;++n<t.length;){const a=Bf(e,t[n]);i.push(a)}return i}function p5(e,t){const n=e.schema;e.schema=t.namespaceURI===Yr.svg?vr:$o;let i=-1;const a={};for(;++i<t.attrs.length;){const u=t.attrs[i],m=(u.prefix?u.prefix+":":"")+u.name;tE.call(m5,m)||(a[m]=u.value)}const l=(e.schema.space==="svg"?d5:u5)(t.tagName,a,nE(e,t.childNodes));if(Lc(e,t,l),l.tagName==="template"){const u=t,m=u.sourceCodeLocation,d=m&&m.startTag&&es(m.startTag),p=m&&m.endTag&&es(m.endTag),y=Bf(e,u.content);d&&p&&e.file&&(y.position={start:d.end,end:p.start}),l.content=y}return e.schema=n,l}function Lc(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const i=g5(e,n,t.sourceCodeLocation);i&&(e.location=!0,n.position=i)}}function g5(e,t,n){const i=es(n);if(t.type==="element"){const a=t.children[t.children.length-1];if(i&&!n.endTag&&a&&a.position&&a.position.end&&(i.end=Object.assign({},a.position.end)),e.verbose){const o={};let l;if(n.attrs)for(l in n.attrs)tE.call(n.attrs,l)&&(o[au(e.schema,l).property]=es(n.attrs[l]));n.startTag;const u=es(n.startTag),m=n.endTag?es(n.endTag):void 0,d={opening:u};m&&(d.closing=m),d.properties=o,t.data={position:d}}}return i}function es(e){const t=Hw({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Hw({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Hw(e){return e.line&&e.column?e:void 0}const y5={},b5={}.hasOwnProperty,iE=D1("type",{handlers:{root:w5,element:A5,text:E5,comment:_5,doctype:T5}});function v5(e,t){const i=(t||y5).space;return iE(e,i==="svg"?vr:$o)}function w5(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Hf(e.children,n,t),fs(e,n),n}function x5(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Hf(e.children,n,t),fs(e,n),n}function T5(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return fs(e,t),t}function E5(e){const t={nodeName:"#text",value:e.value,parentNode:null};return fs(e,t),t}function _5(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return fs(e,t),t}function A5(e,t){const n=t;let i=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=vr);const a=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&b5.call(e.properties,o)){const m=C5(i,o,e.properties[o]);m&&a.push(m)}}const l=i.space,u={nodeName:e.tagName,tagName:e.tagName,attrs:a,namespaceURI:Yr[l],childNodes:[],parentNode:null};return u.childNodes=Hf(e.children,u,i),fs(e,u),e.tagName==="template"&&e.content&&(u.content=x5(e.content,i)),u}function C5(e,t,n){const i=au(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&i.boolean)return;Array.isArray(n)&&(n=i.commaSeparated?$T(n):n1(n));const a={name:i.attribute,value:n===!0?"":String(n)};if(i.space&&i.space!=="html"&&i.space!=="svg"){const o=a.name.indexOf(":");o<0?a.prefix="":(a.name=a.name.slice(o+1),a.prefix=i.attribute.slice(0,o)),a.namespace=Yr[i.space]}return a}function Hf(e,t,n){let i=-1;const a=[];if(e)for(;++i<e.length;){const o=iE(e[i],n);o.parentNode=t,a.push(o)}return a}function fs(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const S5=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],k5=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vt="";var M;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(M||(M={}));const bn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function rE(e){return e>=55296&&e<=57343}function I5(e){return e>=56320&&e<=57343}function N5(e,t){return(e-55296)*1024+9216+t}function aE(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function sE(e){return e>=64976&&e<=65007||k5.has(e)}var ee;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ee||(ee={}));const R5=65536;class M5{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=R5,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:i,col:a,offset:o}=this,l=a+n,u=o+n;return{code:t,startLine:i,endLine:i,startCol:l,endCol:l,startOffset:u,endOffset:u}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(I5(n))return this.pos++,this._addGap(),N5(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,M.EOF;return this._err(ee.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let i=0;i<t.length;i++)if((this.html.charCodeAt(this.pos+i)|32)!==t.charCodeAt(i))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,M.EOF;const i=this.html.charCodeAt(n);return i===M.CARRIAGE_RETURN?M.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,M.EOF;let t=this.html.charCodeAt(this.pos);return t===M.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,M.LINE_FEED):t===M.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,rE(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===M.LINE_FEED||t===M.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){aE(t)?this._err(ee.controlCharacterInInputStream):sE(t)&&this._err(ee.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ve;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Ve||(Ve={}));function oE(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const P5=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),D5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function L5(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=D5.get(e))!==null&&t!==void 0?t:e}var Ut;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ut||(Ut={}));const O5=32;var yr;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(yr||(yr={}));function Ym(e){return e>=Ut.ZERO&&e<=Ut.NINE}function q5(e){return e>=Ut.UPPER_A&&e<=Ut.UPPER_F||e>=Ut.LOWER_A&&e<=Ut.LOWER_F}function B5(e){return e>=Ut.UPPER_A&&e<=Ut.UPPER_Z||e>=Ut.LOWER_A&&e<=Ut.LOWER_Z||Ym(e)}function H5(e){return e===Ut.EQUALS||B5(e)}var Ht;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ht||(Ht={}));var Li;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Li||(Li={}));class U5{constructor(t,n,i){this.decodeTree=t,this.emitCodePoint=n,this.errors=i,this.state=Ht.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Li.Strict}startEntity(t){this.decodeMode=t,this.state=Ht.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ht.EntityStart:return t.charCodeAt(n)===Ut.NUM?(this.state=Ht.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ht.NamedEntity,this.stateNamedEntity(t,n));case Ht.NumericStart:return this.stateNumericStart(t,n);case Ht.NumericDecimal:return this.stateNumericDecimal(t,n);case Ht.NumericHex:return this.stateNumericHex(t,n);case Ht.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|O5)===Ut.LOWER_X?(this.state=Ht.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ht.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,i,a){if(n!==i){const o=i-n;this.result=this.result*Math.pow(a,o)+Number.parseInt(t.substr(n,o),a),this.consumed+=o}}stateNumericHex(t,n){const i=n;for(;n<t.length;){const a=t.charCodeAt(n);if(Ym(a)||q5(a))n+=1;else return this.addToNumericResult(t,i,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,i,n,16),-1}stateNumericDecimal(t,n){const i=n;for(;n<t.length;){const a=t.charCodeAt(n);if(Ym(a))n+=1;else return this.addToNumericResult(t,i,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,i,n,10),-1}emitNumericEntity(t,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ut.SEMI)this.consumed+=1;else if(this.decodeMode===Li.Strict)return 0;return this.emitCodePoint(L5(this.result),this.consumed),this.errors&&(t!==Ut.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:i}=this;let a=i[this.treeIndex],o=(a&yr.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const l=t.charCodeAt(n);if(this.treeIndex=F5(i,a,this.treeIndex+Math.max(1,o),l),this.treeIndex<0)return this.result===0||this.decodeMode===Li.Attribute&&(o===0||H5(l))?0:this.emitNotTerminatedNamedEntity();if(a=i[this.treeIndex],o=(a&yr.VALUE_LENGTH)>>14,o!==0){if(l===Ut.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Li.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:i}=this,a=(i[n]&yr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,i){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~yr.VALUE_LENGTH:a[t+1],i),n===3&&this.emitCodePoint(a[t+2],i),i}end(){var t;switch(this.state){case Ht.NamedEntity:return this.result!==0&&(this.decodeMode!==Li.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ht.NumericDecimal:return this.emitNumericEntity(0,2);case Ht.NumericHex:return this.emitNumericEntity(0,3);case Ht.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ht.EntityStart:return 0}}}function F5(e,t,n,i){const a=(t&yr.BRANCH_LENGTH)>>7,o=t&yr.JUMP_TABLE;if(a===0)return o!==0&&i===o?n:-1;if(o){const m=i-o;return m<0||m>=a?-1:e[n+m]-1}let l=n,u=l+a-1;for(;l<=u;){const m=l+u>>>1,d=e[m];if(d<i)l=m+1;else if(d>i)u=m-1;else return e[m+a]}return-1}var he;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(he||(he={}));var Kr;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Kr||(Kr={}));var Wn;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Wn||(Wn={}));var Y;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Y||(Y={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(T||(T={}));const G5=new Map([[Y.A,T.A],[Y.ADDRESS,T.ADDRESS],[Y.ANNOTATION_XML,T.ANNOTATION_XML],[Y.APPLET,T.APPLET],[Y.AREA,T.AREA],[Y.ARTICLE,T.ARTICLE],[Y.ASIDE,T.ASIDE],[Y.B,T.B],[Y.BASE,T.BASE],[Y.BASEFONT,T.BASEFONT],[Y.BGSOUND,T.BGSOUND],[Y.BIG,T.BIG],[Y.BLOCKQUOTE,T.BLOCKQUOTE],[Y.BODY,T.BODY],[Y.BR,T.BR],[Y.BUTTON,T.BUTTON],[Y.CAPTION,T.CAPTION],[Y.CENTER,T.CENTER],[Y.CODE,T.CODE],[Y.COL,T.COL],[Y.COLGROUP,T.COLGROUP],[Y.DD,T.DD],[Y.DESC,T.DESC],[Y.DETAILS,T.DETAILS],[Y.DIALOG,T.DIALOG],[Y.DIR,T.DIR],[Y.DIV,T.DIV],[Y.DL,T.DL],[Y.DT,T.DT],[Y.EM,T.EM],[Y.EMBED,T.EMBED],[Y.FIELDSET,T.FIELDSET],[Y.FIGCAPTION,T.FIGCAPTION],[Y.FIGURE,T.FIGURE],[Y.FONT,T.FONT],[Y.FOOTER,T.FOOTER],[Y.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[Y.FORM,T.FORM],[Y.FRAME,T.FRAME],[Y.FRAMESET,T.FRAMESET],[Y.H1,T.H1],[Y.H2,T.H2],[Y.H3,T.H3],[Y.H4,T.H4],[Y.H5,T.H5],[Y.H6,T.H6],[Y.HEAD,T.HEAD],[Y.HEADER,T.HEADER],[Y.HGROUP,T.HGROUP],[Y.HR,T.HR],[Y.HTML,T.HTML],[Y.I,T.I],[Y.IMG,T.IMG],[Y.IMAGE,T.IMAGE],[Y.INPUT,T.INPUT],[Y.IFRAME,T.IFRAME],[Y.KEYGEN,T.KEYGEN],[Y.LABEL,T.LABEL],[Y.LI,T.LI],[Y.LINK,T.LINK],[Y.LISTING,T.LISTING],[Y.MAIN,T.MAIN],[Y.MALIGNMARK,T.MALIGNMARK],[Y.MARQUEE,T.MARQUEE],[Y.MATH,T.MATH],[Y.MENU,T.MENU],[Y.META,T.META],[Y.MGLYPH,T.MGLYPH],[Y.MI,T.MI],[Y.MO,T.MO],[Y.MN,T.MN],[Y.MS,T.MS],[Y.MTEXT,T.MTEXT],[Y.NAV,T.NAV],[Y.NOBR,T.NOBR],[Y.NOFRAMES,T.NOFRAMES],[Y.NOEMBED,T.NOEMBED],[Y.NOSCRIPT,T.NOSCRIPT],[Y.OBJECT,T.OBJECT],[Y.OL,T.OL],[Y.OPTGROUP,T.OPTGROUP],[Y.OPTION,T.OPTION],[Y.P,T.P],[Y.PARAM,T.PARAM],[Y.PLAINTEXT,T.PLAINTEXT],[Y.PRE,T.PRE],[Y.RB,T.RB],[Y.RP,T.RP],[Y.RT,T.RT],[Y.RTC,T.RTC],[Y.RUBY,T.RUBY],[Y.S,T.S],[Y.SCRIPT,T.SCRIPT],[Y.SEARCH,T.SEARCH],[Y.SECTION,T.SECTION],[Y.SELECT,T.SELECT],[Y.SOURCE,T.SOURCE],[Y.SMALL,T.SMALL],[Y.SPAN,T.SPAN],[Y.STRIKE,T.STRIKE],[Y.STRONG,T.STRONG],[Y.STYLE,T.STYLE],[Y.SUB,T.SUB],[Y.SUMMARY,T.SUMMARY],[Y.SUP,T.SUP],[Y.TABLE,T.TABLE],[Y.TBODY,T.TBODY],[Y.TEMPLATE,T.TEMPLATE],[Y.TEXTAREA,T.TEXTAREA],[Y.TFOOT,T.TFOOT],[Y.TD,T.TD],[Y.TH,T.TH],[Y.THEAD,T.THEAD],[Y.TITLE,T.TITLE],[Y.TR,T.TR],[Y.TRACK,T.TRACK],[Y.TT,T.TT],[Y.U,T.U],[Y.UL,T.UL],[Y.SVG,T.SVG],[Y.VAR,T.VAR],[Y.WBR,T.WBR],[Y.XMP,T.XMP]]);function ps(e){var t;return(t=G5.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const ye=T,z5={[he.HTML]:new Set([ye.ADDRESS,ye.APPLET,ye.AREA,ye.ARTICLE,ye.ASIDE,ye.BASE,ye.BASEFONT,ye.BGSOUND,ye.BLOCKQUOTE,ye.BODY,ye.BR,ye.BUTTON,ye.CAPTION,ye.CENTER,ye.COL,ye.COLGROUP,ye.DD,ye.DETAILS,ye.DIR,ye.DIV,ye.DL,ye.DT,ye.EMBED,ye.FIELDSET,ye.FIGCAPTION,ye.FIGURE,ye.FOOTER,ye.FORM,ye.FRAME,ye.FRAMESET,ye.H1,ye.H2,ye.H3,ye.H4,ye.H5,ye.H6,ye.HEAD,ye.HEADER,ye.HGROUP,ye.HR,ye.HTML,ye.IFRAME,ye.IMG,ye.INPUT,ye.LI,ye.LINK,ye.LISTING,ye.MAIN,ye.MARQUEE,ye.MENU,ye.META,ye.NAV,ye.NOEMBED,ye.NOFRAMES,ye.NOSCRIPT,ye.OBJECT,ye.OL,ye.P,ye.PARAM,ye.PLAINTEXT,ye.PRE,ye.SCRIPT,ye.SECTION,ye.SELECT,ye.SOURCE,ye.STYLE,ye.SUMMARY,ye.TABLE,ye.TBODY,ye.TD,ye.TEMPLATE,ye.TEXTAREA,ye.TFOOT,ye.TH,ye.THEAD,ye.TITLE,ye.TR,ye.TRACK,ye.UL,ye.WBR,ye.XMP]),[he.MATHML]:new Set([ye.MI,ye.MO,ye.MN,ye.MS,ye.MTEXT,ye.ANNOTATION_XML]),[he.SVG]:new Set([ye.TITLE,ye.FOREIGN_OBJECT,ye.DESC]),[he.XLINK]:new Set,[he.XML]:new Set,[he.XMLNS]:new Set},$m=new Set([ye.H1,ye.H2,ye.H3,ye.H4,ye.H5,ye.H6]);Y.STYLE,Y.SCRIPT,Y.XMP,Y.IFRAME,Y.NOEMBED,Y.NOFRAMES,Y.PLAINTEXT;var O;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(O||(O={}));const St={DATA:O.DATA,RCDATA:O.RCDATA,RAWTEXT:O.RAWTEXT,SCRIPT_DATA:O.SCRIPT_DATA,PLAINTEXT:O.PLAINTEXT,CDATA_SECTION:O.CDATA_SECTION};function V5(e){return e>=M.DIGIT_0&&e<=M.DIGIT_9}function _o(e){return e>=M.LATIN_CAPITAL_A&&e<=M.LATIN_CAPITAL_Z}function W5(e){return e>=M.LATIN_SMALL_A&&e<=M.LATIN_SMALL_Z}function mr(e){return W5(e)||_o(e)}function Uw(e){return mr(e)||V5(e)}function Ac(e){return e+32}function lE(e){return e===M.SPACE||e===M.LINE_FEED||e===M.TABULATION||e===M.FORM_FEED}function Fw(e){return lE(e)||e===M.SOLIDUS||e===M.GREATER_THAN_SIGN}function j5(e){return e===M.NULL?ee.nullCharacterReference:e>1114111?ee.characterReferenceOutsideUnicodeRange:rE(e)?ee.surrogateCharacterReference:sE(e)?ee.noncharacterCharacterReference:aE(e)||e===M.CARRIAGE_RETURN?ee.controlCharacterReference:null}class Y5{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=O.DATA,this.returnState=O.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new M5(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new U5(P5,(i,a)=>{this.preprocessor.pos=this.entityStartPos+a-1,this._flushCodePointConsumedAsCharacterReference(i)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:i=>{this._err(ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+i)},validateNumericCharacterReference:i=>{const a=j5(i);a&&this._err(a,1)}}:void 0)}_err(t,n=0){var i,a;(a=(i=this.handler).onParseError)===null||a===void 0||a.call(i,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,i){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||i==null||i()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ve.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ve.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Ve.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Ve.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const i=this.currentToken;if(oE(i,this.currentAttr.name)===null){if(i.attrs.push(this.currentAttr),i.location&&this.currentLocation){const a=(t=(n=i.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=ps(t.tagName),t.type===Ve.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ee.endTagWithAttributes),t.selfClosing&&this._err(ee.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Ve.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ve.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ve.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Ve.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=lE(t)?Ve.WHITESPACE_CHARACTER:t===M.NULL?Ve.NULL_CHARACTER:Ve.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Ve.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=O.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Li.Attribute:Li.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===O.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===O.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===O.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case O.DATA:{this._stateData(t);break}case O.RCDATA:{this._stateRcdata(t);break}case O.RAWTEXT:{this._stateRawtext(t);break}case O.SCRIPT_DATA:{this._stateScriptData(t);break}case O.PLAINTEXT:{this._statePlaintext(t);break}case O.TAG_OPEN:{this._stateTagOpen(t);break}case O.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case O.TAG_NAME:{this._stateTagName(t);break}case O.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case O.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case O.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case O.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case O.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case O.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case O.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case O.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case O.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case O.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case O.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case O.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case O.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case O.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case O.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case O.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case O.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case O.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case O.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case O.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case O.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case O.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case O.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case O.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case O.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case O.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case O.BOGUS_COMMENT:{this._stateBogusComment(t);break}case O.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case O.COMMENT_START:{this._stateCommentStart(t);break}case O.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case O.COMMENT:{this._stateComment(t);break}case O.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case O.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case O.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case O.COMMENT_END:{this._stateCommentEnd(t);break}case O.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case O.DOCTYPE:{this._stateDoctype(t);break}case O.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case O.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case O.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case O.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case O.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case O.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case O.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case O.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case O.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case O.CDATA_SECTION:{this._stateCdataSection(t);break}case O.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case O.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case O.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case O.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case M.LESS_THAN_SIGN:{this.state=O.TAG_OPEN;break}case M.AMPERSAND:{this._startCharacterReference();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitCodePoint(t);break}case M.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case M.AMPERSAND:{this._startCharacterReference();break}case M.LESS_THAN_SIGN:{this.state=O.RCDATA_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case M.LESS_THAN_SIGN:{this.state=O.RAWTEXT_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(mr(t))this._createStartTagToken(),this.state=O.TAG_NAME,this._stateTagName(t);else switch(t){case M.EXCLAMATION_MARK:{this.state=O.MARKUP_DECLARATION_OPEN;break}case M.SOLIDUS:{this.state=O.END_TAG_OPEN;break}case M.QUESTION_MARK:{this._err(ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t);break}case M.EOF:{this._err(ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=O.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(mr(t))this._createEndTagToken(),this.state=O.TAG_NAME,this._stateTagName(t);else switch(t){case M.GREATER_THAN_SIGN:{this._err(ee.missingEndTagName),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.BEFORE_ATTRIBUTE_NAME;break}case M.SOLIDUS:{this.state=O.SELF_CLOSING_START_TAG;break}case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentTagToken();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.tagName+=vt;break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(_o(t)?Ac(t):t)}}_stateRcdataLessThanSign(t){t===M.SOLIDUS?this.state=O.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=O.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){mr(t)?(this.state=O.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=O.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=O.BEFORE_ATTRIBUTE_NAME,!1;case M.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=O.SELF_CLOSING_START_TAG,!1;case M.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=O.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===M.SOLIDUS?this.state=O.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){mr(t)?(this.state=O.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case M.SOLIDUS:{this.state=O.SCRIPT_DATA_END_TAG_OPEN;break}case M.EXCLAMATION_MARK:{this.state=O.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=O.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){mr(t)?(this.state=O.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===M.HYPHEN_MINUS?(this.state=O.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===M.HYPHEN_MINUS?(this.state=O.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=O.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case M.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case M.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_ESCAPED,this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case M.HYPHEN_MINUS:{this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case M.GREATER_THAN_SIGN:{this.state=O.SCRIPT_DATA,this._emitChars(">");break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_ESCAPED,this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===M.SOLIDUS?this.state=O.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:mr(t)?(this._emitChars("<"),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){mr(t)?(this.state=O.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(bn.SCRIPT,!1)&&Fw(this.preprocessor.peek(bn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<bn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=O.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case M.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case M.HYPHEN_MINUS:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case M.HYPHEN_MINUS:{this._emitChars("-");break}case M.LESS_THAN_SIGN:{this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case M.GREATER_THAN_SIGN:{this.state=O.SCRIPT_DATA,this._emitChars(">");break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vt);break}case M.EOF:{this._err(ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===M.SOLIDUS?(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(bn.SCRIPT,!1)&&Fw(this.preprocessor.peek(bn.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<bn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=O.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=O.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.SOLIDUS:case M.GREATER_THAN_SIGN:case M.EOF:{this.state=O.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case M.EQUALS_SIGN:{this._err(ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=O.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=O.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:case M.SOLIDUS:case M.GREATER_THAN_SIGN:case M.EOF:{this._leaveAttrName(),this.state=O.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case M.EQUALS_SIGN:{this._leaveAttrName(),this.state=O.BEFORE_ATTRIBUTE_VALUE;break}case M.QUOTATION_MARK:case M.APOSTROPHE:case M.LESS_THAN_SIGN:{this._err(ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.currentAttr.name+=vt;break}default:this.currentAttr.name+=String.fromCodePoint(_o(t)?Ac(t):t)}}_stateAfterAttributeName(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.SOLIDUS:{this.state=O.SELF_CLOSING_START_TAG;break}case M.EQUALS_SIGN:{this.state=O.BEFORE_ATTRIBUTE_VALUE;break}case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentTagToken();break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=O.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.QUOTATION_MARK:{this.state=O.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case M.APOSTROPHE:{this.state=O.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingAttributeValue),this.state=O.DATA,this.emitCurrentTagToken();break}default:this.state=O.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case M.QUOTATION_MARK:{this.state=O.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case M.AMPERSAND:{this._startCharacterReference();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.currentAttr.value+=vt;break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case M.APOSTROPHE:{this.state=O.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case M.AMPERSAND:{this._startCharacterReference();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.currentAttr.value+=vt;break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this._leaveAttrValue(),this.state=O.BEFORE_ATTRIBUTE_NAME;break}case M.AMPERSAND:{this._startCharacterReference();break}case M.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=O.DATA,this.emitCurrentTagToken();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),this.currentAttr.value+=vt;break}case M.QUOTATION_MARK:case M.APOSTROPHE:case M.LESS_THAN_SIGN:case M.EQUALS_SIGN:case M.GRAVE_ACCENT:{this._err(ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this._leaveAttrValue(),this.state=O.BEFORE_ATTRIBUTE_NAME;break}case M.SOLIDUS:{this._leaveAttrValue(),this.state=O.SELF_CLOSING_START_TAG;break}case M.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=O.DATA,this.emitCurrentTagToken();break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this._err(ee.missingWhitespaceBetweenAttributes),this.state=O.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case M.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=O.DATA,this.emitCurrentTagToken();break}case M.EOF:{this._err(ee.eofInTag),this._emitEOFToken();break}default:this._err(ee.unexpectedSolidusInTag),this.state=O.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentComment(n);break}case M.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.data+=vt;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(bn.DASH_DASH,!0)?(this._createCommentToken(bn.DASH_DASH.length+1),this.state=O.COMMENT_START):this._consumeSequenceIfMatch(bn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(bn.DOCTYPE.length+1),this.state=O.DOCTYPE):this._consumeSequenceIfMatch(bn.CDATA_START,!0)?this.inForeignNode?this.state=O.CDATA_SECTION:(this._err(ee.cdataInHtmlContent),this._createCommentToken(bn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=O.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=O.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case M.HYPHEN_MINUS:{this.state=O.COMMENT_START_DASH;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptClosingOfEmptyComment),this.state=O.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=O.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case M.HYPHEN_MINUS:{this.state=O.COMMENT_END;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptClosingOfEmptyComment),this.state=O.DATA,this.emitCurrentComment(n);break}case M.EOF:{this._err(ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=O.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case M.HYPHEN_MINUS:{this.state=O.COMMENT_END_DASH;break}case M.LESS_THAN_SIGN:{n.data+="<",this.state=O.COMMENT_LESS_THAN_SIGN;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.data+=vt;break}case M.EOF:{this._err(ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case M.EXCLAMATION_MARK:{n.data+="!",this.state=O.COMMENT_LESS_THAN_SIGN_BANG;break}case M.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=O.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===M.HYPHEN_MINUS?this.state=O.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=O.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===M.HYPHEN_MINUS?this.state=O.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=O.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==M.GREATER_THAN_SIGN&&t!==M.EOF&&this._err(ee.nestedComment),this.state=O.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case M.HYPHEN_MINUS:{this.state=O.COMMENT_END;break}case M.EOF:{this._err(ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=O.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentComment(n);break}case M.EXCLAMATION_MARK:{this.state=O.COMMENT_END_BANG;break}case M.HYPHEN_MINUS:{n.data+="-";break}case M.EOF:{this._err(ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=O.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case M.HYPHEN_MINUS:{n.data+="--!",this.state=O.COMMENT_END_DASH;break}case M.GREATER_THAN_SIGN:{this._err(ee.incorrectlyClosedComment),this.state=O.DATA,this.emitCurrentComment(n);break}case M.EOF:{this._err(ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=O.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_NAME;break}case M.GREATER_THAN_SIGN:{this.state=O.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case M.EOF:{this._err(ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingWhitespaceBeforeDoctypeName),this.state=O.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(_o(t))this._createDoctypeToken(String.fromCharCode(Ac(t))),this.state=O.DOCTYPE_NAME;else switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.NULL:{this._err(ee.unexpectedNullCharacter),this._createDoctypeToken(vt),this.state=O.DOCTYPE_NAME;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=O.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.AFTER_DOCTYPE_NAME;break}case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.name+=vt;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(_o(t)?Ac(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(bn.PUBLIC,!1)?this.state=O.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(bn.SYSTEM,!1)?this.state=O.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ee.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case M.QUOTATION_MARK:{this._err(ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{this._err(ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.QUOTATION_MARK:{n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{n.publicId="",this.state=O.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case M.QUOTATION_MARK:{this.state=O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.publicId+=vt;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case M.APOSTROPHE:{this.state=O.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.publicId+=vt;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case M.GREATER_THAN_SIGN:{this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.QUOTATION_MARK:{this._err(ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{this._err(ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.QUOTATION_MARK:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:{this.state=O.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case M.QUOTATION_MARK:{this._err(ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{this._err(ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.QUOTATION_MARK:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case M.APOSTROPHE:{n.systemId="",this.state=O.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case M.GREATER_THAN_SIGN:{this._err(ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.DATA,this.emitCurrentDoctype(n);break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case M.QUOTATION_MARK:{this.state=O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.systemId+=vt;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case M.APOSTROPHE:{this.state=O.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case M.NULL:{this._err(ee.unexpectedNullCharacter),n.systemId+=vt;break}case M.GREATER_THAN_SIGN:{this._err(ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case M.SPACE:case M.LINE_FEED:case M.TABULATION:case M.FORM_FEED:break;case M.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.EOF:{this._err(ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=O.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case M.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=O.DATA;break}case M.NULL:{this._err(ee.unexpectedNullCharacter);break}case M.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case M.RIGHT_SQUARE_BRACKET:{this.state=O.CDATA_SECTION_BRACKET;break}case M.EOF:{this._err(ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===M.RIGHT_SQUARE_BRACKET?this.state=O.CDATA_SECTION_END:(this._emitChars("]"),this.state=O.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case M.GREATER_THAN_SIGN:{this.state=O.DATA;break}case M.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=O.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(M.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Uw(this.preprocessor.peek(1))?O.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){Uw(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===M.SEMICOLON&&this._err(ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const cE=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),Gw=new Set([...cE,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),jc=new Set([T.APPLET,T.CAPTION,T.HTML,T.MARQUEE,T.OBJECT,T.TABLE,T.TD,T.TEMPLATE,T.TH]),$5=new Set([...jc,T.OL,T.UL]),K5=new Set([...jc,T.BUTTON]),zw=new Set([T.ANNOTATION_XML,T.MI,T.MN,T.MO,T.MS,T.MTEXT]),Vw=new Set([T.DESC,T.FOREIGN_OBJECT,T.TITLE]),Q5=new Set([T.TR,T.TEMPLATE,T.HTML]),J5=new Set([T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML]),X5=new Set([T.TABLE,T.TEMPLATE,T.HTML]),Z5=new Set([T.TD,T.TH]);class eq{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===he.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const i=this._indexOf(t);this.items[i]=n,i===this.stackTop&&(this.current=n)}insertAfter(t,n,i){const a=this._indexOf(t)+1;this.items.splice(a,0,n),this.tagIDs.splice(a,0,i),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==he.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(i,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped($m,he.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Z5,he.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let i=this.stackTop;i>=0;i--)if(t.has(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===n)return i;return-1}clearBackTo(t,n){const i=this._indexOfTagNames(t,n);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(X5,he.HTML)}clearBackToTableBodyContext(){this.clearBackTo(J5,he.HTML)}clearBackToTableRowContext(){this.clearBackTo(Q5,he.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInDynamicScope(t,n){for(let i=this.stackTop;i>=0;i--){const a=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case he.HTML:{if(a===t)return!0;if(n.has(a))return!1;break}case he.SVG:{if(Vw.has(a))return!1;break}case he.MATHML:{if(zw.has(a))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,jc)}hasInListItemScope(t){return this.hasInDynamicScope(t,$5)}hasInButtonScope(t){return this.hasInDynamicScope(t,K5)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case he.HTML:{if($m.has(n))return!0;if(jc.has(n))return!1;break}case he.SVG:{if(Vw.has(n))return!1;break}case he.MATHML:{if(zw.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===he.HTML)switch(this.tagIDs[n]){case t:return!0;case T.TABLE:case T.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===he.HTML)switch(this.tagIDs[t]){case T.TBODY:case T.THEAD:case T.TFOOT:return!0;case T.TABLE:case T.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===he.HTML)switch(this.tagIDs[n]){case t:return!0;case T.OPTION:case T.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&cE.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Gw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&Gw.has(this.currentTagId);)this.pop()}}const cm=3;var hi;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(hi||(hi={}));const Ww={type:hi.Marker};class tq{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const i=[],a=n.length,o=this.treeAdapter.getTagName(t),l=this.treeAdapter.getNamespaceURI(t);for(let u=0;u<this.entries.length;u++){const m=this.entries[u];if(m.type===hi.Marker)break;const{element:d}=m;if(this.treeAdapter.getTagName(d)===o&&this.treeAdapter.getNamespaceURI(d)===l){const p=this.treeAdapter.getAttrList(d);p.length===a&&i.push({idx:u,attrs:p})}}return i}_ensureNoahArkCondition(t){if(this.entries.length<cm)return;const n=this.treeAdapter.getAttrList(t),i=this._getNoahArkConditionCandidates(t,n);if(i.length<cm)return;const a=new Map(n.map(l=>[l.name,l.value]));let o=0;for(let l=0;l<i.length;l++){const u=i[l];u.attrs.every(m=>a.get(m.name)===m.value)&&(o+=1,o>=cm&&this.entries.splice(u.idx,1))}}insertMarker(){this.entries.unshift(Ww)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:hi.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:hi.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Ww);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(i=>i.type===hi.Marker||this.treeAdapter.getTagName(i.element)===t);return n&&n.type===hi.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===hi.Element&&n.element===t)}}const fr={createDocument(){return{nodeName:"#document",mode:Wn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,i){const a=e.childNodes.find(o=>o.nodeName==="#documentType");if(a)a.name=t,a.publicId=n,a.systemId=i;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:i,parentNode:null};fr.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(fr.isTextNode(n)){n.value+=t;return}}fr.appendChild(e,fr.createTextNode(t))},insertTextBefore(e,t,n){const i=e.childNodes[e.childNodes.indexOf(n)-1];i&&fr.isTextNode(i)?i.value+=t:fr.insertBefore(e,fr.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(i=>i.name));for(let i=0;i<t.length;i++)n.has(t[i].name)||e.attrs.push(t[i])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},uE="html",nq="about:legacy-compat",iq="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",dE=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rq=[...dE,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],aq=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),hE=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],sq=[...hE,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function jw(e,t){return t.some(n=>e.startsWith(n))}function oq(e){return e.name===uE&&e.publicId===null&&(e.systemId===null||e.systemId===nq)}function lq(e){if(e.name!==uE)return Wn.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===iq)return Wn.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),aq.has(n))return Wn.QUIRKS;let i=t===null?rq:dE;if(jw(n,i))return Wn.QUIRKS;if(i=t===null?hE:sq,jw(n,i))return Wn.LIMITED_QUIRKS}return Wn.NO_QUIRKS}const Yw={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},cq="definitionurl",uq="definitionURL",dq=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),hq=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:he.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:he.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:he.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:he.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:he.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:he.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:he.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:he.XML}],["xml:space",{prefix:"xml",name:"space",namespace:he.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:he.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:he.XMLNS}]]),mq=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),fq=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function pq(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:i})=>i===Kr.COLOR||i===Kr.SIZE||i===Kr.FACE)||fq.has(t)}function mE(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===cq){e.attrs[t].name=uq;break}}function fE(e){for(let t=0;t<e.attrs.length;t++){const n=dq.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Uf(e){for(let t=0;t<e.attrs.length;t++){const n=hq.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function gq(e){const t=mq.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=ps(e.tagName))}function yq(e,t){return t===he.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function bq(e,t,n){if(t===he.MATHML&&e===T.ANNOTATION_XML){for(let i=0;i<n.length;i++)if(n[i].name===Kr.ENCODING){const a=n[i].value.toLowerCase();return a===Yw.TEXT_HTML||a===Yw.APPLICATION_XML}}return t===he.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function vq(e,t,n,i){return(!i||i===he.HTML)&&bq(e,t,n)||(!i||i===he.MATHML)&&yq(e,t)}const wq="hidden",xq=8,Tq=3;var B;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(B||(B={}));const Eq={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},pE=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),$w={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:fr,onParseError:null};class Kw{constructor(t,n,i=null,a=null){this.fragmentContext=i,this.scriptHandler=a,this.currentToken=null,this.stopped=!1,this.insertionMode=B.INITIAL,this.originalInsertionMode=B.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...$w,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Y5(this.options,this),this.activeFormattingElements=new tq(this.treeAdapter),this.fragmentContextID=i?ps(this.treeAdapter.getTagName(i)):T.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new eq(this.document,this.treeAdapter,this)}static parse(t,n){const i=new this(n);return i.tokenizer.write(t,!0),i.document}static getFragmentParser(t,n){const i={...$w,...n};t??(t=i.treeAdapter.createElement(Y.TEMPLATE,he.HTML,[]));const a=i.treeAdapter.createElement("documentmock",he.HTML,[]),o=new this(i,a,t);return o.fragmentContextID===T.TEMPLATE&&o.tmplInsertionModeStack.unshift(B.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,i){var a;if(!this.onParseError)return;const o=(a=t.location)!==null&&a!==void 0?a:Eq,l={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:i?o.startLine:o.endLine,endCol:i?o.startCol:o.endCol,endOffset:i?o.startOffset:o.endOffset};this.onParseError(l)}onItemPush(t,n,i){var a,o;(o=(a=this.treeAdapter).onItemPush)===null||o===void 0||o.call(a,t),i&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var i,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(a=(i=this.treeAdapter).onItemPop)===null||a===void 0||a.call(i,t,this.openElements.current),n){let o,l;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,l=this.fragmentContextID):{current:o,currentTagId:l}=this.openElements,this._setContextModes(o,l)}}_setContextModes(t,n){const i=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===he.HTML;this.currentNotInHTML=!i,this.tokenizer.inForeignNode=!i&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,he.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=B.TEXT}switchToPlaintextParsing(){this.insertionMode=B.TEXT,this.originalInsertionMode=B.IN_BODY,this.tokenizer.state=St.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Y.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==he.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=St.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=St.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=St.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=St.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",i=t.publicId||"",a=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,i,a),t.location){const l=this.treeAdapter.getChildNodes(this.document).find(u=>this.treeAdapter.isDocumentTypeNode(u));l&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const i=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,i)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const i=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(i??this.document,t)}}_appendElement(t,n){const i=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(i,t.location)}_insertElement(t,n){const i=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(i,t.location),this.openElements.push(i,t.tagID)}_insertFakeElement(t,n){const i=this.treeAdapter.createElement(t,he.HTML,[]);this._attachElementToTree(i,null),this.openElements.push(i,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,he.HTML,t.attrs),i=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,i),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Y.HTML,he.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const i=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,i),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_insertCharacters(t){let n,i;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:i}=this._findFosterParentingLocation(),i?this.treeAdapter.insertTextBefore(n,t.chars,i):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const a=this.treeAdapter.getChildNodes(n),o=i?a.lastIndexOf(i):a.length,l=a[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(l)){const{endLine:m,endCol:d,endOffset:p}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(l,{endLine:m,endCol:d,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}_adoptNodes(t,n){for(let i=this.treeAdapter.getFirstChild(t);i;i=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(i),this.treeAdapter.appendChild(n,i)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const i=n.location,a=this.treeAdapter.getTagName(t),o=n.type===Ve.END_TAG&&a===n.tagName?{endTag:{...i},endLine:i.endLine,endCol:i.endCol,endOffset:i.endOffset}:{endLine:i.startLine,endCol:i.startCol,endOffset:i.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,i;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,i=this.fragmentContextID):{current:n,currentTagId:i}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===Y.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===he.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&i!==void 0&&!this._isIntegrationPoint(i,n,he.HTML)}_processToken(t){switch(t.type){case Ve.CHARACTER:{this.onCharacter(t);break}case Ve.NULL_CHARACTER:{this.onNullCharacter(t);break}case Ve.COMMENT:{this.onComment(t);break}case Ve.DOCTYPE:{this.onDoctype(t);break}case Ve.START_TAG:{this._processStartTag(t);break}case Ve.END_TAG:{this.onEndTag(t);break}case Ve.EOF:{this.onEof(t);break}case Ve.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,i){const a=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return vq(t,a,o,i)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(a=>a.type===hi.Marker||this.openElements.contains(a.element)),i=n===-1?t-1:n-1;for(let a=i;a>=0;a--){const o=this.activeFormattingElements.entries[a];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=B.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=B.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=B.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=B.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=B.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=B.IN_TABLE;return}case T.BODY:{this.insertionMode=B.IN_BODY;return}case T.FRAMESET:{this.insertionMode=B.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?B.AFTER_HEAD:B.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=B.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=B.IN_HEAD;return}break}}this.insertionMode=B.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const i=this.openElements.tagIDs[n];if(i===T.TEMPLATE)break;if(i===T.TABLE){this.insertionMode=B.IN_SELECT_IN_TABLE;return}}this.insertionMode=B.IN_SELECT}_isElementCausesFosterParenting(t){return pE.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===he.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const i=this.treeAdapter.getParentNode(n);return i?{parent:i,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const i=this.treeAdapter.getNamespaceURI(t);return z5[i].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Z8(this,t);return}switch(this.insertionMode){case B.INITIAL:{wo(this,t);break}case B.BEFORE_HTML:{Io(this,t);break}case B.BEFORE_HEAD:{No(this,t);break}case B.IN_HEAD:{Ro(this,t);break}case B.IN_HEAD_NO_SCRIPT:{Mo(this,t);break}case B.AFTER_HEAD:{Po(this,t);break}case B.IN_BODY:case B.IN_CAPTION:case B.IN_CELL:case B.IN_TEMPLATE:{yE(this,t);break}case B.TEXT:case B.IN_SELECT:case B.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case B.IN_TABLE:case B.IN_TABLE_BODY:case B.IN_ROW:{um(this,t);break}case B.IN_TABLE_TEXT:{EE(this,t);break}case B.IN_COLUMN_GROUP:{Yc(this,t);break}case B.AFTER_BODY:{$c(this,t);break}case B.AFTER_AFTER_BODY:{Oc(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){X8(this,t);return}switch(this.insertionMode){case B.INITIAL:{wo(this,t);break}case B.BEFORE_HTML:{Io(this,t);break}case B.BEFORE_HEAD:{No(this,t);break}case B.IN_HEAD:{Ro(this,t);break}case B.IN_HEAD_NO_SCRIPT:{Mo(this,t);break}case B.AFTER_HEAD:{Po(this,t);break}case B.TEXT:{this._insertCharacters(t);break}case B.IN_TABLE:case B.IN_TABLE_BODY:case B.IN_ROW:{um(this,t);break}case B.IN_COLUMN_GROUP:{Yc(this,t);break}case B.AFTER_BODY:{$c(this,t);break}case B.AFTER_AFTER_BODY:{Oc(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Km(this,t);return}switch(this.insertionMode){case B.INITIAL:case B.BEFORE_HTML:case B.BEFORE_HEAD:case B.IN_HEAD:case B.IN_HEAD_NO_SCRIPT:case B.AFTER_HEAD:case B.IN_BODY:case B.IN_TABLE:case B.IN_CAPTION:case B.IN_COLUMN_GROUP:case B.IN_TABLE_BODY:case B.IN_ROW:case B.IN_CELL:case B.IN_SELECT:case B.IN_SELECT_IN_TABLE:case B.IN_TEMPLATE:case B.IN_FRAMESET:case B.AFTER_FRAMESET:{Km(this,t);break}case B.IN_TABLE_TEXT:{xo(this,t);break}case B.AFTER_BODY:{Nq(this,t);break}case B.AFTER_AFTER_BODY:case B.AFTER_AFTER_FRAMESET:{Rq(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case B.INITIAL:{Mq(this,t);break}case B.BEFORE_HEAD:case B.IN_HEAD:case B.IN_HEAD_NO_SCRIPT:case B.AFTER_HEAD:{this._err(t,ee.misplacedDoctype);break}case B.IN_TABLE_TEXT:{xo(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?eB(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case B.INITIAL:{wo(this,t);break}case B.BEFORE_HTML:{Pq(this,t);break}case B.BEFORE_HEAD:{Lq(this,t);break}case B.IN_HEAD:{ai(this,t);break}case B.IN_HEAD_NO_SCRIPT:{Bq(this,t);break}case B.AFTER_HEAD:{Uq(this,t);break}case B.IN_BODY:{tn(this,t);break}case B.IN_TABLE:{ls(this,t);break}case B.IN_TABLE_TEXT:{xo(this,t);break}case B.IN_CAPTION:{O8(this,t);break}case B.IN_COLUMN_GROUP:{zf(this,t);break}case B.IN_TABLE_BODY:{pu(this,t);break}case B.IN_ROW:{gu(this,t);break}case B.IN_CELL:{H8(this,t);break}case B.IN_SELECT:{CE(this,t);break}case B.IN_SELECT_IN_TABLE:{F8(this,t);break}case B.IN_TEMPLATE:{z8(this,t);break}case B.AFTER_BODY:{W8(this,t);break}case B.IN_FRAMESET:{j8(this,t);break}case B.AFTER_FRAMESET:{$8(this,t);break}case B.AFTER_AFTER_BODY:{Q8(this,t);break}case B.AFTER_AFTER_FRAMESET:{J8(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?tB(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case B.INITIAL:{wo(this,t);break}case B.BEFORE_HTML:{Dq(this,t);break}case B.BEFORE_HEAD:{Oq(this,t);break}case B.IN_HEAD:{qq(this,t);break}case B.IN_HEAD_NO_SCRIPT:{Hq(this,t);break}case B.AFTER_HEAD:{Fq(this,t);break}case B.IN_BODY:{fu(this,t);break}case B.TEXT:{C8(this,t);break}case B.IN_TABLE:{Uo(this,t);break}case B.IN_TABLE_TEXT:{xo(this,t);break}case B.IN_CAPTION:{q8(this,t);break}case B.IN_COLUMN_GROUP:{B8(this,t);break}case B.IN_TABLE_BODY:{Qm(this,t);break}case B.IN_ROW:{AE(this,t);break}case B.IN_CELL:{U8(this,t);break}case B.IN_SELECT:{SE(this,t);break}case B.IN_SELECT_IN_TABLE:{G8(this,t);break}case B.IN_TEMPLATE:{V8(this,t);break}case B.AFTER_BODY:{IE(this,t);break}case B.IN_FRAMESET:{Y8(this,t);break}case B.AFTER_FRAMESET:{K8(this,t);break}case B.AFTER_AFTER_BODY:{Oc(this,t);break}}}onEof(t){switch(this.insertionMode){case B.INITIAL:{wo(this,t);break}case B.BEFORE_HTML:{Io(this,t);break}case B.BEFORE_HEAD:{No(this,t);break}case B.IN_HEAD:{Ro(this,t);break}case B.IN_HEAD_NO_SCRIPT:{Mo(this,t);break}case B.AFTER_HEAD:{Po(this,t);break}case B.IN_BODY:case B.IN_TABLE:case B.IN_CAPTION:case B.IN_COLUMN_GROUP:case B.IN_TABLE_BODY:case B.IN_ROW:case B.IN_CELL:case B.IN_SELECT:case B.IN_SELECT_IN_TABLE:{xE(this,t);break}case B.TEXT:{S8(this,t);break}case B.IN_TABLE_TEXT:{xo(this,t);break}case B.IN_TEMPLATE:{kE(this,t);break}case B.AFTER_BODY:case B.IN_FRAMESET:case B.AFTER_FRAMESET:case B.AFTER_AFTER_BODY:case B.AFTER_AFTER_FRAMESET:{Gf(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===M.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case B.IN_HEAD:case B.IN_HEAD_NO_SCRIPT:case B.AFTER_HEAD:case B.TEXT:case B.IN_COLUMN_GROUP:case B.IN_SELECT:case B.IN_SELECT_IN_TABLE:case B.IN_FRAMESET:case B.AFTER_FRAMESET:{this._insertCharacters(t);break}case B.IN_BODY:case B.IN_CAPTION:case B.IN_CELL:case B.IN_TEMPLATE:case B.AFTER_BODY:case B.AFTER_AFTER_BODY:case B.AFTER_AFTER_FRAMESET:{gE(this,t);break}case B.IN_TABLE:case B.IN_TABLE_BODY:case B.IN_ROW:{um(this,t);break}case B.IN_TABLE_TEXT:{TE(this,t);break}}}}function _q(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):wE(e,t),n}function Aq(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const a=e.openElements.items[i];if(a===t.element)break;e._isSpecialElement(a,e.openElements.tagIDs[i])&&(n=a)}return n||(e.openElements.shortenToLength(Math.max(i,0)),e.activeFormattingElements.removeEntry(t)),n}function Cq(e,t,n){let i=t,a=e.openElements.getCommonAncestor(t);for(let o=0,l=a;l!==n;o++,l=a){a=e.openElements.getCommonAncestor(l);const u=e.activeFormattingElements.getElementEntry(l),m=u&&o>=Tq;!u||m?(m&&e.activeFormattingElements.removeEntry(u),e.openElements.remove(l)):(l=Sq(e,u),i===t&&(e.activeFormattingElements.bookmark=u),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(l,i),i=l)}return i}function Sq(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function kq(e,t,n){const i=e.treeAdapter.getTagName(t),a=ps(i);if(e._isElementCausesFosterParenting(a))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);a===T.TEMPLATE&&o===he.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Iq(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:a}=n,o=e.treeAdapter.createElement(a.tagName,i,a.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,a),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,a.tagID)}function Ff(e,t){for(let n=0;n<xq;n++){const i=_q(e,t);if(!i)break;const a=Aq(e,i);if(!a)break;e.activeFormattingElements.bookmark=i;const o=Cq(e,a,i.element),l=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(o),l&&kq(e,l,o),Iq(e,a,i)}}function Km(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Nq(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Rq(e,t){e._appendCommentNode(t,e.document)}function Gf(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],a=e.treeAdapter.getNodeSourceCodeLocation(i);if(a&&!a.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],l=e.treeAdapter.getNodeSourceCodeLocation(o);l&&!l.endTag&&e._setEndLocation(o,t)}}}}function Mq(e,t){e._setDocumentType(t);const n=t.forceQuirks?Wn.QUIRKS:lq(t);oq(t)||e._err(t,ee.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=B.BEFORE_HTML}function wo(e,t){e._err(t,ee.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Wn.QUIRKS),e.insertionMode=B.BEFORE_HTML,e._processToken(t)}function Pq(e,t){t.tagID===T.HTML?(e._insertElement(t,he.HTML),e.insertionMode=B.BEFORE_HEAD):Io(e,t)}function Dq(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&Io(e,t)}function Io(e,t){e._insertFakeRootElement(),e.insertionMode=B.BEFORE_HEAD,e._processToken(t)}function Lq(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.HEAD:{e._insertElement(t,he.HTML),e.headElement=e.openElements.current,e.insertionMode=B.IN_HEAD;break}default:No(e,t)}}function Oq(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?No(e,t):e._err(t,ee.endTagWithoutMatchingOpenElement)}function No(e,t){e._insertFakeElement(Y.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=B.IN_HEAD,e._processToken(t)}function ai(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,he.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,St.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,St.RAWTEXT):(e._insertElement(t,he.HTML),e.insertionMode=B.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,St.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,St.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=B.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(B.IN_TEMPLATE);break}case T.HEAD:{e._err(t,ee.misplacedStartTagForHeadElement);break}default:Ro(e,t)}}function qq(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=B.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{Ro(e,t);break}case T.TEMPLATE:{Zr(e,t);break}default:e._err(t,ee.endTagWithoutMatchingOpenElement)}}function Zr(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,ee.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ee.endTagWithoutMatchingOpenElement)}function Ro(e,t){e.openElements.pop(),e.insertionMode=B.AFTER_HEAD,e._processToken(t)}function Bq(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{ai(e,t);break}case T.NOSCRIPT:{e._err(t,ee.nestedNoscriptInHead);break}default:Mo(e,t)}}function Hq(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=B.IN_HEAD;break}case T.BR:{Mo(e,t);break}default:e._err(t,ee.endTagWithoutMatchingOpenElement)}}function Mo(e,t){const n=t.type===Ve.EOF?ee.openElementsLeftAfterEof:ee.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=B.IN_HEAD,e._processToken(t)}function Uq(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.BODY:{e._insertElement(t,he.HTML),e.framesetOk=!1,e.insertionMode=B.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,he.HTML),e.insertionMode=B.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,ee.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),ai(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,ee.misplacedStartTagForHeadElement);break}default:Po(e,t)}}function Fq(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{Po(e,t);break}case T.TEMPLATE:{Zr(e,t);break}default:e._err(t,ee.endTagWithoutMatchingOpenElement)}}function Po(e,t){e._insertFakeElement(Y.BODY,T.BODY),e.insertionMode=B.IN_BODY,mu(e,t)}function mu(e,t){switch(t.type){case Ve.CHARACTER:{yE(e,t);break}case Ve.WHITESPACE_CHARACTER:{gE(e,t);break}case Ve.COMMENT:{Km(e,t);break}case Ve.START_TAG:{tn(e,t);break}case Ve.END_TAG:{fu(e,t);break}case Ve.EOF:{xE(e,t);break}}}function gE(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function yE(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Gq(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function zq(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Vq(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_FRAMESET)}function Wq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML)}function jq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&$m.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,he.HTML)}function Yq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function $q(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML),n||(e.formElement=e.openElements.current))}function Kq(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const a=e.openElements.tagIDs[i];if(n===T.LI&&a===T.LI||(n===T.DD||n===T.DT)&&(a===T.DD||a===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(a!==T.ADDRESS&&a!==T.DIV&&a!==T.P&&e._isSpecialElement(e.openElements.items[i],a))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML)}function Qq(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML),e.tokenizer.state=St.PLAINTEXT}function Jq(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML),e.framesetOk=!1}function Xq(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Y.A);n&&(Ff(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Zq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function e8(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(Ff(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,he.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function t8(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function n8(e,t){e.treeAdapter.getDocumentMode(e.document)!==Wn.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,he.HTML),e.framesetOk=!1,e.insertionMode=B.IN_TABLE}function bE(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,he.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function vE(e){const t=oE(e,Kr.TYPE);return t!=null&&t.toLowerCase()===wq}function i8(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,he.HTML),vE(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function r8(e,t){e._appendElement(t,he.HTML),t.ackSelfClosing=!0}function a8(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,he.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function s8(e,t){t.tagName=Y.IMG,t.tagID=T.IMG,bE(e,t)}function o8(e,t){e._insertElement(t,he.HTML),e.skipNextNewLine=!0,e.tokenizer.state=St.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=B.TEXT}function l8(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,St.RAWTEXT)}function c8(e,t){e.framesetOk=!1,e._switchToTextParsing(t,St.RAWTEXT)}function Qw(e,t){e._switchToTextParsing(t,St.RAWTEXT)}function u8(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===B.IN_TABLE||e.insertionMode===B.IN_CAPTION||e.insertionMode===B.IN_TABLE_BODY||e.insertionMode===B.IN_ROW||e.insertionMode===B.IN_CELL?B.IN_SELECT_IN_TABLE:B.IN_SELECT}function d8(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML)}function h8(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,he.HTML)}function m8(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,he.HTML)}function f8(e,t){e._reconstructActiveFormattingElements(),mE(t),Uf(t),t.selfClosing?e._appendElement(t,he.MATHML):e._insertElement(t,he.MATHML),t.ackSelfClosing=!0}function p8(e,t){e._reconstructActiveFormattingElements(),fE(t),Uf(t),t.selfClosing?e._appendElement(t,he.SVG):e._insertElement(t,he.SVG),t.ackSelfClosing=!0}function Jw(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,he.HTML)}function tn(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{Zq(e,t);break}case T.A:{Xq(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{jq(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SEARCH:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{Wq(e,t);break}case T.LI:case T.DD:case T.DT:{Kq(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{bE(e,t);break}case T.HR:{a8(e,t);break}case T.RB:case T.RTC:{h8(e,t);break}case T.RT:case T.RP:{m8(e,t);break}case T.PRE:case T.LISTING:{Yq(e,t);break}case T.XMP:{l8(e,t);break}case T.SVG:{p8(e,t);break}case T.HTML:{Gq(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{ai(e,t);break}case T.BODY:{zq(e,t);break}case T.FORM:{$q(e,t);break}case T.NOBR:{e8(e,t);break}case T.MATH:{f8(e,t);break}case T.TABLE:{n8(e,t);break}case T.INPUT:{i8(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{r8(e,t);break}case T.IMAGE:{s8(e,t);break}case T.BUTTON:{Jq(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{t8(e,t);break}case T.IFRAME:{c8(e,t);break}case T.SELECT:{u8(e,t);break}case T.OPTION:case T.OPTGROUP:{d8(e,t);break}case T.NOEMBED:case T.NOFRAMES:{Qw(e,t);break}case T.FRAMESET:{Vq(e,t);break}case T.TEXTAREA:{o8(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?Qw(e,t):Jw(e,t);break}case T.PLAINTEXT:{Qq(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:Jw(e,t)}}function g8(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=B.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function y8(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=B.AFTER_BODY,IE(e,t))}function b8(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function v8(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function w8(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(Y.P,T.P),e._closePElement()}function x8(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function T8(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function E8(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function _8(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function A8(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Y.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function wE(e,t){const n=t.tagName,i=t.tagID;for(let a=e.openElements.stackTop;a>0;a--){const o=e.openElements.items[a],l=e.openElements.tagIDs[a];if(i===l&&(i!==T.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=a&&e.openElements.shortenToLength(a);break}if(e._isSpecialElement(o,l))break}}function fu(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{Ff(e,t);break}case T.P:{w8(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SEARCH:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{b8(e,t);break}case T.LI:{x8(e);break}case T.DD:case T.DT:{T8(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{E8(e);break}case T.BR:{A8(e);break}case T.BODY:{g8(e,t);break}case T.HTML:{y8(e,t);break}case T.FORM:{v8(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{_8(e,t);break}case T.TEMPLATE:{Zr(e,t);break}default:wE(e,t)}}function xE(e,t){e.tmplInsertionModeStack.length>0?kE(e,t):Gf(e,t)}function C8(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function S8(e,t){e._err(t,ee.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function um(e,t){if(e.openElements.currentTagId!==void 0&&pE.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=B.IN_TABLE_TEXT,t.type){case Ve.CHARACTER:{EE(e,t);break}case Ve.WHITESPACE_CHARACTER:{TE(e,t);break}}else Jo(e,t)}function k8(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_CAPTION}function I8(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_COLUMN_GROUP}function N8(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Y.COLGROUP,T.COLGROUP),e.insertionMode=B.IN_COLUMN_GROUP,zf(e,t)}function R8(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_TABLE_BODY}function M8(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Y.TBODY,T.TBODY),e.insertionMode=B.IN_TABLE_BODY,pu(e,t)}function P8(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function D8(e,t){vE(t)?e._appendElement(t,he.HTML):Jo(e,t),t.ackSelfClosing=!0}function L8(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,he.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ls(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{M8(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{ai(e,t);break}case T.COL:{N8(e,t);break}case T.FORM:{L8(e,t);break}case T.TABLE:{P8(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{R8(e,t);break}case T.INPUT:{D8(e,t);break}case T.CAPTION:{k8(e,t);break}case T.COLGROUP:{I8(e,t);break}default:Jo(e,t)}}function Uo(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{Zr(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:Jo(e,t)}}function Jo(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,mu(e,t),e.fosterParentingEnabled=n}function TE(e,t){e.pendingCharacterTokens.push(t)}function EE(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function xo(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Jo(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const _E=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function O8(e,t){const n=t.tagID;_E.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=B.IN_TABLE,ls(e,t)):tn(e,t)}function q8(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=B.IN_TABLE,n===T.TABLE&&Uo(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:fu(e,t)}}function zf(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.COL:{e._appendElement(t,he.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{ai(e,t);break}default:Yc(e,t)}}function B8(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=B.IN_TABLE);break}case T.TEMPLATE:{Zr(e,t);break}case T.COL:break;default:Yc(e,t)}}function Yc(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=B.IN_TABLE,e._processToken(t))}function pu(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Y.TR,T.TR),e.insertionMode=B.IN_ROW,gu(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE,ls(e,t));break}default:ls(e,t)}}function Qm(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE,Uo(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:Uo(e,t)}}function gu(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,he.HTML),e.insertionMode=B.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE_BODY,pu(e,t));break}default:ls(e,t)}}function AE(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE_BODY,Qm(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=B.IN_TABLE_BODY,Qm(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:Uo(e,t)}}function H8(e,t){const n=t.tagID;_E.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),gu(e,t)):tn(e,t)}function U8(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=B.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),AE(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:fu(e,t)}}function CE(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,he.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,he.HTML);break}case T.HR:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._appendElement(t,he.HTML),t.ackSelfClosing=!0;break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{ai(e,t);break}}}function SE(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{Zr(e,t);break}}}function F8(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):CE(e,t)}function G8(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):SE(e,t)}function z8(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{ai(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=B.IN_TABLE,e.insertionMode=B.IN_TABLE,ls(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=B.IN_COLUMN_GROUP,e.insertionMode=B.IN_COLUMN_GROUP,zf(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=B.IN_TABLE_BODY,e.insertionMode=B.IN_TABLE_BODY,pu(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=B.IN_ROW,e.insertionMode=B.IN_ROW,gu(e,t);break}default:e.tmplInsertionModeStack[0]=B.IN_BODY,e.insertionMode=B.IN_BODY,tn(e,t)}}function V8(e,t){t.tagID===T.TEMPLATE&&Zr(e,t)}function kE(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Gf(e,t)}function W8(e,t){t.tagID===T.HTML?tn(e,t):$c(e,t)}function IE(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=B.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&e._setEndLocation(i,t)}}else $c(e,t)}function $c(e,t){e.insertionMode=B.IN_BODY,mu(e,t)}function j8(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.FRAMESET:{e._insertElement(t,he.HTML);break}case T.FRAME:{e._appendElement(t,he.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{ai(e,t);break}}}function Y8(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=B.AFTER_FRAMESET))}function $8(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.NOFRAMES:{ai(e,t);break}}}function K8(e,t){t.tagID===T.HTML&&(e.insertionMode=B.AFTER_AFTER_FRAMESET)}function Q8(e,t){t.tagID===T.HTML?tn(e,t):Oc(e,t)}function Oc(e,t){e.insertionMode=B.IN_BODY,mu(e,t)}function J8(e,t){switch(t.tagID){case T.HTML:{tn(e,t);break}case T.NOFRAMES:{ai(e,t);break}}}function X8(e,t){t.chars=vt,e._insertCharacters(t)}function Z8(e,t){e._insertCharacters(t),e.framesetOk=!1}function NE(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==he.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function eB(e,t){if(pq(t))NE(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===he.MATHML?mE(t):i===he.SVG&&(gq(t),fE(t)),Uf(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function tB(e,t){if(t.tagID===T.P||t.tagID===T.BR){NE(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===he.HTML){e._endTagOutsideForeignContent(t);break}const a=e.treeAdapter.getTagName(i);if(a.toLowerCase()===t.tagName){t.tagName=a,e.openElements.shortenToLength(n);break}}}Y.AREA,Y.BASE,Y.BASEFONT,Y.BGSOUND,Y.BR,Y.COL,Y.EMBED,Y.FRAME,Y.HR,Y.IMG,Y.INPUT,Y.KEYGEN,Y.LINK,Y.META,Y.PARAM,Y.SOURCE,Y.TRACK,Y.WBR;const nB=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,iB=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Xw={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function RE(e,t){const n=mB(e),i=D1("type",{handlers:{root:rB,element:aB,text:sB,comment:PE,doctype:oB,raw:cB},unknown:uB}),a={parser:n?new Kw(Xw):Kw.getFragmentParser(void 0,Xw),handle(u){i(u,a)},stitches:!1,options:t||{}};i(e,a),gs(a,mi());const o=n?a.parser.document:a.parser.getFragment(),l=f5(o,{file:a.options.file});return a.stitches&&hu(l,"comment",function(u,m,d){const p=u;if(p.value.stitch&&d&&m!==void 0){const y=d.children;return y[m]=p.value.stitch,m}}),l.type==="root"&&l.children.length===1&&l.children[0].type===e.type?l.children[0]:l}function ME(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function rB(e,t){ME(e.children,t)}function aB(e,t){dB(e,t),ME(e.children,t),hB(e,t)}function sB(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Ve.CHARACTER,chars:e.value,location:Xo(e)};gs(t,mi(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function oB(e,t){const n={type:Ve.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Xo(e)};gs(t,mi(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function lB(e,t){t.stitches=!0;const n=fB(e);if("children"in e&&"children"in n){const i=RE({type:"root",children:e.children},t.options);n.children=i.children}PE({type:"comment",value:{stitch:n}},t)}function PE(e,t){const n=e.value,i={type:Ve.COMMENT,data:n,location:Xo(e)};gs(t,mi(e)),t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken)}function cB(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,DE(t,mi(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(nB,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function uB(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))lB(n,t);else{let i="";throw iB.has(n.type)&&(i=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+i)}}function gs(e,t){DE(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=St.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function DE(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function dB(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===St.PLAINTEXT)return;gs(t,mi(e));const i=t.parser.openElements.current;let a="namespaceURI"in i?i.namespaceURI:Yr.html;a===Yr.html&&n==="svg"&&(a=Yr.svg);const o=v5({...e,children:[]},{space:a===Yr.svg?"svg":"html"}),l={type:Ve.START_TAG,tagName:n,tagID:ps(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Xo(e)};t.parser.currentToken=l,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function hB(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&S5.includes(n)||t.parser.tokenizer.state===St.PLAINTEXT)return;gs(t,su(e));const i={type:Ve.END_TAG,tagName:n,tagID:ps(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Xo(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===St.RCDATA||t.parser.tokenizer.state===St.RAWTEXT||t.parser.tokenizer.state===St.SCRIPT_DATA)&&(t.parser.tokenizer.state=St.DATA)}function mB(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Xo(e){const t=mi(e)||{line:void 0,column:void 0,offset:void 0},n=su(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function fB(e){return"children"in e?os({...e,children:[]}):os(e)}function pB(e){return function(t,n){return RE(t,{...e,file:n})}}const gB=({src:e,alt:t,onClose:n})=>w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-300",onClick:n,children:[w.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-white/70 hover:text-white bg-white/10 hover:bg-white/20 rounded-full transition-colors z-[101]",children:w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),w.jsxs("div",{className:"relative max-w-full max-h-full",onClick:i=>i.stopPropagation(),children:[w.jsx("img",{src:e,alt:t||"Expanded view",className:"max-w-[95vw] max-h-[95vh] object-contain rounded-lg shadow-2xl"}),t&&w.jsx("p",{className:"absolute bottom-[-3rem] left-0 right-0 text-center text-white/90 text-sm font-medium",children:t})]})]}),yB=({tool:e,active:t,strokes:n,onStrokeComplete:i,onEraseStroke:a,onStrokesUpdate:o,color:l="#ef4444",strokeWidth:u=3,eraserSize:m=30,isDarkMode:d=!1,highlightBlendMode:p})=>{const y=oe.useRef(null),v=oe.useRef(null),E=oe.useRef(null),A=oe.useRef(!1),C=oe.useRef(!1),S=oe.useRef([]),I=oe.useRef(null),L=oe.useRef([]),P=oe.useRef(null),G=oe.useRef(new Map),J=100,q=typeof window<"u"?Math.min(window.devicePixelRatio||1,2):1,V=(X,R)=>{if(X.startsWith("#")){const W=parseInt(X.slice(1,3),16),N=parseInt(X.slice(3,5),16),te=parseInt(X.slice(5,7),16);return{r:W,g:N,b:te,rgba:`rgba(${W}, ${N}, ${te}, ${R})`}}const D=X.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(D){const W=Number(D[1]),N=Number(D[2]),te=Number(D[3]);return{r:W,g:N,b:te,rgba:`rgba(${W}, ${N}, ${te}, ${R})`}}return{r:255,g:212,b:0,rgba:`rgba(255, 212, 0, ${R})`}};oe.useEffect(()=>{L.current=(n||[]).filter(X=>X!=null),ve(),F()},[n]);const ve=()=>{G.current.clear(),L.current.forEach((X,R)=>{if(!X)return;let D=X.bbox;if(!D&&X.points&&X.points.length>0){let ge=1/0,ue=1/0,Ce=-1/0,_e=-1/0;for(const fe of X.points)fe.x<ge&&(ge=fe.x),fe.x>Ce&&(Ce=fe.x),fe.y<ue&&(ue=fe.y),fe.y>_e&&(_e=fe.y);D={minX:ge,minY:ue,maxX:Ce,maxY:_e},X.bbox=D}if(!D)return;const W=Math.floor(D.minX/J),N=Math.floor(D.minY/J),te=Math.floor(D.maxX/J),pe=Math.floor(D.maxY/J);for(let ge=W;ge<=te;ge++)for(let ue=N;ue<=pe;ue++){const Ce=`${ge},${ue}`;G.current.has(Ce)||G.current.set(Ce,new Set),G.current.get(Ce).add(R)}})},ne=(X,R)=>{if(!R||!R.points||R.points.length<1)return;const D=R.points;if(R.tool==="rect-highlight"){const W=R.color&&(R.color.includes("239")||R.color.includes("68")||R.color.includes("red")),N=R.color||(W?"#FF3B3B":"#FFD400"),{r:te,g:pe,b:ge}=V(N,1),ue=d?.28:.14,Ce=d?.4:.2;X.globalCompositeOperation=d?"screen":"multiply",X.fillStyle=`rgba(${te}, ${pe}, ${ge}, ${ue})`,X.shadowBlur=8,X.shadowColor=`rgba(${te}, ${pe}, ${ge}, 0.55)`;for(let _e=0;_e<D.length;_e+=2)D[_e+1]&&X.fillRect(D[_e].x,D[_e].y,D[_e+1].x,D[_e+1].y);X.globalCompositeOperation="screen",X.fillStyle=`rgba(${te}, ${pe}, ${ge}, ${Ce})`;for(let _e=0;_e<D.length;_e+=2)D[_e+1]&&X.fillRect(D[_e].x,D[_e].y,D[_e+1].x,D[_e+1].y);X.shadowBlur=0,X.shadowColor="transparent",X.globalCompositeOperation="source-over";return}if(X.beginPath(),X.lineCap="round",X.lineJoin="round",R.tool==="pen")X.strokeStyle=R.color||"#ef4444",X.lineWidth=R.width||3,X.globalCompositeOperation="source-over";else if(R.tool==="highlighter"){const W=R.color&&(R.color.includes("red")||R.color.includes("255, 60")),N=R.color||(W?"#FF3B3B":"#FFD400"),te=d?.32:.12,{r:pe,g:ge,b:ue}=V(N,1);X.strokeStyle=`rgba(${pe}, ${ge}, ${ue}, ${te})`,X.lineWidth=Math.max(R.width||12,9),X.lineCap="round",X.globalCompositeOperation=d?"screen":"multiply",X.shadowBlur=10,X.shadowColor=`rgba(${pe}, ${ge}, ${ue}, 0.6)`}else R.tool==="eraser"&&(X.strokeStyle="white",X.lineWidth=R.width||30,X.globalCompositeOperation="destination-out");if(D.length===1){const W=D[0],N=Math.max((X.lineWidth||3)/2,1);X.beginPath(),X.arc(W.x,W.y,N,0,Math.PI*2),X.fillStyle=X.strokeStyle,X.fill(),X.shadowBlur=0,X.shadowColor="transparent",X.globalCompositeOperation="source-over";return}X.moveTo(D[0].x,D[0].y);for(let W=1;W<D.length-1;W++){const N=D[W],te=D[W+1],pe={x:(N.x+te.x)/2,y:(N.y+te.y)/2};X.quadraticCurveTo(N.x,N.y,pe.x,pe.y)}X.lineTo(D[D.length-1].x,D[D.length-1].y),X.stroke(),X.shadowBlur=0,X.shadowColor="transparent",X.globalCompositeOperation="source-over"},F=oe.useCallback(()=>{const X=y.current;if(!X)return;const R=X.getContext("2d",{alpha:!0});R&&(R.clearRect(0,0,X.width/q,X.height/q),L.current.forEach(D=>ne(R,D)))},[q]),de=oe.useCallback(()=>{const X=v.current;if(!X)return;const R=X.getContext("2d");R&&(R.clearRect(0,0,X.width/q,X.height/q),xe.current&&(F(),xe.current=!1),A.current&&(e==="pen"||e==="highlighter")&&S.current.length>0&&ne(R,{tool:e,points:S.current,color:l,width:u}),P.current&&e==="eraser"&&(R.save(),R.beginPath(),R.arc(P.current.x,P.current.y,m/2,0,Math.PI*2),R.strokeStyle="rgba(255,255,255,0.8)",R.lineWidth=2,R.stroke(),R.fillStyle="rgba(255,255,255,0.2)",R.fill(),R.restore()))},[q,e,m,l,u]);oe.useEffect(()=>{if(!t)return;let X;const R=()=>{de(),X=requestAnimationFrame(R)};return X=requestAnimationFrame(R),()=>cancelAnimationFrame(X)},[t,de]),oe.useEffect(()=>{const X=E.current,R=y.current,D=v.current;if(!X||!R||!D)return;const W=te=>{for(const pe of te){const{width:ge,height:ue}=pe.contentRect;[R,D].forEach(Ce=>{Ce.width=ge*q,Ce.height=ue*q,Ce.style.width=`${ge}px`,Ce.style.height=`${ue}px`;const _e=Ce.getContext("2d");_e&&_e.setTransform(q,0,0,q,0,0)}),F()}},N=new ResizeObserver(W);return X.parentElement&&N.observe(X.parentElement),()=>N.disconnect()},[q,F]),oe.useEffect(()=>{t&&(console.log("DentEdge Pro-Drawing Engine 2.5 Active (Stable Turbo)"),F())},[t,n,F]);const me=X=>{const R=v.current;if(!R)return null;const D=R.getBoundingClientRect();return{x:X.clientX-D.left,y:X.clientY-D.top}},ke=(X,R)=>{const D=m/2+5,W=D*D,N=Math.floor(X/J),te=Math.floor(R/J),pe=new Set;for(let ue=-1;ue<=1;ue++)for(let Ce=-1;Ce<=1;Ce++){const _e=G.current.get(`${N+ue},${te+Ce}`);_e&&_e.forEach(fe=>pe.add(fe))}const ge=Array.from(pe).sort((ue,Ce)=>Ce-ue);for(const ue of ge){const Ce=L.current[ue];if(!(!Ce||!Ce.points))if(Ce.tool==="rect-highlight")for(let _e=0;_e<Ce.points.length;_e+=2){if(!Ce.points[_e+1])continue;const fe=Ce.points[_e].x,Ae=Ce.points[_e].y,ze=Ce.points[_e+1].x,st=Ce.points[_e+1].y,ot=Math.max(fe,Math.min(X,fe+ze)),cn=Math.max(Ae,Math.min(R,Ae+st)),Kt=X-ot,Pn=R-cn;if(Kt*Kt+Pn*Pn<W)return ue}else{const _e=(Ce.width||3)/2,fe=D+_e,Ae=fe*fe;for(const ze of Ce.points){const st=X-ze.x,ot=R-ze.y;if(st*st+ot*ot<Ae)return ue}}}return-1},xe=oe.useRef(!1),be=(X,R)=>{const D=ke(X,R);D!==-1&&(L.current=L.current.filter((W,N)=>N!==D),ve(),xe.current=!0,C.current=!0,a&&!o&&a(D))},j=X=>{if(!t)return;X.target.setPointerCapture(X.pointerId),A.current=!0;const R=me(X);R&&(P.current=R,S.current=[R],I.current=R,e==="eraser"&&be(R.x,R.y))},ce=X=>{if(!t)return;const R=X.getCoalescedEvents?X.getCoalescedEvents():[X];for(const D of R){const W=me(D);W&&(P.current=W,A.current&&(e==="eraser"?be(W.x,W.y):(e==="pen"||e==="highlighter")&&(I.current?Math.pow(W.x-I.current.x,2)+Math.pow(W.y-I.current.y,2):100)>4&&(S.current.push(W),I.current=W)))}},Ee=X=>{if(A.current){try{X.target.releasePointerCapture(X.pointerId)}catch{}if(A.current=!1,S.current.length>0&&(e==="pen"||e==="highlighter")){const R=[...S.current];let D=1/0,W=1/0,N=-1/0,te=-1/0;for(const pe of R)pe.x<D&&(D=pe.x),pe.x>N&&(N=pe.x),pe.y<W&&(W=pe.y),pe.y>te&&(te=pe.y);i({tool:e,points:R,color:l,width:u,bbox:{minX:D,minY:W,maxX:N,maxY:te}})}C.current&&o&&(o([...L.current]),C.current=!1),S.current=[],I.current=null}};return w.jsxs("div",{ref:E,className:`absolute inset-0 z-20 pointer-events-none transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,children:[w.jsx("canvas",{ref:y,className:"absolute inset-0 touch-none pointer-events-none",style:{mixBlendMode:e==="highlighter"?p||(d?"screen":"multiply"):d?"multiply":"screen"}}),w.jsx("canvas",{ref:v,className:`absolute inset-0 touch-none ${t&&(e==="pen"||e==="eraser")?"pointer-events-auto":"pointer-events-none"}`,style:{cursor:e==="eraser"?"none":"crosshair",mixBlendMode:e==="highlighter"?p||(d?"screen":"multiply"):d?"multiply":"screen"},onPointerDown:j,onPointerMove:ce,onPointerUp:Ee,onPointerLeave:Ee,onPointerCancel:Ee})]})},bB=cf.memo(yB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=e=>{const t=wB(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=oe.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:l,...u},m)=>oe.createElement("svg",{ref:m,...xB,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:LE("lucide",a),...!o&&!TB(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,p])=>oe.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const n=oe.forwardRef(({className:i,...a},o)=>oe.createElement(EB,{ref:o,iconNode:t,className:LE(`lucide-${vB(Zw(e))}`,`lucide-${e}`,i),...a}));return n.displayName=Zw(e),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],AB=wt("check",_B);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],SB=wt("chevron-right",CB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],IB=wt("circle-alert",kB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],RB=wt("circle-check-big",NB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],PB=wt("crown",MB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],LB=wt("droplet",DB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],qB=wt("eraser",OB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HB=wt("eye-off",BB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FB=wt("eye",UB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zB=wt("loader-circle",GB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ex=wt("lock",VB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],jB=wt("mail",WB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M5 12h14",key:"1ays0h"}]],OE=wt("minus",YB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],KB=wt("mouse-pointer-2",$B);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dm=wt("pen",QB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],XB=wt("phone",JB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eH=wt("plus",ZB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],nH=wt("rotate-ccw",tH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rH=wt("star",iH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sH=wt("trash-2",aH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],qE=wt("type",oH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cH=wt("user",lH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],dH=wt("zap",uH),hH=({fontSize:e,setFontSize:t,min:n=14,max:i=32})=>{const[a,o]=oe.useState(!1),l=oe.useRef(null);return oe.useEffect(()=>{const u=m=>{l.current&&!l.current.contains(m.target)&&o(!1)};return a&&(document.addEventListener("mousedown",u),document.addEventListener("touchstart",u)),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[a]),w.jsxs("div",{ref:l,className:"fixed top-36 right-8 z-[100] isolate",children:[w.jsx("style",{children:`
        .t-fab-shadow { box-shadow: 0 18px 50px rgba(0,0,0,0.55); }
        .slider-bar-shadow { box-shadow: 0 18px 50px rgba(0,0,0,0.55); }
        .gradient-chip { background: linear-gradient(180deg, #111a2a, #0f1726); }
      `}),w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>o(!0),className:`
            w-[54px] h-[54px] rounded-full border border-white/15 text-white/90 
            grid place-items-center cursor-pointer t-fab-shadow gradient-chip
            transition-all duration-300 ease-out
            ${a?"opacity-0 scale-90 pointer-events-none translate-y-[-6px]":"opacity-100 scale-100 translate-y-0"}
          `,"aria-label":"Open text size control",children:w.jsx("span",{className:"font-bold text-lg tracking-wide",children:"T"})}),w.jsxs("div",{className:`
            absolute top-0 right-0
            h-[54px] rounded-full border border-white/15 
            flex items-center gap-3 px-4 overflow-hidden slider-bar-shadow gradient-chip
            transition-all duration-300 ease-out origin-right
            ${a?"w-[320px] opacity-100 scale-100 translate-y-0 pointer-events-auto":"w-[54px] opacity-0 scale-90 translate-y-[-6px] pointer-events-none"}
          `,children:[w.jsx("button",{onClick:u=>{u.stopPropagation(),t(Math.max(n,e-2))},className:"w-8 h-8 rounded-lg grid place-items-center bg-white/5 border border-white/10 text-white/90 hover:bg-white/10 active:scale-95 transition-all flex-shrink-0",children:w.jsx(OE,{size:16})}),w.jsx("input",{type:"range",min:n,max:i,value:e,onChange:u=>t(Number(u.target.value)),className:"flex-1 h-1.5 bg-white/15 rounded-full appearance-none cursor-pointer accent-blue-500"}),w.jsx("button",{onClick:u=>{u.stopPropagation(),t(Math.min(i,e+2))},className:"w-8 h-8 rounded-lg grid place-items-center bg-white/5 border border-white/10 text-white/90 hover:bg-white/10 active:scale-95 transition-all flex-shrink-0",children:w.jsx(eH,{size:16})}),w.jsxs("div",{className:"flex items-center gap-1 text-white/90 flex-shrink-0 pl-1",children:[w.jsx(qE,{size:18}),w.jsx("div",{className:"w-px h-4 bg-white/15 mx-2"}),w.jsxs("span",{className:"text-xs font-mono text-white/65 tabular-nums w-8 text-right",children:[e,"px"]})]})]})]})]})},mH=(e,t)=>{if(e.startsWith("#")){const i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return{r:i,g:a,b:o,rgba:`rgba(${i}, ${a}, ${o}, ${t})`}}const n=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(n){const i=Number(n[1]),a=Number(n[2]),o=Number(n[3]);return{r:i,g:a,b:o,rgba:`rgba(${i}, ${a}, ${o}, ${t})`}}return{r:255,g:212,b:0,rgba:`rgba(255, 212, 0, ${t})`}},hm=(e,t,n=!1)=>{if(t.points.length<1)return;const{points:i,tool:a,color:o,size:l}=t;if(e.lineWidth=l,e.lineCap="round",e.lineJoin="round",a==="eraser")e.globalCompositeOperation="destination-out",e.strokeStyle="rgba(0,0,0,1)";else if(a==="highlighter"){e.globalCompositeOperation=n?"screen":"multiply";const m=n?.32:.12,{r:d,g:p,b:y}=mH(o,1);e.strokeStyle=`rgba(${d}, ${p}, ${y}, ${m})`,e.shadowBlur=10,e.shadowColor=`rgba(${d}, ${p}, ${y}, 0.6)`}else e.globalCompositeOperation="source-over",e.strokeStyle=o;if(t.points.length===1){const m=i[0],d=Math.max(l/2,1);e.beginPath(),e.arc(m.x,m.y,d,0,Math.PI*2),a==="eraser"?e.fillStyle="rgba(0,0,0,1)":a==="highlighter"?e.fillStyle=e.strokeStyle:e.fillStyle=o,e.fill(),e.shadowBlur=0,e.shadowColor="transparent",e.globalCompositeOperation="source-over";return}e.beginPath(),e.moveTo(i[0].x,i[0].y);for(let m=1;m<i.length-1;m++){const d=i[m],p=i[m+1],y={x:(d.x+p.x)/2,y:(d.y+p.y)/2};e.quadraticCurveTo(d.x,d.y,y.x,y.y)}const u=i[i.length-1];e.lineTo(u.x,u.y),e.stroke(),e.shadowBlur=0,e.shadowColor="transparent",e.globalCompositeOperation="source-over"},tx=(e,t)=>{const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top,pressure:e.pressure}},fH=({currentTool:e,strokes:t,setStrokes:n,currentColor:i="#FCD34D",isDarkMode:a=!1})=>{const o=oe.useRef(null),l=oe.useRef(null),u=oe.useRef(null),m=oe.useRef(!1),d=oe.useRef(null),p=oe.useRef(t),y=oe.useRef(null),v={select:{color:i,size:0},pen:{color:i,size:3},highlighter:{color:i,size:14},eraser:{color:"rgb(0,0,0)",size:30}},E=oe.useCallback(()=>{if(!o.current)return;const L=o.current.getContext("2d");L&&(L.clearRect(0,0,o.current.width,o.current.height),p.current.forEach(P=>{hm(L,P,a)}))},[a]),A=oe.useCallback(()=>{if(!l.current)return;const L=l.current.getContext("2d");L&&L.clearRect(0,0,l.current.width,l.current.height)},[a]);oe.useEffect(()=>{const L=()=>{if(!o.current||!l.current||!u.current)return;const P=u.current,G=typeof window<"u"?Math.min(window.devicePixelRatio||1,2):1;[o.current,l.current].forEach(J=>{J.width=P.clientWidth*G,J.height=P.clientHeight*G,J.style.width=`${P.clientWidth}px`,J.style.height=`${P.clientHeight}px`;const q=J.getContext("2d");q&&q.setTransform(G,0,0,G,0,0)}),E(),A()};return window.addEventListener("resize",L),L(),()=>window.removeEventListener("resize",L)},[E,A]),oe.useEffect(()=>{p.current=t,E(),A()},[t,E,A]);const C=L=>{var q,V;if(!l.current||e==="select")return;l.current.setPointerCapture(L.pointerId);const P=tx(L,l.current),G=v[e];m.current=!0,d.current={points:[P],tool:e,color:G.color,size:G.size},y.current=P;const J=e==="eraser"?(q=o.current)==null?void 0:q.getContext("2d"):(V=l.current)==null?void 0:V.getContext("2d");J&&hm(J,d.current,a)},S=L=>{var J,q;if(!m.current||!l.current||e==="select")return;const P=L.getCoalescedEvents?L.getCoalescedEvents():[L],G=d.current;if(G)for(const V of P){const ve=tx(V,l.current),ne=y.current;if(ne){const de=ve.x-ne.x,me=ve.y-ne.y;if(de*de+me*me<4)continue}G.points.push(ve);const F=e==="eraser"?(J=o.current)==null?void 0:J.getContext("2d"):(q=l.current)==null?void 0:q.getContext("2d");F&&ne&&hm(F,{...G,points:[ne,ve]},a),y.current=ve}},I=L=>{if(!m.current)return;l.current&&l.current.releasePointerCapture(L.pointerId),m.current=!1;const P=d.current;if(P){const G=[...p.current,P];p.current=G,n(G)}d.current=null,y.current=null,E(),A()};return w.jsxs("div",{ref:u,className:`absolute inset-0 w-full h-full ${e==="select"?"cursor-default":"cursor-crosshair"}`,children:[w.jsx("canvas",{ref:o,className:"absolute inset-0 block pointer-events-none"}),w.jsx("canvas",{ref:l,className:"absolute inset-0 block touch-none",onPointerDown:C,onPointerMove:S,onPointerUp:I,onPointerLeave:I})]})},pH=({isActive:e,currentTool:t,highlightMode:n="freehand",strokes:i,setStrokes:a,currentColor:o,isDarkMode:l=!1})=>e?w.jsx("div",{className:"absolute inset-0 z-[200] pointer-events-none",children:w.jsx("div",{className:`absolute inset-0 ${t==="select"||t==="highlighter"&&n==="text"?"pointer-events-none":"pointer-events-auto"}`,children:w.jsx(fH,{currentTool:t,strokes:i,setStrokes:a,currentColor:o,isDarkMode:l})})}):null,gH=[{name:"Yellow",value:"#FCD34D",bg:"bg-yellow-400"},{name:"Mint",value:"#6EE7B7",bg:"bg-emerald-300"},{name:"Red",value:"#EF4444",bg:"bg-red-500"},{name:"White",value:"#FFFFFF",bg:"bg-white",className:"border border-slate-300"},{name:"Black",value:"#111827",bg:"bg-slate-900"}],yH=({currentTool:e,setTool:t,onUndo:n,onClear:i,canUndo:a,onClose:o,currentColor:l="#FCD34D",onColorChange:u,highlightMode:m="freehand",onHighlightModeChange:d})=>{const[p,y]=oe.useState(!1),v=C=>S=>{S.preventDefault(),t(C)},E=C=>S=>{S.preventDefault(),u==null||u(C)},A=C=>S=>{S.preventDefault(),d==null||d(C)};return p?w.jsx("button",{onPointerDown:C=>{C.preventDefault(),y(!1)},onClick:()=>y(!1),className:"w-12 h-12 rounded-full bg-white/95 dark:bg-slate-900/95 border border-slate-200 dark:border-slate-700 shadow-xl backdrop-blur-xl flex items-center justify-center text-slate-700 dark:text-slate-200 hover:scale-105 transition-transform",title:"Open toolbar",children:w.jsx(dm,{size:18,strokeWidth:2})}):w.jsxs("div",{className:"flex items-center gap-2 bg-white/95 dark:bg-slate-900/95 border border-slate-200 dark:border-slate-700 rounded-2xl px-4 py-2 shadow-xl backdrop-blur-xl touch-manipulation",children:[w.jsx("button",{onPointerDown:C=>{C.preventDefault(),y(!0)},onClick:()=>y(!0),className:"p-2 rounded-full transition-all text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800",title:"Collapse toolbar",children:w.jsx(SB,{size:18,strokeWidth:2})}),w.jsx("button",{onPointerDown:v("select"),onClick:()=>t("select"),className:`p-2 rounded-full transition-all ${e==="select"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Select",children:w.jsx(KB,{size:18,strokeWidth:2})}),w.jsx("button",{onPointerDown:v("pen"),onClick:()=>t("pen"),className:`p-2 rounded-full transition-all ${e==="pen"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Pen",children:w.jsx(dm,{size:18,strokeWidth:2})}),w.jsx("button",{onPointerDown:v("eraser"),onClick:()=>t("eraser"),className:`p-2 rounded-full transition-all ${e==="eraser"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Eraser",children:w.jsx(qB,{size:18,strokeWidth:2})}),w.jsx("button",{onPointerDown:v("highlighter"),onClick:()=>t("highlighter"),className:`p-2 rounded-full transition-all ${e==="highlighter"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Highlighter",children:w.jsx(OE,{size:18,strokeWidth:3})}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),e==="highlighter"&&d&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onPointerDown:A("text"),onClick:()=>d("text"),className:`p-2 rounded-full transition-all ${m==="text"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Text highlight",children:w.jsx(qE,{size:16,strokeWidth:2})}),w.jsx("button",{onPointerDown:A("freehand"),onClick:()=>d("freehand"),className:`p-2 rounded-full transition-all ${m==="freehand"?"bg-slate-900 dark:bg-slate-700 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Freehand highlight",children:w.jsx(dm,{size:16,strokeWidth:2})})]}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"})]}),w.jsx("div",{className:"flex items-center gap-1.5",children:gH.map(C=>w.jsx("button",{onPointerDown:E(C.value),onClick:()=>u==null?void 0:u(C.value),className:`w-7 h-7 rounded-full transition-all hover:scale-110 ${C.bg} ${C.className||""} ${l===C.value?"ring-2 ring-blue-500 ring-offset-2 ring-offset-white dark:ring-offset-slate-900":"hover:ring-2 hover:ring-slate-300 dark:hover:ring-slate-600"}`,title:C.name},C.value))}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),w.jsx("div",{className:"p-2 rounded-full text-slate-500 dark:text-slate-400",children:w.jsx(LB,{size:18,strokeWidth:2})}),w.jsx("button",{onClick:n,disabled:!a,className:`p-2 rounded-full transition-all ${a?"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800":"text-slate-300 dark:text-slate-700 cursor-not-allowed"}`,title:"Undo",children:w.jsx(nH,{size:18,strokeWidth:2})}),w.jsx("button",{onClick:i,className:"p-2 rounded-full transition-all text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800",title:"Clear All",children:w.jsx(sH,{size:18,strokeWidth:2})})]})},BE=e=>{if(!e)return{r:255,g:212,b:0};if(e.startsWith("#")&&e.length>=7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);return t?{r:Number(t[1]),g:Number(t[2]),b:Number(t[3])}:{r:255,g:212,b:0}},bH=(e,t)=>{const{r:n,g:i,b:a}=BE(e);return`rgba(${n}, ${i}, ${a}, ${t?.2:.12})`},vH=e=>e,wH=(e,t)=>{const{r:n,g:i,b:a}=BE(e);return`rgba(${n}, ${i}, ${a}, ${t?.6:.45})`},xH=cf.memo(({content:e,allowSelection:t,selectionBg:n,selectionTextColor:i,selectionGlow:a,setSelectedImage:o,isGIC:l,fontSize:u})=>{const m=t?{"--selection-bg":n,"--selection-fg":i,"--selection-glow":a}:void 0;return w.jsx("div",{className:`prose-sm prose-slate dark:prose-invert max-w-none text-slate-800 dark:text-slate-200 leading-7 md:leading-8 ${t?"allow-selection cursor-text":"select-none"}`,style:{fontSize:`${u}px`,...m||{}},onContextMenu:d=>d.preventDefault(),onCopy:d=>{t&&(d.preventDefault(),alert("Content copying is disabled to protect medical data."))},children:w.jsx(Df,{remarkPlugins:[i5],rehypePlugins:[pB],components:{img:({node:d,...p})=>w.jsxs("div",{className:"my-10 relative group select-none",children:[w.jsx("div",{className:"absolute inset-0 z-40 bg-transparent",onContextMenu:y=>y.preventDefault()}),p.src&&p.src.includes("impression_downloadable_summary.png")&&w.jsxs("a",{href:p.src,download:"Impression_Materials_Summary.png",onClick:y=>y.stopPropagation(),className:"absolute top-4 right-4 bg-white/90 dark:bg-slate-800/90 text-slate-900 dark:text-white px-4 py-2 rounded-lg font-bold shadow-lg z-[60] hover:bg-white dark:hover:bg-slate-700 transition-colors flex items-center gap-2 pointer-events-auto cursor-pointer border border-slate-200 dark:border-white/10",title:"Download Summary Table",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),w.jsx("img",{...p,onClick:()=>p.src&&o(p.src),className:"rounded-2xl shadow-xl border border-slate-200 dark:border-white/10 w-full max-w-[800px] mx-auto object-contain transition-transform hover:scale-[1.01] duration-500 cursor-zoom-in relative z-30 select-none pointer-events-auto bg-white",draggable:!1,alt:p.alt||"Medical Diagram",style:{display:"block"}}),p.alt&&w.jsx("p",{className:"text-center text-base text-slate-500 dark:text-slate-400 mt-4 font-sans font-medium",children:p.alt})]}),table:({node:d,...p})=>w.jsx("div",{className:"overflow-x-auto my-6 border border-slate-300 dark:border-slate-600 rounded-lg",children:w.jsx("table",{...p,className:"min-w-full text-left border-collapse bg-white dark:bg-slate-900"})}),thead:({node:d,...p})=>w.jsx("thead",{...p,className:"bg-slate-100 dark:bg-slate-800"}),th:({node:d,...p})=>w.jsx("th",{...p,className:"px-6 py-4 border border-slate-300 dark:border-slate-600 font-bold text-slate-900 dark:text-white bg-slate-100 dark:bg-slate-800 text-sm md:text-base align-top"}),td:({node:d,...p})=>w.jsx("td",{...p,className:`px-6 py-4 border border-slate-300 dark:border-slate-600 text-slate-800 dark:text-slate-200 align-top ${l?"text-lg md:text-xl":"text-sm md:text-base"}`}),h1:({node:d,...p})=>w.jsx("h1",{...p,className:"medical-serif text-3xl md:text-4xl font-black mb-8 text-slate-900 dark:text-white tracking-tight"}),h2:({node:d,...p})=>w.jsxs("div",{className:"mt-16 mb-8 pt-8 relative",children:[w.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-slate-300 dark:via-white/20 to-transparent"}),w.jsx("h2",{...p,className:"medical-serif text-2xl md:text-3xl font-bold text-slate-900 dark:text-white"})]}),h3:({node:d,...p})=>w.jsx("h3",{...p,className:"medical-serif text-xl md:text-2xl font-bold mt-10 mb-5 text-slate-800 dark:text-slate-200"}),ol:({node:d,...p})=>w.jsx("ol",{...p,className:"space-y-3 my-6 list-decimal pl-8"}),ul:({node:d,...p})=>w.jsx("ul",{...p,className:"space-y-3 my-6 list-disc pl-8 marker:text-slate-500"}),strong:({node:d,...p})=>w.jsx("strong",{...p,className:"font-bold text-slate-900 dark:text-white"}),hr:({node:d,...p})=>w.jsx("div",{className:"my-14 h-px bg-gradient-to-r from-transparent via-slate-300 dark:via-white/20 to-transparent"}),iframe:({node:d,...p})=>w.jsx("div",{className:"my-10 relative w-full aspect-video rounded-2xl overflow-hidden shadow-xl border border-slate-200 dark:border-white/10",children:w.jsx("iframe",{...p,className:"absolute inset-0 w-full h-full"})}),video:({node:d,...p})=>w.jsx("div",{className:"my-10 relative w-full rounded-2xl overflow-hidden shadow-xl border border-slate-200 dark:border-white/10",children:w.jsx("video",{...p,className:"w-full",controls:!0})}),p:({node:d,...p})=>w.jsx("div",{...p,className:l?"text-lg md:text-xl leading-relaxed mb-6":"mb-4"}),li:({node:d,...p})=>w.jsx("li",{...p,className:l?"text-lg md:text-xl leading-relaxed mb-3":"mb-2"})},children:e})})},(e,t)=>e.content===t.content&&e.allowSelection===t.allowSelection&&e.selectionBg===t.selectionBg&&e.selectionTextColor===t.selectionTextColor&&e.selectionGlow===t.selectionGlow&&e.fontSize===t.fontSize),TH=({subject:e,topic:t,stream:n,onStartQuiz:i,onBack:a,isDarkMode:o})=>{const[l,u]=oe.useState(null),[m,d]=oe.useState(!0),[p,y]=oe.useState(null),[v,E]=oe.useState(!1),[A,C]=oe.useState("pen"),[S,I]=oe.useState([]),[L,P]=oe.useState("yellow"),[G,J]=oe.useState("#ef4444"),[q,V]=oe.useState(3),[ve,ne]=oe.useState(30),[F,de]=oe.useState(18),[me,ke]=oe.useState(!1),[xe,be]=oe.useState("pen"),[j,ce]=oe.useState([]),[Ee,X]=oe.useState("#FCD34D"),[R,D]=oe.useState("freehand"),W=me&&xe==="highlighter"&&R==="text",N=v&&A==="highlighter"||W,te=W?Ee:L==="yellow"?"#FFD400":"#FF3B3B",pe=bH(te,!!o),ge=vH(te),ue=wH(te,!!o),Ce=`dentedge_study_v1_${e}_${t||"main"}`;oe.useEffect(()=>{const fe=localStorage.getItem(Ce);if(fe)try{const{savedStrokes:Ae}=JSON.parse(fe);Ae&&I(Ae)}catch(Ae){console.error("Failed to parse saved study data",Ae)}},[Ce]),oe.useEffect(()=>{S.length>0&&localStorage.setItem(Ce,JSON.stringify({savedStrokes:S}))},[S,Ce]),oe.useEffect(()=>{const fe=()=>{if(!N)return;const Ae=window.getSelection();if(!Ae||Ae.rangeCount===0)return;const ze=Ae.getRangeAt(0);if(Ae.toString().trim().length>2){const ot=document.getElementById("content-area");if(!ot)return;const cn=ot.getBoundingClientRect(),Kt=ze.getClientRects(),Pn=[];for(let si=0;si<Kt.length;si++){const Qt=Kt[si];Pn.push({x:Qt.left-cn.left,y:Qt.top-cn.top}),Pn.push({x:Qt.width,y:Qt.height})}if(Pn.length>0){const si={tool:"rect-highlight",points:Pn,color:te,width:0};I(Qt=>[...Qt,si]),setTimeout(()=>{var Qt;window.getSelection&&((Qt=window.getSelection())==null||Qt.removeAllRanges())},100)}}};return document.addEventListener("mouseup",fe),document.addEventListener("touchend",fe),()=>{document.removeEventListener("mouseup",fe),document.removeEventListener("touchend",fe)}},[N,te]),oe.useEffect(()=>{(async()=>{d(!0);try{const Ae=await B3(e,n,t);u(Ae)}catch(Ae){console.error("Failed to load summary",Ae)}finally{d(!1)}})()},[e,n,t]);const _e=n==="FCPS"?"purple":n==="ORE"?"rose":"cyan";return m?w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[600px]",children:[w.jsx("div",{className:`animate-spin rounded-full h-16 w-16 border-b-4 ${_e==="purple"?"border-purple-500":_e==="rose"?"border-rose-500":"border-cyan-500"}`}),w.jsx("p",{className:"mt-4 font-bold text-slate-500",children:"Loading Notes..."})]}):l?w.jsxs("div",{className:"max-w-[1600px] mx-auto pb-24 px-4 sm:px-6 relative",children:[w.jsx("div",{className:"flex items-center gap-6 mb-10 py-4 justify-between border-b dark:border-white/10",children:w.jsxs("div",{className:"flex items-center gap-6",children:[w.jsx("button",{onClick:a,className:"p-3 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),w.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:t||e})]})}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 relative",children:[w.jsx("div",{className:"lg:col-span-9",children:w.jsx("section",{className:"glass-panel p-10 md:p-14 rounded-[2.5rem] bg-white dark:bg-black border dark:border-white/5 relative",children:w.jsxs("div",{className:"relative",id:"content-area",children:[w.jsx(bB,{tool:v?A:"highlighter",active:v||N,strokes:S,onStrokeComplete:fe=>I(Ae=>[...Ae,fe]),onEraseStroke:fe=>I(Ae=>Ae.filter((ze,st)=>st!==fe)),onStrokesUpdate:fe=>I(fe),color:G,strokeWidth:q,eraserSize:ve,highlightBlendMode:W?"screen":void 0,isDarkMode:o}),w.jsx(xH,{content:l.content,allowSelection:N,selectionBg:pe,selectionTextColor:ge,selectionGlow:ue,setSelectedImage:y,fontSize:F,isGIC:(t==null?void 0:t.toLowerCase().includes("gic"))||l.subject===ie.DENTAL_MATERIALS&&(t==null?void 0:t.toLowerCase().includes("glass"))}),w.jsx(pH,{isActive:me,currentTool:xe,highlightMode:R,strokes:j,setStrokes:ce,currentColor:Ee,isDarkMode:o})]})})}),w.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[w.jsxs("div",{className:"p-6 bg-amber-50 dark:bg-amber-900/10 rounded-3xl border border-amber-200 dark:border-amber-500/20",children:[w.jsx("h3",{className:"font-bold text-amber-600 mb-4 text-lg",children:"Quick Pearls"}),w.jsx("ul",{className:"space-y-3 text-base",children:l.keyPoints.map((fe,Ae)=>w.jsxs("li",{children:[" ",fe]},Ae))})]}),w.jsx("button",{onClick:i,className:"w-full p-6 bg-cyan-600 text-white font-bold rounded-3xl shadow-lg shadow-cyan-900/20 transition-transform active:scale-95 text-lg",children:"Start Quiz"})]})]}),typeof document<"u"&&kC.createPortal(w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>ke(fe=>!fe),className:`fixed top-20 right-8 z-[260] p-3 rounded-2xl backdrop-blur-xl border shadow-2xl transition-all active:scale-95 ${me?"bg-blue-600 text-white border-blue-500/40 shadow-blue-900/30":"bg-white/90 dark:bg-slate-800/90 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-white/10 hover:text-cyan-600 dark:hover:text-white"}`,title:me?"Exit Study Mode":"Study Mode","aria-pressed":me,children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),w.jsx(hH,{fontSize:F,setFontSize:de}),me&&w.jsx("div",{className:"fixed top-52 right-8 z-[255] pointer-events-auto",children:w.jsx(yH,{currentTool:xe,setTool:be,onUndo:()=>ce(fe=>fe.slice(0,-1)),onClear:()=>ce([]),canUndo:j.length>0,currentColor:Ee,onColorChange:X,highlightMode:R,onHighlightModeChange:D})}),v&&w.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[90] flex items-center gap-4 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl p-4 rounded-full border shadow-2xl animate-in slide-in-from-bottom-10",children:[w.jsx("button",{onClick:()=>{I([]),localStorage.removeItem(Ce)},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg mr-2",title:"Clear all study marks",children:"Clear"}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),w.jsx("button",{onClick:()=>I(fe=>fe.slice(0,-1)),disabled:S.length===0,className:`p-2 font-bold ${S.length===0?"text-slate-300 dark:text-slate-700":"text-slate-500 hover:text-slate-900 dark:hover:text-white"}`,children:"Undo"}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700"}),w.jsxs("button",{onClick:()=>C("pen"),className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all ${A==="pen"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[w.jsx("div",{className:`w-3 h-3 rounded-full bg-red-500 shadow-sm ${A==="pen"?"ring-2 ring-white":""}`}),w.jsx("span",{className:"font-bold text-sm",children:"Pen"})]}),w.jsxs("button",{onClick:()=>C("highlighter"),className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all ${A==="highlighter"?"bg-slate-100 dark:bg-white/10 ring-2 ring-blue-500":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[w.jsx("div",{onClick:fe=>{fe.stopPropagation(),P("yellow"),C("highlighter")},className:`w-4 h-4 rounded-full bg-yellow-400 border border-yellow-600/20 ${L==="yellow"?"ring-2 ring-blue-500 ring-offset-2":""}`,title:"Yellow Highlight"}),w.jsx("div",{onClick:fe=>{fe.stopPropagation(),P("red"),C("highlighter")},className:`w-4 h-4 rounded-full bg-red-500 border border-red-600/20 ${L==="red"?"ring-2 ring-blue-500 ring-offset-2":""}`,title:"Red Text Highlight"}),w.jsx("span",{className:"font-bold text-sm ml-1",children:"Highlighter"})]}),w.jsxs("button",{onClick:()=>C("eraser"),className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all ${A==="eraser"?"bg-slate-800 text-white shadow-lg":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),w.jsx("span",{className:"font-bold text-sm",children:"Eraser"})]}),w.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),w.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 font-black text-blue-500 hover:text-blue-600",children:"Close"})]})]}),document.body),p&&w.jsx(gB,{src:p,onClose:()=>y(null)})]}):w.jsx("div",{children:"Error loading content"})},EH=({subject:e,topic:t,stream:n,onClose:i,onReviewNotes:a})=>{const[o,l]=oe.useState([]),[u,m]=oe.useState([]),[d,p]=oe.useState(!1),[y,v]=oe.useState(0),[E,A]=oe.useState(null),[C,S]=oe.useState(!1),[I,L]=oe.useState(0),[P,G]=oe.useState(!1),[J,q]=oe.useState(!1),[V,ve]=oe.useState(null),[ne,F]=oe.useState("review"),[de,me]=oe.useState(new Map),[ke,xe]=oe.useState(null),[be,j]=oe.useState(!1),[ce,Ee]=oe.useState(!1);oe.useEffect(()=>{if(V==="Challenge"&&ke!==null&&!J){const fe=setInterval(()=>{xe(Ae=>Ae===null||Ae<=0?(clearInterval(fe),q(!0),0):Ae-1)},1e3);return()=>clearInterval(fe)}},[V,ke,J]);const X=fe=>{const Ae=Math.floor(fe/60),ze=fe%60;return`${Ae}:${ze.toString().padStart(2,"0")}`},R=()=>{if(be){j(!1),v(0);return}V||J?(ve(null),q(!1),L(0),v(0),me(new Map),m([]),A(null),S(!1)):a?p(!0):i()};if(d)return w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:w.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] p-8 max-w-md w-full shadow-2xl border border-slate-200 dark:border-white/10 animate-in zoom-in-95 duration-200",children:[w.jsx("div",{className:"w-16 h-16 bg-cyan-100 dark:bg-cyan-500/20 rounded-2xl flex items-center justify-center text-cyan-600 dark:text-cyan-400 mb-6 mx-auto",children:w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),w.jsx("h2",{className:"text-2xl font-bold text-center text-slate-900 dark:text-white mb-2",children:"Before you go..."}),w.jsxs("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-8",children:["Would you like to review the high-yield notes for ",w.jsx("strong",{children:t||e}),"?"]}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("button",{onClick:()=>{p(!1),a&&a()},className:"w-full py-3.5 rounded-xl font-bold bg-cyan-600 text-white hover:bg-cyan-500 hover:scale-[1.02] transition-all shadow-lg shadow-cyan-900/20 flex items-center justify-center gap-2",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Yes, Review Notes"]}),w.jsx("button",{onClick:()=>{p(!1),i()},className:"w-full py-3.5 rounded-xl font-bold bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"No, Exit to Dashboard"})]})]})});const D=async fe=>{ve(fe),A(null),S(!1),G(!0);let Ae=15;fe==="Medium"&&(Ae=10),fe==="Hard"&&(Ae=5),fe==="Challenge"&&(Ae=100);try{const ze=await jT(e,Ae,n,t,fe);l(ze),m([]),fe==="Challenge"?(xe(ze.length*60),F("test")):xe(null)}catch(ze){console.error("Failed to load MCQs",ze)}finally{G(!1)}},W=fe=>{if(ne==="review"){if(C)return;A(fe)}else A(fe)},N=()=>{E!==null&&ne==="review"&&(S(!0),E===o[y].correctAnswerIndex&&L(fe=>fe+1))},te=()=>{if(y>=o.length)return;const fe=o[y];m(Ae=>[...Ae,fe]),pe(!0)},pe=(fe=!1)=>{if(ne==="test"&&!fe&&E!==null&&(me(Ae=>new Map(Ae).set(y,E)),E===o[y].correctAnswerIndex&&L(Ae=>Ae+1)),y<o.length-1)v(Ae=>Ae+1),A(null),S(!1);else{if(u.length>0||fe&&u.length>=0){let Ae=[...u];if(fe&&Ae.push(o[y]),Ae.length>0){const ze=Ae.sort(()=>Math.random()-.5).map(st=>({...st,wasSkipped:!0}));l(st=>[...st,...ze]),m([]),v(st=>st+1),A(null),S(!1);return}}q(!0)}},ue=(()=>{switch(n){case"FCPS":return"purple";case"ORE":return"rose";default:return"cyan"}})();if(!V)return w.jsxs("div",{className:"max-w-4xl mx-auto pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{children:[w.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:[t||e," Quiz"]}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Select your challenge level to begin."})]}),w.jsx("button",{onClick:R,className:"p-2 hover:bg-slate-200 dark:hover:bg-white/5 rounded-full text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"flex justify-center mb-8",children:w.jsxs("div",{className:"flex p-1 bg-white/60 dark:bg-slate-900/50 rounded-full backdrop-blur-md border border-slate-200 dark:border-white/5 shadow-sm",children:[w.jsx("button",{onClick:()=>F("review"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all ${ne==="review"?"bg-cyan-600 text-white shadow-lg shadow-cyan-900/50":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Review Knowledge"}),w.jsx("button",{onClick:()=>F("test"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all ${ne==="test"?"bg-cyan-600 text-white shadow-lg shadow-cyan-900/50":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Test Knowledge"})]})}),w.jsx("div",{className:"text-center mb-8 text-slate-500 dark:text-slate-400 text-sm",children:ne==="review"?"Immediate feedback. Correct answers and explanations shown after each question.":"Simulation mode. No feedback until the end. Results grouped by accuracy."}),w.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 ${ne==="review"?"lg:grid-cols-3":"lg:grid-cols-4"} gap-6`,children:[w.jsxs("div",{onClick:()=>D("Easy"),className:"glass-panel p-6 rounded-[2rem] cursor-pointer hover:border-green-500/50 hover:bg-green-500/5 transition-all group relative overflow-hidden bg-white/60 dark:bg-slate-800/40",children:[w.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-green-500/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),w.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-500/20 rounded-xl flex items-center justify-center text-green-600 dark:text-green-400 mb-6 group-hover:scale-110 transition-transform",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),w.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Easy"}),w.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:"Recall based. Good for quick review."})]}),w.jsxs("div",{onClick:()=>D("Medium"),className:`glass-panel p-6 rounded-[2rem] cursor-pointer hover:bg-opacity-50 transition-all group relative overflow-hidden bg-white/60 dark:bg-slate-800/40 ${ue==="purple"?"hover:border-purple-500/50 hover:bg-purple-500/5":ue==="rose"?"hover:border-rose-500/50 hover:bg-rose-500/5":"hover:border-cyan-500/50 hover:bg-cyan-500/5"}`,children:[w.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity ${ue==="purple"?"bg-purple-500/10":ue==="rose"?"bg-rose-500/10":"bg-cyan-500/10"}`}),w.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform ${ue==="purple"?"bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400":ue==="rose"?"bg-rose-100 dark:bg-rose-500/20 text-rose-600 dark:text-rose-400":"bg-cyan-100 dark:bg-cyan-500/20 text-cyan-600 dark:text-cyan-400"}`,children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),w.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Medium"}),w.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:"Clinical scenarios. Standard."})]}),w.jsxs("div",{onClick:()=>D("Hard"),className:"glass-panel p-6 rounded-[2rem] cursor-pointer hover:border-red-500/50 hover:bg-red-500/5 transition-all group relative overflow-hidden bg-white/60 dark:bg-slate-800/40",children:[w.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),w.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-500/20 rounded-xl flex items-center justify-center text-red-600 dark:text-red-400 mb-6 group-hover:scale-110 transition-transform",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),w.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Hard"}),w.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:"Complex vignettes."})]}),ne!=="review"&&w.jsxs("div",{onClick:()=>D("Challenge"),className:"glass-panel p-6 rounded-[2rem] cursor-pointer hover:border-yellow-500/50 hover:bg-yellow-500/5 transition-all group relative overflow-hidden bg-white/60 dark:bg-slate-800/40",children:[w.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-yellow-500/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),w.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-500/20 rounded-xl flex items-center justify-center text-yellow-600 dark:text-yellow-400 mb-6 group-hover:scale-110 transition-transform",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),w.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:["Challenge ",w.jsx("span",{className:"text-yellow-500 animate-pulse",children:""})]}),w.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:"The ultimate test."})]})]})]});if(P)return w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[w.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-b-2 mb-4 ${ue==="purple"?"border-purple-500":ue==="rose"?"border-rose-500":"border-cyan-500"}`}),w.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-center max-w-md",children:["Generating ",w.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:V})," level questions for ",w.jsx("span",{className:"text-slate-900 dark:text-white",children:t||e}),"..."]})]});if(J&&be){const fe=o[y],Ae=de.get(y);return w.jsxs("div",{className:"max-w-3xl mx-auto pb-20 animate-in fade-in zoom-in-95 duration-300",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 rounded-full text-xs font-bold uppercase border border-yellow-200 dark:border-yellow-500/20",children:"Review Mode"}),w.jsxs("span",{className:"text-sm font-bold text-slate-500",children:["Question ",y+1," of ",o.length]})]}),w.jsx("button",{onClick:()=>{j(!1),v(0)},className:"text-sm font-bold text-slate-500 hover:text-slate-900 dark:hover:text-white px-4 py-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Back to Summary"})]}),w.jsxs("div",{className:"glass-panel p-8 rounded-[2rem] bg-white/60 dark:bg-slate-800/40 border dark:border-white/10",children:[w.jsx("h2",{className:"text-xl font-medium text-slate-900 dark:text-white mb-8 leading-relaxed font-serif",children:fe.question}),w.jsx("div",{className:"space-y-4 mb-8",children:fe.options.map((ze,st)=>{const ot=st===fe.correctAnswerIndex,cn=Ae===st;let Kt="border-slate-200 dark:border-white/5 opacity-60";return ot?Kt="border-green-500 bg-green-100 dark:bg-green-500/10 text-green-700 dark:text-green-400 ring-1 ring-green-500 font-bold opacity-100":cn&&(Kt="border-red-500 bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-400 ring-1 ring-red-500 font-bold opacity-100"),w.jsxs("div",{className:`w-full text-left p-4 rounded-xl border flex items-center justify-between gap-4 ${Kt}`,children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("span",{className:"w-8 h-8 flex items-center justify-center rounded-lg bg-white/50 dark:bg-black/20 text-sm font-bold",children:String.fromCharCode(65+st)}),w.jsx("span",{children:ze})]}),ot&&w.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),cn&&!ot&&w.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]},st)})}),w.jsx("div",{className:"mb-8",children:ce?w.jsxs("div",{className:"p-6 rounded-2xl bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-500/20 animate-in fade-in slide-in-from-top-2",children:[w.jsx("h3",{className:"font-bold text-amber-700 dark:text-amber-500 mb-2",children:"Explanation"}),w.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm",children:fe.explanation}),w.jsx("button",{onClick:()=>Ee(!1),className:"mt-4 text-xs font-bold text-amber-600 dark:text-amber-500 hover:underline",children:"Hide Explanation"})]}):w.jsxs("button",{onClick:()=>Ee(!0),className:"w-full py-3 rounded-xl border border-dashed border-slate-300 dark:border-slate-600 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors flex items-center justify-center gap-2",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Show Detailed Explanation"]})}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("button",{onClick:()=>{v(ze=>Math.max(0,ze-1)),Ee(!1)},disabled:y===0,className:`px-6 py-3 rounded-xl font-bold transition-colors ${y===0?"opacity-0 pointer-events-none":"bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Previous"}),w.jsx("div",{className:"flex gap-2",children:y<o.length-1?w.jsx("button",{onClick:()=>{v(ze=>ze+1),Ee(!1)},className:"px-6 py-3 rounded-xl font-bold bg-cyan-600 text-white hover:bg-cyan-500 shadow-lg shadow-cyan-900/20 transition-all",children:"Next Question"}):w.jsx("button",{onClick:()=>{j(!1),v(0)},className:"px-6 py-3 rounded-xl font-bold bg-slate-900 dark:bg-white text-white dark:text-slate-900 hover:opacity-90 transition-all",children:"Finish Review"})})]})]})]})}if(J)return w.jsxs("div",{className:"text-center p-12 glass-panel rounded-[2rem] max-w-4xl mx-auto mt-10 animate-in zoom-in-95 duration-500 bg-white/60 dark:bg-slate-800/40",children:[w.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-4",children:"Quiz Complete!"}),w.jsxs("div",{className:`text-6xl font-bold mb-6 drop-shadow-[0_0_15px_rgba(0,0,0,0.1)] dark:drop-shadow-[0_0_15px_rgba(0,0,0,0.5)] ${ue==="purple"?"text-purple-600 dark:text-purple-400":ue==="rose"?"text-rose-600 dark:text-rose-400":"text-cyan-600 dark:text-cyan-400"}`,children:[I," / ",o.length]}),w.jsxs("div",{className:"inline-block px-4 py-1 rounded-full bg-slate-200 dark:bg-slate-800 border border-slate-300 dark:border-white/10 text-slate-600 dark:text-slate-400 text-sm mb-10",children:["Mode: ",w.jsx("span",{className:"font-bold mr-2",children:ne==="review"?"Review":"Test"}),"Difficulty: ",w.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:V})]}),ne==="test"&&w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left mb-10",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h3",{className:"font-bold text-green-600 dark:text-green-400 border-b border-green-500/20 pb-2",children:["Correct Answers (",I,")"]}),o.map((fe,Ae)=>de.get(Ae)===fe.correctAnswerIndex?w.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 rounded-lg text-sm",children:[w.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300 mr-2",children:[Ae+1,"."]}),w.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:fe.question})]},Ae):null)]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h3",{className:"font-bold text-red-600 dark:text-red-400 border-b border-red-500/20 pb-2",children:["Incorrect Answers (",o.length-I,")"]}),o.map((fe,Ae)=>{const ze=de.get(Ae);return ze!==void 0&&ze!==fe.correctAnswerIndex?w.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 rounded-lg text-sm",children:[w.jsxs("div",{className:"mb-1",children:[w.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300 mr-2",children:[Ae+1,"."]})," ",fe.question]}),w.jsxs("div",{className:"text-xs text-red-500",children:["Your Answer: ",fe.options[ze]]}),w.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 font-bold",children:["Correct: ",fe.options[fe.correctAnswerIndex]]}),w.jsx("div",{className:"mt-2 text-xs italic text-slate-500",children:fe.explanation})]},Ae):null})]})]}),w.jsxs("div",{className:"flex justify-center gap-4",children:[w.jsx("button",{onClick:()=>{q(!1),L(0),v(0),me(new Map)},className:"px-8 py-3 rounded-xl font-semibold transition-colors bg-slate-200 dark:bg-slate-800 text-slate-800 dark:text-white hover:bg-slate-300 dark:hover:bg-slate-700 border border-slate-300 dark:border-white/5",children:"Restart Level"}),V==="Challenge"&&w.jsxs("button",{onClick:()=>{j(!0),v(0),Ee(!1)},className:"px-8 py-3 rounded-xl font-semibold transition-colors bg-yellow-500 text-white hover:bg-yellow-600 shadow-lg shadow-yellow-500/30 flex items-center gap-2",children:[w.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Review Answers One-by-One"]}),w.jsx("button",{onClick:R,className:`px-8 py-3 rounded-xl font-semibold transition-colors shadow-lg text-white ${ue==="purple"?"bg-purple-600 hover:bg-purple-500 shadow-purple-900/50":ue==="rose"?"bg-rose-600 hover:bg-rose-500 shadow-rose-900/50":"bg-cyan-600 hover:bg-cyan-500 shadow-cyan-900/50"}`,children:"Back to Topics"})]})]});const Ce=o[y];if(!Ce)return w.jsxs("div",{className:"text-center p-12",children:[w.jsx("p",{className:"text-red-500 dark:text-red-400 mb-4",children:"Failed to load questions. Please try again."}),w.jsx("button",{onClick:i,className:"px-6 py-2 bg-slate-200 dark:bg-slate-800 rounded-lg text-slate-900 dark:text-white",children:"Go Back"})]});const _e=E===Ce.correctAnswerIndex;return w.jsxs("div",{className:"max-w-3xl mx-auto pb-20 animate-in fade-in slide-in-from-right-8 duration-500",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase border ${V==="Easy"?"bg-green-100 dark:bg-green-500/10 text-green-600 dark:text-green-400 border-green-200 dark:border-green-500/20":V==="Hard"?"bg-red-100 dark:bg-red-500/10 text-red-600 dark:text-red-400 border-red-200 dark:border-red-500/20":ue==="purple"?"bg-purple-100 dark:bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-200 dark:border-purple-500/20":"bg-cyan-100 dark:bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 border-cyan-200 dark:border-cyan-500/20"}`,children:[V," Mode ",V==="Challenge"&&w.jsx("span",{className:"text-yellow-500 ml-1",children:""})]}),w.jsxs("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:["Question ",y+1," of ",o.length]}),V==="Challenge"&&ke!==null&&w.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${ke<60?"bg-red-100 text-red-600 border-red-200 animate-pulse":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-white/10"}`,children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),w.jsx("span",{className:"font-mono font-bold",children:X(ke)})]})]}),w.jsx("button",{onClick:R,className:"text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors p-2 hover:bg-slate-200 dark:hover:bg-white/5 rounded-full",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{className:"glass-panel p-5 md:p-10 rounded-[2rem] mb-6 relative overflow-hidden bg-white/60 dark:bg-slate-800/40",children:[w.jsx("div",{className:"absolute top-0 left-0 h-1 bg-slate-200 dark:bg-slate-800 w-full",children:w.jsx("div",{className:`h-full transition-all duration-300 shadow-[0_0_10px_currentColor] ${ue==="purple"?"bg-purple-500":ue==="rose"?"bg-rose-500":"bg-cyan-500"}`,style:{width:`${(y+1)/o.length*100}%`}})}),w.jsx("h2",{className:"text-lg md:text-2xl font-medium text-slate-900 dark:text-white mb-10 leading-relaxed font-serif",children:Ce.question}),w.jsx("div",{className:"space-y-4",children:Ce.options.map((fe,Ae)=>{const ze=Ae===Ce.correctAnswerIndex,st=E===Ae;let ot="border-slate-200 dark:border-white/10 text-slate-700 dark:text-slate-300 hover:border-slate-300 dark:hover:border-white/20 hover:bg-slate-50 dark:hover:bg-slate-800/50";return C?ze?ot="border-green-500/50 bg-green-100 dark:bg-green-500/10 text-green-700 dark:text-green-400 ring-1 ring-green-500/50 font-medium":st?ot="border-red-500/50 bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-400 ring-1 ring-red-500/50":ot="border-slate-200 dark:border-white/5 text-slate-400 dark:text-slate-600 opacity-50":st?ot=ue==="purple"?"border-purple-500 bg-purple-100 dark:bg-purple-500/10 ring-1 ring-purple-500 text-purple-700 dark:text-purple-300 shadow-[0_0_15px_rgba(168,85,247,0.1)]":ue==="rose"?"border-rose-500 bg-rose-100 dark:bg-rose-500/10 ring-1 ring-rose-500 text-rose-700 dark:text-rose-300 shadow-[0_0_15px_rgba(244,63,94,0.1)]":"border-cyan-500 bg-cyan-100 dark:bg-cyan-500/10 ring-1 ring-cyan-500 text-cyan-700 dark:text-cyan-300 shadow-[0_0_15px_rgba(6,182,212,0.1)]":ot+=ue==="purple"?" hover:border-purple-300 dark:hover:border-purple-500/30":ue==="rose"?" hover:border-rose-300 dark:hover:border-rose-500/30":" hover:border-cyan-300 dark:hover:border-cyan-500/30",w.jsxs("button",{onClick:()=>W(Ae),disabled:C,className:`w-full text-left p-4 md:p-5 rounded-xl border transition-all flex items-center justify-between gap-4 ${ot}`,children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded-lg text-sm font-bold flex-shrink-0 transition-colors ${C&&ze?"bg-green-500 text-black":st?ue==="purple"?"bg-purple-600 text-white":ue==="rose"?"bg-rose-600 text-white":"bg-cyan-600 text-white":"bg-slate-200 dark:bg-slate-800 text-slate-500 dark:text-slate-400"}`,children:String.fromCharCode(65+Ae)}),w.jsx("span",{className:"text-base md:text-lg",children:fe})]}),C&&w.jsxs("div",{className:"flex-shrink-0",children:[ze&&w.jsx("svg",{className:"w-6 h-6 text-green-500 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),!ze&&st&&w.jsx("svg",{className:"w-6 h-6 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]},Ae)})})]}),C&&w.jsxs("div",{className:`p-6 rounded-2xl border mb-6 animate-in fade-in slide-in-from-top-2 duration-300 glass-panel ${_e?"border-green-500/30 bg-green-100/50 dark:bg-green-900/10":"border-red-500/30 bg-red-100/50 dark:bg-red-900/10"}`,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_e?w.jsx("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-green-500/20 text-green-600 dark:text-green-400 text-xs font-bold rounded-full uppercase tracking-wider border border-green-500/20",children:"Correct"}):w.jsx("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-red-500/20 text-red-600 dark:text-red-400 text-xs font-bold rounded-full uppercase tracking-wider border border-red-500/20",children:"Incorrect"}),w.jsx("h3",{className:`font-bold ${_e?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:"Explanation"})]}),w.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm medical-serif",children:Ce.explanation})]}),w.jsxs("div",{className:"flex justify-between gap-4",children:[!Ce.wasSkipped&&!C?w.jsx("button",{onClick:te,className:"px-6 py-4 rounded-xl font-bold bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors",children:"Skip"}):w.jsx("div",{}),w.jsx("div",{className:"flex gap-4",children:ne==="review"?C?w.jsx("button",{onClick:()=>pe(!1),className:"bg-white text-slate-900 px-8 py-4 rounded-xl font-bold hover:bg-slate-200 transition-all shadow-lg",children:y<o.length-1?"Next Question":"View Results"}):w.jsx("button",{onClick:N,disabled:E===null,className:`px-8 py-4 rounded-xl font-bold transition-all ${E===null?"bg-slate-200 dark:bg-slate-800 text-slate-500 dark:text-slate-600 cursor-not-allowed border border-slate-300 dark:border-white/5":ue==="purple"?"bg-purple-600 text-white hover:bg-purple-500 shadow-[0_0_20px_rgba(168,85,247,0.3)]":ue==="rose"?"bg-rose-600 text-white hover:bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.3)]":"bg-cyan-600 text-white hover:bg-cyan-500 shadow-[0_0_20px_rgba(6,182,212,0.3)]"}`,children:"Check Answer"}):w.jsx("button",{onClick:()=>pe(!1),disabled:E===null,className:`px-8 py-4 rounded-xl font-bold transition-all ${E===null?"bg-slate-200 dark:bg-slate-800 text-slate-500 dark:text-slate-600 cursor-not-allowed":ue==="purple"?"bg-purple-600 text-white hover:bg-purple-500 shadow-[0_0_20px_rgba(168,85,247,0.3)]":ue==="rose"?"bg-rose-600 text-white hover:bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.3)]":"bg-cyan-600 text-white hover:bg-cyan-500 shadow-[0_0_20px_rgba(6,182,212,0.3)]"}`,children:y<o.length-1?"Next Question":"Submit Exam"})})]})]})},_H=()=>{const[e,t]=oe.useState(!1),[n,i]=oe.useState([]),[a,o]=oe.useState(""),[l,u]=oe.useState(!1),m=oe.useRef(null);oe.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[n,l]);const d=async()=>{if(!a.trim()||l)return;const p=a;o(""),i(y=>[...y,{role:"user",text:p}]),u(!0);try{const y=await YT(p);i(v=>[...v,{role:"ai",text:y}])}catch{i(v=>[...v,{role:"ai",text:"I'm sorry, I'm having trouble connecting right now. Please try again."}])}finally{u(!1)}};return w.jsx("div",{className:"fixed bottom-24 md:bottom-6 right-6 z-50",children:e?w.jsxs("div",{className:"bg-white dark:bg-slate-900 w-[22rem] md:w-[26rem] h-[600px] rounded-[2rem] shadow-2xl border border-slate-200 dark:border-white/10 flex flex-col overflow-hidden animate-in slide-in-from-bottom-8 duration-500",children:[w.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white flex justify-between items-center shadow-lg",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center backdrop-blur-sm",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),w.jsxs("div",{children:[w.jsx("span",{className:"font-bold block leading-none",children:"MedTutor Assistant"}),w.jsx("span",{className:"text-[10px] text-blue-100 font-bold uppercase tracking-wider",children:"Quick Review Mode"})]})]}),w.jsx("button",{onClick:()=>t(!1),className:"hover:bg-white/10 rounded-full p-2 transition-colors",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{ref:m,className:"flex-1 p-5 overflow-y-auto space-y-5 bg-slate-50/50 dark:bg-slate-950/50",children:[n.length===0&&w.jsxs("div",{className:"text-center py-12 px-6",children:[w.jsx("div",{className:"bg-blue-50 dark:bg-blue-500/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600 dark:text-blue-400",children:w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),w.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 mb-2",children:"How can I help you study?"}),w.jsx("p",{className:"text-sm text-slate-500 leading-relaxed italic",children:'"Explain the mechanism of Warfarin and its interaction with Vitamin K."'})]}),n.map((p,y)=>w.jsx("div",{className:`flex ${p.role==="user"?"justify-end":"justify-start"}`,children:w.jsx("div",{className:`max-w-[90%] p-4 rounded-2xl text-sm shadow-sm ${p.role==="user"?"bg-blue-600 text-white rounded-tr-none font-medium":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-white/5 rounded-tl-none medical-serif"}`,children:p.role==="ai"?w.jsx("div",{className:"prose prose-slate dark:prose-invert prose-sm max-w-none",children:w.jsx(Df,{children:p.text})}):p.text})},y)),l&&w.jsx("div",{className:"flex justify-start",children:w.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-white/5 rounded-tl-none flex items-center gap-2",children:[w.jsxs("div",{className:"flex gap-1",children:[w.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce"}),w.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.2s]"}),w.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.4s]"})]}),w.jsx("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Reviewing clinical pearls..."})]})})]}),w.jsx("div",{className:"p-4 border-t bg-white dark:bg-slate-900 border-slate-100 dark:border-white/5",children:w.jsxs("form",{onSubmit:p=>{p.preventDefault(),d()},className:"flex gap-3",children:[w.jsx("input",{type:"text",value:a,onChange:p=>o(p.target.value),placeholder:"Type your question...",className:"flex-1 bg-slate-100 dark:bg-slate-950 border-none rounded-2xl px-5 py-3 text-sm focus:ring-4 focus:ring-blue-500/10 outline-none text-slate-900 dark:text-white"}),w.jsx("button",{type:"submit",className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]}):w.jsxs("button",{onClick:()=>t(!0),className:"bg-blue-600 text-white p-4 rounded-3xl shadow-2xl hover:scale-105 transition-all active:scale-95 group relative border-4 border-white dark:border-slate-800",children:[w.jsx("div",{className:"absolute -top-14 right-0 bg-slate-900 text-white text-[11px] font-bold px-4 py-2 rounded-xl shadow-xl opacity-0 group-hover:opacity-100 transition-all whitespace-nowrap translate-y-2 group-hover:translate-y-0",children:"QUICK CLINICAL QUERY"}),w.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012-2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})]})})},AH=()=>{const[e,t]=oe.useState([]),[n,i]=oe.useState(""),[a,o]=oe.useState(!1),l=oe.useRef(null);oe.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[e,a]);const u=async m=>{if(m==null||m.preventDefault(),!n.trim()||a)return;const d=n;i("");const p={role:"user",text:d,timestamp:new Date};t(y=>[...y,p]),o(!0);try{const v={role:"ai",text:await YT(d),timestamp:new Date};t(E=>[...E,v])}catch{t(v=>[...v,{role:"ai",text:"I encountered an error processing your medical query. Please try rephrasing or check your connection.",timestamp:new Date}])}finally{o(!1)}};return w.jsxs("div",{className:"max-w-5xl mx-auto h-[calc(100vh-12rem)] flex flex-col glass-panel rounded-[2rem] overflow-hidden bg-white/60 dark:bg-slate-900/40",children:[w.jsx("div",{className:"border-b border-slate-200 dark:border-white/5 px-8 py-5 flex items-center justify-between bg-slate-50/80 dark:bg-slate-900/50",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-600 to-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-cyan-900/50",children:w.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),w.jsxs("div",{children:[w.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-lg",children:"AI MedTutor Pro"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("span",{className:"flex h-2 w-2 relative",children:[w.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),w.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),w.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400 font-bold uppercase tracking-wider",children:"Active Learning Session"})]})]})]})}),w.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-8 space-y-8 bg-slate-50/50 dark:bg-slate-950/30",children:[e.length===0?w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center max-w-lg mx-auto space-y-8",children:[w.jsx("div",{className:"w-24 h-24 bg-slate-200 dark:bg-slate-800 rounded-full flex items-center justify-center text-cyan-600 dark:text-cyan-500 relative ring-1 ring-slate-300 dark:ring-white/10",children:w.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-3",children:"Welcome to your Personal Clinic."}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg leading-relaxed",children:"I am trained in clinical medicine and medical education. How can I help clarify your studies today?"})]}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full",children:["Explain Heart Failure types","Cushing vs Addison Disease","Differential for Hematuria","MOA of Statins"].map(m=>w.jsx("button",{onClick:()=>{i(m)},className:"text-left p-4 text-sm font-medium bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-white/5 rounded-2xl hover:border-cyan-500/50 hover:text-cyan-600 dark:hover:text-cyan-400 text-slate-600 dark:text-slate-300 transition-all shadow-sm hover:shadow-md",children:m},m))})]}):e.map((m,d)=>w.jsx("div",{className:`flex ${m.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-3 duration-500`,children:w.jsxs("div",{className:`max-w-[85%] flex flex-col ${m.role==="user"?"items-end":"items-start"}`,children:[w.jsx("div",{className:`px-6 py-4 rounded-3xl leading-relaxed ${m.role==="user"?"bg-cyan-600 text-white rounded-tr-none shadow-[0_0_20px_rgba(8,145,178,0.3)] text-sm font-medium":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 shadow-sm border border-slate-200 dark:border-white/5 rounded-tl-none medical-serif text-base"}`,children:m.role==="ai"?w.jsx("div",{className:"prose prose-sm max-w-none prose-p:leading-relaxed prose-headings:text-slate-900 dark:prose-headings:text-white prose-strong:text-cyan-600 dark:prose-strong:text-cyan-400 prose-slate dark:prose-invert",children:w.jsx(Df,{children:m.text})}):w.jsx("div",{className:"whitespace-pre-wrap",children:m.text})}),w.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 mt-2 font-bold px-2 uppercase tracking-widest",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},d)),a&&w.jsx("div",{className:"flex justify-start",children:w.jsxs("div",{className:"bg-white dark:bg-slate-800 px-6 py-5 rounded-3xl shadow-sm border border-slate-200 dark:border-white/5 rounded-tl-none flex items-center gap-4",children:[w.jsxs("div",{className:"flex gap-1.5",children:[w.jsx("div",{className:"w-2.5 h-2.5 bg-cyan-500 rounded-full animate-bounce"}),w.jsx("div",{className:"w-2.5 h-2.5 bg-cyan-500 rounded-full animate-bounce [animation-delay:0.2s]"}),w.jsx("div",{className:"w-2.5 h-2.5 bg-cyan-500 rounded-full animate-bounce [animation-delay:0.4s]"})]}),w.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]",children:"Consulting Textbook..."})]})})]}),w.jsx("div",{className:"p-6 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-white/5",children:w.jsxs("form",{onSubmit:u,className:"relative flex items-center gap-3 max-w-4xl mx-auto",children:[w.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),placeholder:"Ask a question about physiology, pathology, or clinical cases...",className:"flex-1 bg-slate-100 dark:bg-slate-950 border border-slate-200 dark:border-white/5 rounded-2xl px-8 py-5 text-slate-900 dark:text-white placeholder:text-slate-500 focus:ring-1 focus:ring-cyan-500/50 outline-none transition-all pr-20 text-base"}),w.jsx("button",{type:"submit",disabled:!n.trim()||a,className:`absolute right-2.5 p-3 rounded-xl transition-all ${!n.trim()||a?"text-slate-400 dark:text-slate-600":"bg-cyan-600 text-white shadow-[0_0_15px_rgba(6,182,212,0.4)] hover:bg-cyan-500 active:scale-90"}`,children:w.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})})]})},CH=e=>({Anatomy:"",Physiology:"",Biochemistry:"",Pharmacology:"","General Pathology":"",Microbiology:"","Community Medicine":"","Dental Materials":"","Oral Histology":"","Tooth Morphology":"","Oral Pathology":"",Periodontology:"","Oral Medicine & Radiology":"","Internal Medicine":"",Surgery:"",Orthodontics:"",Prosthodontics:"","Oral & Maxillofacial Surgery":"","Operative Dentistry & Endodontics":"","Pediatric Dentistry":""})[e]||"",SH=({onSelectTopic:e,completedSubjects:t=[],onStartMegaTest:n})=>{console.log("QuestionBankView - Completed Subjects:",t);const i=t.map(a=>({id:a.toLowerCase().replace(/\s+/g,"-"),title:`${a} - Practice Questions`,category:a,description:`High-yield MCQs for ${a}`,icon:CH(a)}));return w.jsxs("div",{className:"max-w-6xl mx-auto py-8 pb-24",children:[w.jsxs("div",{className:"mb-12",children:[w.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 dark:text-white mb-3 tracking-tight",children:"High-Yield Question Banks"}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-2xl leading-relaxed",children:i.length>0?"Practice MCQs from your completed modules.":"Complete modules on the Dashboard to unlock question banks here."})]}),i.length>0?w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{onClick:n,className:"group relative w-full glass-panel p-8 rounded-[2rem] cursor-pointer overflow-hidden border border-amber-500/30 bg-gradient-to-br from-amber-500/10 to-transparent hover:scale-[1.01] transition-all",children:[w.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/20 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"}),w.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-2",children:[w.jsx("span",{className:"text-3xl",children:""})," Comprehensive Mega Test"]}),w.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Challenge yourself with a randomized exam covering ",w.jsx("strong",{children:"ALL"})," your completed modules (",i.length," subjects)."]})]}),w.jsxs("div",{className:"hidden md:flex items-center gap-2 px-6 py-3 rounded-xl bg-amber-500 text-white font-bold shadow-lg shadow-amber-900/20 group-hover:bg-amber-400 transition-colors",children:["Start Challenge",w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]})]})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>w.jsxs("div",{onClick:()=>e(a.title),className:"group relative glass-panel p-5 md:p-8 rounded-[2rem] hover:-translate-y-1 transition-all cursor-pointer overflow-hidden hover:border-cyan-500/30 bg-white/60 dark:bg-slate-800/40",children:[w.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-cyan-500/20 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"}),w.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[w.jsx("div",{className:"w-14 h-14 bg-slate-100 dark:bg-slate-800/80 rounded-2xl flex items-center justify-center text-3xl group-hover:bg-cyan-100 dark:group-hover:bg-cyan-500/20 group-hover:text-cyan-600 dark:group-hover:text-cyan-300 transition-colors group-hover:rotate-6 ring-1 ring-slate-200 dark:ring-white/10",children:a.icon}),w.jsx("span",{className:"px-3 py-1 bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] font-bold rounded-full uppercase tracking-widest border border-slate-300 dark:border-white/5",children:a.category})]}),w.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 group-hover:text-cyan-600 dark:group-hover:text-cyan-400 transition-colors relative z-10",children:a.title}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed mb-8 relative z-10",children:a.description}),w.jsxs("div",{className:"flex items-center gap-2 text-cyan-600 dark:text-cyan-500 font-bold text-xs uppercase tracking-widest relative z-10",children:["Start Exam Paper",w.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},a.id))})]}):w.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[w.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center mb-6 text-slate-400",children:w.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),w.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"No Question Banks Available"}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center max-w-md",children:"Mark subjects as completed on the Dashboard to unlock their related question banks here."})]}),w.jsxs("div",{className:"mt-16 bg-gradient-to-r from-slate-800 to-slate-700 dark:from-slate-900 dark:to-slate-800 rounded-[3rem] p-12 text-white flex flex-col md:flex-row items-center gap-8 shadow-2xl overflow-hidden relative border border-white/5",children:[w.jsxs("div",{className:"flex-1 relative z-10",children:[w.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Exam Simulator (Coming Soon)"}),w.jsx("p",{className:"text-slate-300 dark:text-slate-400 leading-relaxed mb-6",children:"We are working on a full-length mock exam simulator that adjusts difficulty in real-time based on your performance in these topic banks."}),w.jsxs("div",{className:"flex gap-4",children:[w.jsx("span",{className:"px-4 py-2 bg-white/10 rounded-xl text-xs font-bold text-slate-200 border border-white/10",children:"Timed Mode"}),w.jsx("span",{className:"px-4 py-2 bg-white/10 rounded-xl text-xs font-bold text-slate-200 border border-white/10",children:"Clinical Vignettes"})]})]}),w.jsx("div",{className:"flex-shrink-0 w-32 h-32 md:w-48 md:h-48 bg-white/5 rounded-full flex items-center justify-center shadow-[0_0_50px_rgba(0,0,0,0.5)]",children:w.jsx("svg",{className:"w-16 h-16 md:w-24 md:h-24 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8v4l3 2m6-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})},kH=({subject:e,stream:t,onSelectNoteTopic:n,onSelectQuizTopic:i,onBack:a})=>{const o=X0[e]||X0.default,[l,u]=oe.useState(new Set),m=v=>{u(E=>{const A=new Set(E);return A.has(v)?A.delete(v):A.add(v),A})},d=v=>typeof v=="object"&&"parent"in v&&"subtopics"in v,y=(()=>{switch(t){case"FCPS":return"purple";case"ORE":return"rose";default:return"cyan"}})();return w.jsxs("div",{className:"max-w-6xl mx-auto pb-24",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[w.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-slate-900 dark:hover:text-white",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight",children:e}),w.jsxs("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded border ${y==="purple"?"bg-purple-100 dark:bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-500/20":y==="rose"?"bg-rose-100 dark:bg-rose-500/10 text-rose-700 dark:text-rose-400 border-rose-200 dark:border-rose-500/20":"bg-cyan-100 dark:bg-cyan-500/10 text-cyan-700 dark:text-cyan-400 border-cyan-200 dark:border-cyan-500/20"}`,children:[t," CURRICULUM"]})]}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Select a topic below to access study notes or practice MCQs."})]})]}),w.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.map((v,E)=>{if(d(v)){const A=l.has(v.parent);return w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"glass-panel p-5 rounded-xl flex items-center justify-between gap-4 hover:border-slate-300 dark:hover:border-white/10 transition-colors group bg-white/60 dark:bg-slate-800/40 cursor-pointer",onClick:()=>m(v.parent),children:[w.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[w.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-white/5 ${y==="purple"?"text-purple-600 dark:text-purple-400 group-hover:bg-purple-100 dark:group-hover:bg-purple-500/20":y==="rose"?"text-rose-600 dark:text-rose-400 group-hover:bg-rose-100 dark:group-hover:bg-rose-500/20":"text-cyan-600 dark:text-cyan-400 group-hover:bg-cyan-100 dark:group-hover:bg-cyan-500/20"}`,children:E+1}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 group-hover:text-slate-900 dark:group-hover:text-white transition-colors",children:v.parent}),w.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:[v.subtopics.length," sub-topics"]})]})]}),w.jsx("svg",{className:`w-5 h-5 text-slate-400 transition-transform ${A?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A&&w.jsx("div",{className:"ml-12 space-y-2 animate-in slide-in-from-top-2 fade-in duration-300",children:v.subtopics.map((C,S)=>{if(d(C)){const I=l.has(C.parent);return w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"glass-panel p-4 rounded-lg flex items-center justify-between gap-3 hover:border-slate-300 dark:hover:border-white/10 transition-colors group bg-white/40 dark:bg-slate-800/20 cursor-pointer",onClick:()=>m(C.parent),children:[w.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[w.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold bg-slate-100 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-white/5",children:S+1}),w.jsx("h4",{className:"text-base font-medium text-slate-700 dark:text-slate-300",children:C.parent})]}),w.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform ${I?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),I&&w.jsx("div",{className:"ml-8 space-y-2 animate-in slide-in-from-top-2 fade-in duration-200",children:C.subtopics.map((L,P)=>w.jsxs("div",{className:"glass-panel p-3 rounded-lg flex flex-col md:flex-row md:items-center justify-between gap-3 hover:border-slate-300 dark:hover:border-white/10 transition-colors group bg-white/30 dark:bg-slate-800/10",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-semibold bg-slate-100 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-white/5",children:P+1}),w.jsx("h5",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:typeof L=="string"?L:L.parent})]}),w.jsxs("div",{className:"flex items-center gap-2 pl-7 md:pl-0",children:[w.jsxs("button",{onClick:()=>n(typeof L=="string"?L:L.parent),className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-lg text-xs font-medium transition-colors border border-slate-300 dark:border-white/5 text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:[w.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Read Notes"]}),w.jsxs("button",{onClick:()=>i(typeof L=="string"?L:L.parent),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors shadow-lg ${y==="purple"?"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20":y==="rose"?"bg-rose-600 hover:bg-rose-500 text-white shadow-rose-900/20":"bg-cyan-600 hover:bg-cyan-500 text-white shadow-cyan-900/20"}`,children:[w.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Solve MCQs"]})]})]},P))})]},S)}else{const I=C;return w.jsxs("div",{className:"glass-panel p-4 rounded-lg flex flex-col md:flex-row md:items-center justify-between gap-3 hover:border-slate-300 dark:hover:border-white/10 transition-colors group bg-white/40 dark:bg-slate-800/20",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold bg-slate-100 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-white/5",children:S+1}),w.jsx("h4",{className:"text-base font-medium text-slate-700 dark:text-slate-300",children:I})]}),w.jsxs("div",{className:"flex items-center gap-2 pl-9 md:pl-0",children:[w.jsxs("button",{onClick:()=>n(I),className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-lg text-xs font-medium transition-colors border border-slate-300 dark:border-white/5 text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:[w.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Read Notes"]}),w.jsxs("button",{onClick:()=>i(I),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors shadow-lg ${y==="purple"?"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20":y==="rose"?"bg-rose-600 hover:bg-rose-500 text-white shadow-rose-900/20":"bg-cyan-600 hover:bg-cyan-500 text-white shadow-cyan-900/20"}`,children:[w.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Solve MCQs"]})]})]},S)}})})]},E)}else{const A=v;return w.jsxs("div",{className:"glass-panel p-5 rounded-xl flex flex-col md:flex-row md:items-center justify-between gap-4 hover:border-slate-300 dark:hover:border-white/10 transition-colors group bg-white/60 dark:bg-slate-800/40",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-white/5 ${y==="purple"?"text-purple-600 dark:text-purple-400 group-hover:bg-purple-100 dark:group-hover:bg-purple-500/20":y==="rose"?"text-rose-600 dark:text-rose-400 group-hover:bg-rose-100 dark:group-hover:bg-rose-500/20":"text-cyan-600 dark:text-cyan-400 group-hover:bg-cyan-100 dark:group-hover:bg-cyan-500/20"}`,children:E+1}),w.jsx("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 group-hover:text-slate-900 dark:group-hover:text-white transition-colors",children:A})]}),w.jsxs("div",{className:"flex items-center gap-3 pl-12 md:pl-0",children:[w.jsxs("button",{onClick:()=>n(A),className:"flex items-center gap-2 px-4 py-2 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-lg text-sm font-medium transition-colors border border-slate-300 dark:border-white/5 text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Read Notes"]}),w.jsxs("button",{onClick:()=>i(A),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-colors shadow-lg ${y==="purple"?"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20":y==="rose"?"bg-rose-600 hover:bg-rose-500 text-white shadow-rose-900/20":"bg-cyan-600 hover:bg-cyan-500 text-white shadow-cyan-900/20"}`,children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Solve MCQs"]})]})]},E)}})})]})},IH=({stream:e,onStartStudy:t,completedSubjects:n=[],userName:i="Frostloo"})=>{const l=2*Math.PI*50,u=l-78/100*l;return w.jsxs("div",{className:"w-full max-w-[1600px] mx-auto space-y-8 animate-in fade-in duration-700",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Progress Analytics Dashboard"}),w.jsxs("div",{className:"flex items-center gap-3 bg-slate-200 dark:bg-slate-800 rounded-lg px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w.jsx("span",{children:i}),w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[w.jsxs("div",{className:"glass-panel p-6 rounded-3xl bg-slate-800/80 dark:bg-[#1e293b]/60 flex flex-col items-center justify-center relative overflow-hidden group",children:[w.jsx("h3",{className:"text-slate-400 text-sm font-semibold self-start mb-4",children:"Overall Readiness"}),w.jsxs("div",{className:"relative w-40 h-40",children:[w.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[w.jsx("circle",{cx:"80",cy:"80",r:"50",stroke:"currentColor",strokeWidth:"12",fill:"none",className:"text-slate-700 dark:text-slate-700/50"}),w.jsx("circle",{cx:"80",cy:"80",r:"50",stroke:"currentColor",strokeWidth:"12",fill:"none",strokeDasharray:l,strokeDashoffset:u,strokeLinecap:"round",className:"text-cyan-400 drop-shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all duration-1000 ease-out"})]}),w.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-3xl font-bold text-white",children:[78,"%"]})]}),w.jsxs("p",{className:"mt-4 text-xs text-slate-400 font-mono",children:["Overall Readiness: ",78,"%"]})]}),w.jsxs("div",{className:"glass-panel p-6 rounded-3xl bg-slate-800/80 dark:bg-[#1e293b]/60 flex flex-col",children:[w.jsx("h3",{className:"text-slate-400 text-sm font-semibold mb-6",children:"Topic Performance"}),w.jsx("div",{className:"flex-1 flex items-end justify-between gap-2 px-2 pb-2",children:[40,65,85,60,42,75].map((m,d)=>w.jsxs("div",{className:"flex flex-col items-center gap-2 group w-full",children:[w.jsx("div",{className:"w-full bg-cyan-400/80 rounded-t-sm hover:bg-cyan-300 transition-all shadow-[0_0_10px_rgba(34,211,238,0.2)]",style:{height:`${m}%`}}),w.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:["Jan","Feb","Wed","Thu","Fri","Sat"][d]})]},d))})]}),w.jsxs("div",{className:"glass-panel p-6 rounded-3xl bg-slate-800/80 dark:bg-[#1e293b]/60 flex flex-col",children:[w.jsx("h3",{className:"text-slate-400 text-sm font-semibold mb-2",children:"Mock Scores Trend"}),w.jsxs("div",{className:"flex-1 relative w-full h-full flex items-end",children:[w.jsxs("svg",{className:"w-full h-32 overflow-visible",preserveAspectRatio:"none",children:[w.jsx("path",{d:"M0,80 C20,60 40,40 60,50 S100,70 120,40 S160,10 200,20",fill:"none",stroke:"#22d3ee",strokeWidth:"3",vectorEffect:"non-scaling-stroke",className:"drop-shadow-[0_0_8px_rgba(34,211,238,0.4)]"}),w.jsx("path",{d:"M0,80 C20,60 40,40 60,50 S100,70 120,40 S160,10 200,20 V120 H0 Z",fill:"url(#gradient)",className:"opacity-20"}),w.jsx("defs",{children:w.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[w.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),w.jsx("stop",{offset:"100%",stopColor:"transparent"})]})})]}),w.jsxs("div",{className:"absolute bottom-0 w-full flex justify-between text-[10px] text-slate-500 px-1",children:[w.jsx("span",{children:"Mon"}),w.jsx("span",{children:"Tue"}),w.jsx("span",{children:"Wed"}),w.jsx("span",{children:"Thu"}),w.jsx("span",{children:"Fri"}),w.jsx("span",{children:"Sat"})]})]})]}),w.jsxs("div",{className:"glass-panel p-6 rounded-3xl bg-slate-800/80 dark:bg-[#1e293b]/60 flex flex-col",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h3",{className:"text-slate-400 text-sm font-semibold",children:"Completed Modules"}),w.jsx("button",{className:"text-slate-500 hover:text-white",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]}),w.jsx("div",{className:"space-y-5 overflow-y-auto pr-2 custom-scrollbar flex-1",children:n.length>0?n.map((m,d)=>w.jsxs("div",{className:"flex items-start gap-3 group cursor-pointer animate-in slide-in-from-right-4 duration-300",style:{animationDelay:`${d*100}ms`},children:[w.jsx("div",{className:"mt-1 p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:bg-emerald-500 group-hover:text-white transition-colors",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("h4",{className:"text-sm font-medium text-slate-200 truncate group-hover:text-emerald-400 transition-colors",children:m}),w.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Marked as completed"})]})]},d)):w.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[w.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700/50 flex items-center justify-center mb-3 text-slate-500",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),w.jsx("p",{className:"text-sm text-slate-400",children:"No modules completed yet."}),w.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tick subjects below to track progress."})]})})]})]}),w.jsxs("div",{className:"relative group",children:[w.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-500 to-emerald-500 rounded-2xl blur opacity-30 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"}),w.jsxs("button",{onClick:()=>t(),className:"relative w-full bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border border-slate-700 hover:border-cyan-500/50 rounded-2xl p-4 flex items-center justify-center gap-3 transition-all transform active:scale-[0.99]",children:[w.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-emerald-400",children:"Start Study Session"}),w.jsxs("svg",{className:"w-6 h-6 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})]})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Impression Quiz",sub:"High Yield",icon:"star",action:()=>t("Impression Materials")},{title:"Timed Mock",sub:"Next: 2h",icon:"timer",action:()=>t()},{title:"Flashcards",sub:"Daily Review",icon:"layer",action:()=>{}},{title:"Past Papers",sub:"Recalls 2023",icon:"file",action:()=>{}}].map((m,d)=>w.jsxs("div",{onClick:m.action,className:"glass-panel p-5 rounded-2xl bg-slate-800/60 dark:bg-[#1e293b]/40 hover:bg-slate-700/60 transition-colors cursor-pointer flex items-center justify-between group",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"font-bold text-slate-200 group-hover:text-white",children:m.title}),w.jsx("p",{className:"text-xs text-slate-500 group-hover:text-slate-400",children:m.sub})]}),w.jsxs("div",{className:"text-slate-600 group-hover:text-cyan-400 transition-colors",children:[m.icon==="star"&&w.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),m.icon==="timer"&&w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),m.icon==="layer"&&w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),m.icon==="file"&&w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),m.icon==="chat"&&w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]})]},d))})]})},NH=({subject:e,stream:t,onClose:n,onUpdateStats:i,stats:a={correct:0,incorrect:0}})=>{const[o,l]=oe.useState(null),[u,m]=oe.useState(!0),[d,p]=oe.useState(null),[y,v]=oe.useState(!1),E=async()=>{m(!0),p(null),v(!1);try{const P=await jT(e,1,t,void 0,"Challenge");P.length>0&&l(P[0])}catch(P){console.error("Failed to load MCQ",P)}finally{m(!1)}};oe.useEffect(()=>{E()},[]);const A=()=>{if(d===null||!o)return;v(!0);const P=d===o.correctAnswerIndex;i(e,P)},C=()=>{E()};if(u)return w.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-300",children:w.jsx("div",{className:"glass-panel p-8 rounded-3xl max-w-2xl w-full mx-4 bg-white/90 dark:bg-slate-800/90",children:w.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mb-4"}),w.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading quick quiz..."})]})})});if(!o)return w.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-300",children:w.jsx("div",{className:"glass-panel p-8 rounded-3xl max-w-2xl w-full mx-4 bg-white/90 dark:bg-slate-800/90",children:w.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[w.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"No questions available"}),w.jsx("button",{onClick:n,className:"px-6 py-2 bg-cyan-600 text-white rounded-xl hover:bg-cyan-500",children:"Close"})]})})});const S=d===o.correctAnswerIndex,I=a.correct+a.incorrect,L=I>0?Math.round(a.correct/I*100):0;return w.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-300 p-4",children:w.jsxs("div",{className:"glass-panel p-8 rounded-3xl max-w-3xl w-full bg-white/90 dark:bg-slate-800/90 max-h-[90vh] overflow-y-auto animate-in zoom-in-95 duration-300",children:[w.jsxs("div",{className:"flex justify-between items-start mb-6",children:[w.jsxs("div",{children:[w.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:[" Quick Quiz: ",e]}),w.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[w.jsxs("span",{className:"px-3 py-1 bg-yellow-100 dark:bg-yellow-500/20 text-yellow-700 dark:text-yellow-400 rounded-full font-bold flex items-center gap-1",children:[w.jsx("span",{className:"text-yellow-500",children:""})," Challenge Mode"]}),w.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Accuracy: ",w.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[L,"%"]})," (",a.correct,"/",I,")"]})]})]}),w.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:w.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"mb-6",children:w.jsx("p",{className:"text-lg font-medium text-slate-900 dark:text-white leading-relaxed",children:o.question})}),w.jsx("div",{className:"space-y-3 mb-6",children:o.options.map((P,G)=>{const J=G===o.correctAnswerIndex,q=d===G;let V="border-slate-200 dark:border-white/10 hover:border-cyan-300 dark:hover:border-cyan-500/30";return y?J?V="border-green-500 bg-green-50 dark:bg-green-900/20 ring-2 ring-green-500":q?V="border-red-500 bg-red-50 dark:bg-red-900/20 ring-2 ring-red-500":V="border-slate-200 dark:border-white/10 opacity-50":q&&(V="border-cyan-500 bg-cyan-50 dark:bg-cyan-900/20 ring-2 ring-cyan-500"),w.jsx("button",{onClick:()=>!y&&p(G),disabled:y,className:`w-full text-left p-4 rounded-xl border-2 transition-all ${V} ${y?"cursor-default":"cursor-pointer"}`,children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded-lg text-sm font-bold ${y&&J?"bg-green-500 text-white":q?"bg-cyan-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:String.fromCharCode(65+G)}),w.jsx("span",{className:"text-slate-900 dark:text-white",children:P}),y&&J&&w.jsx("svg",{className:"w-5 h-5 text-green-500 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})},G)})}),y&&w.jsxs("div",{className:`p-4 rounded-xl mb-6 ${S?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-500/30":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-500/30"}`,children:[w.jsx("div",{className:"flex items-center gap-2 mb-2",children:w.jsx("span",{className:`font-bold ${S?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:S?" Correct!":" Incorrect"})}),w.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:o.explanation})]}),w.jsx("div",{className:"flex gap-3",children:y?w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:C,className:"flex-1 py-3 rounded-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-500 hover:to-pink-500 shadow-lg flex items-center justify-center gap-2",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Roll Another"]}),w.jsx("button",{onClick:n,className:"px-6 py-3 rounded-xl font-bold bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white hover:bg-slate-300 dark:hover:bg-slate-600",children:"Done"})]}):w.jsx("button",{onClick:A,disabled:d===null,className:`flex-1 py-3 rounded-xl font-bold transition-all ${d===null?"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed":"bg-cyan-600 text-white hover:bg-cyan-500 shadow-lg"}`,children:"Check Answer"})})]})})};function yu(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function RH(e,t,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{d(i.next(p))}catch(y){l(y)}}function m(p){try{d(i.throw(p))}catch(y){l(y)}}function d(p){p.done?o(p.value):a(p.value).then(u,m)}d((i=i.apply(e,t||[])).next())})}const MH=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Vf extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class PH extends Vf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nx extends Vf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ix extends Vf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jm||(Jm={}));class DH{constructor(t,{headers:n={},customFetch:i,region:a=Jm.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=MH(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return RH(this,arguments,void 0,function*(n,i={}){var a;let o,l;try{const{headers:u,method:m,body:d,signal:p,timeout:y}=i;let v={},{region:E}=i;E||(E=this.region);const A=new URL(`${this.url}/${n}`);E&&E!=="any"&&(v["x-region"]=E,A.searchParams.set("forceFunctionRegion",E));let C;d&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",C=d):typeof d=="string"?(v["Content-Type"]="text/plain",C=d):typeof FormData<"u"&&d instanceof FormData?C=d:(v["Content-Type"]="application/json",C=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?C=JSON.stringify(d):C=d;let S=p;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),p?(S=l.signal,p.addEventListener("abort",()=>l.abort())):S=l.signal);const I=yield this.fetch(A.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:C,signal:S}).catch(J=>{throw new PH(J)}),L=I.headers.get("x-relay-error");if(L&&L==="true")throw new nx(I);if(!I.ok)throw new ix(I);let P=((a=I.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),G;return P==="application/json"?G=yield I.json():P==="application/octet-stream"||P==="application/pdf"?G=yield I.blob():P==="text/event-stream"?G=I:P==="multipart/form-data"?G=yield I.formData():G=yield I.text(),{data:G,error:null,response:I}}catch(u){return{data:null,error:u,response:u instanceof ix||u instanceof nx?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var LH=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},OH=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,m=null,d=o.status,p=o.statusText;if(o.ok){var y,v;if(n.method!=="HEAD"){var E;const I=await o.text();I===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((E=n.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?u=I:u=JSON.parse(I))}const C=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),S=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");C&&S&&S.length>1&&(m=parseInt(S[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,d=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var A;const C=await o.text();try{l=JSON.parse(C),Array.isArray(l)&&o.status===404&&(u=[],l=null,d=200,p="OK")}catch{o.status===404&&C===""?(d=204,p="No Content"):l={message:C}}if(l&&n.isMaybeSingle&&(!(l==null||(A=l.details)===null||A===void 0)&&A.includes("0 rows"))&&(l=null,d=200,p="OK"),l&&n.shouldThrowOnError)throw new LH(l)}return{error:l,data:u,count:m,status:d,statusText:p}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let u="";const m=o==null?void 0:o.cause;if(m){var d,p,y,v;const A=(d=m==null?void 0:m.message)!==null&&d!==void 0?d:"",C=(p=m==null?void 0:m.code)!==null&&p!==void 0?p:"";u=`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"Error"}: ${A}`,C&&(u+=` (${C})`),m!=null&&m.stack&&(u+=`
${m.stack}`)}else{var E;u=(E=o==null?void 0:o.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},qH=class extends OH{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),m=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${m}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const rx=new RegExp("[,()]");var Ka=class extends qH{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&rx.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&rx.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},BH=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:i}=t??{},a=n?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join(""),{url:u,headers:m}=this.cloneRequestState();return u.searchParams.set("select",l),i&&m.append("Prefer",`count=${i}`),new Ka({method:a,url:u,headers:m,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((m,d)=>m.concat(Object.keys(d)),[]);if(u.length>0){const m=[...new Set(u)].map(d=>`"${d}"`);o.searchParams.set("columns",m.join(","))}}return new Ka({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST",{url:u,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),i&&m.append("Prefer",`count=${i}`),a||m.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(d.length>0){const p=[...new Set(d)].map(y=>`"${y}"`);u.searchParams.set("columns",p.join(","))}}return new Ka({method:l,url:u,headers:m,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const i="PATCH",{url:a,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Ka({method:i,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:i,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Ka({method:n,url:i,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},HH=class HE{constructor(t,{headers:n={},schema:i,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new BH(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HE(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:a=!1,count:o}={}){var l;let u;const m=new URL(`${this.url}/rpc/${t}`);let d;const p=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(p)),y=i&&Object.values(n).some(p);y?(u="POST",d=n):i||a?(u=i?"HEAD":"GET",Object.entries(n).filter(([E,A])=>A!==void 0).map(([E,A])=>[E,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([E,A])=>{m.searchParams.append(E,A)})):(u="POST",d=n);const v=new Headers(this.headers);return y?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new Ka({method:u,url:m,headers:v,schema:this.schemaName,body:d,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class UH{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const a=i.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FH="2.93.3",GH=`realtime-js/${FH}`,zH="1.0.0",UE="2.0.0",ax=UE,Xm=1e4,VH=1e3,WH=100;var pr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pr||(pr={}));var Ot;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ot||(Ot={}));var ei;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ei||(ei={}));var Zm;(function(e){e.websocket="websocket"})(Zm||(Zm={}));var Wr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wr||(Wr={}));class jH{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,i;const a=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,i;const a=(i=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,i){var a,o;const l=t.topic,u=(a=t.ref)!==null&&a!==void 0?a:"",m=(o=t.join_ref)!==null&&o!==void 0?o:"",d=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(p).length===0?"":JSON.stringify(p);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+u.length+l.length+d.length+y.length,E=new ArrayBuffer(this.HEADER_LENGTH+v);let A=new DataView(E),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,m.length),A.setUint8(C++,u.length),A.setUint8(C++,l.length),A.setUint8(C++,d.length),A.setUint8(C++,y.length),A.setUint8(C++,n),Array.from(m,I=>A.setUint8(C++,I.charCodeAt(0))),Array.from(u,I=>A.setUint8(C++,I.charCodeAt(0))),Array.from(l,I=>A.setUint8(C++,I.charCodeAt(0))),Array.from(d,I=>A.setUint8(C++,I.charCodeAt(0))),Array.from(y,I=>A.setUint8(C++,I.charCodeAt(0)));var S=new Uint8Array(E.byteLength+i.byteLength);return S.set(new Uint8Array(E),0),S.set(new Uint8Array(i),E.byteLength),S.buffer}decode(t,n){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return n(i)}if(typeof t=="string"){const i=JSON.parse(t),[a,o,l,u,m]=i;return n({join_ref:a,ref:o,topic:l,event:u,payload:m})}return n({})}_binaryDecode(t){const n=new DataView(t),i=n.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,i){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let m=this.HEADER_LENGTH+4;const d=i.decode(t.slice(m,m+a));m=m+a;const p=i.decode(t.slice(m,m+o));m=m+o;const y=i.decode(t.slice(m,m+l));m=m+l;const v=t.slice(m,t.byteLength),E=u===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,A={type:this.BROADCAST_EVENT,event:p,payload:E};return l>0&&(A.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([i])=>n.includes(i)))}}class FE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ft;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ft||(ft={}));const sx=(e,t,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=YH(l,e,t,a),o),{}):{}},YH=(e,t,n,i)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,l=n[e];return o&&!i.includes(o)?GE(o,l):ef(l)},GE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return JH(t,n)}switch(e){case ft.bool:return $H(t);case ft.float4:case ft.float8:case ft.int2:case ft.int4:case ft.int8:case ft.numeric:case ft.oid:return KH(t);case ft.json:case ft.jsonb:return QH(t);case ft.timestamp:return XH(t);case ft.abstime:case ft.date:case ft.daterange:case ft.int4range:case ft.int8range:case ft.money:case ft.reltime:case ft.text:case ft.time:case ft.timestamptz:case ft.timetz:case ft.tsrange:case ft.tstzrange:return ef(t);default:return ef(t)}},ef=e=>e,$H=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},KH=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QH=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},JH=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>GE(t,u))}return e},XH=e=>typeof e=="string"?e.replace(" ","T"):e,zE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class mm{constructor(t,n,i={},a=Xm){this.channel=t,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ox;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ox||(ox={}));class Do{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Do.syncState(this.state,a,o,l),this.pendingDiffs.forEach(m=>{this.state=Do.syncDiff(this.state,m,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Do.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,a){const o=this.cloneDeep(t),l=this.transformState(n),u={},m={};return this.map(o,(d,p)=>{l[d]||(m[d]=p)}),this.map(l,(d,p)=>{const y=o[d];if(y){const v=p.map(S=>S.presence_ref),E=y.map(S=>S.presence_ref),A=p.filter(S=>E.indexOf(S.presence_ref)<0),C=y.filter(S=>v.indexOf(S.presence_ref)<0);A.length>0&&(u[d]=A),C.length>0&&(m[d]=C)}else u[d]=p}),this.syncDiff(o,{joins:u,leaves:m},i,a)}static syncDiff(t,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(u,m)=>{var d;const p=(d=t[u])!==null&&d!==void 0?d:[];if(t[u]=this.cloneDeep(m),p.length>0){const y=t[u].map(E=>E.presence_ref),v=p.filter(E=>y.indexOf(E.presence_ref)<0);t[u].unshift(...v)}i(u,p,m)}),this.map(l,(u,m)=>{let d=t[u];if(!d)return;const p=m.map(y=>y.presence_ref);d=d.filter(y=>p.indexOf(y.presence_ref)<0),t[u]=d,a(u,d,m),d.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const a=t[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(lx||(lx={}));var Lo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Lo||(Lo={}));var Di;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Di||(Di={}));class ts{constructor(t,n={config:{}},i){var a,o;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mm(this,ei.join,this.params,this.timeout),this.rejoinTimer=new FE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ei.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Do(this),this.broadcastEndpointURL=zE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:l,presence:u,private:m}}=this.params,d=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(E=>E.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Lo.PRESENCE]&&this.bindings[Lo.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:d,private:m};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(E=>t==null?void 0:t(Di.CHANNEL_ERROR,E)),this._onClose(()=>t==null?void 0:t(Di.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){t==null||t(Di.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,S=(A=C==null?void 0:C.length)!==null&&A!==void 0?A:0,I=[];for(let L=0;L<S;L++){const P=C[L],{filter:{event:G,schema:J,table:q,filter:V}}=P,ve=E&&E[L];if(ve&&ve.event===G&&ts.isFilterValueEqual(ve.schema,J)&&ts.isFilterValueEqual(ve.table,q)&&ts.isFilterValueEqual(ve.filter,V))I.push(Object.assign(Object.assign({},P),{id:ve.id}));else{this.unsubscribe(),this.state=Ot.errored,t==null||t(Di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,t&&t(Di.SUBSCRIBED);return}}).receive("error",E=>{this.state=Ot.errored,t==null||t(Di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Ot.joined&&t===Lo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let m=u.statusText;try{const d=await u.json();m=d.error||d.message||m}catch{}return Promise.reject(new Error(m))}async send(t,n={}){var i,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,m;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||m===void 0)&&m.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ot.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ei.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new mm(this,ei.leave,{},t),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new mm(this,t,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>WH){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var a,o;const l=t.toLocaleLowerCase(),{close:u,error:m,leave:d,join:p}=ei;if(i&&[u,m,d,p].indexOf(l)>=0&&i!==this._joinRef())return;let v=this._onMessage(l,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(E=>{var A,C,S;return((A=E.filter)===null||A===void 0?void 0:A.event)==="*"||((S=(C=E.filter)===null||C===void 0?void 0:C.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(E=>E.callback(v,i)):(o=this.bindings[l])===null||o===void 0||o.filter(E=>{var A,C,S,I,L,P;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in E){const G=E.id,J=(A=E.filter)===null||A===void 0?void 0:A.event;return G&&((C=n.ids)===null||C===void 0?void 0:C.includes(G))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const G=(L=(I=E==null?void 0:E.filter)===null||I===void 0?void 0:I.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return G==="*"||G===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===l}).map(E=>{if(typeof v=="object"&&"ids"in v){const A=v.data,{schema:C,table:S,commit_timestamp:I,type:L,errors:P}=A;v=Object.assign(Object.assign({},{schema:C,table:S,commit_timestamp:I,eventType:L,new:{},old:{},errors:P}),this._getPayloadRecords(A))}E.callback(v,i)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&ts.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ei.close,{},t)}_onError(t){this._on(ei.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=sx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=sx(t.columns,t.old_record)),n}}const fm=()=>{},Cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZH=[1e3,2e3,5e3,1e4],eU=1e4,tU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nU{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xm,this.transport=null,this.heartbeatIntervalMs=Cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fm,this.ref=0,this.reconnectTimer=null,this.vsn=ax,this.logger=fm,this.conn=null,this.sendBuffer=[],this.serializer=new jH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Zm.websocket}`,this.httpEndpoint=zE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=UH.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case pr.connecting:return Wr.Connecting;case pr.open:return Wr.Open;case pr.closing:return Wr.Closing;default:return Wr.Closed}}isConnected(){return this.connectionState()===Wr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new ts(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:i,payload:a,ref:o}=t,l=()=>{this.encode(t,u=>{var m;(m=this.conn)===null||m===void 0||m.send(u)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VH,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",d)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",m=o.status||"";this.log("receive",`${m} ${i} ${a} ${u}`.trim(),o),this.channels.filter(d=>d._isMember(i)).forEach(d=>d._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===pr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pr.open||this.conn.readyState===pr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ei.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${i}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([tU],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,i=!1;if(t)n=t,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:GH};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(ei.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new FE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,a,o,l,u,m,d,p,y,v,E;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Xm,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Cc.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:fm,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:ax,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(A=>ZH[A-1]||eU),this.vsn){case zH:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((A,C)=>C(JSON.stringify(A))),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:((A,C)=>C(JSON.parse(A)));break;case UE:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Fo=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function iU(e,t,n){const i=new URL(t,e);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&i.searchParams.set(a,o);return i.toString()}async function rU(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function aU(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:o,headers:l}){const u=iU(e.baseUrl,i,a),m=await rU(e.auth),d=await t(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...m,...l},body:o?JSON.stringify(o):void 0}),p=await d.text(),y=(d.headers.get("content-type")||"").includes("application/json"),v=y&&p?JSON.parse(p):p;if(!d.ok){const E=y?v:void 0,A=E==null?void 0:E.error;throw new Fo((A==null?void 0:A.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:E})}return{status:d.status,headers:d.headers,data:v}}}}function Sc(e){return e.join("")}var sU=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Sc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sc(e.namespace)}`}),!0}catch(t){if(t instanceof Fo&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Fo&&n.status===409)return;throw n}}};function Fa(e){return e.join("")}var oU=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fa(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Fo&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Fo&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},lU=class{constructor(e){var i;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=aU({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(i=e.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new sU(this.client,t),this.tableOps=new oU(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},bu=class extends Error{constructor(e,t="storage",n,i){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function vu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var kc=class extends bu{constructor(e,t,n,i="storage"){super(e,i,t,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},VE=class extends bu{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const cU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tf=e=>{if(Array.isArray(e))return e.map(n=>tf(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=tf(i)}),t},dU=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Go(e){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Go(e)}function hU(e,t){if(Go(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Go(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mU(e){var t=hU(e,"string");return Go(t)=="symbol"?t:t+""}function fU(e,t,n){return(t=mU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cx(Object(n),!0).forEach(function(i){fU(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cx(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const ux=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},pU=async(e,t,n,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const a=e,o=a.status||500;if(typeof a.json=="function")a.json().then(l=>{const u=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";t(new kc(ux(l),o,u,i))}).catch(()=>{if(i==="vectors"){const l=o+"";t(new kc(a.statusText||`HTTP ${o} error`,o,l,i))}else{const l=o+"";t(new kc(a.statusText||`HTTP ${o} error`,o,l,i))}});else{const l=o+"";t(new kc(a.statusText||`HTTP ${o} error`,o,l,i))}}else t(new VE(ux(e),e,i))},gU=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!i?Oe(Oe({},a),n):(uU(i)?(a.headers=Oe({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(i)):a.body=i,t!=null&&t.duplex&&(a.duplex=t.duplex),Oe(Oe({},a),n))};async function To(e,t,n,i,a,o,l){return new Promise((u,m)=>{e(n,gU(t,i,a,o)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;if(l==="vectors"){const p=d.headers.get("content-type");if(d.headers.get("content-length")==="0"||d.status===204)return{};if(!p||!p.includes("application/json"))return{}}return d.json()}).then(d=>u(d)).catch(d=>pU(d,m,i,l))})}function WE(e="storage"){return{get:async(t,n,i,a)=>To(t,"GET",n,i,a,void 0,e),post:async(t,n,i,a,o)=>To(t,"POST",n,a,o,i,e),put:async(t,n,i,a,o)=>To(t,"PUT",n,a,o,i,e),head:async(t,n,i,a)=>To(t,"HEAD",n,Oe(Oe({},i),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,n,i,a,o)=>To(t,"DELETE",n,a,o,i,e)}}const yU=WE("storage"),{get:zo,post:Zn,put:nf,head:bU,remove:Wf}=yU,Rn=WE("vectors");var ys=class{constructor(e,t={},n,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=cU(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(vu(n))return{data:null,error:n};throw n}}},vU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(vu(t))return{data:null,error:t};throw t}}};let jE;jE=Symbol.toStringTag;var wU=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[jE]="BlobDownloadBuilder",this.promise=null}asStream(){return new vU(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(vu(t))return{data:null,error:t};throw t}}};const xU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var TU=class extends ys{constructor(e,t={},n,i){super(e,t,i,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,i){var a=this;return a.handleOperation(async()=>{let o;const l=Oe(Oe({},dx),i);let u=Oe(Oe({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const m=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),m&&o.append("metadata",a.encodeMetadata(m)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),m&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(m))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,m&&(u["x-metadata"]=a.toBase64(a.encodeMetadata(m))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),i!=null&&i.headers&&(u=Oe(Oe({},u),i.headers));const d=a._removeEmptyFolders(t),p=a._getFinalPath(d),y=await(e=="PUT"?nf:Zn)(a.fetch,`${a.url}/object/${p}`,o,Oe({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:d,id:y.Id,fullPath:y.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,i){var a=this;const o=a._removeEmptyFolders(e),l=a._getFinalPath(o),u=new URL(a.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",t),a.handleOperation(async()=>{let m;const d=Oe({upsert:dx.upsert},i),p=Oe(Oe({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",d.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",d.cacheControl)):(m=n,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType),{path:o,fullPath:(await nf(a.fetch,u.toString(),m,{headers:p})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e);const a=Oe({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const o=await Zn(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new bu("No token returned by API");return{signedUrl:l.toString(),path:e,token:u}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var i=this;return i.handleOperation(async()=>await Zn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}))}async copy(e,t,n){var i=this;return i.handleOperation(async()=>({path:(await Zn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,t,n){var i=this;return i.handleOperation(async()=>{let a=i._getFinalPath(e),o=await Zn(i.fetch,`${i.url}/object/sign/${a}`,Oe({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${o.signedURL}${l}`)}})}async createSignedUrls(e,t,n){var i=this;return i.handleOperation(async()=>{const a=await Zn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:t,paths:e},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a.map(l=>Oe(Oe({},l),{},{signedUrl:l.signedURL?encodeURI(`${i.url}${l.signedURL}${o}`):null}))})}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),l=()=>zo(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new wU(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>tf(await zo(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await bU(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(vu(i)&&i instanceof VE){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Wf(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var i=this;return i.handleOperation(async()=>{const a=Oe(Oe(Oe({},xU),t),{},{prefix:e||""});return await Zn(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const i=Oe({},e);return await Zn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const EU="2.93.3",Zo={"X-Client-Info":`storage-js/${EU}`};var _U=class extends ys{constructor(e,t={},n,i){const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const o=a.href.replace(/\/$/,""),l=Oe(Oe({},Zo),t);super(o,l,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await zo(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await zo(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Zn(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await nf(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Zn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Wf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},AU=class extends ys{constructor(e,t={},n){const i=e.replace(/\/$/,""),a=Oe(Oe({},Zo),t);super(i,a,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Zn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const i=n.toString(),a=i?`${t.url}/bucket?${i}`:`${t.url}/bucket`;return await zo(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Wf(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!dU(e))throw new bu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new lU({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(a,u),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}},CU=class extends ys{constructor(e,t={},n){const i=e.replace(/\/$/,""),a=Oe(Oe({},Zo),{},{"Content-Type":"application/json"},t);super(i,a,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Rn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Rn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},SU=class extends ys{constructor(e,t={},n){const i=e.replace(/\/$/,""),a=Oe(Oe({},Zo),{},{"Content-Type":"application/json"},t);super(i,a,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},kU=class extends ys{constructor(e,t={},n){const i=e.replace(/\/$/,""),a=Oe(Oe({},Zo),{},{"Content-Type":"application/json"},t);super(i,a,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Rn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},IU=class extends kU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new NU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},NU=class extends CU{constructor(e,t,n,i){super(e,t,i),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new RU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},RU=class extends SU{constructor(e,t,n,i,a){super(e,t,a),this.vectorBucketName=n,this.indexName=i}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Oe(Oe({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},MU=class extends _U{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new TU(this.url,this.headers,e,this.fetch)}get vectors(){return new IU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AU(this.url+"/iceberg",this.headers,this.fetch)}};const YE="2.93.3",Qa=30*1e3,rf=3,pm=rf*Qa,PU="http://localhost:9999",DU="supabase.auth.token",LU={"X-Client-Info":`gotrue-js/${YE}`},af="X-Supabase-Api-Version",$E={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},OU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qU=600*1e3;class Vo extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class BU extends Vo{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function HU(e){return Re(e)&&e.name==="AuthApiError"}class jr extends Vo{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ui extends Vo{constructor(t,n,i,a){super(t,i,a),this.name=n,this.status=i}}class Nn extends Ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gm(e){return Re(e)&&e.name==="AuthSessionMissingError"}class Ga extends Ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ic extends Ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nc extends Ui{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function UU(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class hx extends Ui{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FU extends Ui{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sf extends Ui{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ym(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class mx extends Ui{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class of extends Ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fx=` 	
\r=`.split(""),GU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<fx.length;t+=1)e[fx[t].charCodeAt(0)]=-2;for(let t=0;t<Kc.length;t+=1)e[Kc[t].charCodeAt(0)]=t;return e})();function px(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Kc[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Kc[i]),t.queuedBits-=6}}function KE(e,t,n){const i=GU[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gx(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{WU(l,i,n)};for(let l=0;l<e.length;l+=1)KE(e.charCodeAt(l),a,o);return t.join("")}function zU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function VU(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}zU(i,t)}}function WU(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function as(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)KE(e.charCodeAt(a),n,i);return new Uint8Array(t)}function jU(e){const t=[];return VU(e,n=>t.push(n)),new Uint8Array(t)}function $r(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};return e.forEach(a=>px(a,n,i)),px(null,n,i),t.join("")}function YU(e){return Math.round(Date.now()/1e3)+e}function $U(){return Symbol("auth-callback")}const $t=()=>typeof window<"u"&&typeof document<"u",Fr={tested:!1,writable:!1},QE=()=>{if(!$t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fr.tested)return Fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fr.tested=!0,Fr.writable=!0}catch{Fr.tested=!0,Fr.writable=!1}return Fr.writable};function KU(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{t[a]=i}),t}const JE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),QU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ja=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Gr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Yt=async(e,t)=>{await e.removeItem(t)};class wu{constructor(){this.promise=new wu.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}wu.promiseConstructor=Promise;function Rc(e){const t=e.split(".");if(t.length!==3)throw new of("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!OU.test(t[i]))throw new of("JWT not in base64url format");return{header:JSON.parse(gx(t[0])),payload:JSON.parse(gx(t[1])),signature:as(t[2]),raw:{header:t[0],payload:t[1]}}}async function JU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function XU(e,t){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){i(l);return}}catch(l){if(!t(o,l)){a(l);return}}})()})}function ZU(e){return("0"+e.toString(16)).substr(-2)}function e9(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(t),Array.from(t,ZU).join("")}async function t9(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function n9(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await t9(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function za(e,t,n=!1){const i=e9();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Ja(e,`${t}-code-verifier`,a);const o=await n9(i);return[o,i===o?"plain":"s256"]}const i9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r9(e){const t=e.headers.get(af);if(!t||!t.match(i9))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function a9(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function s9(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const o9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Va(e){if(!o9.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bm(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l9(e,t){return new Proxy(e,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,a)}})}function yx(e){return JSON.parse(JSON.stringify(e))}const Vr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),c9=[502,503,504];async function bx(e){var t;if(!QU(e))throw new sf(Vr(e),0);if(c9.includes(e.status))throw new sf(Vr(e),e.status);let n;try{n=await e.json()}catch(o){throw new jr(Vr(o),o)}let i;const a=r9(e);if(a&&a.getTime()>=$E["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new mx(Vr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new mx(Vr(n),e.status,n.weak_password.reasons);throw new BU(Vr(n),e.status||500,i)}const u9=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function Le(e,t,n,i){var a;const o=Object.assign({},i==null?void 0:i.headers);o[af]||(o[af]=$E["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",m=await d9(e,t,n+u,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(m):{data:Object.assign({},m),error:null}}async function d9(e,t,n,i,a,o){const l=u9(t,i,a,o);let u;try{u=await e(n,Object.assign({},l))}catch(m){throw console.error(m),new sf(Vr(m),0)}if(u.ok||await bx(u),i!=null&&i.noResolveJson)return u;try{return await u.json()}catch(m){await bx(m)}}function Xn(e){var t;let n=null;f9(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=YU(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function vx(e){const t=Xn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function gr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function h9(e){return{data:e,error:null}}function m9(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=e,l=yu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},m=Object.assign({},l);return{data:{properties:u,user:m},error:null}}function wx(e){return e}function f9(e){return e.access_token&&e.refresh_token&&e.expires_in}const vm=["global","local","others"];class p9{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=JE(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=vm[0]){if(vm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vm.join(", ")}`);try{return await Le(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gr})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=yu(t,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:m9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Le(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gr})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,a,o,l,u,m;try{const d={nextPage:null,lastPage:0,total:0},p=await Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:wx});if(p.error)throw p.error;const y=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(m=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(A.split(";")[1].split("=")[1]);d[`${S}Page`]=C}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(Re(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Va(t);try{return await Le(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gr})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Va(t);try{return await Le(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:gr})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Va(t);try{return await Le(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:gr})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Va(t.userId);try{const{data:n,error:i}=await Le(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Va(t.userId),Va(t.id);try{return{data:await Le(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,a,o,l,u,m;try{const d={nextPage:null,lastPage:0,total:0},p=await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:wx});if(p.error)throw p.error;const y=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(m=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&m!==void 0?m:[];return E.length>0&&(E.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(A.split(";")[1].split("=")[1]);d[`${S}Page`]=C}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},y),d),error:null}}catch(d){if(Re(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await Le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function xx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Wa={debug:!!(globalThis&&QE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class g9 extends XE{}async function y9(e,t,n){Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new g9(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function b9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ZE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function v9(e){return parseInt(e,16)}function w9(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function x9(e){var t;const{chainId:n,domain:i,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:m,resources:d,scheme:p,uri:y,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const E=ZE(e.address),A=p?`${p}://${i}`:i,C=e.statement?`${e.statement}
`:"",S=`${A} wants you to sign in with your Ethereum account:
${E}

${C}`;let I=`URI: ${y}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(I+=`
Expiration Time: ${a.toISOString()}`),u&&(I+=`
Not Before: ${u.toISOString()}`),m&&(I+=`
Request ID: ${m}`),d){let L=`
Resources:`;for(const P of d){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);L+=`
- ${P}`}I+=L}return`${S}
${I}`}class Pt extends Error{constructor({message:t,code:n,cause:i,name:a}){var o;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=a??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Qc extends Pt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function T9({error:e,options:t}){var n,i,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(e_(l)){if(o.rp.id!==l)return new Pt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function E9({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(e_(i)){if(n.rpId!==i)return new Pt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class _9{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const A9=new _9;function C9(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,a=yu(e,["challenge","user","excludeCredentials"]),o=as(t).buffer,l=Object.assign(Object.assign({},n),{id:as(n.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:l});if(i&&i.length>0){u.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const d=i[m];u.excludeCredentials[m]=Object.assign(Object.assign({},d),{id:as(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return u}function S9(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=yu(e,["challenge","allowCredentials"]),a=as(t).buffer,o=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:as(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function k9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:$r(new Uint8Array(e.response.attestationObject)),clientDataJSON:$r(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function I9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:$r(new Uint8Array(a.authenticatorData)),clientDataJSON:$r(new Uint8Array(a.clientDataJSON)),signature:$r(new Uint8Array(a.signature)),userHandle:a.userHandle?$r(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function e_(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Tx(){var e,t;return!!($t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function N9(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qc("Browser returned unexpected credential type",t)}:{data:null,error:new Qc("Empty credential response",t)}}catch(t){return{data:null,error:T9({error:t,options:e})}}}async function R9(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qc("Browser returned unexpected credential type",t)}:{data:null,error:new Qc("Empty credential response",t)}}catch(t){return{data:null,error:E9({error:t,options:e})}}}const M9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},P9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jc(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of e)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))i[o]=l;else if(n(l))i[o]=l;else if(t(l)){const u=i[o];t(u)?i[o]=Jc(u,l):i[o]=Jc(l)}else i[o]=l}return i}function D9(e,t){return Jc(M9,e,t||{})}function L9(e,t){return Jc(P9,e,t||{})}class O9{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:a},o){var l;try{const{data:u,error:m}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!u)return{data:null,error:m};const d=a??A9.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const y=i;if(y)p.name=`${p.id}:${y}`;else{const E=(await this.client.getUser()).data.user,A=((l=E==null?void 0:E.user_metadata)===null||l===void 0?void 0:l.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";p.name=`${p.id}:${A}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=D9(u.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:v}=await N9({publicKey:p,signal:d});return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const p=L9(u.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:v}=await R9(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:d}));return y?{data:{factorId:t,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(u){return Re(u)?{data:null,error:u}:{data:null,error:new jr("Unexpected error in challenge",u)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new Vo("rpId is required for WebAuthn authentication")};try{if(!Tx())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:o});if(!l)return{data:null,error:u};const{webauthn:m}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new jr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new Vo("rpId is required for WebAuthn registration")};try{if(!Tx())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var y;return(y=p.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:m,error:d}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:o});return m?this._verify({factorId:l.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:d}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new jr("Unexpected error in register",l)}}}}b9();const q9={url:PU,storageKey:DU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:LU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ex(e,t,n){return await n()}const ja={};class Wo{get jwks(){var t,n;return(n=(t=ja[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ja[this.storageKey]=Object.assign(Object.assign({},ja[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ja[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ja[this.storageKey]=Object.assign(Object.assign({},ja[this.storageKey]),{cachedAt:t})}constructor(t){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},q9),t);if(this.storageKey=o.storageKey,this.instanceID=(n=Wo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Wo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&$t()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new p9({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=JE(o.fetch),this.lock=o.lock||Ex,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&$t()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=y9:this.lock=Ex,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new O9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:QE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=xx(this.memoryStorage)),$t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${YE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},i="none";if($t()&&(n=KU(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),$t()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),UU(o)){const m=(t=o.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new jr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,a;try{const o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xn}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const m=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:d,session:m},error:null})}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,i,a;try{let o;if("email"in t){const{email:p,password:y,options:v}=t;let E=null,A=null;this.flowType==="pkce"&&([E,A]=await za(this.storage,this.storageKey)),o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:E,code_challenge_method:A},xform:Xn})}else if("phone"in t){const{phone:p,password:y,options:v}=t;o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:y,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Xn})}else throw new Ic("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await Yt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const m=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:d,session:m},error:null})}catch(o){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:vx})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:vx})}else throw new Ic("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const o=new Ga;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,i,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,a,o,l,u,m,d,p,y,v;let E,A;if("message"in t)E=t.message,A=t.signature;else{const{chain:C,wallet:S,statement:I,options:L}=t;let P;if($t())if(typeof S=="object")P=S;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")P=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=S}const G=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href),J=await P.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!J||J.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=ZE(J[0]);let V=(i=L==null?void 0:L.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!V){const ne=await P.request({method:"eth_chainId"});V=v9(ne)}const ve={domain:G.host,address:q,statement:I,uri:G.href,version:"1",chainId:V,nonce:(a=L==null?void 0:L.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=L==null?void 0:L.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(m=L==null?void 0:L.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(d=L==null?void 0:L.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(p=L==null?void 0:L.signInWithEthereum)===null||p===void 0?void 0:p.resources};E=x9(ve),A=await P.request({method:"personal_sign",params:[w9(E),q]})}try{const{data:C,error:S}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:A},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Xn});if(S)throw S;if(!C||!C.session||!C.user){const I=new Ga;return this._returnResult({data:{user:null,session:null},error:I})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:S})}catch(C){if(Re(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(t){var n,i,a,o,l,u,m,d,p,y,v,E;let A,C;if("message"in t)A=t.message,C=t.signature;else{const{chain:S,wallet:I,statement:L,options:P}=t;let G;if($t())if(typeof I=="object")G=I;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))G=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=I}const J=new URL((n=P==null?void 0:P.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const q=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),L?{statement:L}:null));let V;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")V=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)V=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)A=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),C=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${J.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(a=(i=P==null?void 0:P.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=P==null?void 0:P.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((l=P==null?void 0:P.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((m=P==null?void 0:P.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((d=P==null?void 0:P.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((y=(p=P==null?void 0:P.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||y===void 0)&&y.length?["Resources",...P.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const q=await G.signMessage(new TextEncoder().encode(A),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=q}}try{const{data:S,error:I}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:$r(C)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Xn});if(I)throw I;if(!S||!S.session||!S.user){const L=new Ga;return this._returnResult({data:{user:null,session:null},error:L})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:I})}catch(S){if(Re(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(t){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new FU;const{data:o,error:l}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Xn});if(await Yt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new Ga;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=t,u=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xn}),{data:m,error:d}=u;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!m||!m.session||!m.user){const p=new Ga;return this._returnResult({data:{user:null,session:null},error:p})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:d})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,i,a,o,l;try{if("email"in t){const{email:u,options:m}=t;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await za(this.storage,this.storageKey));const{error:y}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(i=m==null?void 0:m.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:u,options:m}=t,{data:d,error:p}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(l=m==null?void 0:m.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p})}throw new Ic("You must provide either an email or phone number.")}catch(u){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,i;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Xn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const m=l.session,d=l.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:d,session:m},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,i,a,o,l;try{let u=null,m=null;this.flowType==="pkce"&&([u,m]=await za(this.storage,this.storageKey));const d=await Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:m}),headers:this.headers,xform:h9});return!((o=d.data)===null||o===void 0)&&o.url&&$t()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(u){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Nn;const{error:a}=await Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Re(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:a,options:o}=t,{error:l}=await Le(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:i,type:a,options:o}=t,{data:l,error:u}=await Le(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Ic("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<pm:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const l=await Gr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=bm()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=l9(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gr}):await this._useSession(async n=>{var i,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nn}:await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:gr})})}catch(n){if(Re(n))return gm(n)&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new Nn;const l=a.session;let u=null,m=null;this.flowType==="pkce"&&t.email!=null&&([u,m]=await za(this.storage,this.storageKey));const{data:d,error:p}=await Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:m}),jwt:l.access_token,xform:gr});if(p)throw p;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Nn;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=Rc(t.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{data:u,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:m}=await this._getUser(t.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Nn;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!$t())throw new Nc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new hx("No code detected.");const{data:L,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:m,token_type:d}=t;if(!o||!u||!l||!d)throw new Nc("No session defined in URL");const p=Math.round(Date.now()/1e3),y=parseInt(u);let v=p+y;m&&(v=parseInt(m));const E=v-p;E*1e3<=Qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${y}s`);const A=v-y;p-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,v,p):p-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,v,p);const{data:C,error:S}=await this._getUser(o);if(S)throw S;const I={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:d,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:t.type},error:null})}catch(i){if(Re(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Gr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o&&!gm(o))return this._returnResult({error:o});const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(HU(u)&&(u.status===404||u.status===401||u.status===403)||gm(u)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=$U(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await za(this.storage,this.storageKey,!0));try{return await Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,u,m,d,p;const{data:y,error:v}=o;if(v)throw v;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Le(this.fetch,"GET",E,{headers:this.headers,jwt:(p=(d=y.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return $t()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Re(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:u,token:m,access_token:d,nonce:p}=t,y=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:m,access_token:d,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xn}),{data:v,error:E}=y;return E?this._returnResult({data:{user:null,session:null},error:E}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Ga}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:E}))}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await Le(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await XU(async a=>(a>0&&await JU(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xn})),(a,o)=>{const l=200*Math.pow(2,a);return o&&ym(o)&&Date.now()+l-i<Qa})}catch(i){if(this._debug(n,"error",i),Re(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),$t()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Gr(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Ja(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:bm()}else if(a&&!a.user&&!a.user){const l=await Gr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Yt(this.storage,this.storageKey+"-user"),await Ja(this.storage,this.storageKey,a)):a.user=bm()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pm;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${pm}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),ym(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new wu;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Nn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),Re(o)){const l={data:null,error:o};return ym(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,i=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(m){o.push(m)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Yt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Ja(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=yx(a);await Ja(this.storage,this.storageKey,o)}else{const a=yx(n);await Ja(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Yt(this.storage,this.storageKey),await Yt(this.storage,this.storageKey+"-code-verifier"),await Yt(this.storage,this.storageKey+"-user"),this.userStorage&&await Yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&$t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-t)/Qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qa}ms, refresh threshold is ${rf} ticks`),a<=rf&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof XE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await za(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await Le(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:d}=await Le(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&m.type==="totp"&&(!((a=m==null?void 0:m.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?k9(t.webauthn.credential_response):I9(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:m}=await Le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:m}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:C9(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:S9(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,i,a,o;if(t)try{const{payload:E}=Rc(t);let A=null;E.aal&&(A=E.aal);let C=A;const{data:{user:S},error:I}=await this.getUser(t);if(I)return this._returnResult({data:null,error:I});((i=(n=S==null?void 0:S.factors)===null||n===void 0?void 0:n.filter(G=>G.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(C="aal2");const P=E.amr||[];return{data:{currentLevel:A,nextLevel:C,currentAuthenticationMethods:P},error:null}}catch(E){if(Re(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Rc(l.access_token);let d=null;m.aal&&(d=m.aal);let p=d;((o=(a=l.user.factors)===null||a===void 0?void 0:a.filter(E=>E.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const v=m.amr||[];return{data:{currentLevel:d,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await Le(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Nn});const l=await Le(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&$t()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Nn});const l=await Le(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&$t()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await Le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(t){if(Re(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await Le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nn})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(u=>u.kid===t);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(u=>u.kid===t),i&&this.jwks_cached_at+qU>a)return i;const{data:o,error:l}=await Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(u=>u.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:E,error:A}=await this.getSession();if(A||!E.session)return this._returnResult({data:null,error:A});i=E.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:m}}=Rc(i);n!=null&&n.allowExpired||a9(o.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:E}=await this.getUser(i);if(E)throw E;return{data:{claims:o,header:a,signature:l},error:null}}const p=s9(a.alg),y=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,y,l,jU(`${u}.${m}`)))throw new of("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(Re(i))return this._returnResult({data:null,error:i});throw i}}}Wo.nextInstanceID={};const B9=Wo,H9="2.93.3";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const U9={"X-Client-Info":`supabase-js-${Ao}/${H9}`},F9={headers:U9},G9={schema:"public"},z9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V9={};function jo(e){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(e)}function W9(e,t){if(jo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(jo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j9(e){var t=W9(e,"string");return jo(t)=="symbol"?t:t+""}function Y9(e,t,n){return(t=j9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_x(Object(n),!0).forEach(function(i){Y9(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_x(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}const $9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),K9=()=>Headers,Q9=(e,t,n)=>{const i=$9(n),a=K9();return async(o,l)=>{var u;const m=(u=await t())!==null&&u!==void 0?u:e;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${m}`),i(o,Et(Et({},l),{},{headers:d}))}};function J9(e){return e.endsWith("/")?e:e+"/"}function X9(e,t){var n,i;const{db:a,auth:o,realtime:l,global:u}=e,{db:m,auth:d,realtime:p,global:y}=t,v={db:Et(Et({},m),a),auth:Et(Et({},d),o),realtime:Et(Et({},p),l),storage:{},global:Et(Et(Et({},y),u),{},{headers:Et(Et({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(i=u==null?void 0:u.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function Z9(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J9(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var e7=class extends B9{constructor(e){super(e)}},t7=class{constructor(e,t,n){var i,a;this.supabaseUrl=e,this.supabaseKey=t;const o=Z9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:G9,realtime:V9,auth:Et(Et({},z9),{},{storageKey:l}),global:F9},m=X9(n??{},u);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=m.global.headers)!==null&&a!==void 0?a:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=m.auth)!==null&&d!==void 0?d:{},this.headers,m.global.fetch)}this.fetch=Q9(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Et({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new HH(new URL("rest/v1",o).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new MU(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new DH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(t=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:l,lock:u,debug:m,throwOnError:d},p,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e7({url:this.authUrl.href,headers:Et(Et({},v),p),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:u,debug:m,throwOnError:d,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nU(this.realtimeUrl.href,Et(Et({},e),{},{params:Et(Et({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const n7=(e,t,n)=>new t7(e,t,n);function i7(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}i7()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const r7="https://acuehlltnkbpatsbkhqc.supabase.co",a7="sb_publishable_shSHJriRfveQ5r-FmKBfaA_WX6h4JUz",xr=n7(r7,a7),s7=async(e,t,n)=>{const{data:i,error:a}=await xr.auth.signUp({email:e,password:t,options:{data:{full_name:n==null?void 0:n.fullName,phone:n==null?void 0:n.phone}}});return{data:i,error:a}},Ax=async(e,t)=>{const{data:n,error:i}=await xr.auth.signInWithPassword({email:e,password:t});return{data:n,error:i}},o7=async()=>{const{data:e,error:t}=await xr.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return{data:e,error:t}},l7=async()=>{const{error:e}=await xr.auth.signOut();return{error:e}},c7=e=>xr.auth.onAuthStateChange(e),Cx=async e=>{const{data:t,error:n}=await xr.from("profiles").select("is_subscribed, subscription_plan, subscription_end_date").eq("id",e).single();return{data:t,error:n}},u7=async(e,t)=>{const n=new Date,i=t==="2-months"?2:t==="4-months"?4:6;n.setMonth(n.getMonth()+i);const{error:a}=await xr.from("profiles").update({is_subscribed:!0,subscription_plan:t,subscription_end_date:n.toISOString()}).eq("id",e);return{error:a}},d7=({onAuthSuccess:e})=>{const[t,n]=oe.useState(!0),[i,a]=oe.useState(""),[o,l]=oe.useState(""),[u,m]=oe.useState(""),[d,p]=oe.useState(""),[y,v]=oe.useState(""),[E,A]=oe.useState(!1),[C,S]=oe.useState(!1),[I,L]=oe.useState(null),[P,G]=oe.useState(null),J=async q=>{if(q.preventDefault(),L(null),G(null),S(!0),!t){if(o!==u){L("Passwords do not match"),S(!1);return}if(!d.trim()){L("Please enter your full name"),S(!1);return}if(!y.trim()){L("Please enter your mobile number"),S(!1);return}}if(o.length<6){L("Password must be at least 6 characters"),S(!1);return}try{if(t){const{error:V}=await Ax(i,o);V?L(V.message):e()}else{const{error:V}=await s7(i,o,{fullName:d,phone:y});V?L(V.message):(G("Account created successfully! Signing you in..."),setTimeout(async()=>{const{error:ve}=await Ax(i,o);ve||e()},1500))}}catch(V){L(V.message||"An unexpected error occurred")}finally{S(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-4",children:w.jsxs("div",{className:"w-full max-w-md",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent",children:"MedPro Exam Hub"}),w.jsx("p",{className:"text-slate-400 mt-2",children:"Your dental exam preparation companion"})]}),w.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[w.jsxs("div",{className:"flex bg-slate-900/50 rounded-xl p-1 mb-6",children:[w.jsx("button",{type:"button",onClick:()=>{n(!0),L(null),G(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${t?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-slate-400 hover:text-slate-300"}`,children:"Sign In"}),w.jsx("button",{type:"button",onClick:()=>{n(!1),L(null),G(null)},className:`flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${t?"text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg"}`,children:"Sign Up"})]}),w.jsxs("form",{onSubmit:J,className:"space-y-4",children:[!t&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"relative",children:[w.jsx(cH,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),w.jsx("input",{type:"text",placeholder:"Full Name",value:d,onChange:q=>p(q.target.value),required:!t,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),w.jsxs("div",{className:"relative",children:[w.jsx(XB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),w.jsx("input",{type:"tel",placeholder:"Mobile Number",value:y,onChange:q=>v(q.target.value),required:!t,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]})]}),w.jsxs("div",{className:"relative",children:[w.jsx(jB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),w.jsx("input",{type:"email",placeholder:"Email address",value:i,onChange:q=>a(q.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),w.jsxs("div",{className:"relative",children:[w.jsx(ex,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),w.jsx("input",{type:E?"text":"password",placeholder:"Password",value:o,onChange:q=>l(q.target.value),required:!0,className:"w-full pl-11 pr-11 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"}),w.jsx("button",{type:"button",onClick:()=>A(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-300",children:E?w.jsx(HB,{className:"w-5 h-5"}):w.jsx(FB,{className:"w-5 h-5"})})]}),!t&&w.jsxs("div",{className:"relative",children:[w.jsx(ex,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),w.jsx("input",{type:E?"text":"password",placeholder:"Confirm password",value:u,onChange:q=>m(q.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),I&&w.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm",children:[w.jsx(IB,{className:"w-4 h-4 flex-shrink-0"}),w.jsx("span",{children:I})]}),P&&w.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/30 rounded-xl text-green-400 text-sm",children:[w.jsx(RB,{className:"w-4 h-4 flex-shrink-0"}),w.jsx("span",{children:P})]}),w.jsx("button",{type:"submit",disabled:C,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?w.jsxs(w.Fragment,{children:[w.jsx(zB,{className:"w-5 h-5 animate-spin"}),t?"Signing in...":"Creating account..."]}):t?"Sign In":"Create Account"})]}),w.jsxs("div",{className:"relative my-6",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-slate-700"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-slate-800 text-slate-500",children:"Or continue with"})})]}),w.jsxs("button",{type:"button",onClick:async()=>{try{S(!0);const{error:q}=await o7();q&&L(q.message)}catch(q){L(q.message),S(!1)}},className:"w-full py-3 bg-white text-slate-900 font-semibold rounded-xl hover:bg-slate-100 transition-all duration-200 flex items-center justify-center gap-2",children:[w.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[w.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),w.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),w.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26.81-.58z",fill:"#FBBC05"}),w.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),t&&w.jsxs("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Forgot your password?"," ",w.jsx("button",{className:"text-purple-400 hover:text-purple-300 transition-colors",children:"Reset it here"})]})]}),w.jsx("p",{className:"text-center text-slate-500 text-xs mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})})},h7=({onSelectPlan:e})=>{const[t,n]=oe.useState(null),i=[{id:"2-months",duration:"2 Months",price:"2,000",icon:dH,color:"from-blue-500 to-cyan-500",popular:!1,features:[]},{id:"4-months",duration:"4 Months",price:"3,500",icon:rH,color:"from-purple-500 to-pink-500",popular:!0,features:[]},{id:"6-months",duration:"6 Months",price:"5,000",icon:PB,color:"from-amber-400 to-orange-500",popular:!1,features:[]}];return w.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-black text-slate-900 dark:text-white py-20 px-4 transition-colors duration-300",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs("div",{className:"text-center mb-16",children:[w.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:"Choose Your Success Path"}),w.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100",children:"Unlock the full potential of your exam preparation with our premium plans tailored to your timeline."})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:i.map((a,o)=>{const l=a.icon,u=t===a.id;return w.jsxs("div",{onClick:()=>n(a.id),className:"relative group rounded-3xl p-1 transition-all duration-300 cursor-pointer animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards",style:{animationDelay:`${o*150}ms`},children:[w.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${a.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl`}),w.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${a.color} opacity-0 ${u?"opacity-100":"group-hover:opacity-100"} transition-opacity duration-300`}),w.jsxs("div",{className:"relative h-full bg-white dark:bg-slate-900 rounded-[22px] p-8 flex flex-col items-center border border-slate-200 dark:border-slate-800 hover:border-transparent transition-colors duration-300",children:[a.popular&&w.jsx("div",{className:"absolute -top-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg transform -translate-y-1 group-hover:-translate-y-2 transition-transform duration-300",children:"MOST POPULAR"}),w.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${a.color} flex items-center justify-center text-white mb-6 shadow-lg transform group-hover:scale-110 transition-transform duration-300`,children:w.jsx(l,{className:"w-8 h-8"})}),w.jsx("h3",{className:"text-2xl font-bold mb-2",children:a.duration}),w.jsxs("div",{className:"flex items-baseline gap-1 mb-8",children:[w.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"PKR"}),w.jsx("span",{className:"text-4xl font-bold tracking-tight",children:a.price})]}),w.jsx("ul",{className:"space-y-4 w-full mb-8 flex-1",children:a.features.map((m,d)=>w.jsxs("li",{className:"flex items-start gap-3",children:[w.jsx("div",{className:`mt-1 p-0.5 rounded-full bg-gradient-to-br ${a.color}`,children:w.jsx(AB,{className:"w-3 h-3 text-white",strokeWidth:3})}),w.jsx("span",{className:"text-slate-600 dark:text-slate-300 text-sm",children:m})]},d))}),w.jsx("button",{onClick:m=>{m.stopPropagation(),e(a.id)},className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all duration-300 transform active:scale-95
                      bg-gradient-to-r ${a.color} hover:brightness-110 hover:shadow-xl
                    `,children:"Select Plan"})]})]},a.id)})}),w.jsx("p",{className:"text-center text-slate-500 dark:text-slate-500 mt-12 text-sm",children:"All plans include a 7-day money-back guarantee. Secure payment processed via Stripe/local gateways."})]})})},m7=[ie.ANATOMY,ie.PHYSIOLOGY,ie.BIOCHEMISTRY,ie.ORAL_HISTOLOGY,ie.TOOTH_MORPHOLOGY],f7=[ie.PHARMACOLOGY,ie.GENERAL_PATHOLOGY,ie.MICROBIOLOGY,ie.COMMUNITY_MEDICINE,ie.DENTAL_MATERIALS],p7=[ie.ORAL_PATHOLOGY,ie.PERIODONTOLOGY,ie.ORAL_MEDICINE_RADIOLOGY,ie.INTERNAL_MEDICINE,ie.SURGERY],g7=[ie.ORTHODONTICS,ie.PROSTHODONTICS,ie.ORAL_SURGERY,ie.OPERATIVE_ENDO],y7=[ie.ANATOMY,ie.PHYSIOLOGY,ie.BIOCHEMISTRY,ie.GENERAL_PATHOLOGY,ie.MICROBIOLOGY,ie.ORAL_HISTOLOGY,ie.TOOTH_MORPHOLOGY,ie.DENTAL_MATERIALS],b7=[ie.PHARMACOLOGY,ie.INTERNAL_MEDICINE,ie.SURGERY,ie.ORAL_PATHOLOGY,ie.ORAL_MEDICINE_RADIOLOGY,ie.COMMUNITY_MEDICINE],v7=[ie.OPERATIVE_ENDO,ie.PROSTHODONTICS,ie.PERIODONTOLOGY,ie.ORAL_SURGERY,ie.ORTHODONTICS],w7=[ie.ANATOMY,ie.PHYSIOLOGY],x7=[ie.BIOCHEMISTRY,ie.PHARMACOLOGY,ie.GENERAL_PATHOLOGY,ie.MICROBIOLOGY],T7=[ie.ORAL_HISTOLOGY,ie.TOOTH_MORPHOLOGY,ie.DENTAL_MATERIALS,ie.ORAL_PATHOLOGY,ie.ORAL_MEDICINE_RADIOLOGY,ie.PERIODONTOLOGY,ie.COMMUNITY_MEDICINE,ie.PEDIATRICS],E7=()=>{var N;const[e,t]=oe.useState(null),[n,i]=oe.useState(!1),[a,o]=oe.useState(!0),[l,u]=oe.useState("dashboard"),[m,d]=oe.useState("dashboard"),[p,y]=oe.useState("FCPS"),[v,E]=oe.useState(null),[A,C]=oe.useState(void 0),[S,I]=oe.useState(!0),[L,P]=oe.useState(new Set),[G,J]=oe.useState(!1),[q,V]=oe.useState(null),[ve,ne]=oe.useState({});oe.useEffect(()=>{xr.auth.getSession().then(async({data:{session:pe}})=>{if(t((pe==null?void 0:pe.user)??null),pe!=null&&pe.user){const{data:ge}=await Cx(pe.user.id);ge!=null&&ge.is_subscribed&&i(!0)}o(!1)});const{data:{subscription:te}}=c7(async(pe,ge)=>{if(t((ge==null?void 0:ge.user)??null),ge!=null&&ge.user){const{data:ue}=await Cx(ge.user.id);ue!=null&&ue.is_subscribed?i(!0):i(!1)}else i(!1)});return()=>te.unsubscribe()},[]),oe.useEffect(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]);const F=()=>I(!S),de=async()=>{await l7(),t(null)},me=te=>{E(te),u("subject-detail")},ke=te=>{C(te),u("summary")},xe=te=>{C(te),d("subject-detail"),u("quiz")},be=te=>{E(te),C(void 0),d("question-banks"),u("quiz")},j=()=>{d("summary"),u("quiz")},ce=(te,pe)=>{P(ge=>{const ue=new Set(ge);return ue.has(te)?ue.delete(te):ue.add(te),ue})},Ee=(te,pe)=>{ne(ge=>{const ue=ge[te]||{correct:0,incorrect:0};return{...ge,[te]:{correct:pe?ue.correct+1:ue.correct,incorrect:pe?ue.incorrect:ue.incorrect+1}}})},X=()=>{u("dashboard"),E(null),C(void 0)},R=()=>{u("subject-detail"),C(void 0)},D=(te,pe,ge="text-slate-400 dark:text-slate-300",ue="border-slate-300 dark:border-white/10")=>{const Ce=[...pe].sort((_e,fe)=>{const Ae=L.has(_e),ze=L.has(fe);return Ae===ze?0:Ae?1:-1});return w.jsxs("div",{className:"mb-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx("h2",{className:`text-lg font-bold uppercase tracking-widest px-4 border rounded-full py-1 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm ${ge} ${ue}`,children:te}),w.jsx("div",{className:`h-px flex-1 ${ue.replace("border","bg")}`})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ce.map(_e=>w.jsx(SC,{subject:_e,onClick:me,isCompleted:L.has(_e),onToggleComplete:ce},_e))})]})},W=()=>w.jsxs("div",{className:"space-y-12",children:[w.jsx(IH,{stream:p,completedSubjects:Array.from(L),onStartStudy:te=>{te==="Impression Materials"?(E(ie.DENTAL_MATERIALS),C("Impression Materials"),d("dashboard"),u("quiz")):u("question-banks")}}),w.jsxs("div",{className:"pt-8 border-t border-slate-200 dark:border-white/5",children:[w.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-8 px-2",children:"Course Modules"}),p==="BDS"&&w.jsxs(w.Fragment,{children:[D("1st Year Modules",m7),D("2nd Year Modules",f7),D("3rd Year Modules (Clinical)",p7,"text-cyan-600 dark:text-cyan-400","border-cyan-500/20"),D("Final Year (4th Year)",g7,"text-cyan-600 dark:text-cyan-400","border-cyan-500/20")]}),p==="ORE"&&w.jsxs(w.Fragment,{children:[D("Part 1: Paper A (Basic Sciences)",y7,"text-rose-600 dark:text-rose-400","border-rose-500/20"),D("Part 1: Paper B (Clinical & Medical)",b7,"text-rose-600 dark:text-rose-400","border-rose-500/20"),D("Part 2: Dental Clinical Sciences",v7,"text-rose-600 dark:text-rose-400","border-rose-500/20")]}),p==="FCPS"&&w.jsxs(w.Fragment,{children:[D("MBBS Major Topics",w7,"text-purple-600 dark:text-purple-400","border-purple-500/20"),D("MBBS Minor Topics",x7,"text-purple-600 dark:text-purple-400","border-purple-500/20"),D("Dental Sciences",T7,"text-purple-600 dark:text-purple-400","border-purple-500/20")]})]})]});return a?w.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:w.jsx("div",{className:"w-8 h-8 animate-spin text-purple-600"})}):e?n?w.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${S?"dark bg-slate-900":"bg-slate-50"}`,children:[(l==="quiz"||l==="summary")&&w.jsx("div",{className:"fixed top-6 right-8 z-[100] animate-in slide-in-from-right-10 duration-500",children:w.jsx("button",{onClick:F,className:"p-3 rounded-2xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-all shadow-2xl border border-slate-200 dark:border-white/10 group active:scale-95",title:"Toggle Theme",children:S?w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),l!=="quiz"&&l!=="summary"&&w.jsxs("nav",{className:"glass-panel sticky top-4 mx-4 md:mx-8 z-40 rounded-2xl px-6 py-3 hidden md:flex items-center justify-between mt-4",children:[w.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:X,children:[w.jsx("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 p-2 rounded-xl shadow-[0_0_15px_rgba(6,182,212,0.4)] group-hover:shadow-[0_0_25px_rgba(6,182,212,0.6)] transition-all",children:w.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),w.jsxs("span",{className:"font-bold text-xl tracking-tight text-slate-800 dark:text-white",children:["DentEdge ",w.jsx("span",{className:"text-xs text-cyan-500 dark:text-cyan-400 font-normal ml-1",children:"PRO"})]})]}),w.jsxs("div",{className:"flex items-center bg-white/50 dark:bg-slate-900/50 rounded-full p-1 border border-slate-200 dark:border-white/5",children:[w.jsx("button",{onClick:X,className:`px-5 py-2 rounded-full text-sm font-medium transition-all ${l==="dashboard"?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Dashboard"}),w.jsx("button",{onClick:()=>u("question-banks"),className:`px-5 py-2 rounded-full text-sm font-medium transition-all ${l==="question-banks"?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"MCQ Bank"}),w.jsx("button",{onClick:()=>u("ai-chat"),className:`px-5 py-2 rounded-full text-sm font-medium transition-all ${l==="ai-chat"?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"AI Tutor"})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:F,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-colors",children:S?w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 hidden lg:block",children:(N=e==null?void 0:e.email)==null?void 0:N.split("@")[0]}),w.jsx("button",{onClick:de,className:"px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm font-medium",children:"Sign Out"})]})]})]}),w.jsxs("main",{className:"flex-1 container max-w-[1800px] mx-auto px-4 py-8 pb-32 md:pb-8",children:[l==="dashboard"&&w.jsxs("div",{className:"animate-in fade-in duration-500",children:[w.jsx("div",{className:"flex justify-center mb-8",children:w.jsxs("div",{className:"flex p-1 bg-white/60 dark:bg-slate-900/50 rounded-full backdrop-blur-md border border-slate-200 dark:border-white/5 shadow-sm",children:[w.jsx("button",{disabled:!0,className:"px-6 py-2 rounded-full text-sm font-bold transition-all text-slate-300 dark:text-slate-700 cursor-not-allowed",children:"BDS (Locked)"}),w.jsx("button",{disabled:!0,className:"px-6 py-2 rounded-full text-sm font-bold transition-all text-slate-300 dark:text-slate-700 cursor-not-allowed",children:"ORE / UK (Locked)"}),w.jsx("button",{onClick:()=>y("FCPS"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all ${p==="FCPS"?"bg-purple-600 text-white shadow-lg shadow-purple-900/50":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:"FCPS"})]})}),W()]}),l==="subject-detail"&&v&&w.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:w.jsx(kH,{subject:v,stream:p,onSelectNoteTopic:ke,onSelectQuizTopic:xe,onBack:X})}),l==="summary"&&v&&w.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:w.jsx(TH,{isDarkMode:S,subject:v,topic:A,stream:p,onStartQuiz:j,onBack:R})}),l==="quiz"&&v&&w.jsx("div",{className:"animate-in zoom-in-95 fade-in duration-300",children:w.jsx(EH,{subject:v,topic:A,stream:p,onClose:()=>{u(A&&typeof v=="string"?"question-banks":A?"summary":"question-banks")},onReviewNotes:()=>{if(typeof v=="string"&&v.includes(" - Practice Questions")){const te=v.replace(" - Practice Questions","");E(te),C(void 0)}u("summary")}})}),l==="ai-chat"&&w.jsx("div",{className:"animate-in slide-in-from-bottom-4 fade-in duration-500",children:w.jsx(AH,{})}),l==="question-banks"&&w.jsx("div",{className:"animate-in slide-in-from-bottom-4 fade-in duration-500",children:w.jsx(SH,{onSelectTopic:be,completedSubjects:Array.from(L),onStartMegaTest:()=>{E("Comprehensive Mega Test"),C(Array.from(L).join(", ")),u("quiz")}})})]}),l!=="quiz"&&l!=="summary"&&w.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 glass-panel border-t border-slate-200 dark:border-white/10 px-6 py-4 z-50 flex justify-between items-center bg-white/90 dark:bg-black/90 backdrop-blur-xl",children:[w.jsxs("div",{onClick:X,className:`flex flex-col items-center gap-1 cursor-pointer ${l==="dashboard"?"text-cyan-600 dark:text-cyan-400":"text-slate-500"}`,children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),w.jsx("span",{className:"text-[10px] font-medium",children:"Home"})]}),w.jsxs("div",{onClick:()=>u("question-banks"),className:`flex flex-col items-center gap-1 cursor-pointer ${l==="question-banks"?"text-cyan-600 dark:text-cyan-400":"text-slate-500"}`,children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),w.jsx("span",{className:"text-[10px] font-medium",children:"MCQs"})]}),w.jsxs("div",{onClick:()=>u("ai-chat"),className:`flex flex-col items-center gap-1 cursor-pointer ${l==="ai-chat"?"text-cyan-600 dark:text-cyan-400":"text-slate-500"}`,children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012-2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),w.jsx("span",{className:"text-[10px] font-medium",children:"AI Chat"})]}),w.jsxs("div",{onClick:F,className:"flex flex-col items-center gap-1 cursor-pointer text-slate-500",children:[w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),w.jsx("span",{className:"text-[10px] font-medium",children:"Theme"})]})]}),l!=="ai-chat"&&w.jsx(_H,{}),G&&q&&w.jsx(NH,{subject:q,stream:p,onClose:()=>J(!1),onUpdateStats:Ee,stats:ve[q]})]}):w.jsx(h7,{onSelectPlan:async te=>{e&&(await u7(e.id,te),i(!0))}}):w.jsx(d7,{onAuthSuccess:()=>{}})},t_=document.getElementById("root");if(!t_)throw new Error("Could not find root element to mount to");const _7=AC.createRoot(t_);_7.render(w.jsx(cf.StrictMode,{children:w.jsx(E7,{})}));
