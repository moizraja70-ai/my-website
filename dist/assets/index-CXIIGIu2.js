const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SubjectCard-C-OhMWR7.js","assets/vendor-react-CR1W5LLW.js","assets/vendor-BoCg3Acf.js","assets/vendor-markdown-qiocwJQ_.js","assets/constants-iy2kJ-n1.js","assets/content-gic-DjMOnmO8.js","assets/SummaryView-CpJeqnn2.js","assets/vendor-react-dom-CF6xyiui.js","assets/content-impression-Dhon-y05.js","assets/content-gypsum-CDET_BPX.js","assets/content-composite-BRuCwDEI.js","assets/content-adhesion-CpUmy9Us.js","assets/content-wax-dj-jQmTY.js","assets/content-metals-MuXxPaYj.js","assets/content-investment-CeySKURn.js","assets/content-casting-DyIojzrT.js","assets/content-cements-ndFgpqB6.js","assets/content-amalgam-ZoqsmOFz.js","assets/content-ceramics-CC7zDBK1.js","assets/content-properties-Bpg7iEuo.js","assets/content-denture-8EmkrB6b.js","assets/content-embryology-tavoNC7p.js","assets/content-osteology-3u2sacyF.js","assets/Quiz-C-LodUZA.js","assets/QuestionBankView-BpdBun2w.js","assets/SubjectDetailView-B-hy791D.js","assets/ProgressAnalyticsDashboard-62HoLTuv.js","assets/QuickQuizModal-R56HpEyE.js","assets/AdminDashboard-xbOy9ze7.js","assets/AIChatView-8irbBgyg.js"])))=>i.map(i=>d[i]);
import{a as e,j as n,U as a,P as t,M as r,L as s,E as i,b as o,C as l,c,d,Z as u,S as m,e as h,f as p,i as f,T as b}from"./vendor-react-CR1W5LLW.js";import{R as g}from"./vendor-react-dom-CF6xyiui.js";import{M as y,G as x,a as v,b as w,c as k,d as j,e as N}from"./content-gic-DjMOnmO8.js";import{o as A}from"./vendor-BoCg3Acf.js";import{I as M,a as C,b as T,c as S,d as I}from"./content-impression-Dhon-y05.js";import{G as L,a as P,b as E,c as O,d as R,e as F}from"./content-gypsum-CDET_BPX.js";import{C as D,a as _,b as W,c as z,d as V,e as B,f as G}from"./content-composite-BRuCwDEI.js";import{A as H,a as q,b as Y,c as K,d as U}from"./content-adhesion-CpUmy9Us.js";import{W as $,a as J,b as Q,c as X,d as Z,e as ee,f as ne}from"./content-wax-dj-jQmTY.js";import{M as ae,a as te,A as re,b as se,B as ie,c as oe,W as le,d as ce,N as de,e as ue,f as me,g as he,h as pe,i as fe}from"./content-metals-MuXxPaYj.js";import{I as be,a as ge,b as ye,c as xe,d as ve,e as we}from"./content-investment-CeySKURn.js";import{C as ke,a as je,b as Ne,c as Ae,d as Me,e as Ce}from"./content-casting-DyIojzrT.js";import{D as Te,a as Se,b as Ie,c as Le,d as Pe,e as Ee}from"./content-cements-ndFgpqB6.js";import{A as Oe,a as Re,b as Fe,c as De,d as _e,e as We,f as ze}from"./content-amalgam-ZoqsmOFz.js";import{D as Ve,a as Be,b as Ge,c as He,d as qe,e as Ye,f as Ke}from"./content-ceramics-CC7zDBK1.js";import{D as Ue,a as $e,b as Je,c as Qe,d as Xe,e as Ze,f as en,g as nn,h as an,i as tn,j as rn,k as sn,l as on,m as ln,n as cn,o as dn,p as un,q as mn,r as hn,s as pn,t as fn,u as bn,v as gn,w as yn,x as xn,y as vn,z as wn}from"./content-properties-Bpg7iEuo.js";import{D as kn,a as jn,b as Nn,c as An,d as Mn,e as Cn,f as Tn,g as Sn}from"./content-denture-8EmkrB6b.js";import{G as In,a as Ln,b as Pn,c as En,d as On,e as Rn}from"./content-embryology-tavoNC7p.js";import{O as Fn,a as Dn}from"./content-osteology-3u2sacyF.js";import"./vendor-markdown-qiocwJQ_.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const _n={},Wn=function(e,n,a){let t=Promise.resolve();if(n&&n.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),r=(null==a?void 0:a.nonce)||(null==a?void 0:a.getAttribute("nonce"));t=e(n.map(e=>{if((e=function(e){return"/"+e}(e))in _n)return;_n[e]=!0;const n=e.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const t=document.createElement("link");return t.rel=n?"stylesheet":"modulepreload",n||(t.as="script"),t.crossOrigin="",t.href=e,r&&t.setAttribute("nonce",r),document.head.appendChild(t),n?new Promise((n,a)=>{t.addEventListener("load",n),t.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e}return t.then(n=>{for(const e of n||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},zn=["​","‌","‍","\ufeff","᠎"],Vn=e=>{if(!e)return e;const n=e.split("");let a="";for(let t=0;t<n.length;t++)a+=n[t],t>0&&t%(15+Math.floor(15*Math.random()))===0&&(a+=zn[Math.floor(Math.random()*zn.length)]),"|"===n[t]&&(a+="​".repeat(Math.floor(3*Math.random())+1)),t<n.length-1&&n[t].match(/\d/)&&"."===n[t+1]&&(a+="‌"),":"===n[t]&&" "===n[t+1]&&(a+="‍"),"*"!==n[t]&&"_"!==n[t]||(a+="​");return a},Bn=e=>{const n=[...e];for(let a=n.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[n[a],n[e]]=[n[e],n[a]]}return n},Gn=e=>e.map(e=>{const n=["All of the above","None of the above","Both A and C are correct","Option A is correct but B is more accurate","This is context-dependent","Varies by clinical presentation"];if(e.options[0]){const a=e.options[0].replace(/correct/gi,"incorrect").replace(/true/gi,"false").replace(/increases/gi,"decreases").replace(/anterior/gi,"posterior");a!==e.options[0]&&n.push(a)}const a=Bn(n).slice(0,2+Math.floor(2*Math.random())),t=Bn([...e.options,...a]),r=btoa(e.correctAnswer||e.options[0]);return t.indexOf(e.correctAnswer||e.options[0]),{...e,options:t,_realAnswer:r,_realOptions:btoa(JSON.stringify(e.options)),correctAnswer:t[Math.floor(Math.random()*t.length)]||e.correctAnswer}}),Hn=e=>e.map(e=>{if("_realAnswer"in e&&"_realOptions"in e)try{const n=JSON.parse(atob(e._realOptions)),a=atob(e._realAnswer);return{...e,options:n,correctAnswer:a}}catch(n){return e}return e}),qn=A("https://acuehlltnkbpatsbkhqc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjdWVobGx0bmticGF0c2JraHFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNzg4NDUsImV4cCI6MjA4NTY1NDg0NX0.I8e97aF4qkXM0tHoO726VZP96mXXvXjpUrGkKsYsG54"),Yn=async(e,n)=>{const{data:a,error:t}=await qn.auth.signInWithPassword({email:e,password:n});return{data:a,error:t}},Kn=()=>{try{for(const e of Object.keys(window.localStorage))e.startsWith("sb-")&&e.endsWith("-auth-token")&&window.localStorage.removeItem(e)}catch{}try{for(const e of Object.keys(window.sessionStorage))e.startsWith("sb-")&&e.endsWith("-auth-token")&&window.sessionStorage.removeItem(e)}catch{}},Un=()=>{Kn()},$n=async e=>{const{data:n,error:a}=await qn.from("profiles").select("is_subscribed, subscription_plan, subscription_end_date, role").eq("id",e).single();if(a&&"PGRST116"===a.code){const{error:n}=await qn.from("profiles").insert({id:e,is_subscribed:!1});return n?{data:null,error:n}:{data:{is_subscribed:!1,subscription_plan:null,subscription_end_date:null,role:"user"},error:null}}return{data:n,error:a}},Jn=async e=>{const{data:n,error:a}=await qn.from("profiles").select("role").eq("id",e).single();return!(a||!n)&&"admin"===n.role},Qn=async(e,n)=>{const{error:a}=await qn.from("profiles").update(n).eq("id",e);return{error:a}},Xn=async e=>{let n=qn.from("profiles").select("*").order("created_at",{ascending:!1});e&&(n=n.range(e.from,e.to));const{data:a,error:t}=await n;return{data:a,error:t}},Zn=async e=>{var n;const{data:a}=await qn.auth.getSession(),t=null==(n=null==a?void 0:a.session)?void 0:n.access_token;if(!t)return{data:null,error:{message:"No active session token."}};const r=await fetch("/api/admin-delete-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({userId:e})}),s=await r.text();let i=null;if(s)try{i=JSON.parse(s)}catch{i=null}return r.ok?{data:i||{ok:!0},error:null}:{data:null,error:{message:(null==i?void 0:i.error)||s||"Delete failed"}}},ea=({onAuthSuccess:u,compact:m})=>{const[h,p]=e.useState(!0),[f,b]=e.useState(""),[g,y]=e.useState(""),[x,v]=e.useState(""),[w,k]=e.useState(""),[j,N]=e.useState(""),[A,M]=e.useState(!1),[C,T]=e.useState(!1),[S,I]=e.useState(null),[L,P]=e.useState(null);return n.jsx("div",{className:m?"max-w-md mx-auto px-4 pb-16":"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[!m&&n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent",children:"DentEdge"}),n.jsx("p",{className:"text-slate-400 mt-2",children:"Your dental exam preparation companion"})]}),n.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[n.jsxs("div",{className:"flex bg-slate-900/50 rounded-xl p-1 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>{p(!0),I(null),P(null)},className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+(h?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-slate-400 hover:text-slate-300"),children:"Sign In"}),n.jsx("button",{type:"button",onClick:()=>{p(!1),I(null),P(null)},className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+(h?"text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg"),children:"Sign Up"})]}),n.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),I(null),P(null),T(!0),!h){if(g!==x)return I("Passwords do not match"),void T(!1);if(!w.trim())return I("Please enter your full name"),void T(!1);if(!j.trim())return I("Please enter your mobile number"),void T(!1)}if(g.length<6)return I("Password must be at least 6 characters"),void T(!1);try{if(h){const{error:e}=await Yn(f,g);e?I(e.message):u()}else{const{error:e}=await(async(e,n,a)=>{const{data:t,error:r}=await qn.auth.signUp({email:e,password:n,options:{data:{full_name:null==a?void 0:a.fullName,phone:null==a?void 0:a.phone}}});return{data:t,error:r}})(f,g,{fullName:w,phone:j});e?I(e.message):(P("Account created successfully! Signing you in..."),setTimeout(async()=>{const{error:e}=await Yn(f,g);e||u()},1500))}}catch(n){I(n.message||"An unexpected error occurred")}finally{T(!1)}},className:"space-y-4",children:[!h&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"relative",children:[n.jsx(a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Full Name",value:w,onChange:e=>k(e.target.value),required:!h,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"tel",placeholder:"Mobile Number",value:j,onChange:e=>N(e.target.value),required:!h,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"email",placeholder:"Email address",value:f,onChange:e=>b(e.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(s,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:A?"text":"password",placeholder:"Password",value:g,onChange:e=>y(e.target.value),required:!0,className:"w-full pl-11 pr-11 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"}),n.jsx("button",{type:"button",onClick:()=>M(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-300",children:A?n.jsx(i,{className:"w-5 h-5"}):n.jsx(o,{className:"w-5 h-5"})})]}),!h&&n.jsxs("div",{className:"relative",children:[n.jsx(s,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:A?"text":"password",placeholder:"Confirm password",value:x,onChange:e=>v(e.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),S&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm",children:[n.jsx(l,{className:"w-4 h-4 flex-shrink-0"}),n.jsx("span",{children:S})]}),L&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/30 rounded-xl text-green-400 text-sm",children:[n.jsx(c,{className:"w-4 h-4 flex-shrink-0"}),n.jsx("span",{children:L})]}),n.jsx("button",{type:"submit",disabled:C,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?n.jsxs(n.Fragment,{children:[n.jsx(d,{className:"w-5 h-5 animate-spin"}),h?"Signing in...":"Creating account..."]}):h?"Sign In":"Create Account"})]}),n.jsxs("div",{className:"relative my-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-700"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-slate-800 text-slate-500",children:"Or continue with"})})]}),n.jsxs("button",{type:"button",onClick:async()=>{try{I(null),P(null),T(!0);const{error:e}=await(async()=>{const{data:e,error:n}=await qn.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent"}}});return{data:e,error:n}})();if(e)return I(e.message),void T(!1);P("Redirecting to Google... If nothing happens, allow pop-ups/third-party cookies and try again."),T(!1)}catch(e){I(e.message),T(!1)}},className:"w-full py-3 bg-white text-slate-900 font-semibold rounded-xl hover:bg-slate-100 transition-all duration-200 flex items-center justify-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),n.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),n.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26.81-.58z",fill:"#FBBC05"}),n.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),h&&n.jsxs("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Forgot your password?"," ",n.jsx("button",{className:"text-purple-400 hover:text-purple-300 transition-colors",children:"Reset it here"})]})]}),n.jsx("p",{className:"text-center text-slate-500 text-xs mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})})},na=({plan:e,onClose:a,onConfirm:t})=>e?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl max-w-md w-full p-8 shadow-2xl border border-slate-200 dark:border-slate-800 relative animate-in zoom-in-95 duration-200",children:[n.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:n.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center text-white mx-auto mb-4 shadow-lg`,children:n.jsx(e.icon,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Complete Your Purchase"}),n.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["To activate your ",n.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:e.duration})," subscription, please follow these steps:"]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center font-bold text-sm",children:"1"}),n.jsx("h4",{className:"font-semibold",children:"Send Payment"})]}),n.jsxs("div",{className:"space-y-2 text-sm pl-11",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Bank:"}),n.jsx("span",{className:"font-medium font-mono select-all",children:"[BANK NAME]"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Account Title:"}),n.jsx("span",{className:"font-medium font-mono select-all",children:"[ACCOUNT TITLE]"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-500",children:"Account No:"}),n.jsx("span",{className:"font-medium font-mono select-all text-purple-600 dark:text-purple-400",children:"[0000-0000-0000-0000]"})]}),n.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500 font-medium",children:"Amount:"}),n.jsxs("span",{className:"text-lg font-bold",children:["PKR ",e.price]})]})]})]}),n.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold text-sm",children:"2"}),n.jsx("h4",{className:"font-semibold",children:"Send Proof"})]}),n.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 pl-11 mb-3",children:["Take a screenshot of the transaction and send it to our Admin via WhatsApp.",n.jsx("span",{className:"block mt-2 font-bold text-amber-600 dark:text-amber-400",children:"⚠️ Your account will be activated MANUALLY after verification (usually within 1 hour)."})]}),n.jsxs("a",{href:"https://wa.me/923000000000",target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 hover:bg-green-600 text-white text-sm font-bold py-2 px-4 rounded-xl flex items-center justify-center gap-2 transition-colors ml-11",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.6 1.967.3 4.54 1.489 6.208l-1.015 3.684zm11.239-5.188c-.689-.356-3.881-1.916-4.226-2.093-.345-.177-.662-.232-.904.143-.241.375-1.285 1.598-1.587 1.916-.302.318-.604.356-1.293.036-.688-.319-2.607-1.125-4.723-3.033-1.666-1.503-2.327-3.033-2.613-3.463-.286-.431-.19-.714-.005-1.077.17-.333.376-.554.568-.795.191-.24.254-.406.381-.661.127-.255.064-.479-.032-.672-.096-.193-.905-2.18-.946-2.227-.376-.431-.776-.367-1.047-.356-.271.012-.583.036-.895.036-.312 0-.82.118-1.248.586-.427.468-1.631 1.593-1.631 3.886 0 2.293 1.672 4.509 1.903 4.819.232.31 3.284 5.013 7.955 7.031 3.324 1.436 4.607 1.151 5.437 1.072 1.428-.135 3.33-1.365 3.799-2.682.469-1.317.469-2.443.328-2.682-.141-.239-.531-.383-1.219-.728z"})}),"Share Proof on WhatsApp"]})]})]}),n.jsxs("div",{className:"mt-8 flex gap-3",children:[n.jsx("button",{onClick:a,className:"flex-1 px-4 py-3 rounded-xl font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 rounded-xl font-bold text-white bg-slate-900 dark:bg-white dark:text-slate-900 hover:opacity-90 transition-opacity",children:"I Have Paid"})]})]})}):null,aa=({onSelectPlan:a,compact:t})=>{const[r,s]=e.useState(null),[i,o]=e.useState(!1),l=[{id:"2-months",duration:"2 Months",price:"2,000",icon:u,color:"from-blue-500 to-cyan-500",popular:!1,features:[]},{id:"4-months",duration:"4 Months",price:"3,500",icon:m,color:"from-purple-500 to-pink-500",popular:!0,features:[]},{id:"6-months",duration:"6 Months",price:"5,000",icon:h,color:"from-amber-400 to-orange-500",popular:!1,features:[]}],c=l.find(e=>e.id===r),d=e=>{s(e),o(!0)},f=()=>{r&&(a(r),o(!1))};return t?n.jsxs(n.Fragment,{children:[i&&c&&n.jsx(na,{plan:c,onClose:()=>o(!1),onConfirm:f}),l.map((e,a)=>{const t=e.icon,s=r===e.id;return n.jsxs("div",{onClick:()=>d(e.id),className:"relative group rounded-3xl p-1 transition-all duration-300 cursor-pointer animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards",style:{animationDelay:150*a+"ms"},children:[n.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl`}),n.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${e.color} opacity-0 ${s?"opacity-100":"group-hover:opacity-100"} transition-opacity duration-300`}),n.jsxs("div",{className:"relative h-full bg-white dark:bg-slate-900 rounded-[22px] p-8 flex flex-col items-center border border-slate-200 dark:border-slate-800 hover:border-transparent transition-colors duration-300",children:[e.popular&&n.jsx("div",{className:"absolute -top-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg transform -translate-y-1 group-hover:-translate-y-2 transition-transform duration-300",children:"MOST POPULAR"}),n.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center text-white mb-6 shadow-lg transform group-hover:scale-110 transition-transform duration-300`,children:n.jsx(t,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.duration}),n.jsxs("div",{className:"flex items-baseline gap-1 mb-8",children:[n.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"PKR"}),n.jsx("span",{className:"text-4xl font-bold tracking-tight",children:e.price})]}),n.jsx("ul",{className:"space-y-4 w-full mb-8 flex-1",children:e.features.map((a,t)=>n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`mt-1 p-0.5 rounded-full bg-gradient-to-br ${e.color}`,children:n.jsx(p,{className:"w-3 h-3 text-white",strokeWidth:3})}),n.jsx("span",{className:"text-slate-600 dark:text-slate-300 text-sm",children:a})]},t))}),n.jsx("button",{onClick:n=>{n.stopPropagation(),d(e.id)},className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all duration-300 transform active:scale-95\n                      bg-gradient-to-r ${e.color} hover:brightness-110 hover:shadow-xl\n                    `,children:"Select Plan"})]})]},e.id)})]}):n.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-black text-slate-900 dark:text-white py-20 px-4 transition-colors duration-300",children:[i&&c&&n.jsx(na,{plan:c,onClose:()=>o(!1),onConfirm:f}),n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:"Choose Your Success Path"}),n.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100",children:"Unlock the full potential of your exam preparation with our premium plans tailored to your timeline."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:l.map((e,a)=>{const t=e.icon,s=r===e.id;return n.jsxs("div",{onClick:()=>d(e.id),className:"relative group rounded-3xl p-1 transition-all duration-300 cursor-pointer animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards",style:{animationDelay:150*a+"ms"},children:[n.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl`}),n.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${e.color} opacity-0 ${s?"opacity-100":"group-hover:opacity-100"} transition-opacity duration-300`}),n.jsxs("div",{className:"relative h-full bg-white dark:bg-slate-900 rounded-[22px] p-8 flex flex-col items-center border border-slate-200 dark:border-slate-800 hover:border-transparent transition-colors duration-300",children:[e.popular&&n.jsx("div",{className:"absolute -top-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg transform -translate-y-1 group-hover:-translate-y-2 transition-transform duration-300",children:"MOST POPULAR"}),n.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center text-white mb-6 shadow-lg transform group-hover:scale-110 transition-transform duration-300`,children:n.jsx(t,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.duration}),n.jsxs("div",{className:"flex items-baseline gap-1 mb-8",children:[n.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"PKR"}),n.jsx("span",{className:"text-4xl font-bold tracking-tight",children:e.price})]}),n.jsx("ul",{className:"space-y-4 w-full mb-8 flex-1",children:e.features.map((a,t)=>n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`mt-1 p-0.5 rounded-full bg-gradient-to-br ${e.color}`,children:n.jsx(p,{className:"w-3 h-3 text-white",strokeWidth:3})}),n.jsx("span",{className:"text-slate-600 dark:text-slate-300 text-sm",children:a})]},t))}),n.jsx("button",{onClick:n=>{n.stopPropagation(),d(e.id)},className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all duration-300 transform active:scale-95\n                      bg-gradient-to-r ${e.color} hover:brightness-110 hover:shadow-xl\n                    `,children:"Select Plan"})]})]},e.id)})}),n.jsx("p",{className:"text-center text-slate-500 dark:text-slate-500 mt-12 text-sm",children:"All plans include a 7-day money-back guarantee. Secure payment processed via Stripe/local gateways."})]})]})},ta=["Key point 1","Key point 2","Key point 3"],ra=["Key point 1","Key point 2","Key point 3"],sa=["Key point 1","Key point 2","Key point 3"],ia=["Key point 1","Key point 2","Key point 3"],oa=["Key point 1","Key point 2","Key point 3"],la=["Key point 1","Key point 2","Key point 3"],ca=["Key point 1","Key point 2","Key point 3"],da="/api/openai",ua="gpt-4o-mini",ma=e=>{const n=(e=>{const n=e.trim();return n&&n.startsWith("```")?n.replace(/```(?:json)?/gi,"").trim():n})(e);try{return JSON.parse(n)}catch{const e=n.indexOf("{"),a=n.lastIndexOf("}");if(-1!==e&&-1!==a&&a>e)return JSON.parse(n.slice(e,a+1));const t=n.indexOf("["),r=n.lastIndexOf("]");if(-1!==t&&-1!==r&&r>t)return JSON.parse(n.slice(t,r+1));throw new Error("Failed to parse JSON response.")}},ha=async e=>{let n="";try{n=await e.text()}catch{n=""}let a=null;if(n)try{a=JSON.parse(n)}catch{a=null}return{text:n,json:a}},pa=(e,n)=>{var a,t,r,s;const i=null==(a=e.text)?void 0:a.trim();return(null==(r=null==(t=e.json)?void 0:t.error)?void 0:r.message)||(null==(s=e.json)?void 0:s.error)||(i?i.slice(0,400):"")||n.statusText||`Request failed (${n.status})`},fa=async(e,n)=>{var a,t,r,s,i;const o={model:(null==n?void 0:n.model)||ua,messages:e,temperature:"number"==typeof(null==n?void 0:n.temperature)?n.temperature:.4};(null==n?void 0:n.responseFormat)&&(o.response_format=n.responseFormat);const l=await fetch(da,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(e=>{throw new Error(`Connection failed: ${e.message}`)});if(404===l.status)throw new Error(`AI Gateway not found (${da}). Please check your configuration.`);const c=await ha(l);if(!l.ok)throw new Error(pa(c,l));if(!c.json)throw new Error("OpenAI proxy returned a non-JSON response.");return((null==(a=c.json)?void 0:a.text)||(null==(i=null==(s=null==(r=null==(t=c.json)?void 0:t.choices)?void 0:r[0])?void 0:s.message)?void 0:i.content)||"").trim()},ba={[y.ANATOMY]:["Snell's Clinical Anatomy","BD Chaurasia's Human Anatomy","Gray's Anatomy for Students (secondary)"],[y.PHYSIOLOGY]:["Guyton & Hall Textbook of Medical Physiology","Ganong's Review of Medical Physiology","BRS Physiology"],[y.BIOCHEMISTRY]:["Harper's Illustrated Biochemistry","Lippincott's Illustrated Reviews: Biochemistry","Clinical Biochemistry (Tietz/Devlin)"],[y.PHARMACOLOGY]:["Katzung & Trevor's Basic & Clinical Pharmacology","Rang & Dale's Pharmacology","Lippincott's Illustrated Reviews: Pharmacology"],[y.GENERAL_PATHOLOGY]:["Robbins Basic Pathology","Robbins & Cotran Pathologic Basis of Disease"],[y.MICROBIOLOGY]:["Ananthanarayan & Paniker's Textbook of Microbiology","Jawetz, Melnick & Adelberg's Medical Microbiology","Murray's Medical Microbiology"],[y.GENERAL_EMBRYOLOGY]:["Langman's Medical Embryology","Larsen's Human Embryology"],[y.ORAL_HISTOLOGY]:["Ten Cate's Oral Histology","Orban's Oral Histology & Embryology"],[y.TOOTH_MORPHOLOGY]:["Wheeler's Dental Anatomy, Physiology and Occlusion","Woelfel's Dental Anatomy","Ash's Dental Anatomy"],[y.DENTAL_MATERIALS]:["Phillips' Science of Dental Materials (Anusavice/Antonson)","Craig's Restorative Dental Materials","McCabe & Walls' Applied Dental Materials"],[y.ORAL_PATHOLOGY]:["Shafer's Textbook of Oral Pathology","Neville's Oral & Maxillofacial Pathology","Regezi & Sciubba"],[y.ORAL_MEDICINE_RADIOLOGY]:["Burket's Oral Medicine","Cawson's Essentials of Oral Pathology & Oral Medicine","White & Pharoah: Oral Radiology"],[y.PERIODONTOLOGY]:["Carranza's Clinical Periodontology","Lindhe's Clinical Periodontology and Implant Dentistry"],[y.PROSTHODONTICS]:["Boucher's Prosthodontic Treatment","McCracken's Removable Partial Prosthodontics","Rosenstiel's Contemporary Fixed Prosthodontics"],[y.ORAL_SURGERY]:["Peterson's Principles of Oral and Maxillofacial Surgery","Hupp, Ellis & Tucker: Contemporary Oral and Maxillofacial Surgery","Fonseca's Oral & Maxillofacial Surgery"],[y.OPERATIVE_ENDO]:["Sturdevant's Art and Science of Operative Dentistry","Ingle's Endodontics","Cohen's Pathways of the Pulp"],[y.ORTHODONTICS]:["Proffit: Contemporary Orthodontics","Graber's Orthodontics"],[y.PEDIATRICS]:["McDonald & Avery's Dentistry for the Child and Adolescent","Pinkham's Pediatric Dentistry","Welbury's Pediatric Dentistry"],[y.COMMUNITY_MEDICINE]:["Park's Textbook of Preventive and Social Medicine","Soben Peter's Essentials of Preventive & Community Dentistry"],[y.INTERNAL_MEDICINE]:["Davidson's Principles & Practice of Medicine","Harrison's Principles of Internal Medicine"],[y.SURGERY]:["Bailey & Love's Short Practice of Surgery","Schwartz's Principles of Surgery"],[y.OBGYN]:["Williams Obstetrics","Dutta's Obstetrics","Berek & Novak's Gynecology"]},ga=e=>"Public"===e?"\n**CONTEXT: Dental Tutor (Public)**\n- Audience: general public or preclinical dental students (non-exam setting).\n- Scope: dentistry and closely related medical topics only; tie back to oral health, dental care, or dental materials.\n- Goal: clear, practical, accurate, and clinically relevant explanations.\n- Safety: give general info only; do not diagnose; include red flags + when to seek urgent care when appropriate.\n- Style: natural, non-robotic tone; define jargon in 1 line when used.\n    ":"\n**CONTEXT: Postgraduate FCPS Part 1 (Dentistry/Medicine)**\n- Level: Advanced/Specialist.\n- Focus: High-yield past paper topics, specific values, mechanisms, and exclusions.\n- Key References: Snell's Clinical Anatomy (not Gray's students), BRS Physiology, Robbins Basic Pathology, Katzung (Pharma).\n- Tone: Concise, technical, focusing on exam keywords and buzzwords used by CPSP.\n- Scope: keep answers anchored to dental/medical relevance for dentistry.\n  ",ya=async(e,n,a,t)=>{if(e===y.DENTAL_MATERIALS&&a){const e=a.toLowerCase();if("properties - thermal"===e||e.includes("thermal properties")||e.includes("properties")&&e.includes("thermal"))return{subject:y.DENTAL_MATERIALS,content:$e,keyPoints:Ue}}if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("properties")){const e=a.toLowerCase();return e.includes("summary")?{subject:y.DENTAL_MATERIALS,content:Je,keyPoints:Ue}:e.includes("mechanical")?{subject:y.DENTAL_MATERIALS,content:Qe,keyPoints:Ue}:e.includes("thermal")?{subject:y.DENTAL_MATERIALS,content:$e,keyPoints:Ue}:e.includes("rheolog")?{subject:y.DENTAL_MATERIALS,content:Xe,keyPoints:Ue}:e.includes("chemical")||e.includes("biological")?{subject:y.DENTAL_MATERIALS,content:Ze,keyPoints:Ue}:e.includes("optical")?{subject:y.DENTAL_MATERIALS,content:en,keyPoints:Ue}:{subject:y.DENTAL_MATERIALS,content:nn,keyPoints:Ue}}if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("impression"))return{subject:y.DENTAL_MATERIALS,content:C,keyPoints:M};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("gypsum"))return{subject:y.DENTAL_MATERIALS,content:P,keyPoints:L};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("investment"))return{subject:y.DENTAL_MATERIALS,content:ge,keyPoints:be};if(e===y.DENTAL_MATERIALS&&a&&(a.toLowerCase().includes("gic")||a.toLowerCase().includes("glass ionomer")))return a.toLowerCase().includes("summary")?{subject:y.DENTAL_MATERIALS,content:x.content,keyPoints:x.keyPoints}:{subject:y.DENTAL_MATERIALS,content:v.content,keyPoints:v.keyPoints};if(e===y.DENTAL_MATERIALS&&a&&(a.toLowerCase().includes("denture")||a.toLowerCase().includes("reline")||a.toLowerCase().includes("rebase")||a.toLowerCase().includes("polymers")))return a.toLowerCase().includes("summary")?{subject:y.DENTAL_MATERIALS,content:jn,keyPoints:kn}:a.toLowerCase().includes("cleansers")||a.toLowerCase().includes("adhesives")?{subject:y.DENTAL_MATERIALS,content:Nn,keyPoints:kn}:{subject:y.DENTAL_MATERIALS,content:An,keyPoints:kn};if(e===y.DENTAL_MATERIALS&&a&&(a.toLowerCase().includes("cement")||a.toLowerCase().includes("liner")||a.toLowerCase().includes("base")))return{subject:y.DENTAL_MATERIALS,content:Se,keyPoints:Te};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("casting"))return{subject:y.DENTAL_MATERIALS,content:je,keyPoints:ke};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("composite")&&a.toLowerCase().includes("detailed"))return{subject:y.DENTAL_MATERIALS,content:_,keyPoints:D};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("composite")&&a.toLowerCase().includes("summary"))return{subject:y.DENTAL_MATERIALS,content:W,keyPoints:D};if(e===y.DENTAL_MATERIALS&&a&&"composite"===a.toLowerCase())return{subject:y.DENTAL_MATERIALS,content:_,keyPoints:D};if(e===y.DENTAL_MATERIALS&&a&&(a.toLowerCase().includes("adhesion")||a.toLowerCase().includes("bonding")))return{subject:y.DENTAL_MATERIALS,content:q,keyPoints:H};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("wax")&&a.toLowerCase().includes("detailed"))return{subject:y.DENTAL_MATERIALS,content:J,keyPoints:$};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("wax")&&a.toLowerCase().includes("summary"))return{subject:y.DENTAL_MATERIALS,content:Q,keyPoints:$};if(e===y.DENTAL_MATERIALS&&a&&"wax"===a.toLowerCase())return{subject:y.DENTAL_MATERIALS,content:J,keyPoints:$};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("metals summary"))return{subject:y.DENTAL_MATERIALS,content:te,keyPoints:ae};if(e===y.DENTAL_MATERIALS&&a&&"alloys"===a.toLowerCase())return{subject:y.DENTAL_MATERIALS,content:se,keyPoints:re};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("base metal"))return{subject:y.DENTAL_MATERIALS,content:oe,keyPoints:ie};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("wrought"))return{subject:y.DENTAL_MATERIALS,content:ce,keyPoints:le};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("noble"))return{subject:y.DENTAL_MATERIALS,content:ue,keyPoints:de};if(e===y.DENTAL_MATERIALS&&a&&(a.toLowerCase().includes("ceramic")||a.toLowerCase().includes("porcelain")))return a.toLowerCase().includes("summary")?{subject:y.DENTAL_MATERIALS,content:Be.content,keyPoints:Ve}:{subject:y.DENTAL_MATERIALS,content:Ge,keyPoints:Ve};if(e===y.DENTAL_MATERIALS&&a&&a.toLowerCase().includes("amalgam"))return a.toLowerCase().includes("summary")?{subject:y.DENTAL_MATERIALS,content:Re,keyPoints:Oe}:{subject:y.DENTAL_MATERIALS,content:Fe,keyPoints:Oe};if(e===y.ANATOMY&&a){const e=a.toLowerCase();if(e.includes("skull bone")||e.includes("sutures"))return{subject:y.ANATOMY,content:"Single summary of everything https://www.youtube.com/watch?v=_In46sgXzBMm.\n\nDetiaeld https://www.youtube.com/watch?v=NQtXvfJCtxo&list=PLVmK7sDA_arEKUbDuKoqUMSnIMNBXYiqV&index=3\n\nhttps://www.youtube.com/watch?v=Yc0xxRAuwG0&list=PLVmK7sDA_arEKUbDuKoqUMSnIMNBXYiqV&index=3\n\nhttps://www.youtube.com/watch?v=z7TIYC6mfo4&list=PLVmK7sDA_arEKUbDuKoqUMSnIMNBXYiqV&index=5  if u do the first one u should still see this one as this spaces are important\n\n### Fetal vs adult\n\n### 1) Skull bones (big picture)\n\n### Neurocranium (braincase)\n\n- Frontal\n- Parietal (2)\n- Temporal (2)\n- Occipital\n- Sphenoid\n- Ethmoid\n### Viscerocranium (face)\n\n- Maxilla (2)\n- Zygomatic (2)\n- Nasal (2)\n- Lacrimal (2)\n- Palatine (2)\n- Inferior nasal concha (2)\n- Vomer\n- Mandible\n\n### 2) Sutures you must know (the “core 4” + 1 dangerous point)\n\n### Main sutures\n\n- Coronal suture = frontal ↔ parietal\n- Sagittal suture = parietal ↔ parietal\n- Lambdoid suture = parietal ↔ occipital\n- Squamous (squamosal) suture = parietal ↔ temporal\n\n### Clinically famous junction\n\n- Pterion = meeting of frontal + parietal + sphenoid (greater wing) + temporal\n\n- Clinical: thin bone → middle meningeal artery deep to it → fracture → epidural hematoma\n\n### 3) ANTERIOR view: bones + landmarks (what you see from the front)\n\n### Bones visible\n\n- Frontal\n- Nasal\n- Zygomatic\n- Maxilla\n- Mandible\n- (Parts of sphenoid in orbit region)\n\n### Key landmarks (front)\n\n- Frontal sinus (inside frontal bone)\n- Supraorbital margin\n- Supraorbital notch/foramen\n- What passes? supraorbital nerve + vessels (V1 territory)\n- Infraorbital foramen\n- What passes? infraorbital nerve + vessels (V2 territory)\n- Mental foramen\n- What passes? mental nerve + vessels (V3 territory)\n- Mental symphysis (chin midline)\n### Orbit “3 openings” (very exam-asked)\n\n- Optic canal\n- What passes? CN II (optic) + ophthalmic artery\n- Superior orbital fissure\n- What passes (high-yield list)? CN III, IV, V1, VI + superior ophthalmic vein\n- Inferior orbital fissure\n- What passes (high-yield)? infraorbital nerve (V2) + infraorbital vessels (+ venous drainage)\n### Nasolacrimal duct\n\n- Drains tears from medial eye → nasal cavity (why crying gives runny nose)\n\n### 4) LATERAL view: bones + sutures + landmarks\n\n### Bones visible\n\n- Frontal\n- Parietal\n- Temporal\n- Sphenoid (greater wing area)\n- Zygomatic\n- Maxilla\n- Occipital\n- Mandible\n- (Lacrimal bone is on medial orbital wall)\n### Sutures you see well\n\n- Coronal\n- Squamous\n- Lambdoid\n- Pterion (must identify!)\n### Key landmarks (lateral)\n\n- Zygomatic arch\n- formed by zygomatic bone + zygomatic process of temporal\n- Muscle relation: masseter attaches along it / mandible\n- Temporal fossa (where temporalis lies)\n- Mastoid process (temporal bone)\n- SCM attaches; contains mastoid air cells\n- External acoustic meatus (ear canal opening)\n- Styloid process (spike) (muscle/ligament attachments)\n- Mandible landmarks\n- Ramus\n- Coronoid process (temporalis insertion)\n- Condylar process (TMJ)\n- Mandibular notch\n\n### 5) POSTERIOR view: bones + sutures + landmarks\n\n### Bones visible\n\n- Occipital\n- Parietal (2)\n- Temporal (parts)\n### Sutures\n\n- Lambdoid\n- Sagittal (superior midline)\n### Landmarks\n\n- External occipital protuberance (inion)\n- Superior nuchal line and inferior nuchal line (muscle attachments)\n- Mastoid process seen posterolaterally\n- Occipital condyles (more inferior view, but conceptually important)\n- Articulate with C1 (atlas) → “yes” nodding motion\n\n### 6) SUPERIOR view: bones + sutures\n\n### Bones\n\n- Frontal\n- Parietals\n- Occipital\n### Sutures\n\n- Coronal\n- Sagittal\n- Lambdoid\n-\n\n### 7) Cranial fossae (inside skull with calvaria removed)\n\nThink of them as 3 step-like depressions holding different brain parts\n\n.\n\n### A) Anterior cranial fossa\n\nBones\n\n- Frontal (orbital plates)\n- Ethmoid (cribriform plate + crista galli)\n- Sphenoid (lesser wings)\nHouses\n\n- Frontal lobes\nLandmarks\n\n- Cribriform plate foramina\n- What passes? CN I (olfactory nerves)\n- Crista galli\n- attachment for falx cerebri\n### B) Middle cranial fossa\n\nBones\n\n- Sphenoid (body + greater wings)\n- Temporal bone (especially petrous part)\nHouses\n\n- Temporal lobes\n- Pituitary (in sella turcica)\nKey landmark: Sella turcica\n\n- Hypophyseal fossa = pituitary sits here\n- Dorsum sellae\n- Anterior + posterior clinoid processes (dural attachments)\n\nMajor foramina (high-yield)\n\n- Foramen rotundum → V2\n- Foramen ovale → V3\n- Foramen spinosum → middle meningeal artery\n- Carotid canal → internal carotid artery\n- Foramen lacerum → mostly cartilage (landmark more than “passage”)\n### C) Posterior cranial fossa\n\nBones\n\n- Occipital\n- Temporal (petrous)\n- (small sphenoid contribution at clivus region)\nHouses\n\n- Cerebellum\n- Pons + medulla (brainstem)\nMajor openings\n\n- Internal acoustic meatus → CN VII & CN VIII\n- Jugular foramen → CN IX, X, XI + internal jugular vein\n- Hypoglossal canal → CN XII\n- Foramen magnum → medulla/spinal cord + vertebral arteries (+ spinal root of CN XI)\n\n### 8) INFERIOR (skull base) view: major landmarks + “what passes”\n\n### Palate region\n\n- Incisive foramen → nasopalatine nerve/vessels (anterior hard palate)\n- Greater palatine foramen → greater palatine nerve/vessels (hard palate)\n- Lesser palatine foramina → lesser palatine nerve/vessels (soft palate)\n### Sphenoid region\n\n- Pterygoid plates + pterygoid hamulus\n- muscle/soft palate functional relevance\n### Temporal region\n\n- Mandibular fossa (TMJ socket) + articular tubercle\n- Petrotympanic fissure\n- chorda tympani (taste anterior 2/3 tongue + parasymp to submandibular/sublingual)\n- Stylomastoid foramen\n- facial nerve (CN VII) exits skull here\n- Styloid + mastoid processes nearby\n\n### 9) Super quick “WHAT” questions\n\n### Super-Quick “WHAT” Questions (Skull Bones + Sutures + Foramina) — Cleaner + More Complete\n\n### A) Bones — “What is this bone / what forms this?”\n\n- What bone forms the forehead? → Frontal bone\n- What bones form the “cheekbone prominence”? → Zygomatic bones\n- What bones form the hard palate? → Maxilla (anterior 2/3) + Palatine bones (posterior 1/3)\n- What bone forms the lower jaw? → Mandible\n- What bone forms the bridge of the nose? → Nasal bones\n- What bone forms the back of the skull? → Occipital bone\n- What bone is the “keystone” wedged in the skull base (butterfly-shaped)? → Sphenoid bone\n- What bone forms the cribriform plate (roof of nasal cavity inside skull)? → Ethmoid bone\n\n### B) Sutures — “What suture is between these bones?”\n\n- What suture is between frontal and parietal bones? → Coronal suture\n- What suture is between the two parietal bones? → Sagittal suture\n- What suture is between parietal and occipital bones? → Lambdoid suture\n- What suture is between parietal and temporal bones? → Squamous (squamosal) suture\n### Clinically famous junction\n\n- What is the pterion?\n→ Junction of frontal + parietal + temporal + greater wing of sphenoid\n→ Clinical: thin area; middle meningeal artery runs deep → trauma can cause epidural (extradural) hematoma\n\n### C) Orbit openings — “What passes through?”\n\n- What passes through the optic canal?\n→ CN II (optic nerve) + ophthalmic artery\n- What passes through the superior orbital fissure?\n→ CN III, CN IV, CN V1 (ophthalmic division), CN VI\n→ plus superior ophthalmic vein\n(High yield: “3, 4, V1, 6 + vein”)\n- What passes through the inferior orbital fissure (high yield)?\n→ Infraorbital nerve (V2) + infraorbital vessels (plus venous drainage connections)\n\n### D) Middle cranial fossa foramina — “V2 / V3 / MMA”\n\n- What passes through foramen rotundum? → V2 (maxillary nerve)\n- What passes through foramen ovale? → V3 (mandibular nerve)\n(often also: accessory meningeal artery ± lesser petrosal nerve)\n- What passes through foramen spinosum? → Middle meningeal artery (MMA)\n- What passes through the carotid canal? → Internal carotid artery (+ sympathetic plexus)\n- What about foramen lacerum?\n→ Mostly filled with fibrocartilage in life; ICA passes over it (important landmark)\n\n### E) Sella turcica — “What sits here?”\n\n- What’s in the sella turcica (hypophyseal fossa)? → Pituitary gland\n\n### F) Posterior cranial fossa openings — “VII–XII + big hole”\n\n- What passes through internal acoustic meatus?\n→ CN VII (facial) + CN VIII (vestibulocochlear)\n→ + labyrinthine artery (often)\n- What passes through the jugular foramen?\n→ CN IX, CN X, CN XI\n→ + internal jugular vein (continuation of sigmoid sinus)\n- What passes through the hypoglossal canal? → CN XII (hypoglossal nerve)\n- What passes through the foramen magnum?\n→ Medulla / spinal cord + meninges\n→ Vertebral arteries\n→ spinal roots of CN XI (ascend in, then exit via jugular foramen)\n\n### Mini memory hooks (optional, fast)\n\n- Orbit: Optic canal = 2 + artery; SOF = 3,4, V1,6 + vein\n- MCF: Rotundum = V2; Ovale = V3; Spinosum = MMA\n- PCF: IAM = 7,8; Jugular = 9,10,11; Hypoglossal = 12; Magnum = cord + vertebrals\nIf you want, I can turn this into a single-page viva sheet (very tight formatting) or make 20 rapid-fire MCQs from these.\n\n-\n\n### DETAILED VIDEO\n\n### https://www.youtube.com/watch?v=LY-0Ggs8mmw&t=161s\n\n",keyPoints:ta};if(e.includes("mandible"))return{subject:y.ANATOMY,content:'### Mandible: parts\n\n- Body (horizontal part)\n\n- Ramus (vertical part)\n\n- Angle (junction of body + ramus)\n\n- Alveolar part (tooth sockets)\n\n### Key landmarks\n\n### On the body\n\n### D) Internal (medial) surface landmarks\n\n### 1) Mandibular foramen\n\n- Located on medial surface of ramus\n\n- Entry point into mandibular canal\n\n### 2) Lingula\n\n- Small bony “tongue” in front of mandibular foramen\n\n- Attachment for sphenomandibular ligament\n\n- Important landmark for inferior alveolar nerve block approach\n\n### 3) Mandibular canal\n\n- Runs from mandibular foramen → through body → toward mental foramen\n\n- Carries:\n\n- inferior alveolar nerve + artery/vein (V3)\n\n- Gives branches to:\n\n- mandibular teeth (dental branches)\n\n- continues anteriorly as incisive canal (to anterior teeth)\n\n### 4) Mylohyoid line\n\n- Oblique ridge on medial body\n\n- Muscle attachment: mylohyoid\n\n- Divides the medial surface into:\n\n- Sublingual fossa (above line) → sublingual gland sits here\n\n- Submandibular fossa (below line) → submandibular gland sits here\n\n### 5) Digastric fossa\n\n- Near midline inferior internal surface\n\n- Attachment: anterior belly of digastric\n-\n### On the ramus\n\n### 1) Coronoid process\n\n- Anterior superior projection\n\n- Insertion of temporalis muscle\n\n### 2) Condylar process (mandibular condyle/head)\n\n- Posterior superior rounded head\n\n- Forms the TMJ with temporal bone\n\n### 3) Neck of condyle\n\n- Just below head\n\n- Important for fracture patterns\n\n- Attachment for lateral pterygoid (also to TMJ disc/capsule)\n\n### 4) Mandibular notch\n\n- Between coronoid and condylar processes\n\n### Foramina + what passes\n\n### 3) Mental foramen (external surface)\n\n- Mental nerve (branch of inferior alveolar nerve, V3)\n\n- Mental artery/vein\n\n- Supplies: chin + lower lip (V3 territory)\nlocated inferior to (below) the apex (root tip) of the second mandibular premolar, or between the apices of the first and second premolars\n\n### 1) Mandibular foramen (medial surface of ramus)\n\n- Entry to mandibular canal\n\n- Inferior alveolar nerve + vessels enter here\n\n- Lingula: small bony tongue just anterior to mandibular foramen (attachment for sphenomandibular ligament)\n\n### 2) Mandibular canal\n\n- Runs within mandible to teeth\n\n- Carries inferior alveolar neurovascular bundle\n\n- Gives dental branches to lower teeth\n\n### Muscle attachments\n\n- Masseter: lateral surface of ramus + angle\n\n- Medial pterygoid: medial surface of angle (forms pterygoid “sling” with masseter)\n\n- Temporalis: coronoid process + anterior border of ramus\n\n- Lateral pterygoid: neck of condyle + TMJ disc/capsule\n\n- Mylohyoid: mylohyoid line (forms floor of mouth)\n\n- Digastric (anterior belly): digastric fossa near midline (inferior border)\n\n### TMJ basics (quick)\n\n- Mandibular condyle + mandibular (glenoid) fossa of temporal bone\n\n- Movements:\n\n- Hinge (rotation): initial opening\n\n- Glide (translation): wider opening/protrusion\n\nAge\n\nGonial angle (approx)\n\nMental foramen position (appearance)\n\nKey feature\n\nNewborn/Infant\n\n~140° (very obtuse)\n\nLow (near inferior border)\n\nMandible in 2 halves (fuse ~1–2 yrs)\n\nChild/Growing\n\n~130→120°\n\nMoves toward mid-body\n\nAlveolar process grows with teeth\n\nAdult\n\n~110–120° (most acute)\n\nMid-body, usually below 2nd premolar\n\nRamus tallest, stable occlusion\n\nElderly/Edentulous\n\n~130–140° (obtuse again)\n\nAppears high (near alveolar crest)\n\nAlveolar resorption; canal closer to crest\n\n### Basic ID\n\n- What bone forms the lower jaw? → Mandible\n\n- What are the main parts of the mandible? → Body + ramus + angle + alveolar part\n\n### Foramina / Canals (nerves + vessels)\n\n- What foramen transmits the mental nerve? → Mental foramen\nWhat passes? Mental nerve + mental vessels (branch of inferior alveolar nerve, V3)\nSupplies: chin + lower lip (sensory)\nWhere is it? Usually near the 2nd premolar region.\n\n- What foramen is entry for the inferior alveolar nerve? → Mandibular foramen (medial ramus)\nWhat passes? Inferior alveolar nerve + artery/vein (V3) enter the mandible here\nThen where? They run in the mandibular canal and give branches to lower teeth.\n\n- What is the mandibular canal? → Tunnel inside mandible carrying inferior alveolar nerve/vessels\nClinical: important in fractures, implants, and local anesthesia.\n\n- What is the lingula? → Small bony “tongue” just anterior to mandibular foramen\nImportance: attachment for sphenomandibular ligament; landmark for IAN block.\n\n- If a patient has numbness of chin/lower lip after trauma, which nerve is injured? → Mental nerve (V3) > inferior alveolar nerve.\n\n### Processes / TMJ\n\n- What process is temporalis insertion? → Coronoid process\nFunction: temporalis elevates mandible → closes jaw.\n\n- What process forms the TMJ? → Condylar process (mandibular condyle/head)\nArticulates with: mandibular fossa (glenoid fossa) of temporal bone\nMovements: rotation (hinge) + translation (glide).\n\n- What attaches to the neck of the condyle? → Lateral pterygoid\nAction: protrusion + helps open jaw; controls TMJ disc.\n\n- What notch lies between coronoid and condyle? → Mandibular notch\nWhat passes across it? Often the masseteric nerve and vessels to masseter.\n\n### Extra “WHAT” questions that commonly get asked\n\n- What muscle attaches to the lateral surface of ramus/angle? → Masseter\n\n- What muscle attaches to the medial surface of angle? → Medial pterygoid\n(together with masseter = “pterygoid sling”)\n\n- What is the most important clinical sign of mandibular fracture? → Malocclusion\n\n- In a condylar fracture, the jaw deviates to which side on opening? → Toward the injured side\n\n- Why do we often see two mandibular fractures? → Mandible behaves like a ring → force often causes a second break.\n-\n\n### 2) EMBRYOLOGY (High-yield)(detailed in oral histology quick revision for mcq  )\n\n### Origin\n\n- Develops from 1st pharyngeal (mandibular) arch\n- Related cartilage: Meckel’s cartilage\n### Ossification\n\n- Most of mandible = intramembranous ossification\n- forms lateral to Meckel’s cartilage\n- Meckel’s cartilage does NOT become the mandible directly\n### Key growth cartilage (secondary cartilages)\n\nENDOCHONDRAL OSSIFICATION\n\n- Condylar cartilage = major growth center (important clinically)\n- Smaller/temporary: coronoid cartilage, symphyseal cartilage\n- These areas contribute via endochondral ossification\n### Midline fusion\n\n- Mandible starts as two halves → fuses at mandibular symphysis in early childhood (commonly ~1–2 years)\n### Meckel’s cartilage derivatives (classic lines)\n\n- Malleus + incus\n- Sphenomandibular ligament (remnant/perichondrium)\n### Mandible Embryology — “WHAT” Questions (high-yield)\n\n### Origin / Arch\n\n- What pharyngeal arch forms the mandible? → 1st (mandibular) arch\n- What is the cartilage of the 1st arch? → Meckel’s cartilage\n- What is Meckel’s cartilage mainly used for in mandible development? → A scaffold/guide (“signboard”) — not the bone itself\n### Ossification (key exam concept)\n\n- What type of ossification forms MOST of the mandible? → Intramembranous ossification\n- Where does intramembranous mandible bone form relative to Meckel’s cartilage? → Lateral to Meckel’s cartilage\n- Does Meckel’s cartilage directly become the mandible? → No\n- If asked “Meckel’s cartilage role in mandible formation?” → Guides position; does not ossify into mandible\n### Secondary cartilages / Growth (endochondral contribution)\n\n- What is the major growth cartilage of the mandible? → Condylar cartilage\n- What type of ossification occurs in condylar cartilage? → Endochondral ossification\n- Name other secondary cartilages (smaller/temporary). → Coronoid cartilage + symphyseal cartilage\n- Why is the condylar cartilage clinically important? → Key growth center; injury in childhood → asymmetry/growth disturbance\n### Midline fusion\n\n- How does the mandible start in the fetus/newborn? → Two halves\n- What is the midline fusion area called? → Mandibular symphysis\n- When do the two halves usually fuse? → Early childhood (~1–2 years)\n### Meckel’s cartilage derivatives (classic viva)\n\n- What middle ear bones come from Meckel’s cartilage? → Malleus + incus\n- What ligament is related to Meckel’s cartilage remnants? → Sphenomandibular ligament\n### One-liners examiners love\n\n- “Mandible forms by what?” → Intramembranous (main) + endochondral at secondary cartilages\n- “Meckel’s cartilage forms mandible?” → No — acts as a guide/scaffold only\n\n### "I will avoid excessive detail to prevent information overload, as the exam prioritizes a fundamental understanding of all topics."\n\n### 1. Common Sites & Frequency\n\nThe mandible is the most commonly fractured bone in the facial skeleton. The location of the fracture depends heavily on the mechanism of injury (direction of force) and inherent weak points in the bone.\n\n- Condyle (29% - Most Common): Structurally the weakest point. It acts as a "safety fuse" to prevent the condyle from being driven into the middle cranial fossa (brain) during a heavy blow to the chin.\n- Angle (25%): A major area of weakness, primarily because the presence of an impacted mandibular 3rd molar (wisdom tooth) reduces the amount of bone stock here.\n- Symphysis/Parasymphysis (22%): Associated with direct blows to the chin.\n- Body (16%): Usually between the canine and the angle.\n- Ramus & Coronoid: Much rarer because they are protected by heavy muscle cover (Masseter/Temporalis/Pterygoids) which provides a "cushioning" effect.\nMandibular fractures are usually bilateral fractures. Why? Explained below\n\nThe "Ring Bone" Rule (The Pretzel Principle):\n\nImagine the mandible and skull base form a rigid ring (like a pretzel). It is very difficult to break a pretzel ring in just one place.\n\n- Clinical Application: If you see a fracture in the parasymphysis, always look for a second fracture in the contralateral condyle. If you see a fracture at the angle, check the contralateral body.\n-\n\nNOW, Let\'s scrap the pretzels. Let’s look at it simply as mechanics.\n\n1. The Setup\n\nThe jaw is a solid "U" shape.\n\nThe two ends of the "U" (the condyles) are trapped in sockets (the TMJ) at the base of your skull. They cannot move freely.\n\n2. The Hit (The Lever Effect)\n\nImagine someone punches you hard on the Left side of your jaw.\n\n- Break 1: The bone breaks where the punch landed.\n- The Push: The force of the punch keeps pushing the rest of the jaw to the Right.\n3. The Second Break\n\nThe Right end of the jaw is stuck in its socket. It tries to move right because of the push, but the skull holds it in place.\n\n- Because it is trapped and being pushed, it snaps off.\n- Result: A break on the Left (impact) and a break on the Right (the snap).\n### Summary in 3 sentences:\n\n- The jaw is one solid bone with two ends trapped in sockets.\n- When you hit one side, the force travels through the bone to the other side.\n- Since the other side is trapped and can\'t move, it snaps under the pressure.\n\n### 2. Key Symptoms & Signs (The "Look and Feel")\n\n- Malocclusion (The #1 Sign): The patient will say "my teeth don\'t fit together right." This is due to the displacement of fracture segments disrupting the dental arch.\n- Sublingual Hematoma: This is considered almost pathognomonic (specifically diagnostic) for a mandibular fracture. It indicates the lingual cortex of the bone has broken, causing bleeding into the floor of the mouth.\n- Trismus: Inability to open the mouth fully. This is caused by "muscle guarding" (spasm) due to pain, or mechanical obstruction if the zygomatic arch is depressed against the coronoid.\n- Step Deformity: You can feel a literal "step" or unevenness along the inferior border of the mandible or the occlusal plane of the teeth.\n- Nerve Injury (Numb Chin Syndrome):\n- Mechanism: The Inferior Alveolar Nerve (IAN) runs through the mandibular canal within the body of the mandible.\n- Result: A fracture in the body or angle can crush or stretch this nerve, leading to anesthesia (numbness) or paresthesia (tingling) of the lower lip and chin (supplied by the Mental Nerve, the terminal branch of the IAN).\n-\n-\n\n### 3. Condylar Fractures: Mechanisms & Deviation\n\n- Deviation Rule: On opening the mouth, the jaw deviates TOWARD the side of the fracture.\n- The "Why": The Lateral Pterygoid muscle attaches to the condylar neck and pulls the condyle forward to open the jaw.\n- If the Left Condyle is broken, the Left Lateral Pterygoid cannot pull it forward. The Right Lateral Pterygoid still works and pulls the healthy right side forward. This pivots the jaw around the broken left side, causing the chin to point left (towards the injury).\n- Fragment Displacement: The condylar fragment is almost always pulled anteromedially (forward and inward) due to the unopposed pull of the Lateral Pterygoid muscle attached to it.\nI\'m gonna explain this a bit as this was in my exam it was  indirectly asked\n\nThe relationship between the Pterygoid muscles and the Condyle\n\nMuscle Mechanics: The Pterygoids (High-Yield)\n\n1. The Lateral Pterygoid & Displacement\n\n- Attachment: The Lateral Pterygoid attaches directly on the neck of the condyle.\n- Fracture Effect: If the condylar neck breaks, the Lateral Pterygoid pulls the loose condylar fragment Anteriorly and Medially.\n- Result: The condyle is pulled "forward and in" (anteromedial displacement).\n2. Synergistic Action (The "Teamwork" Rule)\n\n- The Team: The Lateral Pterygoid and Medial Pterygoid are synergists.\n- The Job: They work together to push the jaw to the opposite (contralateral) side.\n- Example: Right Pterygoids contract—----\x3e Jaw moves to the Left.\n- Clinical Sign: If the Left Condyle is broken, the Left Lateral Pterygoid cannot pull the bone effectively.\n- Result: The patient cannot move their jaw to the Right (contralateral excursion is lost).\n-\nSummary for Exam:\n\n"The Lateral Pterygoid pulls the fractured condyle anteromedially, and because it cannot work with the Medial Pterygoid, the patient loses contralateral excursion (side-to-side movement)."\n\n### 4. Muscle Pull: Favorable vs. Unfavorable\n\nWhether a fracture needs heavy plating (fixation) often depends on whether the muscles will pull the broken pieces together or rip them apart.\n\n- The Muscle Groups:\n- Elevators (Close the jaw): Masseter, Medial Pterygoid, Temporalis. These pull the posterior fragment UP and MEDIAL.\n- Depressors (Open the jaw): Geniohyoid, Mylohyoid, Digastric. These pull the anterior fragment DOWN and BACK.\n- Favorable Fracture: The fracture line runs in a direction where the muscle pull acts to compress the bone ends together (natural splinting).\n- Unfavorable Fracture: The fracture line runs such that the muscle pull distracts (separates) the bone segments, causing displacement.\n-\n\n### 5. Classification Terms\n\n- Simple: The skin and mucosa are intact; the bone is not exposed.\n- Compound (Open): The bone is exposed to the external environment.\n- Important: Any fracture involving the tooth-bearing area is technically an open fracture because the periodontal ligament space connects the fracture line to the oral cavity bacteria. These require antibiotics.\n- Comminuted: The bone is shattered into multiple small fragments (often from gunshot wounds or high-velocity impact).\n- Greenstick: Incomplete fracture, common in children because their bones are more flexible (less calcified).\n\n### 6. Imaging Strategy\n\n- OPG (Orthopantomogram): The standard screening radiograph. Shows the entire mandible, condyles, and teeth in one panoramic view.\n- PA Mandible (Posteroanterior): Good for seeing displacements of the angle and body that might be obscured on an OPG.\n- Reverse Towne’s View: Specifically designed to visualize the condylar heads and necks (often used if fracture is suspected high up in the condyle).\n- CT Scan (CBCT or Medical CT): The Gold Standard. Essential for complex trauma, multi-fragment fractures, and condylar fractures to assess the exact position of the fragments.\n\n### High-Yield “WHAT” Questions — Mandibular Fractures (Cleaner + Sharper)\n\nQ1: What sensory deficit occurs with a fracture involving the mental foramen?\n\n- A: Ipsilateral numbness/tingling of the lower lip and chin.\n- Why: Injury to the mental nerve (terminal branch of inferior alveolar nerve, V3) as it exits the foramen.\n\nQ2: In a mandibular angle/body fracture, what nerve is most at risk?\n\n- A: Inferior alveolar nerve (IAN).\n- Why: The fracture line may cross the mandibular canal → IAN compression/tear → “numb chin/lip.”\n\nQ3: In an unfavourable angle fracture, what happens to the proximal (ramus) fragment?\n\n- A: It is pulled superiorly and medially.\n- Why: Masseter + medial pterygoid (pterygoid sling) elevate the ramus; the fracture pattern allows displacement instead of “locking.”\n\nQ4: In a coronoid process fracture, where does the fragment move?\n\n- A: Superiorly (often also slightly posteriorly) toward the zygomatic arch/temporal fossa.\n- Why: Temporalis inserts on the coronoid and retracts it upward.\n\nQ5: What is the classic bite finding in a bilateral condylar fracture?\n\n- A: Anterior open bite.\n- Why: Loss of posterior vertical height (“shortened” ramus height bilaterally) → posterior teeth contact early → anterior teeth can’t meet.\n\nQ6: What is a Guardsman fracture?\n\n- A: Symphyseal fracture + bilateral condylar (neck) fractures.\n- Why: Blow/fall onto the chin → force travels posteriorly → both condyles fracture.\n\nQ7: What does a “step deformity” on palpation/occlusion mean?\n\n- A: The fracture is displaced.\n- Why: There is a break in continuity of the inferior border or occlusal plane (bone ends no longer aligned).\n\nQ8: What does a sublingual hematoma suggest?\n\n- A: Strong evidence of mandibular fracture (especially body/symphysis).\n- Why: Bleeding from torn periosteum on the lingual side collects in the floor of mouth.\n(Many clinicians treat it as highly specific, but “strongly suggestive” is safest wording.)\n\nQ9: What is the key difference between intracapsular vs extracapsular condylar fractures?\n\n- A: Relation to the TMJ capsule.\n- Intracapsular: condylar head inside joint → higher risk of hemarthrosis, ankylosis, growth issues (kids).\n- Extracapsular: condylar neck/subcondylar region → more common; often managed closed depending on displacement.\n\n###\n\nQ10: What is the single most important symptom of mandibular fracture?\n\n- A: Malocclusion (“my bite is off”).\nQ11: What direction does the jaw deviate on opening in a unilateral condylar fracture?\n\n- A: Toward the injured side.\n- Why: Shortened ramus + unbalanced pterygoid action.\nQ12: Why do we often look for a second fracture?\n\n- A: The mandible behaves like a ring → one break often means another.\n\n### Ultra-short recap (memory lines)\n\n- Mental foramen fracture → numb lower lip/chin (mental nerve).\n\n- Angle fracture → IAN risk; unfavorable = proximal fragment up + in (masseter/medial pterygoid).\n\n- Coronoid fracture → fragment up (temporalis).\n\n- Bilateral condyle → anterior open bite.\n\n- Chin blow → Guardsman (symphysis + both condyles).\n\n- Step deformity + malocclusion = displaced fracture.\n\n- Sublingual hematoma = strong clue of mandibular fracture.\n\n- Intracapsular condyle = ankylosis risk; extracapsular = neck fracture.\n\n### Mandibular Fractures — Management (high-yield, clinically useful)\n\n(What to do first, then definitive treatment, then follow-up/complications.)\n\n### 1) Immediate priorities (first minutes)\n\n### A) What is the first priority in mandibular trauma?\n\nAirway + bleeding control.\n\n- Mandibular fractures can cause tongue fall-back (esp. bilateral parasymphysis) + floor-of-mouth swelling/bleeding.\n- Suction blood, sit patient forward, assess stridor/voice, consider early airway support if worsening.\n### B) What must you always check with mandibular fractures?\n\n- Occlusion (most important functional sign)\n- Open fracture (communication with oral cavity/gingival laceration)\n- Other injuries: cervical spine, midface fractures, head injury.\n### C) What imaging is most useful?\n\n- OPG (panoramic) for many simple fractures\n- CT (maxillofacial) = best for condyle, comminuted, multiple fractures, and surgical planning.\n\n### 2) Initial medical management (before definitive fixation)\n\n### A) What do you give for pain/swelling?\n\n- Analgesia (NSAIDs ± stronger), ice, soft diet advice.\n### B) What about antibiotics?\n\nGive antibiotics if the fracture is open (most tooth-bearing fractures are treated as open).\n\n- Open = mucosal tear, gingival laceration, tooth socket involvement.\nTypical choices (varies by local protocols):\n- Amoxicillin-clavulanate or penicillin + metronidazole;\n- Clindamycin if penicillin-allergic.\n### C) What about tetanus?\n\n- Update tetanus if lacerations/open injury.\n### D) What about teeth in the fracture line?\n\n- Do not automatically extract.\nRemove if: grossly infected, mobile/non-restorable, interfering with reduction, or associated with abscess.\n\n### 3) Definitive management: Closed vs Open\n\n### Key decision: Is occlusion stable + is fracture favorable/minimally displaced?\n\n### A) CLOSED TREATMENT (Conservative / MMF)\n\n### What is MMF?\n\nMaxillomandibular fixation (“wiring the jaws”) using arch bars, screws, elastics.\n\n### When is closed treatment appropriate?\n\n- Non-displaced / minimally displaced fractures\n- Favorable fracture lines\n- Stable occlusion or easily correctable with elastics\n- Many condylar fractures (especially extracapsular) are treated closed\n- Children (to avoid growth center damage and extensive surgery)\n### What does closed management include?\n\n- Soft diet (or liquid diet if MMF)\n- Elastics/MMF for short period (often ~2–4 weeks depending on case)\n- Early physiotherapy after release (prevent TMJ stiffness)\n- Regular occlusion checks\n### Big drawbacks/risks of MMF\n\n- Airway risk (vomiting/aspiration)\n- Poor nutrition/weight loss\n- Poor oral hygiene\n- TMJ stiffness, delayed function\n\n### B) OPEN TREATMENT (ORIF)\n\n### What is ORIF?\n\nOpen Reduction + Internal Fixation with plates and screws (miniplates/locking plates).\n\n### When do you choose ORIF (major indications)?\n\n- Displaced fractures causing malocclusion\n- Unfavorable fractures where muscle pull displaces segments (esp. angle)\n- Comminuted fractures\n- Multiple fractures / unstable “ring”\n- Edentulous mandible (poor splinting by teeth; often needs rigid fixation)\n- Failure of closed treatment (persistent malocclusion/non-union)\n### Common sites where ORIF is often used\n\n- Body/parasymphysis (malocclusion/step deformity)\n- Angle fractures (esp. unfavorable)\n- Some condylar fractures if severe displacement\n### Condylar fractures — when ORIF is more likely\n\n- Significant displacement/dislocation (condyle out of fossa)\n- Inability to restore occlusion with closed methods\n- Bilateral condylar fractures with major open bite + functional problems\n- Associated midface fractures (need stable mandibular height)\n(Exact thresholds vary by surgeon and guideline.)\n\n### 4) Site-specific “what do we usually do?”\n\n### Angle fracture\n\n- Often needs ORIF if displaced/unfavorable.\n- Watch IAN sensation + malocclusion.\n### Parasymphysis/body fracture\n\n- If malocclusion/step deformity → ORIF commonly.\n- Check mental nerve numbness.\n### Condylar fracture\n\n- Many managed closed with elastics + early mobilization.\n- ORIF if severe displacement, dislocation, or occlusion can’t be restored.\n### Coronoid fracture\n\n- Usually conservative unless impingement/trismus persists.\n\n### 5) Aftercare\n\n### Diet\n\n- Soft diet for weeks (longer if severe)\n- If MMF: liquid/soft + nutrition plan\n### Oral hygiene\n\n- Mouth rinses (e.g., chlorhexidine if prescribed), brushing around arch bars, dental follow-up\n### Physiotherapy\n\n- Key after condylar injuries and after MMF release:\n- opening exercises, lateral excursions\n- prevents ankylosis/stiffness\n### Follow-up checks\n\n- Occlusion stability\n- Infection signs\n- Nerve recovery (mental/IAN sensation)\n- Radiographic union if needed\n\n### 6) Complications\n\n### Early\n\n- Airway compromise, bleeding\n- Infection (esp. open fractures)\n- Malocclusion\n- Nerve deficits (IAN/mental paresthesia)\n### Late\n\n- Non-union / delayed union\n- Malunion → persistent malocclusion/facial asymmetry\n- TMJ dysfunction, chronic pain\n- Ankylosis (esp. intracapsular condylar fractures, children)\n- Hardware issues (loosening, plate infection)\n\n### IMP NOTE:\n\n### Pediatric mandible/condylar fractures — critical management point (ankylosis risk)\n\n- Children should NOT be immobilized (MMF/fixation) for long periods.\nWhy: prolonged fixation + intra-articular bleeding/inflammation around the TMJ can lead to fibrous → bony ankylosis and long-term restriction of mouth opening, plus growth disturbance.\n\n### Practical “exam lines”\n\n- Kids = prefer short, light fixation + early mobilization.\n\n- Use guiding elastics rather than rigid, prolonged MMF when possible.\n\n- Keep fixation as short as clinically safe (often ~7–14 days max for many pediatric condylar injuries, then active physiotherapy).\n(Exact duration varies by case/surgeon.)\n\n- Start early physiotherapy: mouth opening exercises, lateral movements, functional rehab.\n\n### Highest-risk situations\n\n- Intracapsular condylar fractures (inside TMJ capsule)\n\n- Significant hemarthrosis, pain, and prolonged immobilization\n\n### What you should write in your notes\n\n- “In children, prolonged MMF increases risk of TMJ ankylosis → therefore minimal immobilization + early function/physio is essential.”\n\n### Quick “WHAT” management questions (rapid-fire)\n\n- Most important functional sign guiding treatment? → Occlusion\n- Open fracture needs what? → Antibiotics + tetanus update\n- Stable, minimally displaced fracture? → Closed treatment / elastics/MMF\n- Displaced fracture with malocclusion? → ORIF\n- Condylar fractures usually treated how? → Closed + early mobilization (ORIF if severe displacement/occlusion can’t be restored)\nBelow is a detailed, exam-grade write-up of the maxilla covering anatomy + embryology + fractures (with clinical points).\n\n',keyPoints:ra};if(e.includes("maxilla"))return{subject:y.ANATOMY,content:"Maxilla — Anatomy (Gross + Clinical)\n\n###\n\nPalatine process not visible from this view\n\n### A. Basic description\n\n- The maxilla is a paired bone forming:\n- Upper jaw (houses upper teeth)\n- Floor of orbit\n- Lateral wall + floor of nasal cavity\n- Anterior 2/3 of hard palate\n- Right + left maxilla fuse at the intermaxillary suture (midline).\n\n### B. Parts of the maxilla\n\nEach maxilla has:\n\n- Body\n- Four processes\n- Frontal process\n- Zygomatic process\n- Alveolar process\n- Palatine process\n\n### C. Body of maxilla (important surfaces + features)\n\n### 1) Anterior (facial) surface\n\nKey landmarks:\n\n- Infraorbital foramen\n- Transmits infraorbital nerve (V2) + vessels\n- Clinical: numbness of cheek/upper lip if injured\n- Canine fossa\n- Depression above canine root → thin bone → infection spread\n- Anterior nasal aperture (piriform aperture)\n- Anterior nasal spine\n- Palpable midline projection (septum attachment)\n### 2) Orbital (superior) surface\n\n- Forms floor of orbit\n- Contains infraorbital groove → infraorbital canal → infraorbital foramen\n- Transmits V2 branches: infraorbital nerve; gives anterior + middle superior alveolar nerves\n- Clinical: blowout fractures can involve orbital floor and infraorbital nerve.\n### 3) Infratemporal (posterior) surface\n\n- Forms part of infratemporal fossa\n- Maxillary tuberosity\n- Behind last molar; important for posterior superior alveolar nerves/vessels\n- Alveolar foramina\n- Transmit posterior superior alveolar nerves (V2)\n- Clinical: tuberosity fractures can occur during difficult upper molar extraction.\n### 4) Nasal (medial) surface\n\n- Forms lateral wall of nasal cavity\n- Features:\n- Maxillary hiatus (opening to maxillary sinus) → leads to middle meatus via ostium\n- Conchal crest (for inferior nasal concha)\n- Clinical: sinus drainage issues matter because natural ostium is high → poor drainage when inflamed.\n\n### D. Maxillary sinus (high yield)\n\n### Maxillary sinus (High-yield)\n\n- Largest paranasal sinus; air cavity in the body of maxilla.\n- Roof: orbital floor\n- Floor: alveolar process—close to premolar/molar roots (esp. molars)\n- Lining: respiratory epithelium (pseudostratified ciliated columnar + goblet cells)\n### Drainage\n\n- Drains via ostium → hiatus semilunaris → middle meatus\n- Key point: ostium is relatively high on the medial wall → drainage can be poor → sinusitis risk.\n### Clinical importance (exam points)\n\n- Root proximity → odontogenic sinusitis; risk of oroantral communication after extraction.\n- Accidental sinus perforation (Schneiderian membrane) → oroantral communication; if it persists/epithelializes → oroantral fistula (OAF).\n- Referred pain via V2 (infraorbital/superior alveolar nerves).\n- After extraction: sinus can pneumatize/expand downward + ridge resorption → reduced bone height.\n- Implants (posterior maxilla): may need sinus lift / sinus floor elevation (often with graft) to gain vertical bone for implant stability.\n-\n\n### E. Processes (what they form)\n\n### 1) Frontal process\n\n- Ascends to articulate with frontal bone and nasal bone\n- Helps form medial orbital rim\n- Related to nasolacrimal groove/canal (with lacrimal bone)\n- Clinical: nasolacrimal duct injury → epiphora.\n### 2) Zygomatic process\n\n- Articulates with zygomatic bone\n- Supports lateral midface; involved in zygomaticomaxillary complex injuries.\n### 3) Alveolar process\n\n- Contains dental alveoli for upper teeth\n- Has alveolar ridge\nClinical:\n- Resorbs after tooth loss → affects dentures/implants\n- Infections can spread to sinus.\n### 4) Palatine process\n\n- Forms anterior 2/3 of hard palate\n- Meets opposite side at median palatine suture\n- Meets palatine bone at transverse palatine suture\nKey structures:\n- Incisive fossa/canal (nasopalatine nerve, vessels)\n- Greater palatine foramen is on palatine bone (posterior), but maxilla forms most palate.\n\n### F. Articulations\n\nMaxilla articulates with 9 bones:\n\n- Frontal, Ethmoid, Nasal, Lacrimal, Zygomatic, Palatine, Inferior nasal concha, Vomer, Maxilla (opposite side)\n\n### G. Blood supply + nerve supply (clinical)\n\nArterial supply (main): Maxillary artery branches\n\n- Infraorbital artery\n- Posterior superior alveolar artery\n- Greater palatine artery (via descending palatine)\n- Sphenopalatine contributes to nasal region\nNerve supply (sensory): Maxillary nerve (V2)\n\n- Infraorbital nerve → lower eyelid/cheek/upper lip\n- Superior alveolar nerves:\n- Posterior, Middle, Anterior → upper teeth + maxillary sinus mucosa\n- Nasopalatine → anterior palate behind incisors\nClinical anesthesia:\n\n- Infraorbital block → anterior teeth + lip/cheek\n- PSA block → molars\n- Nasopalatine block → anterior palate\n-\n\n### 2) Embryology of Maxilla (Development)(detail in oral histology)\n\n### A. Pharyngeal arch origin\n\n- Maxilla develops mainly from 1st pharyngeal arch (maxillary prominence).\n- Facial skeleton (including maxilla) largely forms from neural crest cells.\n### B. Ossification type\n\n- Maxilla forms by intramembranous ossification (not endochondral).\n- Ossification begins relatively early in fetal life around the maxillary region.\n### C. Key embryologic events (face + palate)\n\n### 1) Formation of upper jaw and midface\n\n- Frontonasal prominence forms forehead and nose region.\n- Maxillary prominences grow medially and fuse with medial nasal prominences.\n- This fusion contributes to:\n- Upper lip (lateral parts from maxillary prominence)\n- Upper jaw components and facial contours\n\n### 2) Palate development (very high yield)\n\nPalate forms in 2 parts:\n\n(i) Primary palate\n\n- From intermaxillary segment (fusion of medial nasal prominences)\n- Gives premaxilla: area carrying incisors (anterior to incisive foramen)\n(ii) Secondary palate\n\n- From palatal shelves (outgrowths of maxillary prominences)\n- Shelves elevate, move medially, and fuse:\n- with each other (midline)\n- with nasal septum superiorly\n- with primary palate anteriorly\nIncisive foramen = key landmark separating primary vs secondary palate.\n\n### D. Clinical embryology correlations\n\n- Cleft lip: failure of fusion between maxillary prominence and medial nasal prominence\n- Cleft palate: failure of palatal shelf fusion (secondary palate)\n- Anterior cleft palate (primary) vs posterior cleft palate (secondary) referenced by incisive foramen.\n\n### 3) Fractures of Maxilla (Trauma)\n\n### A. Why maxillary fractures matter\n\nMaxilla is the central midface buttress → fractures affect:\n\n- Occlusion\n- Airway/nasal function\n- Orbit/vision\n- Facial width/projection\n\n### B. Classic classification: Le Fort fractures (midface)\n\nThese occur due to high-energy blunt trauma.\n\n### Le Fort I (Horizontal / “floating palate”)\n\nFracture line:\n\n- Separates alveolar process + hard palate from rest of midface\n- Passes above tooth apices, through maxillary sinus walls, to pterygoid plates (pterygoid involvement is typical in Le Fort patterns)\nClinical signs:\n\n- Mobility of upper dental arch (“palate moves”)\n- Malocclusion\n- Epistaxis, facial swelling\n- Possible palatal mucosal tear\n\n### Le Fort II (Pyramidal)\n\nFracture line:\n\n- Nasal bridge → medial orbital walls → infraorbital rim → maxilla\nClinical signs:\n- Midface mobility\n- Infraorbital nerve paresthesia (numb upper lip/cheek)\n- Periorbital edema/ecchymosis\n- Epistaxis, CSF leak possible (less than III)\n\n### Le Fort III (Craniofacial disjunction)\n\nFracture line:\n\n- Through nasofrontal suture, ethmoid, orbital walls → zygomatic arches\nClinical signs (serious):\n- Entire face moves relative to cranium\n- Dish-face deformity\n- Diplopia, vision issues\n- CSF rhinorrhea risk\n- Airway compromise\nHigh-yield note: Le Fort fractures often disrupt facial “buttresses” → need rigid fixation.\n\n### C. Other important maxillary fracture patterns\n\n### 1) Dentoalveolar fractures\n\n- Involves teeth + alveolar bone segment\nSigns:\n- Localized mobility of tooth-bearing segment\n- Malocclusion, gingival lacerations\nManagement:\n- Reposition + splinting, treat teeth (endo if needed)\n### 2) Orbital floor fracture (blowout) — related to maxilla\n\nBecause maxilla forms the orbital floor.\nSigns:\n\n- Diplopia (especially upward gaze)\n- Enophthalmos\n- Infraorbital numbness (V2)\n- “Step” deformity at infraorbital rim sometimes\n### 3) Maxillary tuberosity fracture\n\nOften iatrogenic during extraction of upper molars.\nSigns:\n\n- Sudden crack, mobile bone segment, bleeding\nComplications:\n- Oroantral communication, sinus exposure\n### 4) Zygomaticomaxillary complex involvement\n\n- “Tripod” region affects lateral buttress; causes facial flattening, trismus.\n\n### D. Clinical features (what to look for)\n\n- Malocclusion (very important)\n- Mobility of maxilla on grasping upper incisors/palate\n- Epistaxis, nasal deformity\n- Infraorbital anesthesia\n- Periorbital ecchymosis, subconjunctival hemorrhage\n- Diplopia, restricted eye movements\n- CSF rhinorrhea (suspect skull base involvement)\n- Palatal lacerations/hematoma\n\n### E. Investigations\n\n- CT scan (maxillofacial CT) = best for midface fractures\n- Occlusal assessment + dental imaging as needed\n\n### F. Principles of management (overview)\n\n- Airway first (midface fractures can obstruct airway)\n- Control bleeding, treat shock\n- Restore:\n- Occlusion (often with intermaxillary fixation)\n- Facial buttresses (plates/screws)\n- Orbit (if floor defects/entrapment)\n- Antibiotics often used when sinus/oral contamination exists (local protocols)\nComplications:\n\n- Chronic malocclusion\n- Sinusitis\n- Facial asymmetry\n- Infraorbital nerve paresthesia\n- Diplopia/enophthalmos\n- CSF leak/infection (severe cases)\n### Super-Quick “WHAT” Questions — Maxilla (Anatomy + Sinus + Embryology + Fractures)\n\n### A) Bone/Parts — “What forms this / what is this?”\n\n- What bone forms the upper jaw? → Maxilla\n- What bone forms the floor of orbit? → Maxilla\n- What bones form the anterior 2/3 of hard palate? → Maxilla (palatine processes)\n- What bone forms the posterior 1/3 of hard palate? → Palatine bone\n- What is the midline fusion line between right + left maxilla? → Intermaxillary suture\n- What are the 4 processes of maxilla? → Frontal, Zygomatic, Alveolar, Palatine\n- What process contains the upper tooth sockets (alveoli)? → Alveolar process\n- What process forms the anterior hard palate? → Palatine process (best seen from inferior/palatal view)\n\n### B) Surfaces/Features — “What is this landmark / what passes here?” IMP MORE\n\n- What is the hole on the facial surface below orbit? → Infraorbital foramen\n- What passes through infraorbital foramen? → Infraorbital nerve (V2) + vessels\n- What depression lies above canine root (thin bone)? → Canine fossa\n- What opening forms the anterior nasal opening of skull? → Piriform aperture (anterior nasal aperture)\n- What midline projection is palpable for septum attachment? → Anterior nasal spine\n- What surface of maxilla forms the orbital floor? → Orbital (superior) surface\n- What groove/canal carries V2 on orbital surface? → Infraorbital groove → canal → foramen\n- What posterior bulge behind last molar is important clinically? → Maxillary tuberosity\n- What foramina transmit PSA nerves on posterior surface? → Alveolar foramina\n- What medial opening communicates with maxillary sinus? → Maxillary hiatus\n- What crest articulates with inferior nasal concha? → Conchal crest\n\n### C) Maxillary Sinus — “What is it / roof / floor / drainage?”\n\n- What is the largest paranasal sinus? → Maxillary sinus\n- Where is it located? → Body of maxilla\n- What forms the roof of maxillary sinus? → Orbital floor\n- What forms the floor of maxillary sinus? → Alveolar process near premolar/molar roots\n- What epithelium lines it? → Respiratory epithelium (pseudostratified ciliated + goblet cells)\n- What is the drainage pathway? → Ostium → hiatus semilunaris → middle meatus IMP\n- What key fact explains poor drainage? → Ostium is relatively high on medial wall\n- What is an oroantral communication? → Accidental opening into sinus after extraction/perforation\n- What is an oroantral fistula (OAF)? → Persistent epithelialized oroantral communication\n- What happens after extraction in posterior maxilla? → Sinus pneumatizes downward + ridge resorption\n- What procedure may be needed for implants posteriorly? → Sinus lift / sinus floor elevation (± graft)\n- What plain film view is classic for maxillary sinus? → Occipitomental (Waters) view\n\n### D) Processes — “What does each process do?”\n\n- What process articulates with frontal + nasal bones? → Frontal process\n- What does frontal process help form? → Medial orbital rim\n- What canal is related to frontal process region (with lacrimal bone)? → Nasolacrimal canal\n- What process articulates with zygomatic bone? → Zygomatic process\n- What process supports tooth-bearing ridge? → Alveolar process\n- What process forms anterior 2/3 hard palate + meets at median suture? → Palatine process\n- What landmark separates primary vs secondary palate? → Incisive foramen\n- What passes via incisive canal/fossa? → Nasopalatine nerve + vessels\n- Where is the greater palatine foramen located? → Palatine bone (posterior palate)\n\n### E) Blood + Nerves + Blocks — “What supplies what?”\n\n- Sensory nerve supply of maxilla is mainly from? → Maxillary nerve (V2)\n- What nerve supplies lower eyelid/cheek/upper lip? → Infraorbital nerve\n- What nerves supply maxillary teeth + sinus mucosa? → Superior alveolar nerves (PSA/MSA/ASA)\n- What nerve supplies anterior palate behind incisors? → Nasopalatine nerve\n- Infraorbital block anesthetizes what (high yield)? → Anterior teeth + upper lip/cheek\n- PSA block anesthetizes what? → Maxillary molars\n- Nasopalatine block anesthetizes what? → Anterior palatal mucosa\n\n### F) Embryology — “What forms what / what failure causes what?”\n\n- Maxilla develops mainly from which arch prominence? → 1st pharyngeal arch (maxillary prominence)\n- Facial skeleton (incl. maxilla) largely derives from? → Neural crest cells\n- Maxilla ossifies by what type? → Intramembranous ossification\n- Primary palate comes from? → Intermaxillary segment (fusion of medial nasal prominences)\n- Primary palate forms what region? → Premaxilla (incisors; anterior to incisive foramen)\n- Secondary palate comes from? → Palatal shelves (outgrowths of maxillary prominences)\n- Palatal shelves fuse with what? → Each other (midline) + nasal septum + primary palate\n- Failure of fusion (maxillary prominence + medial nasal prominence) causes? → Cleft lip\n- Failure of palatal shelf fusion causes? → Cleft palate\n- Landmark dividing primary vs secondary clefts? → Incisive foramen\n\n### G) Fractures — “What fracture is this / what are the signs?”\n\n- What is Le Fort I called? → Horizontal / “floating palate”\n- What moves in Le Fort I? → Upper dental arch/hard palate segment\n- What is Le Fort II pattern called? → Pyramidal\n- What nerve deficit is classic in Le Fort II? → Infraorbital paresthesia (V2)\n- What is Le Fort III called? → Craniofacial disjunction\n- What moves in Le Fort III? → Entire face moves relative to cranium\n- What fracture is iatrogenic during upper molar extraction? → Maxillary tuberosity fracture\n- What complication can tuberosity fracture cause? → Oroantral communication / sinus exposure\n- What fracture relates to maxilla forming orbital floor? → Orbital blowout fracture\n- Blowout fracture classic signs? → Diplopia (upgaze), enophthalmos, infraorbital numbness\n- What is the best imaging for midface fractures? → CT maxillofacial CT\n- Most important clinical feature to check in maxillary fractures? → Malocclusion\n- First priority in management of severe midface fractures? → Airway\n\n",keyPoints:sa};if(e.includes("zygomatic")||e.includes("cheekbone"))return{subject:y.ANATOMY,content:'Zygomatic Bone (Cheekbone) — Detailed, High-Yield Notes\n\nThe zygomatic bone is a paired facial bone that forms the prominence of the cheek, contributes to the lateral wall and floor of the orbit, and forms a key part of the zygomatic arch (cheek arch). It’s a major “buttress” bone that transmits forces across the midface.\n\nAnatomy is given for general understanding, fractures are IMP\n\n### 1) Location & Main Roles\n\n### What it forms\n\n- Cheek prominence (most lateral point of the face)\n- Orbit contribution\n- Lateral orbital wall\n- Part of orbital floor\n- Zygomatic arch\n- Bridge between zygomatic bone and temporal bone\n- Facial buttress system\n- Strengthens the midface and transfers bite/impact forces\n### Why it matters clinically\n\n- Commonly fractured in ZMC (zygomaticomaxillary complex) injuries\n- Influences:\n- Facial width and symmetry\n- Orbital volume (→ enophthalmos/diplopia if displaced)\n- Mouth opening (trismus if arch impinges on coronoid process)\n\n### 2) Surfaces of the Zygomatic Bone (3 Surfaces)\n\n### A) Lateral (Facial/Malar) Surface\n\n- The visible “cheek” surface\n- Landmark: zygomaticofacial foramen (often present)\n- Transmits zygomaticofacial nerve + vessels\n- Muscle attachment region for zygomaticus major/minor (muscles of facial expression) and nearby attachments.\n### B) Temporal Surface (Medial/Posterior aspect)\n\n- Faces the temporal fossa and contributes to the infratemporal fossa boundary\n- Landmark: zygomaticotemporal foramen\n- Transmits zygomaticotemporal nerve + vessels\n### C) Orbital Surface\n\n- Smooth surface forming part of:\n- Lateral orbital wall\n- Orbital floor\n- Has the zygomatico-orbital foramina leading into canals that open as:\n- zygomaticofacial foramen\n- zygomaticotemporal foramen\n\n### 3) Processes (3 Main Processes)\n\n### 1) Frontal Process\n\n- Projects upward to meet the frontal bone\n- Helps form lateral orbital rim\n- Suture: frontozygomatic suture (important landmark in fractures)\n### 2) Temporal Process\n\n- Projects posteriorly\n- Joins zygomatic process of temporal bone\n- Together they form the zygomatic arch\n- Arch is clinically important for trismus when depressed inward.\n### 3) Maxillary Process\n\n- Projects anteromedially to meet the maxilla\n- Part of the infraorbital rim/floor region\n- Suture: zygomaticomaxillary suture (key in ZMC fractures)\n\n### 4) Articulations (Bones it Meets)\n\nThe zygomatic bone articulates with 4 bones:\n\n- Frontal bone\n- Maxilla\n- Temporal bone\n- Sphenoid bone (in orbit, near lateral wall)\nThese junctions create “weak lines” where fractures commonly pass.\n\n### 5) Foramina & Nerve Supply (not that important)\n\n### Nerve: Zygomatic nerve (branch of V2, maxillary nerve)\n\nInside the orbit, zygomatic nerve enters and divides:\n\n- Zygomaticofacial nerve\n- exits via zygomaticofacial foramen\n- sensation: skin over prominence of cheek\n- Zygomaticotemporal nerve\n- exits via zygomaticotemporal foramen\n- sensation: anterior temple\n- carries parasympathetic secretomotor fibers (from pterygopalatine ganglion) to the lacrimal nerve (V1) → lacrimal gland (tear secretion pathway)\nClinical point: midface fractures can disrupt these branches → numb cheek/temple; tear secretion pathway can be affected.\n\n### 6) Muscle Attachments\n\n### Facial expression muscles(not IMP)\n\n- Zygomaticus major\n- origin: lateral surface of zygomatic bone\n- action: elevates corner of mouth (smile)\n- Zygomaticus minor\n- action: elevates upper lip\n- Nearby: levator labii superioris area is adjacent (maxilla/infraorbital region), but zygomatic bone is closely related.\n### Mastication/fascial structures IMP\n\n- Masseter muscle\n- originates from zygomatic arch (not the body alone)\n- powerful elevator of mandible\n- Temporalis fascia attaches along the arch margins.\nClinical point: arch fractures can affect masseter/temporalis mechanics and mouth opening.\n\n### 8) Development / Ossification\n\n- Zygomatic bone forms by intramembranous ossification\n\n### 9) Clinical Anatomy: Zygomaticomaxillary Complex (ZMC) Fracture (very IMP)\n\nThe zygomatic bone is often referred to as a "tripod" or "quadripod" because of its multiple attachments. When it breaks, the symptoms are usually a direct result of its displacement:\n\n- Flattened Cheek Bone: This is the most classic sign, caused by the malar eminence (t being pushed inward or downward.\n- Diplopia (Double Vision): This occurs because the Orbital Surface forms the floor and lateral wall of the eye socket. If the bone shifts, the extraocular muscles (like the inferior oblique) can get trapped or the eyeball itself can drop (enophthalmos).\n- Paresthesia (Numbness): This usually affects the infraorbital nerve. If the fracture involves the orbital floor, the nerve that provides sensation to the upper lip and cheek gets compressed.\n- Subconjunctival Hemorrhage: Since the zygomatic bone forms the lateral wall of the orbit, a fracture often causes blood to seep into the white of the eye, usually with no visible posterior limit.\n\n### Typical fracture points\n\n- Frontozygomatic suture (lateral orbital rim)\n- Zygomaticomaxillary buttress (inferolateral orbit/maxilla)\n- Zygomatic arch\n- Sometimes involves the orbital floor and sphenoid junction\n### Classic signs\n\n- Flattened cheek (loss of prominence)\n- Periorbital swelling/bruising\n- Diplopia (extraocular muscle entrapment or orbital volume change)\n- Enophthalmos (sunken eye; increased orbital volume)\n- Infraorbital nerve symptoms (V2): numbness of cheek/upper lip (often due to orbital floor/maxilla involvement near infraorbital canal)\n- Trismus\n- depressed arch can impinge on coronoid process during mouth opening\n### Why trismus happens (easy mechanism)\n\n- Zygomatic arch displaced inward → blocks coronoid process of mandible → limited opening.\n-\n\n- Buttress concept:\n- zygomatic bone is part of the zygomaticomaxillary buttress, a key vertical support in midface.When a zygomatic fracture occurs, the direction of displacement is directly tied to the specific mechanism of injury (how the force hit the face). Because the zygoma is the "keystone" of the midface, where it moves determines which secondary structures—like nerves and muscles—get damaged.\nIn simple terms if it goes it takes veryething what it\n\nHere is the correlation between the direction of displacement, the typical injury cause, and the clinical effect:\n\n### 1. Medial/Inward Displacement\n\n- Injury Mechanism: A direct blow to the side of the cheek (e.g., a punch or a side-impact car accident).\n- Infraorbital Nerve Correlation: This is the most common cause of severe paresthesia. The bone is pushed into the infraorbital canal, crushing the nerve against the maxilla.\n- Other Effects: Narrowing of the orbit (causing the eye to look "pushed out" or exophthalmos) and potential blockage of the maxillary sinus.\nThis above displacement was in paper asking what type of paresthesia it will cause\n\n### 2. Posterior/Backward Displacement\n\n- Injury Mechanism: A high-velocity front-on impact (e.g., face hitting a dashboard).\n- Infraorbital Nerve Correlation: The nerve is often stretched or sheared as the zygomaticomaxillary suture is driven backward. This can lead to permanent numbness (anesthesia) if the nerve is severed.\n- Other Effects: The bone impacts the coronoid process of the mandible. This creates trismus (inability to open the mouth) because the jaw literally hits the displaced bone when the patient tries to speak or eat.\n\n### 3. Inferior/Downward Displacement\n\n- Injury Mechanism: A glancing blow from above or a heavy impact that "drops" the midface scaffold.\n- Infraorbital Nerve Correlation: Typically results in hypesthesia (reduced sensation) rather than total numbness.\n- Other Effects: * "Anti-Mongoloid Slant": The lateral corner of the eye drops because the lateral canthal ligament (which attaches to the bone) loses its anchor.\n- Diplopia: The eye drops into the newly created space (enophthalmos), causing double vision\n\n### 4. Lateral/Outward Displacement\n\n- Injury Mechanism: This is rare and usually happens in high-energy "burst" injuries or complex "quadripod" fractures where the bone rotates outward.\n- Infraorbital Nerve Correlation: The nerve may be trapped in the widening gap of the fracture line.\n- Other Effects: Widening of the face and a noticeable "step-off" deformity at the infraorbital rim.\n\n### Summary Table: Displacement vs. Nerve/Clinical Impact\n\nDirection\n\nMost Common Cause\n\nEffect on Infraorbital Nerve\n\nUnique Clinical Sign\n\nMedial\n\nLateral Punch\n\nCompression (Crush)\n\nFlattened cheek + Eye protrusion\n\nPosterior\n\nCar Accident (Front)\n\nTraction (Stretch)\n\nTrismus (Locked Jaw)\n\nInferior\n\nFalling from height\n\nTension (Pull)\n\nLid Slant (Eye corner drops)\n\n',keyPoints:ia};if(e.includes("sphenoid"))return{subject:y.ANATOMY,content:'sphenoid bone\n\nThe sphenoid bone is the “keystone” of the skull base: a single midline bone that sits in the center of the cranial floor and connects the cranium to the face. It forms parts of the middle cranial fossa, the orbit, the nasal cavity, and provides important passageways for cranial nerves and vessels. for easier illustration it is shown the surface which is seen if u open the skull and see it form the top\n\n### 1) Where it is and what it forms\n\nLocation: Middle of skull base, behind the ethmoid and between the temporal bones.\n\nMajor contributions:\n\n- Middle cranial fossa (where the temporal lobes sit)\n- Orbits (posterior part + apex)\n- Nasal cavity (via sphenoidal sinus opening into sphenoethmoidal recess)\n- Pterygoid region (important for jaw/soft palate muscles)\n\n### 2) Main parts of sphenoid bone\n\nThe sphenoid has 4 major parts:\n\n- Body\n- Lesser wings\n- Greater wings\n- Pterygoid processes (right and left)\n\n### 3) Body of sphenoid\n\n### A) Sella turcica (pituitary area)\n\nOn the superior surface of the body is the famous sella turcica, which holds the pituitary gland in the hypophyseal fossa.(imp point)\n\nKey features:\n\n- Tuberculum sellae (anterior boundary)\n- Hypophyseal fossa (pituitary seat)\n- Dorsum sellae (posterior boundary)\n- Posterior clinoid processes (on dorsum sellae)\n- Anterior clinoid processes (from lesser wings)\nClinical relevance: Pituitary tumors can enlarge the sella and compress nearby structures (especially optic chiasm).\n\n### B) Sphenoidal sinuses\n\nInside the body are paired sphenoidal air sinuses.\n\n- Open into the sphenoethmoidal recess.\n- Important relationship: close to pituitary, optic canal, and internal carotid artery (ICA) → surgery here is delicate.\n### C) Carotid groove\n\nOn the lateral side of the body is a groove for the internal carotid artery as it passes through the cavernous sinus region.\n\n### 4) Lesser wings + optic canal\n\nThe lesser wings extend laterally from the body.\n\n### Optic canal (super important)\n\nBetween the body and lesser wing is the optic canal, which transmits:\n\n- Optic nerve (CN II)\n- Ophthalmic artery\nAt the orbit apex, the lesser wing also helps form the roof/posterior orbit.\n\n### 5) Greater Wings (Alae Majores)\n\nThe greater wings of the sphenoid are large, curved processes that extend laterally from the body. They are morphologically complex, contributing to three distinct regions of the skull architecture:\n\n- Floor of the Middle Cranial Fossa: Forms the concave area that supports the temporal lobes of the brain.\n- Lateral Wall of the Skull: Forms the temporal surface (part of the temple area).\n- Posterior Wall of the Orbit: Contributes to the enclosure of the eye socket.\n### Key Foramina of the Greater Wing\n\nThese openings are critical transit points for neurovascular structures connecting the intracranial cavity to the face and neck. They are arranged in a crescent shape on the floor of the middle cranial fossa.\n\n-\nForamen\n\nContents\n\nMnemonic\n\nThe "Killer" Clinical Fact\n\nSuperior Orbital Fissure\n\nCN III, IV, V1, VI\n\n"Lazzy French Tarts Sit Naked In Anticipation"\n\nSOF Syndrome: A fracture here paralyzes the eye (CN 3,4,6) and numbs the forehead (V1). The eye is "frozen" and cannot move.\n\nForamen Rotundum\n\nV2 (Maxillary)\n\nR2-D2 (Rotundum = V2)\n\nTrigeminal Neuralgia: This is the target for nerve blocks when a patient has shooting pain in the cheek or upper teeth.\n\nForamen Ovale\n\nV3 (Mandibular)\n\nAccessory Meningeal A.\n\nLesser Petrosal N.\n\nEmissary Vein\n\nMALE\n\nGasserian Ganglion Block: A needle passed through the cheek and into this oval hole can numb the entire jaw for surgery.\n\nForamen Spinosum\n\nMiddle Meningeal Art.\n\nEmissary Vein\n\nNervous Spinosus\n\nMEN\n\nEpidural Hematoma: This hole is right under the temple (Pterion). A punch to the side of the head snaps this artery, causing rapid brain compression and death.\n\nForamen\n\nContents (The "Gotcha")\n\nMnemonic\n\nThe "Killer" Clinical Fact\n\nForamen Lacerum\n\nNothing goes through it!\n\n(In life, it is plugged with cartilage).\n\nRiding Over It:\n\n• Internal Carotid Artery (ICA)\n\nEntering the Wall:\n\n• Greater Petrosal Nerve\n\n• Deep Petrosal Nerve\n\n"Lacerum is Lacking"\n\n(It lacks vertical contents).\n\nOR\n\n"Lacerum is filled with Latex"\n\n(Think of cartilage plugging the hole).\n\nNasopharyngeal Carcinoma:\n\nTumors in the throat can eat through this cartilage plug to enter the brain, bypassing the bone protection.\n\nVidian Nerve:\n\nThe Greater & Deep Petrosal nerves meet here to form the Vidian nerve (Nerve of Pterygoid Canal).\n\n### 6) Pterygoid Processes\n\nExtending vertically downward from the junction of the body and greater wings, the pterygoid processes are essential for mastication (chewing) and swallowing mechanics. Each process splits into two plates.\n\n### Structure\n\n- Medial Pterygoid Plate: Narrow and longer; forms the posterior boundary of the lateral nasal wall.\n- Lateral Pterygoid Plate: Broad and thin; serves as a massive surface area for muscle attachment.\n- Pterygoid Fossa: The V-shaped trough located between the medial and lateral plates.\n### Important Landmarks\n\n- Pterygoid Hamulus: A distinct hook-like projection at the inferior tip of the medial plate.\n- Function: Acts as a functional pulley for the Tensor Veli Palatini muscle tendon, allowing it to turn 90 degrees to tense the soft palate (crucial for opening the Eustachian tube).\n- Fracture Risk: Can be fractured during difficult dental surgeries or cleft palate repair.\n### Muscle Attachments (High-Yield)\n\nThese muscles are primary movers of the mandible (Jaw).\n\nMuscle\n\nOrigin on Sphenoid\n\nFunction\n\nMedial Pterygoid\n\nMainly the medial surface of the Lateral Pterygoid Plate and the Pterygoid Fossa.\n\nElevates the mandible (closes jaw) and assists in side-to-side movement.\n\nLateral Pterygoid\n\nLateral surface of the Lateral Pterygoid Plate + Infratemporal surface of the Greater Wing.\n\nProtrudes the mandible (pushes chin forward) and moves jaw side-to-side (grinding). Sole opener of the jaw (inferior head).\n\n### IMPORTANT POINT TO NOTE BOTH ARE ATTACHED TO THE LATERAL PLATE WHAT SIDE OF IT DETERMINE THEIR NAME\n\n### The "Name = Surface" Rule\n\nThis is the easiest way to remember it:\n\n- Lateral Pterygoid = Lateral Surface of Lateral Plate.\n- Medial Pterygoid =  Medial Surface of Lateral Plate.\n\n###\n\n### Pterygoid (Vidian) Canal\n\n- Location: Runs through the base of the pterygoid process.\n- Transmits: The Nerve of the Pterygoid Canal (Vidian Nerve) and accompanying vessels.\n- Pathway: The Vidian nerve is formed by the union of the Greater Petrosal Nerve (Parasympathetic/Secretomotor from CN VII) and the Deep Petrosal Nerve (Sympathetic from the Carotid Plexus). It carries these fibers to the Pterygopalatine Ganglion to innervate the lacrimal gland (tearing) and nasal mucosa.\n\n### 7) Sphenoid Articulations ("The Keystone")\n\nThe sphenoid is centrally located and articulates with 12 other bones, effectively locking the neurocranium and viscerocranium together.\n\n- Unpaired bones: Frontal, Occipital, Ethmoid, Vomer.\n- Paired bones: Parietal, Temporal, Zygomatic, Palatine.\n- Note: Because of these extensive connections, trauma to the sphenoid can disarticulate the facial skeleton from the cranial base.\n\n### 8) High-Yield Clinical Correlations\n\n- Pituitary Adenoma (Sella Turcica):\n- Tumors here grow upward, compressing the Optic Chiasm.\n- Result: Bitemporal Hemianopsia (tunnel vision/loss of peripheral vision).\n- Cavernous Sinus Thrombosis:\n- The cavernous sinuses lie on either side of the sphenoid body.\n- Contents at risk: Internal Carotid Artery (ICA) and CN VI (run inside the sinus); CN III, IV, V1, V2 (run in the lateral wall).\n- Symptoms: Severe ophthalmoplegia, sensory loss on the face, and venous congestion (chemosis/proptosis) due to blockage of the ophthalmic veins.\n- Sphenoid Sinusitis / Surgery:\n- The sphenoid sinus is intimately related to the optic nerve and carotid artery. Aggressive surgery or severe infection can breach the thin bone, risking blindness or massive hemorrhage.\n- Skull Base Fractures:\n- Fractures involving the sphenoid body can tear the meninges, leading to CSF Rhinorrhea (cerebrospinal fluid leaking out the nose) and the "Target Sign" on gauze.\n-\n\n',keyPoints:oa};if(e.includes("ethmoid"))return{subject:y.ANATOMY,content:'Ethmoid bone\n\n###\n\nThe ethmoid bone is a midline, lightweight “air cell” bone between the eyes. It forms a big part of the nasal cavity, nasal septum, and medial wall of the orbit, and it carries the nerves for smell.\n\n### Location and what it forms\n\n- Roof of nasal cavity (cribriform plate)\n- Upper nasal septum (perpendicular plate)\n- Medial orbital wall (lamina papyracea)\n- Superior + middle nasal conchae (turbinates)\n- Contains ethmoidal air cells (ethmoid sinuses)\n### Parts (high-yield)\n\n### 1) Cribriform plate\n\n- Horizontal plate = roof of nasal cavity\n- Multiple tiny holes for olfactory nerve fibers (CN I)\n- Crista galli projects upward → attachment for falx cerebri\n### 2) Perpendicular plate\n\n- Forms the superior part of nasal septum\n- Septum = perpendicular plate + vomer + septal cartilage\n### 3) Ethmoidal labyrinths (lateral masses)\n\n- Contain ethmoidal air cells (sinuses)\n- Form medial orbital wall via lamina papyracea (very thin)\n- Medial projections form:\n- Superior nasal concha\n- Middle nasal concha\nNOTE:INferior concha is a separate bone\n\n### Ethmoidal sinuses and drainage (must know)\n\nEthmoidal air cells are grouped into:\n\n- Anterior ethmoidal cells → Middle meatus (via infundibulum)\n- Middle ethmoidal cells → Middle meatus (=\n- Posterior ethmoidal cells → Superior meatus\n### 🚑 Clinical Triad (The "Must-Knows")\n\n- The "Runny Nose" that isn\'t mucus: If a patient has head trauma and clear fluid dripping from the nose (salty taste), suspect a Cribriform Plate fracture leaking CSF.\n- The "Lost Smell": Shearing forces at the cribriform plate can sever the olfactory rootlets, leading to permanent Anosmia.\n- Ethmoid inflammation often blocks the middle meatus drainage pathways → sinusitis chain reactions\n### Ethmoid Fracture\n\nThe ethmoid bone can be fractured in cases of facial trauma – most commonly hitting the dashboard in a collision, or a fall from height. Some signs and symptoms of fracture are related to the anatomy of the ethmoid bone:\n\n- Fracture of cribriform plate – branches of the olfactory bulb may be sheared. This may cause anosmia (loss of sense of smell).\n- Fracture of the labyrinth – may allow communication between the nasal cavity and the orbit. It is then possible for air to enter the orbit and cause orbital emphysema.\n### CSF Rhinorrhoea\n\nA fracture to the cribriform plate may allow communication between the nasal cavity and the central nervous system. Consequently, cerebrospinal fluid (CSF) can enter the nasal cavity and drain out from the nose. This manifests clinically as a clear watery discharge from one side of the nose – and is known as CSF rhinorrhoea.\n\nThe leaks normally stop spontaneously and can be managed conservatively, however surgery is sometimes required. Spontaneous CSF rhinorrhoea can also occur due to congenital or acquired defects in the ethmoid bone.\n\n',keyPoints:la};if(e.includes("foramina")||e.includes("fossae"))return{subject:y.ANATOMY,content:"Foramina & Fossae of the Head and Neck\n(Exam Notes + Visual Orientation)\n\nFocus: cranial fossae (internal), skull base foramina (superior & inferior views), facial foramina, temporal fossa, infratemporal fossa, and pterygopalatine fossa.\n\nHow to study this fast (what examiners usually want)\n\n- Learn the VIEW first: anterior skull → facial foramina; inferior skull base → external skull base; inside skull → cranial fossae.\n- For each hole: (1) which nerve/artery passes, (2) what deficit if injured, (3) where it connects (fossa/cavity).\n- Memorize the ‘MCF trio’: rotundum (V2), ovale (V3), spinosum (middle meningeal artery).\n\n### 1) Visual Orientation: 3 views you MUST be able to recognize\n\n### A. Anterior skull (face) — key facial foramina\n\nAnterior view: supraorbital, infraorbital, and mental foramina (landmark alignment).\n\nRule of thumb: the three foramina often align roughly in a vertical line—supraorbital (V1), infraorbital (V2), mental (V3).\n\nInfraorbital foramen (V2) — classic dental/clinical landmark.\n\nMental foramen (mental nerve, V3) — lower lip/chin sensation.\n\n### B. Inferior skull base (external/base of skull) — key exit points outside\n\nSkull base: superior (inside) and inferior (outside) views shown together.\n\n### C. Inside the skull (cranial cavity) — cranial fossae and the big foramina\n\nCranial fossae (anterior, middle, posterior) — major foramina are grouped by fossa.\n\nInside cranial base: multiple foramina labeled (excellent for revision).\n\n### 2) Cranial fossae (inside the skull)\n\n### A. Anterior cranial fossa (ACF)\n\nBones: frontal bone, ethmoid (cribriform plate), lesser wings of sphenoid\n\nHouses: frontal lobes\n\nKey foramina / canals:\n\n- Foramen cecum → emissary vein to superior sagittal sinus (only if patent/variable)\n- Cribriform plate foramina (ethmoid) → CN I (olfactory nerve filaments)\n- Anterior ethmoidal canal → anterior ethmoidal nerve (V1, from nasociliary) + artery/vein\n- Posterior ethmoidal canal → posterior ethmoidal nerve (V1) + artery/vein\nClinical pearls (ACF)\n\n- Cribriform plate fracture → anosmia + CSF rhinorrhea (very classic).\n- Foramen cecum can (rarely) transmit infection intracranially if emissary vein is present.\n\n### B. Middle cranial fossa (MCF)\n\nBones: body + greater wings of sphenoid, temporal bone (especially petrous part)\n\nHouses: temporal lobes; pituitary sits centrally in the sella turcica region (sphenoid body)\n\nMajor foramina (very tested):\n\n- Optic canal → CN II + ophthalmic artery\n- Superior orbital fissure → CN III, IV, V1 (lacrimal, frontal, nasociliary), VI + superior ophthalmic vein\n- Foramen rotundum → V2 (maxillary nerve)\n- Foramen ovale → V3 (mandibular nerve) + accessory meningeal artery + emissary vein (± lesser petrosal nerve, variable)\n- Foramen spinosum → middle meningeal artery/vein + meningeal branch of V3 (nervus spinosus)\n- Carotid canal → internal carotid artery + sympathetic plexus\n- Foramen lacerum (filled with cartilage in life) → no major artery passes through; greater petrosal crosses and ICA runs above after carotid canal\n- Hiatus for greater petrosal nerve → greater petrosal nerve (parasympathetic pathway to lacrimal gland via pterygopalatine ganglion)\n- Hiatus for lesser petrosal nerve → lesser petrosal nerve (parasympathetic to parotid via otic ganglion)\nMnemonics (MCF)\n\n- ‘R2’: Foramen Rotundum carries V2.\n- ‘Standing Room Only’: Spinosum, Rotundum, Ovale (common order you see).\n- ‘MALE’ (for ovale contents): Mandibular nerve (V3), Accessory meningeal, Lesser petrosal (variable), Emissary vein.\n- SOF contents: III, IV, V1, VI (plus superior ophthalmic vein).\n\nHigh-yield clinical (MCF)\n\n- Middle meningeal artery tear (at foramen spinosum) → epidural hematoma.\n- Cavernous sinus / SOF lesions → ophthalmoplegia + loss of corneal reflex (V1).\n- Optic canal lesions → vision loss.\n\n### C. Posterior cranial fossa (PCF)\n\nBones: occipital bone + petrous temporal\n\nHouses: cerebellum, pons, medulla\n\n- Internal acoustic meatus → CN VII, CN VIII + labyrinthine artery\n- Jugular foramen → CN IX, X, XI + internal jugular vein (sigmoid sinus continuation) + inferior petrosal sinus\n- Hypoglossal canal → CN XII\n- Foramen magnum → medulla/spinal cord + vertebral arteries + anterior/posterior spinal arteries + spinal root of CN XI + meninges\n- Mastoid foramen → emissary vein + meningeal branch of occipital artery\n- Condylar canal → emissary vein (variable)\nClinical pearls (PCF)\n\n- Acoustic schwannoma (CN VIII) → hearing loss, tinnitus, balance problems; can involve CN VII (facial weakness).\n- Jugular foramen syndrome → dysphagia (IX/X), hoarseness (X), weak SCM/trapezius (XI).\n- Hypoglossal canal lesion → tongue deviates toward lesion on protrusion.\n- Tonsillar herniation through foramen magnum is life-threatening.\n\n### 3) External skull base foramina (inferior view / outside of skull)\n\nThese are easiest when you visualize the inferior skull base image (Section 1B).\n\n- Stylomastoid foramen → CN VII (facial nerve exit from skull) + stylomastoid artery\n- Petrotympanic fissure → chorda tympani (CN VII) + anterior tympanic artery\n- Tympanic canaliculus → tympanic branch of CN IX (Jacobson nerve)\n- Mastoid canaliculus → auricular branch of CN X (Arnold nerve)\n- Foramen magnum and hypoglossal canal are also visible from below (see PCF list).\nQuick checks (external base)\n\n- Facial nerve exits skull at stylomastoid foramen, then enters parotid gland (important clinically).\n- Chorda tympani travels via petrotympanic fissure and joins lingual nerve (taste ant 2/3 tongue + parasymp to submandibular/sublingual).\n\n### 4) Facial foramina (high-yield dental/clinical)\n\n- Supraorbital foramen/notch → supraorbital nerve (V1) + vessels (site for supraorbital nerve block)\n- Infraorbital foramen → infraorbital nerve (V2) + vessels (infraorbital block: upper lip/cheek/anterior maxillary teeth region)\n- Zygomaticofacial / zygomaticotemporal foramina → branches of zygomatic nerve (V2)\nMaxilla / palate / nasal:\n\n- Incisive foramen (nasopalatine canal) → nasopalatine nerve + vessels (anterior palatal anesthesia)\n- Greater palatine foramen → greater palatine nerve + vessels (posterior hard palate anesthesia)\n- Lesser palatine foramina → lesser palatine nerves + vessels (soft palate)\n- Sphenopalatine foramen → sphenopalatine artery + nasopalatine & posterior superior lateral nasal nerves (posterior epistaxis region)\n- Posterior superior alveolar foramina → PSA nerves/vessels (maxillary molar region)\nMandible:\n\n- Mandibular foramen (medial ramus) → inferior alveolar nerve (V3) + vessels (classic IAN block site)\n- Mental foramen → mental nerve + vessels (lower lip/chin anesthesia)\n\n### 5) Fossae of the deep face: Temporal fossa, Infratemporal fossa, Pterygopalatine fossa\n\n### A. Temporal fossa\n\nTemporal fossa (highlighted) — lateral skull view.\n\nBoundaries:\n\n- Superior/anterior: superior temporal line (frontal/parietal)\n- Inferior: zygomatic arch (and infratemporal crest deeper)\n- Floor: frontal, parietal, squamous temporal, and greater wing of sphenoid\n- Roof: temporal fascia\nContents: temporalis muscle; deep temporal arteries/veins; deep temporal nerves (V3).\n\n### B. Infratemporal fossa\n\nInfratemporal fossa — bony boundaries (classic Gray-style).\n\nTemporal + infratemporal fossae: key nerves and vessels (overview).\n\nBoundaries (high-yield):\n\n- Lateral: ramus of mandible\n- Medial: lateral pterygoid plate (sphenoid)\n- Anterior: posterior surface of maxilla\n- Posterior: tympanic plate/styloid region (temporal bone)\n- Roof: infratemporal surface of greater wing of sphenoid + squamous temporal (foramina ovale & spinosum open here)\n- Inferior: open (near medial pterygoid attachment at angle of mandible)\nContents (must-know):\n\n- Muscles: medial pterygoid, lateral pterygoid; lower part of temporalis tendon\n- Maxillary artery (2nd part) + branches\n- Pterygoid venous plexus\n- Mandibular nerve (V3) branches: auriculotemporal, buccal, lingual, inferior alveolar\n- Chorda tympani (CN VII) joins lingual nerve here\n- Otic ganglion (parasymp relay to parotid via lesser petrosal → V3 auriculotemporal pathway)\nCommunications (exam-favorite):\n\n- To pterygopalatine fossa via pterygomaxillary fissure (posterior to maxilla)\n- To middle cranial fossa via foramen ovale (V3) & foramen spinosum (MMA)\n- To orbit via inferior orbital fissure (via PPF and related spaces)\n- To temporal fossa deep to zygomatic arch\n### C. Pterygopalatine fossa (PPF)\n\nWhere the PPF sits (purple region) — deep to the pterygomaxillary fissure.\n\nPPF ‘gateway map’ (numbered) — shows major canals/foramina and contents.\n\nPPF neural connections (V2 + pterygopalatine ganglion pathways).\n\nDefinition: a small inverted pyramidal space deep to the infratemporal fossa, posterior to the maxilla, between the pterygoid process (posterior) and maxilla (anterior). It is a major neurovascular crossroad.\n\nBoundaries:\n\n- Anterior: posterior wall of maxilla\n- Posterior: pterygoid process of sphenoid\n- Medial: perpendicular plate of palatine bone\n- Lateral: pterygomaxillary fissure (open to infratemporal fossa)\n- Roof (superior): inferior orbital fissure region (sphenoid/maxilla)\n- Floor (inferior): opens into greater/lesser palatine canals\nContents (what to memorize):\n\n- Maxillary nerve (V2) and its branches (zygomatic, infraorbital, posterior superior alveolar, etc.)\n- Pterygopalatine ganglion (parasympathetic relay from CN VII)\n- 3rd part of maxillary artery and branches (e.g., sphenopalatine, descending palatine, infraorbital, PSA)\n- Nerve of pterygoid canal (Vidian nerve) = greater petrosal (parasymp) + deep petrosal (symp)\nCommunications (gateways):\n\n- To middle cranial fossa → foramen rotundum (V2)\n- To orbit → inferior orbital fissure (infraorbital vessels, zygomatic nerve, etc.)\n- To nasal cavity → sphenopalatine foramen (sphenopalatine artery; nasopalatine/posterior nasal nerves)\n- To oral cavity (palate) → greater palatine canal (greater/lesser palatine nerves and vessels)\n- To nasopharynx → pharyngeal (palatovaginal) canal\n- To infratemporal fossa → pterygomaxillary fissure (maxillary artery enters; PSA nerve exits)\nClinical relevance (PPF)\n\n- Posterior epistaxis: sphenopalatine artery in/near PPF (ligation/cautery target).\n- Maxillary nerve (V2) block can be approached via PPF routes in some anesthesia techniques.\n- Infection/tumor can spread through PPF because it connects orbit, nasal cavity, palate, nasopharynx, and infratemporal fossa.\n\n### 6) Super-quick revision tables\n\nCranial nerves and their key skull exits (high yield):\n\nNerve\n\nExit (foramen/canal)\n\nOne-liner clinical clue\n\nCN I\n\nCribriform plate\n\nLoss of smell + CSF rhinorrhea if fractured\n\nCN II\n\nOptic canal\n\nVision loss / afferent pupillary defect\n\nCN III/IV/VI\n\nSuperior orbital fissure\n\nOphthalmoplegia\n\nV1\n\nSuperior orbital fissure\n\nLoss of corneal reflex (afferent)\n\nV2\n\nForamen rotundum\n\nMidface numbness\n\nV3\n\nForamen ovale\n\nJaw deviation/weak mastication + lower face sensory loss\n\nCN VII\n\nInternal acoustic meatus → stylomastoid foramen\n\nFacial palsy\n\nCN VIII\n\nInternal acoustic meatus\n\nHearing/balance issues\n\nCN IX/X/XI\n\nJugular foramen\n\nDysphagia/hoarseness + weak SCM/trap\n\nCN XII\n\nHypoglossal canal\n\nTongue deviates toward lesion\n\n### Image credits (all from Wikimedia Commons; license shown on each file page)\n\n• Gray193 – Cranial fossae — https://commons.wikimedia.org/wiki/File:Gray193_-_Cranial_fossae.png\n\n• Skull base (superior/inferior) view — https://commons.wikimedia.org/wiki/File:707_Superior-Inferior_View_of_Skull_Base-01.jpg\n\n• Skull foramina labeled (rasterized from SVG) — https://commons.wikimedia.org/wiki/File:Skull_foramina_labeled.svg\n\n• Anterior facial foramina diagram — https://commons.wikimedia.org/wiki/File:Foramina_Skull.png\n\n• Infraorbital foramen (red highlight) — https://commons.wikimedia.org/wiki/File:Infraorbital_foramen_of_maxilla_-_skull_-_anterior_view.png\n\n• Mental foramen (red highlight) — https://commons.wikimedia.org/wiki/File:Mental_foramen_-_skull_-_lateral_view.png\n\n• Temporal fossa — https://commons.wikimedia.org/wiki/File:Temporal_fossa.jpg\n\n• Temporal + infratemporal fossae (Gray-style) — https://commons.wikimedia.org/wiki/File:Cranio._Fosse_temporale_e_infratemporale.jpg\n\n• Infratemporal fossa boundaries — https://commons.wikimedia.org/wiki/File:Fossa_infratemporale.jpg\n\n• PPF photo — https://commons.wikimedia.org/wiki/File:Pterygopalatine_fossa.PNG\n\n• PPF numbered raster — https://commons.wikimedia.org/wiki/File:Fossa_pterygopalatina_raster.png\n\n• PPF neural connections diagram — https://commons.wikimedia.org/wiki/File:Schematic_diagram_showing_the_bony_anatomy_and_main_neural_connections_of_the_PPF.png\n",keyPoints:ca};if(e.includes("osteology")||e.includes("fracture"))return{subject:y.ANATOMY,content:Dn,keyPoints:Fn}}if(e===y.GENERAL_EMBRYOLOGY)return{subject:y.GENERAL_EMBRYOLOGY,content:Ln,keyPoints:In};const r=ga(n),s=a?`Specific Topic: **${a}** (under subject ${e})`:`Subject: **${e}`,i=await fa([{role:"system",content:r.trim()},{role:"user",content:[`Provide a high-yield summary for the ${s}.`,"Ensure the content is strictly tailored to the reference books and level of difficulty specified in the context above.",'Start with an "Exam Scope" sentence defining what is most important for this specific topic in the exam.','Return ONLY valid JSON with keys: "subject", "content", "keyPoints" (array of strings).'].join("\n")}],{temperature:.3,responseFormat:{type:"json_object"},model:t}),o=ma(i);return{subject:e,content:o.content,keyPoints:o.keyPoints}},xa=async(e,n=5,a,t,r="Medium",s)=>{if(e===y.DENTAL_MATERIALS&&t&&(t.toLowerCase().includes("denture")||t.toLowerCase().includes("reline")||t.toLowerCase().includes("rebase")||t.toLowerCase().includes("polymers"))){let e=[];switch(r){case"Easy":e=[...Sn];break;case"Hard":e=[...Tn];break;case"Challenge":e=[...Cn];break;default:e=[...Mn]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("properties")){let e=[];const a=t.toLowerCase();if(a.includes("mechanical"))switch(r){case"Easy":e=[...tn];break;case"Hard":e=[...rn];break;case"Challenge":e=[...tn,...an,...rn];break;default:e=[...an]}else if(a.includes("thermal"))switch(r){case"Easy":e=[...on];break;case"Hard":e=[...ln];break;case"Challenge":e=[...on,...sn,...ln];break;default:e=[...sn]}else if(a.includes("chemical")||a.includes("biological"))switch(r){case"Easy":e=[...dn];break;case"Hard":e=[...un];break;case"Challenge":e=[...dn,...cn,...un];break;default:e=[...cn]}else if(a.includes("rheology"))switch(r){case"Easy":e=[...hn];break;case"Hard":e=[...pn];break;case"Challenge":e=[...hn,...mn,...pn];break;default:e=[...mn]}else if(a.includes("optical"))switch(r){case"Easy":e=[...bn];break;case"Hard":e=[...gn];break;case"Challenge":e=[...bn,...fn,...gn];break;default:e=[...fn]}else switch(r){case"Easy":e=[...wn];break;case"Hard":e=[...vn];break;case"Challenge":e=[...xn];break;default:e=[...yn]}const s=e.sort(()=>.5-Math.random()),i=s.slice(0,Math.min(n,s.length));return Gn(i)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("impression")){let e=[];switch(r){case"Easy":e=[...S];break;case"Hard":e=[...I];break;case"Challenge":e=[...S,...T,...I];break;default:e=[...T]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("gypsum")){let e=[];switch(r){case"Easy":e=[...F];break;case"Hard":e=[...R];break;case"Challenge":e=[...O];break;default:e=[...E]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("investment")){let e=[];switch(r){case"Easy":e=[...we];break;case"Hard":e=[...ve];break;case"Challenge":e=[...xe];break;default:e=[...ye]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("casting")){let e=[];switch(r){case"Easy":e=[...Ce];break;case"Hard":e=[...Me];break;case"Challenge":e=[...Ae];break;default:e=[...Ne]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&(t.toLowerCase().includes("cement")||t.toLowerCase().includes("liner")||t.toLowerCase().includes("base"))){let e=[];switch(r){case"Easy":e=[...Ee];break;case"Hard":e=[...Pe];break;case"Challenge":e=[...Le];break;default:e=[...Ie]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("composite")){let e=[];switch(r){case"Easy":e=[...G];break;case"Hard":e=[...B];break;case"Challenge":e=[...V];break;default:e=[...z]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&(t.toLowerCase().includes("adhesion")||t.toLowerCase().includes("bonding"))){let e=[];switch(r){case"Easy":e=[...K];break;case"Hard":e=[...U];break;case"Challenge":e=[...K,...Y,...U];break;default:e=[...Y]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("wax")){let e=[];switch(r){case"Easy":e=[...ne];break;case"Hard":e=[...ee];break;case"Challenge":e=[...Z];break;default:e=[...X]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("amalgam")){let e=[];switch(r){case"Easy":e=[...ze];break;case"Hard":e=[...We];break;case"Challenge":e=[..._e];break;default:e=[...De]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&(t.toLowerCase().includes("gic")||t.toLowerCase().includes("glass ionomer"))){let e=[];switch(r){case"Easy":e=[...N];break;case"Hard":e=[...j];break;case"Challenge":e=[...k];break;default:e=[...w]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&t.toLowerCase().includes("metal")){let e=[];switch(r){case"Easy":e=[...fe];break;case"Hard":e=[...pe];break;case"Challenge":e=[...he];break;default:e=[...me]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.DENTAL_MATERIALS&&t&&(t.toLowerCase().includes("ceramic")||t.toLowerCase().includes("porcelain"))){let e=[];switch(r){case"Easy":e=[...Ke];break;case"Hard":e=[...Ye];break;case"Challenge":e=[...qe];break;default:e=[...He]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}if(e===y.GENERAL_EMBRYOLOGY){let e=[];switch(r){case"Easy":e=[...Rn];break;case"Hard":e=[...On];break;case"Challenge":e=[...En];break;default:e=[...Pn]}const a=e.sort(()=>.5-Math.random()),t=a.slice(0,Math.min(n,a.length));return Gn(t)}let i=ga(a);const o="Comprehensive Mega Test"===e;let l="";if(o){l=`Comprehensive Exam covering: ${t}`,i=`You are generating a mixed-subject exam test for the ${a} curriculum. The student has completed the following modules: ${t}. Ensure questions are fairly distributed across these subjects.`}else l=t?`Topic: **${t}** (Subject: ${e})`:`Subject: **${e}**`;let c="";switch(r){case"Easy":c="Questions should be straightforward recall, definitions, or basic concept checks. Options should be clearly distinct.";break;case"Medium":c="Questions should be clinical scenarios or application-based. Options should have good distractors but a clear best answer.";break;case"Hard":case"Challenge":c="Questions should be complex clinical vignettes, requiring multi-step reasoning, diagnosis of rare presentations, or management of complications. Options should be very close distractors requiring precise knowledge."}const d=await fa([{role:"system",content:"You are an expert dental exam item-writer (FCPS style)."},{role:"user",content:`\nGenerate MCQs ONLY from modules marked as COMPLETED.\n\nINPUTS:\n1) COMPLETED_MODULES: ${l}\n2) MODULE_CONTENT: ${o?"Comprehensive Exam - Random Selection from Internal Knowledge Base aligned with Curriculum":i}\n\nSTRICT RULES (MUST FOLLOW):\n- Use ONLY the modules listed in COMPLETED_MODULES.\n- Create Single Best Answer MCQs (A-D), exactly one correct option.\n- Do not use "All of the above" or "None of the above".\n${o?"- Since this is a Mega Test, use your expert internal knowledge to generate high-yield questions for these subjects, strictly adhering to the curriculum level.":"- Explanations must be based ONLY on MODULE_CONTENT (no outside knowledge)."}\n- Difficulty distribution: 60% Medium, 25% Hard, 15% Easy.\n- Include at least 25% clinical vignette questions.\n- Avoid duplicates and repeated stems.\n\n**Difficulty Level: ${r}**\n${c}\n\nGenerate ${n} questions:\n- If FCPS: Questions should be one-best-type (BCQ) often tricky, focusing on "Most common", "Most specific", or "First line".\n${o?"":"- Ensure the explanation cites the logic from the relevant reference books mentioned in the context."}\n\nReturn ONLY valid JSON as:\n{\n  "items": [\n    {\n      "id": "string",\n      "question": "string",\n      "options": ["A", "B", "C", "D"],\n      "correctAnswerIndex": 0,\n      "explanation": "string"\n    }\n  ]\n}\n`}],{temperature:.5,responseFormat:{type:"json_object"},model:s}),u=ma(d);return Gn(u.items)},va=async(e,n,a="FCPS")=>{if(0===e.length)return n;const t=ga(a),r=e.map(e=>`${"user"===e.role?"Student":"Tutor"}: ${e.text}`).join("\n");return(await fa([{role:"system",content:`You are updating a running summary of a tutoring conversation.\n${t}\n\nRULES:\n- Keep the summary concise (max 8 bullet points).\n- Include: student's goal, key facts established, misconceptions corrected, and open questions.\n- Do NOT invent details or add new information.\n- Return ONLY the updated summary, no preamble or labels.`},{role:"user",content:`Previous summary:\n${n||"(none)"}\n\nNew messages:\n${r}`}],{temperature:.2})).trim()},wa=async(e,n="FCPS",a,t,r)=>{var s,i,o,l,c,d;const u=ga(n),m="Public"!==n&&a?`\n**CURRENT PAGE CONTENT (Notes the student is reading)**:\n---\n${a.substring(0,4e3)}\n---\n\nUse this content to give context-aware answers. If the student asks about something on the page, refer to it directly.`:"",h=(null==(s=null==t?void 0:t.summary)?void 0:s.trim())?`\n**EARLIER CONVERSATION SUMMARY**:\n${t.summary}\n`:"",p=(null==t?void 0:t.recentMessages)&&t.recentMessages.length>0?`\n**RECENT CONVERSATION**:\n${t.recentMessages.map(e=>`${"user"===e.role?"Student":"Tutor"}: ${e.text}`).join("\n")}\n`:"",f=`\nYou are an expert dental tutor who explains clearly and naturally.\n${u}\n${`\n**REFERENCE TEXTS (use primary sources first)**:\n${Object.entries(ba).map(([e,n])=>{const a=n.slice(0,2),t=n.slice(2);return`- ${e}: Primary: ${a.join("; ")}${t.length?`; Secondary: ${t.join("; ")}`:""}`}).join("\n")}\n`}\n${m}\n${h}\n${p}\n\nGOAL: Give a focused, detailed, dental-relevant answer that is accurate and useful.

RULES:
- Prioritize dental relevance. If the question is not dental, ask a clarifying question and steer it to dental context.
- Be specific and complete: include key mechanisms, indications/contraindications, clinical relevance, and common pitfalls when appropriate.
- Aim to answer fully in one response (assume the user wants all relevant detail to avoid follow-up requests).
- Avoid filler or random facts. Only include points that directly answer the question.
- Structure: brief overview paragraph + 8-16 bullets or a small table if it improves clarity. Use headings when helpful.
- Include high-yield exam phrases/buzzwords when stream is not Public.
- If the user is wrong: gently correct and explain the correct concept.
- Ask a follow-up question ONLY if required to answer safely or accurately.
- No quiz mode unless the user asks for it.
- Use the reference list above as the source-of-truth. If unsure, say so rather than inventing.
${"Public"===n?"- Use plain language (no exam framing). Define jargon in 1 line.":"- Stick to the curriculum level defined above and use exam-relevant buzzwords."}\n  `,b=await fetch(da,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:r||ua,messages:[{role:"system",content:f.trim()},{role:"user",content:`Question: "${e}"`}],temperature:.4})}).catch(e=>{throw new Error(`Connection failed: ${e.message}`)});if(404===b.status)throw new Error(`AI Gateway not found (${da}). Please check your configuration.`);const g=await ha(b);if(!b.ok)throw new Error(pa(g,b));if(!g.json)throw new Error("OpenAI proxy returned a non-JSON response.");return((null==(i=g.json)?void 0:i.text)||(null==(d=null==(c=null==(l=null==(o=g.json)?void 0:o.choices)?void 0:l[0])?void 0:c.message)?void 0:d.content)||"").trim()},ka=[{id:"gpt-5.2",name:"ChatGPT 5.2",description:"Latest and most powerful model",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.1, GPT-4.1, GPT-4o, o1, o3"},{id:"gpt-4o",name:"GPT-4o",description:"Most capable, best for complex queries",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.2, GPT-5.1, GPT-4.1, o1, o3"},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"High performance, good for analysis",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.2, GPT-5.1, GPT-4.1, GPT-4o, o1, o3"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast and efficient, recommended",tier:"Standard",dailyLimit:"2.5M tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5-mini, o1-mini, o3-mini, codex-mini"},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",description:"Quick responses, basic queries",tier:"Standard",dailyLimit:"2.5M tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5-mini, o1-mini, o3-mini, codex-mini"}],ja="gpt-4o-mini",Na=e=>{const n=ka.find(n=>n.id===e);return(null==n?void 0:n.name)||e},Aa=({currentModel:e,onModelChange:a,isOpen:t,onClose:r})=>t?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[400]",onClick:r}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[401] pointer-events-none",children:n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-[90vw] md:w-[500px] max-h-[85vh] overflow-y-auto p-8 pointer-events-auto animate-in scale-95 fade-in duration-300",onClick:e=>e.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Select AI Model"}),n.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Choose your preferred language model for responses"})]}),n.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"space-y-3",children:ka.map(t=>n.jsx("button",{onClick:()=>{a(t.id),r()},className:"w-full text-left p-4 rounded-2xl transition-all duration-200 border-2 group "+(e===t.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 dark:border-blue-400":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-white/5 hover:border-blue-300 dark:hover:border-blue-500"),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-lg "+(e===t.id?"text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-white"),children:t.name}),n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:t.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-200/50 dark:bg-slate-700/50 px-2 py-1 rounded",children:["📊 ",t.dailyLimit]}),n.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:t.dailyLimitNote})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-[11px] font-bold px-3 py-1 rounded-full whitespace-nowrap "+("Premium"===t.tier?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:t.tier}),e===t.id&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})},t.id))}),n.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-white/5 space-y-3",children:[n.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:["💡 ",n.jsx("strong",{children:"Tip:"})," Premium models (GPT-5.2, GPT-4o) provide better responses for complex queries. Standard models (GPT-4o Mini) are faster and cost-effective."]}),n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold text-orange-700 dark:text-orange-300",children:"📊 Shared Daily Token Limits (Reset at Midnight UTC):"}),n.jsxs("div",{className:"space-y-2 text-xs text-orange-600 dark:text-orange-400",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:"Premium Tier (250K tokens/day - Shared):"}),n.jsx("p",{className:"text-[11px] ml-2",children:"GPT-5.2, GPT-5.1, GPT-4.1, GPT-4o, o1, o3"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:"Standard Tier (2.5M tokens/day - Shared):"}),n.jsx("p",{className:"text-[11px] ml-2",children:"GPT-5-mini, GPT-4o Mini, o1-mini, o3-mini"})]})]})]})]})]})})]}):null,Ma=({href:e,children:a})=>{if(!e)return n.jsx(n.Fragment,{children:a});return n.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",onClick:n=>{var a,t;const r=e.includes("youtube.com")||e.includes("youtu.be"),s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(r&&s){n.preventDefault();let r="";if(e.includes("youtu.be/")?r=(null==(a=e.split("youtu.be/")[1])?void 0:a.split("?")[0])||"":e.includes("youtube.com/watch?v=")?r=new URL(e).searchParams.get("v")||"":e.includes("youtube.com/embed/")&&(r=(null==(t=e.split("/embed/")[1])?void 0:t.split("?")[0])||""),r){const e=`vnd.youtube://${r}`,n=`https://www.youtube.com/watch?v=${r}`;window.location.href=e,setTimeout(()=>{window.location.href=n},1e3)}}},className:"text-blue-600 dark:text-blue-400 hover:underline",children:a})},Ca=({pageContext:a})=>{const[t,r]=e.useState(!1),[s,i]=e.useState(!1),[o,l]=e.useState([]),[c,d]=e.useState(""),[u,m]=e.useState(!1),[h,p]=e.useState(!1),[b,g]=e.useState(!1),[y,x]=e.useState(()=>"undefined"!=typeof window&&localStorage.getItem("selectedAIModel")||ja),v=e.useRef(null);e.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[o,u]);const w=async e=>{const n=(e??c).trim();if(!n||u||h)return;const t=n;d(""),l(e=>[...e,{role:"user",text:t}]),m(!0);try{const e=await wa(t,"Public",a,void 0,y),n=(e=>{const n=[];return(e.toLowerCase().includes("mechanism")||e.toLowerCase().includes("pathway"))&&n.push("What are the clinical implications?"),(e.toLowerCase().includes("treatment")||e.toLowerCase().includes("therapy"))&&n.push("What are the contraindications?"),(e.toLowerCase().includes("disease")||e.toLowerCase().includes("condition"))&&n.push("How is this diagnosed?"),(e.toLowerCase().includes("drug")||e.toLowerCase().includes("medication"))&&n.push("What are the drug interactions?"),0===n.length&&n.push("Tell me more"),n.length<3&&n.push("How is this tested in exams?"),[...new Set(n)].slice(0,3)})(e);l(a=>[...a,{role:"ai",text:e,suggestedQuestions:n}])}catch(r){(e=>{const n=((null==e?void 0:e.message)||JSON.stringify(e)||"").toLowerCase();return n.includes("quota")||n.includes("resource_exhausted")||n.includes("rate limit")||n.includes("429")})(r)?(p(!0),l(e=>[...e,{role:"ai",text:"⚠️ **Daily limit reached** - You've hit the daily token limit for this model tier.\n\n**Premium Models** (GPT-5.2, GPT-4o, GPT-4 Turbo): 250K tokens/day (shared)\n\n**Standard Models** (GPT-4o Mini, GPT-3.5 Turbo): 2.5M tokens/day (shared)\n\nPlease try again after midnight UTC when the quota resets."}])):l(e=>[...e,{role:"ai",text:`I encountered an error: ${(null==r?void 0:r.message)||JSON.stringify(r)}. If you are the admin, in Cloudflare **Pages** open your project → Settings → Environment variables → add secret OPENAI_API_KEY (Production, and Preview if needed) then redeploy.`}])}finally{m(!1)}};return n.jsxs("div",{className:"fixed bottom-24 md:bottom-6 right-6 z-[300]",children:[t?n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] shadow-2xl border border-slate-200 dark:border-white/10 flex flex-col overflow-hidden animate-in slide-in-from-bottom-8 duration-500 transition-all ease-in-out "+(s?"w-[90vw] md:w-[80vw] lg:w-[1000px] h-[85vh]":"w-[22rem] md:w-[26rem] h-[600px]"),children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white flex justify-between items-center shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center backdrop-blur-sm",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),n.jsxs("div",{children:[n.jsx("span",{className:"font-bold block leading-none",children:"DentEdge Assistant"}),n.jsx("span",{className:"text-[10px] text-blue-100 font-bold uppercase tracking-wider",children:"Quick Review Mode"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>g(!0),className:"hover:bg-white/10 rounded-full p-2 transition-colors group relative",title:"Select AI Model",children:[n.jsx("div",{className:"absolute -bottom-12 right-0 bg-slate-900 text-white text-[10px] font-bold px-3 py-1 rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:Na(y)}),n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),n.jsx("button",{onClick:()=>i(!s),className:"hover:bg-white/10 rounded-full p-2 transition-colors",title:s?"Collapse":"Expand",children:s?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6m0 0v6m0-6L3 21m17-7h-6m0 0v6m0-6l7 7m-7-17h6m0 0v6m0-6L21 3M4 10h6m0 0V4m0 6L3 3"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),n.jsx("button",{onClick:()=>r(!1),className:"hover:bg-white/10 rounded-full p-2 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]}),n.jsxs("div",{ref:v,className:"flex-1 p-5 overflow-y-auto space-y-5 bg-slate-50/50 dark:bg-slate-950/50",children:[h&&n.jsx("div",{className:"text-xs font-semibold text-red-700 bg-red-100/80 dark:text-red-300 dark:bg-red-900/40 px-4 py-3 rounded-xl border border-red-300 dark:border-red-700",children:"⚠️ Daily limit reached for this model tier. Resets at midnight UTC."}),0===o.length&&n.jsxs("div",{className:"text-center py-12 px-6",children:[n.jsx("div",{className:"bg-blue-50 dark:bg-blue-500/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600 dark:text-blue-400",children:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),n.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 mb-2",children:"How can I help you study?"}),n.jsx("p",{className:"text-sm text-slate-500 leading-relaxed italic",children:'"Explain the mechanism of Warfarin and its interaction with Vitamin K."'})]}),o.map((e,a)=>n.jsxs("div",{children:[n.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:n.jsx("div",{className:"max-w-[90%] p-4 rounded-2xl text-sm shadow-sm "+("user"===e.role?"bg-blue-600 text-white rounded-tr-none font-medium":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-white/5 rounded-tl-none medical-serif"),children:"ai"===e.role?n.jsx("div",{className:"prose prose-slate dark:prose-invert prose-sm max-w-none",children:n.jsx(f,{components:{a:Ma},children:e.text})}):e.text})}),"ai"===e.role&&e.suggestedQuestions&&e.suggestedQuestions.length>0&&n.jsx("div",{className:"mt-3 ml-0 flex flex-col gap-1.5",children:e.suggestedQuestions.map((e,a)=>n.jsxs("button",{onClick:()=>w(e),className:"text-left px-3 py-2 text-[11px] font-semibold bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors",children:["💡 ",e]},a))})]},a)),u&&n.jsx("div",{className:"flex justify-start",children:n.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-white/5 rounded-tl-none flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.2s]"}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.4s]"})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Reviewing clinical pearls..."})]})})]}),n.jsx("div",{className:"p-4 border-t bg-white dark:bg-slate-900 border-slate-100 dark:border-white/5",children:n.jsxs("form",{onSubmit:e=>{e.preventDefault(),w(c)},className:"flex gap-3",children:[n.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),disabled:h,placeholder:"Type your question...",className:"flex-1 bg-slate-100 dark:bg-slate-950 border-none rounded-2xl px-5 py-3 text-sm focus:ring-4 focus:ring-blue-500/10 outline-none text-slate-900 dark:text-white"}),n.jsx("button",{type:"submit",disabled:u||h||!c.trim(),className:"p-3 rounded-xl transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20 "+(u||h||!c.trim()?"bg-blue-400 text-white/80":"bg-blue-600 text-white hover:bg-blue-700"),children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]}):n.jsxs("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white p-4 rounded-3xl shadow-2xl hover:scale-105 transition-all active:scale-95 group relative border-4 border-white dark:border-slate-800",children:[n.jsx("div",{className:"absolute -top-14 right-0 bg-slate-900 text-white text-[11px] font-bold px-4 py-2 rounded-xl shadow-xl opacity-0 group-hover:opacity-100 transition-all whitespace-nowrap translate-y-2 group-hover:translate-y-0",children:"QUICK CLINICAL QUERY"}),n.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012-2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})]}),n.jsx(Aa,{currentModel:y,onModelChange:e=>{x(e),"undefined"!=typeof window&&localStorage.setItem("selectedAIModel",e)},isOpen:b,onClose:()=>g(!1)})]})},Ta=({size:e=40,className:a="",showText:t=!1})=>n.jsxs("div",{className:`flex items-center gap-2 ${a}`,children:[n.jsx("svg",{width:e,height:e,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsxs("g",{children:[n.jsx("path",{d:"M24 4C20 4 18 8 18 14C18 20 20 28 24 32C28 28 30 20 30 14C30 8 28 4 24 4Z",fill:"white",stroke:"white",strokeWidth:"1"}),n.jsx("text",{x:"24",y:"22",fontSize:"20",fontWeight:"bold",fill:"#6B5FEA",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",children:"D"}),n.jsx("ellipse",{cx:"22",cy:"14",rx:"3",ry:"5",fill:"white",opacity:"0.4"})]})}),t&&n.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"DentEdge"})]}),Sa=e.lazy(()=>Wn(()=>import("./SubjectCard-C-OhMWR7.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ia=e.lazy(()=>Wn(()=>import("./SummaryView-CpJeqnn2.js"),__vite__mapDeps([6,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),La=e.lazy(()=>Wn(()=>import("./Quiz-C-LodUZA.js"),__vite__mapDeps([23,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Pa=e.lazy(()=>Wn(()=>import("./QuestionBankView-BpdBun2w.js"),__vite__mapDeps([24,1,2,3]))),Ea=e.lazy(()=>Wn(()=>import("./SubjectDetailView-B-hy791D.js"),__vite__mapDeps([25,1,2,3,4,5]))),Oa=e.lazy(()=>Wn(()=>import("./ProgressAnalyticsDashboard-62HoLTuv.js"),__vite__mapDeps([26,1,2,3]))),Ra=e.lazy(()=>Wn(()=>import("./QuickQuizModal-R56HpEyE.js"),__vite__mapDeps([27,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Fa=e.lazy(()=>Wn(()=>import("./AdminDashboard-xbOy9ze7.js"),__vite__mapDeps([28,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Da=e.lazy(()=>Wn(()=>import("./AIChatView-8irbBgyg.js"),__vite__mapDeps([29,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),_a=e=>String(e||"").trim().toLowerCase(),Wa=e=>{if(!e)return null;if(e.email)return e.email;const n=e.user_metadata||{};return n.email||n.preferred_email||n.preferredEmail||null},za=[y.ANATOMY,y.PHYSIOLOGY],Va=[y.BIOCHEMISTRY,y.PHARMACOLOGY,y.GENERAL_PATHOLOGY,y.MICROBIOLOGY,y.GENERAL_EMBRYOLOGY],Ba=[y.ORAL_HISTOLOGY,y.TOOTH_MORPHOLOGY,y.DENTAL_MATERIALS,y.ORAL_PATHOLOGY,y.ORAL_MEDICINE_RADIOLOGY,y.PERIODONTOLOGY,y.COMMUNITY_MEDICINE,y.PEDIATRICS],Ga=({user:e,authLoading:a,hasSubscription:t,error:r,onForceLogout:s})=>{const i=Wa(e),o=(e=>{const n=_a(e);return!!n&&["tarab_ali29@yahoo.com"].includes(n)})(i);return o?n.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-auto",children:n.jsxs("div",{className:"bg-slate-950/95 border border-green-500/30 rounded-2xl p-4 shadow-2xl backdrop-blur-md min-w-[240px]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("span",{className:"text-[10px] font-bold text-green-500 uppercase tracking-widest",children:"Debug Status"}),n.jsx("button",{onClick:s,className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-[10px] font-bold rounded-lg transition-colors uppercase tracking-tight",children:"Force Logout"})]}),n.jsxs("div",{className:"space-y-1.5 font-mono text-[11px]",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Loading:"}),n.jsx("span",{className:a?"text-amber-400":"text-green-400",children:String(a)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"User:"}),n.jsx("span",{className:"text-blue-400 truncate ml-4 max-w-[140px]",children:i||"null"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Subscribed:"}),n.jsx("span",{className:t||o?"text-green-400":"text-red-400",children:String(t||o)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Origin:"}),n.jsx("span",{className:"text-amber-400 truncate ml-4 max-w-[140px] shadow-sm",children:"undefined"!=typeof window?window.location.origin:"null"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-slate-500",children:"Deployed:"}),n.jsx("span",{className:"text-cyan-400 text-[10px] ml-4 truncate max-w-[140px]",children:new Date("2026-02-08T06:46:05.565Z").toLocaleString()})]}),r&&n.jsx("div",{className:"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg text-[10px] text-red-400 break-words max-w-[200px]",children:"string"==typeof r?r:JSON.stringify(r)})]})]})}):null},Ha=({message:e,onReset:a,onReload:t})=>n.jsxs("div",{className:"mx-4 md:mx-8 mt-4 mb-6 rounded-xl border border-red-500/40 bg-red-500/10 text-red-200 px-4 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-semibold",children:"Login issue detected"}),n.jsx("div",{className:"text-red-300",children:e})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded-lg bg-red-500/20 text-red-200 hover:bg-red-500/30 text-sm font-medium",children:"Reset Login"}),n.jsx("button",{onClick:t,className:"px-3 py-1.5 rounded-lg bg-white/10 text-white hover:bg-white/20 text-sm font-medium",children:"Retry"})]})]}),qa="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),Ya=Array.from(new Set(["tarab_ali29@yahoo.com",...qa])),Ka=e=>!!e&&Ya.includes(_a(e)),Ua=e=>{const n=String((null==e?void 0:e.message)||e||"").toLowerCase(),a=String((null==e?void 0:e.name)||"").toLowerCase();return n.includes("abort")||n.includes("signal")||n.includes("cancelled")||n.includes("canceled")||"aborterror"===a},$a=e=>{const n=String((null==e?void 0:e.message)||e||"").toLowerCase();return n.includes("timed out")||n.includes("timeout")},Ja=()=>{var a;const[t,r]=e.useState(null),[s,i]=e.useState(!1),[o,l]=e.useState(!1),[c,u]=e.useState(!0),[m,h]=e.useState(null),[p,f]=e.useState(null),[b,g]=e.useState("dashboard"),[x,v]=e.useState("dashboard"),[w]=e.useState("FCPS"),[k,j]=e.useState(null),[N,A]=e.useState(void 0),[M,C]=e.useState(()=>{try{const e=localStorage.getItem("dentedge_theme");if("dark"===e)return!0;if("light"===e)return!1}catch{}return!1}),[T,S]=e.useTransition(),[I,L]=e.useState(void 0),[P,E]=e.useState(new Set),[O,R]=e.useState(!1),[F,D]=e.useState(null),[_,W]=e.useState({}),[z,V]=e.useState([]),[B,G]=e.useState(!1),[H,q]=e.useState(!1),Y=s||Ka(Wa(t)),K=e=>{if(null==e?void 0:e.is_subscribed)return!0;if(null==e?void 0:e.subscription_end_date){const n=new Date(e.subscription_end_date).getTime();if(!Number.isNaN(n)&&n>Date.now())return!0}return!1},U=async()=>{h("Your account has been blocked. Please contact support."),l(!1),i(!1);try{await(async()=>{let e=null;try{e=(await qn.auth.signOut({scope:"local"})).error}catch(n){e=n}finally{Kn()}return{error:e}})()}catch{Un()}r(null),g("dashboard")};e.useEffect(()=>{const e="undefined"!=typeof window&&window.location.hash.includes("access_token"),n=(()=>{if("undefined"==typeof window)return!1;const e=e=>Object.keys(e).some(e=>e.startsWith("sb-")&&e.endsWith("-auth-token"));try{if(e(window.localStorage)||e(window.sessionStorage))return!0}catch{}return!1})();e||n||u(!1);const a=setTimeout(()=>{e||u(!1)},n?1500:600),{data:{subscription:t}}=(s=async(e,n)=>{window.location.hash;try{if("SIGNED_IN"===e&&(null==n?void 0:n.user)){r(n.user),u(!1),h(null);const{data:e}=await $n(n.user.id);if("blocked"===(null==e?void 0:e.role))return void(await U());const a=await Jn(n.user.id),t=Wa(n.user),s=a||Ka(t);i(s);const o=s||K(e);if(l(o),window.location.hash.includes("access_token"))window.history.replaceState(null,"",window.location.pathname);else if(window.location.hash.includes("error=")){const e=window.location.hash.match(/error_description=([^&]+)/),n=e?decodeURIComponent(e[1].replace(/\+/g," ")):"Unknown OAuth error";h(`Login failed: ${n}`)}return}if("SIGNED_OUT"===e)return r(null),l(!1),void h(null);if(r((null==n?void 0:n.user)??null),u(!1),null==n?void 0:n.user){const{data:e}=await $n(n.user.id);if("blocked"===(null==e?void 0:e.role))return void(await U());const a=await Jn(n.user.id),t=Wa(n.user),r=a||Ka(t);i(r),l(r||K(e)),h(null)}else l(!1),h(null)}catch(a){if((null==a?void 0:a.message)||String(a),!Ua(a)){const e=(null==n?void 0:n.user)?Wa(n.user):null;e&&Ka(e)&&(i(!0),l(!0))}}},qn.auth.onAuthStateChange(s));var s;return(async()=>{var e;let n=null;try{const{data:{session:s},error:o}=await(a=qn.auth.getSession(),t=15e3,Promise.race([a,new Promise((e,n)=>{const r=setTimeout(()=>{const e=new Error("Session check timed out after "+t+"ms");n(e)},t);a.finally(()=>clearTimeout(r)).catch(()=>{})})]));if(o){const e=(null==o?void 0:o.message)||String(o),n=Ua(o),a=$a(o);h(n||a?null:e)}else if(null==s?void 0:s.user){n=s.user.email,h(null),r(s.user),u(!1);const a=qn.auth.getUser().catch(e=>({data:{user:null},error:e})),[t,o,c]=await Promise.allSettled([a,$n(s.user.id),Jn(s.user.id)]),d="fulfilled"===t.status?null==(e=t.value.data)?void 0:e.user:null,m="fulfilled"===t.status?t.value.error:t.reason,p="fulfilled"===o.status?o.value.data:null,f=("fulfilled"===o.status?o.value.error:o.reason,"fulfilled"===c.status&&c.value);if(m||!d||(r(d),n=d.email),o.status,c.status,"blocked"===(null==p?void 0:p.role))return void(await U());const b=Wa(d||s.user),g=f||!!b&&Ka(b);i(g),l(g||K(p||void 0))}else h(null)}catch(s){const e=(null==s?void 0:s.message)||String(s);Ua(s)||$a(s)?(h(null),u(!1)):n&&Ka(n)?(i(!0),l(!0),h(null)):n?h(null):(h(e),r(null),l(!1))}finally{u(!1)}var a,t})(),()=>{t.unsubscribe(),clearTimeout(a)}},[]),e.useEffect(()=>{M?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[M]),e.useEffect(()=>{(null==t?void 0:t.id)&&(async e=>{try{const{data:n,error:a}=await qn.from("quiz_stats").select("subject, correct, incorrect").eq("user_id",e);return a?{}:(n||[]).reduce((e,n)=>({...e,[n.subject]:{correct:n.correct,incorrect:n.incorrect}}),{})}catch(n){return{}}})(t.id).then(e=>W(e||{}))},[null==t?void 0:t.id]),e.useEffect(()=>{(null==t?void 0:t.id)&&(async e=>{try{const{data:n,error:a}=await qn.from("mock_scores").select("score, total, timestamp").eq("user_id",e).order("timestamp",{ascending:!1}).limit(10);return a?[]:(n||[]).reverse()}catch(n){return[]}})(t.id).then(e=>V(e||[]))},[null==t?void 0:t.id]),e.useEffect(()=>{const e=e=>{var n;const a=e.target;if(a&&("INPUT"===a.tagName||"TEXTAREA"===a.tagName||a.isContentEditable))return;e.preventDefault();const t=(null==(n=window.getSelection())?void 0:n.toString())||"";t&&e.clipboardData&&e.clipboardData.setData("text/plain",(e=>{let n=e;return n=Vn(n),n=Vn(n),"\n⚠️ NOTICE: This content is protected educational material from DentEdge.net\nUnauthorized distribution or commercial use is prohibited.\nFormat may be corrupted in copied text.\n\n---\n\n"+n})(t))},n=e=>{const n=e.target,a=n&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||n.isContentEditable);let t=!1;if(!e.ctrlKey&&!e.metaKey||"a"!==e.key||a||(t=!0),!e.ctrlKey&&!e.metaKey||"c"!==e.key||a||(t=!0),(e.ctrlKey||e.metaKey)&&"s"===e.key&&(t=!0),"F12"===e.key&&(t=!0),!e.ctrlKey&&!e.metaKey||!e.shiftKey||"I"!==e.key&&"i"!==e.key||(t=!0),!e.ctrlKey&&!e.metaKey||!e.shiftKey||"J"!==e.key&&"j"!==e.key||(t=!0),!e.ctrlKey&&!e.metaKey||"u"!==e.key&&"U"!==e.key||(t=!0),t)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1},a=e=>{const n=e.target;(!n||"INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName)&&e.preventDefault()};return document.addEventListener("copy",e),document.addEventListener("keydown",n,!0),document.addEventListener("contextmenu",a),()=>{document.removeEventListener("copy",e),document.removeEventListener("keydown",n,!0),document.removeEventListener("contextmenu",a)}},[]);const $=()=>{C(e=>{const n=!e;try{localStorage.setItem("dentedge_theme",n?"dark":"light")}catch{}return n})},J=()=>{try{localStorage.clear(),sessionStorage.clear()}catch(e){}h(null),r(null),l(!1),g("dashboard"),v("dashboard"),j(null),A(void 0),window.location.href=window.location.origin},Q=()=>{Un(),h(null),r(null),l(!1),g("dashboard"),v("dashboard"),j(null),A(void 0)},X=e=>{j(e),g("subject-detail")},Z=(e,n)=>{E(n=>{const a=new Set(n);return a.has(e)?a.delete(e):a.add(e),a})},ee=()=>{g("dashboard"),j(null),A(void 0)},ne=(e,a,t="text-slate-400 dark:text-slate-300",r="border-slate-300 dark:border-white/10")=>{const s=[...a].sort((e,n)=>{const a=P.has(e);return a===P.has(n)?0:a?1:-1});return n.jsxs("div",{className:"mb-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("h2",{className:`text-lg font-bold uppercase tracking-widest px-4 border rounded-full py-1 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm ${t} ${r}`,children:e}),n.jsx("div",{className:`h-px flex-1 ${r.replace("border","bg")}`})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>n.jsx(Sa,{subject:e,onClick:X,isCompleted:P.has(e),onToggleComplete:Z},e))})]})};if(c)return n.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:[n.jsx(d,{className:"w-8 h-8 animate-spin text-purple-600"}),n.jsx(Ga,{user:t,authLoading:c,hasSubscription:o,error:m,onForceLogout:J})]});const ae="string"==typeof m?m:m?String(m):"",te=Boolean(ae)&&!$a(ae);if(!t)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[te&&n.jsx(Ha,{message:ae,onReset:Q,onReload:()=>window.location.reload()}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-20 pb-6 text-center",children:[n.jsx("h1",{className:"text-5xl font-bold text-white mb-3",children:"DentEdge"}),n.jsx("p",{className:"text-xl text-slate-300 mb-2",children:"High-Yield Dental Exam Preparation"}),n.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto",children:"Curated notes, 2,000+ MCQs, and AI-powered tutoring for FCPS Part 1."})]}),n.jsx("div",{className:"max-w-3xl mx-auto px-4 pb-8",children:n.jsx("div",{className:"grid grid-cols-1 gap-4 text-center",children:n.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[n.jsx("div",{className:"text-purple-400 font-bold text-lg",children:"FCPS"}),n.jsx("div",{className:"text-slate-400 text-sm",children:"Part 1 Preparation"})]})})}),n.jsx("div",{className:"max-w-2xl mx-auto px-4 pb-10",children:n.jsx("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:["2,000+ practice MCQs","Dental Materials & Oral Biology","AI-powered study tutor","FCPS-specific study plans","Progress tracking & analytics","Dark & light mode"].map(e=>n.jsxs("div",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[n.jsx("span",{className:"text-green-400 font-bold",children:"✓"}),e]},e))})}),n.jsx(ea,{onAuthSuccess:()=>{},compact:!0}),n.jsx(Ga,{user:t,authLoading:c,hasSubscription:o,error:m,onForceLogout:J})]});const re=(e,n,a)=>{(e=>!(!o&&!Y)||"Impression Materials"===e)(n)?S(()=>{n&&A(n),g(e)}):q(!0)};return n.jsxs(e.Suspense,{fallback:n.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:n.jsx(d,{className:"w-8 h-8 animate-spin text-purple-600"})}),children:[H&&n.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl max-w-md w-full p-8 shadow-2xl border border-slate-200 dark:border-slate-800 text-center animate-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white mx-auto mb-4 shadow-lg",children:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"This Topic is Locked"}),n.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Subscribe to unlock all topics, notes, and MCQs."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-slate-200 dark:border-slate-700",children:"Cancel"}),n.jsx("button",{onClick:()=>{q(!1),G(!1)},className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:brightness-110 shadow-lg transition-all",children:"Subscribe Now"})]})]})}),n.jsxs("div",{className:"min-h-screen transition-colors duration-300 "+(M?"dark bg-slate-900":"bg-slate-50"),children:[o||Y||!B?null:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 text-center text-sm font-medium animate-in slide-in-from-top duration-500 relative z-50",children:n.jsxs("span",{children:["🔓 You are in Preview Mode. ",n.jsx("span",{className:"font-bold underline cursor-pointer",onClick:()=>G(!1),children:"Unlock Full Access"})," to see all content."]})}),te&&n.jsx(Ha,{message:ae,onReset:Q,onReload:()=>window.location.reload()}),n.jsx(Ga,{user:t,authLoading:c,hasSubscription:o,error:m,onForceLogout:J}),("quiz"===b||"summary"===b)&&n.jsx("div",{className:"fixed top-6 right-8 z-[100] animate-in slide-in-from-right-10 duration-500",children:n.jsx("button",{onClick:$,className:"p-3 rounded-2xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-all shadow-2xl border border-slate-200 dark:border-white/10 group active:scale-95",title:"Toggle Theme",children:M?n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),(o||Y)&&"quiz"!==b&&"summary"!==b&&n.jsxs("nav",{className:"glass-panel sticky top-4 mx-4 md:mx-8 z-40 rounded-2xl px-6 py-3 hidden md:flex items-center justify-between mt-4",children:[n.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:ee,children:[n.jsx(Ta,{size:48,className:"drop-shadow-lg group-hover:drop-shadow-2xl transition-all"}),n.jsx("span",{className:"font-bold text-xl tracking-tight text-slate-800 dark:text-white",children:"DentEdge"})]}),n.jsxs("div",{className:"flex items-center bg-white/50 dark:bg-slate-900/50 rounded-full p-1 border border-slate-200 dark:border-white/5",children:[n.jsx("button",{onClick:ee,className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("dashboard"===b?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"Dashboard"}),n.jsx("button",{onClick:()=>g("question-banks"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("question-banks"===b?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"MCQ Bank"}),n.jsx("button",{onClick:()=>g("ai-chat"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("ai-chat"===b?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"AI Tutor"}),Y&&n.jsx("button",{onClick:()=>g("admin"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("admin"===b?"bg-purple-500 text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-purple-500"),children:"Admin"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:$,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-colors",title:"Toggle Theme",children:M?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),Y&&n.jsx("button",{onClick:()=>g("admin"),className:"px-3 py-1.5 bg-purple-600 text-white text-xs font-bold rounded shadow-lg hover:bg-purple-500 transition-all border border-purple-400",children:"ADMIN PANEL"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 hidden lg:block",children:null==(a=null==t?void 0:t.email)?void 0:a.split("@")[0]}),n.jsx("button",{onClick:J,className:"px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm font-medium",children:"Sign Out"})]})]})]}),n.jsx("main",{className:"flex-1 container max-w-[1800px] mx-auto px-4 py-8 pb-32 md:pb-8",children:o||Y||B?n.jsxs(n.Fragment,{children:["dashboard"===b&&(o||Y||B)&&n.jsxs("div",{className:"animate-in fade-in duration-500",children:[n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx("div",{className:"px-6 py-2 rounded-full text-sm font-bold bg-purple-600 text-white shadow-lg shadow-purple-900/50",children:"FCPS Part 1"})}),n.jsxs("div",{className:"space-y-12",children:[n.jsx(Oa,{stream:w,completedSubjects:Array.from(P),quizStats:_,userName:(null==(se=null==t?void 0:t.email)?void 0:se.split("@")[0])||"Student",isPreviewMode:B,onLockedAccess:()=>q(!0),onStartStudy:e=>{"Impression Materials"===e?(j(y.DENTAL_MATERIALS),A("Impression Materials"),v("dashboard"),g("quiz")):g("question-banks")},mockScores:z}),n.jsxs("div",{className:"pt-8 border-t border-slate-200 dark:border-white/5",children:[B&&n.jsxs("div",{className:"mb-12",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("h2",{className:"text-lg font-bold uppercase tracking-widest px-4 border rounded-full py-1 bg-green-50 dark:bg-green-900/20 border-green-500/30 text-green-700 dark:text-green-400",children:"✓ Preview Available"}),n.jsx("div",{className:"h-px flex-1 bg-green-500/20"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:n.jsx(Sa,{subject:y.DENTAL_MATERIALS,onClick:X,isCompleted:P.has(y.DENTAL_MATERIALS),onToggleComplete:Z},y.DENTAL_MATERIALS)})]}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-8 px-2",children:B?"Unlock Premium Access":"Course Modules"}),ne("MBBS Major Topics",za,"text-purple-600 dark:text-purple-400","border-purple-500/20"),ne("MBBS Minor Topics",Va,"text-purple-600 dark:text-purple-400","border-purple-500/20"),ne("Dental Sciences",Ba,"text-purple-600 dark:text-purple-400","border-purple-500/20")]})]})]}),"subject-detail"===b&&k&&n.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:n.jsx(Ea,{subject:k,stream:w,onSelectNoteTopic:e=>{re("summary",e)},onSelectQuizTopic:e=>{re("quiz",e)},onBack:ee,isPreviewMode:!o&&!Y})}),"summary"===b&&k&&n.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:n.jsx(Ia,{isDarkMode:M,subject:k,topic:N,stream:w,onStartQuiz:()=>{v("summary"),g("quiz")},onBack:()=>{g("subject-detail"),A(void 0)},onPageContentChange:L,isAdmin:Y})}),"quiz"===b&&k&&n.jsx("div",{className:"animate-in zoom-in-95 fade-in duration-300",children:n.jsx(La,{subject:k,topic:N,stream:w,onClose:()=>{g(N&&"string"==typeof k?"question-banks":N?"summary":"question-banks")},onReviewNotes:()=>{if("string"==typeof k&&k.includes(" - Practice Questions")){const e=k.replace(" - Practice Questions","");j(e),A(void 0)}g("summary")},onExitToDashboard:()=>{j(null),A(void 0),g("dashboard")},onUpdateStats:(e,n,a,r)=>{if(W(r=>{const s=r[e]||{correct:0,incorrect:0},i={correct:s.correct+n,incorrect:s.incorrect+a};return(null==t?void 0:t.id)&&(async(e,n,a,t)=>{try{const{error:r}=await qn.from("quiz_stats").upsert({user_id:e,subject:n,correct:a,incorrect:t,updated_at:(new Date).toISOString()},{onConflict:"user_id,subject"});return!r}catch(r){return!1}})(t.id,e,i.correct,i.incorrect).catch(e=>{}),{...r,[e]:i}}),"Challenge"===r&&(null==t?void 0:t.id)){const e=n+a,r=Date.now(),s={score:n,total:e,timestamp:r};V(e=>[...e,s].slice(-10)),(async(e,n,a,t)=>{try{const{error:r}=await qn.from("mock_scores").insert({user_id:e,score:n,total:a,timestamp:t});return!r}catch(r){return!1}})(t.id,n,e,r).catch(e=>{})}}})}),"question-banks"===b&&n.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:n.jsx(Pa,{stream:w,onSelectTopic:e=>{j(e),A(void 0),v("question-banks"),g("quiz")}})}),"admin"===b&&Y&&n.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:n.jsx(e.Suspense,{fallback:n.jsx(d,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto"}),children:n.jsx(Fa,{})})}),"ai-chat"===b&&n.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:n.jsx(e.Suspense,{fallback:n.jsx(d,{className:"w-8 h-8 animate-spin text-cyan-600 mx-auto"}),children:n.jsx(Da,{})})})]}):n.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500",children:[n.jsx("div",{className:"flex justify-end mb-4 mx-4",children:n.jsx("button",{onClick:J,className:"px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm font-medium",children:"Sign Out"})}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-8",children:[n.jsx("div",{className:"inline-block p-3 rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 mb-4",children:n.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Account Pending Activation"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Select a plan below to activate your account. If you have already paid, please contact Admin to approve your request."})]}),n.jsx("div",{className:"max-w-6xl mx-auto px-4",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{onClick:()=>{G(!0),j(y.DENTAL_MATERIALS),g("dashboard")},className:"relative cursor-pointer group",children:[n.jsx("div",{className:"absolute -top-3 right-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-1 rounded-full text-[10px] font-bold shadow-lg z-10",children:"FREE PREVIEW"}),n.jsxs("div",{className:"glass-panel min-h-80 rounded-2xl bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-500/30 hover:border-purple-400 dark:hover:border-purple-400 transition-all hover:shadow-lg group-hover:scale-105 flex flex-col items-center justify-center p-6 text-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-100 to-blue-100 dark:from-cyan-900/40 dark:to-blue-900/40 flex items-center justify-center text-cyan-600 dark:text-cyan-400 mb-3",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),n.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"Dental Materials"}),n.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2",children:"1 Topic Free"}),n.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-200 dark:bg-purple-700 rounded text-[10px] font-semibold text-purple-700 dark:text-purple-200",children:"Try Free"})]})]}),n.jsx(aa,{onSelectPlan:e=>{},compact:!0})]})})]})}),n.jsx(Ca,{pageContext:I}),O&&F&&n.jsx(Ra,{subject:F,stream:w,onClose:()=>R(!1),onUpdateStats:(e,n)=>{W(a=>{const t=a[e]||{correct:0,incorrect:0};return{...a,[e]:{correct:n?t.correct+1:t.correct,incorrect:n?t.incorrect:t.incorrect+1}}})},stats:_[F]})]})]});var se};class Qa extends e.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){this.setState({errorInfo:n})}render(){var e,a;return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-8 text-center",children:n.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-8 rounded-2xl max-w-2xl w-full",children:[n.jsx(b,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong."}),n.jsx("p",{className:"text-slate-300 mb-8",children:"We encountered an unexpected error. Please try refreshing the page."}),n.jsxs("div",{className:"bg-black/50 p-4 rounded-lg text-left overflow-auto max-h-64 font-mono text-sm mb-6 border border-slate-700",children:[n.jsx("p",{className:"text-red-400 font-bold mb-2",children:null==(e=this.state.error)?void 0:e.toString()}),n.jsx("pre",{className:"text-slate-500 whitespace-pre-wrap",children:null==(a=this.state.errorInfo)?void 0:a.componentStack})]}),n.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-lg hover:bg-slate-200 transition-colors",children:"Reload Application"})]})}):this.props.children}}const Xa=document.getElementById("root");if(!Xa)throw new Error("Could not find root element to mount to");g.createRoot(Xa).render(n.jsx(Qa,{children:n.jsx(Ja,{})}));export{ja as D,Ma as M,xa as a,Hn as b,Zn as c,Na as d,Aa as e,ya as f,Xn as g,wa as h,va as s,Qn as u};
