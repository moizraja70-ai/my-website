const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SubjectCard-CQ1Cp4OE.js","assets/vendor-react-CR1W5LLW.js","assets/vendor-BoCg3Acf.js","assets/vendor-markdown-qiocwJQ_.js","assets/constants-CB_czClu.js","assets/content-gic-thwEcWs7.js","assets/SummaryView-D90gHo10.js","assets/vendor-react-dom-CF6xyiui.js","assets/content-impression-DXBt_6OM.js","assets/content-gypsum-BiKxCYUT.js","assets/content-composite-TJ9nDpJr.js","assets/content-adhesion-Cn4bavKK.js","assets/content-wax-BDxVPrGY.js","assets/content-metals-D-Ap74sk.js","assets/content-investment-BmTIz0j7.js","assets/content-casting-qFCp4nAV.js","assets/content-cements-BGuPplC7.js","assets/content-amalgam-BEu4a1oj.js","assets/content-ceramics-BD3nGYw3.js","assets/content-properties-BHcOlrks.js","assets/content-denture-B8gJ77JC.js","assets/content-embryology-tavoNC7p.js","assets/content-osteology-3u2sacyF.js","assets/Quiz-DsofsE4X.js","assets/QuestionBankView-BpdBun2w.js","assets/SubjectDetailView-CZileYpx.js","assets/ProgressAnalyticsDashboard-62HoLTuv.js","assets/QuickQuizModal-DGcSBhLm.js","assets/AdminDashboard-CtpGaLjv.js","assets/AIChatView-CLJtLBYF.js"])))=>i.map(i=>d[i]);
import{a as t,j as e,U as l,P as s,M as n,L as i,E as o,b as c,C as x,c as k,d as r,Z as y,S as p,e as f,f as b,i as a,T as _}from"./vendor-react-CR1W5LLW.js";import{R as u}from"./vendor-react-dom-CF6xyiui.js";import{M as d,G as m,a as w,b as g,c as h}from"./content-gic-thwEcWs7.js";import{o as v}from"./vendor-BoCg3Acf.js";import{I as j,a as q,b as z}from"./content-impression-DXBt_6OM.js";import{G as A,a as N,b as C,c as M}from"./content-gypsum-BiKxCYUT.js";import{C as S,a as I,b as T,c as P}from"./content-composite-TJ9nDpJr.js";import{A as E,a as L,b as O}from"./content-adhesion-Cn4bavKK.js";import{W as Z,a as F,b as W,c as D}from"./content-wax-BDxVPrGY.js";import{M as R,a as V,b as B,c as G}from"./content-metals-D-Ap74sk.js";import{I as H,a as U,b as Y,c as K}from"./content-investment-BmTIz0j7.js";import{C as J,a as $,b as Q,c as X}from"./content-casting-qFCp4nAV.js";import{D as tt,a as et,b as lt,c as st}from"./content-cements-BGuPplC7.js";import{A as nt,a as it,b as ot,c as ct}from"./content-amalgam-BEu4a1oj.js";import{D as xt,a as kt,b as rt,c as yt}from"./content-ceramics-BD3nGYw3.js";import{D as pt,a as ft,b as bt,c as at,d as _t,e as ut,f as dt,g as mt,h as wt,i as gt,j as ht,k as vt,l as jt,m as qt,n as zt,o as At,p as Nt,q as Ct,r as Mt}from"./content-properties-BHcOlrks.js";import{D as St,a as It,b as Tt,c as Pt}from"./content-denture-B8gJ77JC.js";import{G as Et,a as Lt,b as Ot,c as Zt,d as Ft,e as Wt}from"./content-embryology-tavoNC7p.js";import{O as Dt,a as Rt}from"./content-osteology-3u2sacyF.js";import"./vendor-markdown-qiocwJQ_.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const l of t)if("childList"===l.type)for(const t of l.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const Vt={},Bt=function(t,e,l){let s=Promise.resolve();if(e&&e.length>0){let t=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),n=(null==l?void 0:l.nonce)||(null==l?void 0:l.getAttribute("nonce"));s=t(e.map(t=>{if((t=function(t){return"/"+t}(t))in Vt)return;Vt[t]=!0;const e=t.endsWith(".css"),l=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":"modulepreload",e||(s.as="script"),s.crossOrigin="",s.href=t,n&&s.setAttribute("nonce",n),document.head.appendChild(s),e?new Promise((e,l)=>{s.addEventListener("load",e),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function n(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return s.then(e=>{for(const t of e||[])"rejected"===t.status&&n(t.reason);return t().catch(n)})},Gt=["â€‹","â€Œ","â€","\ufeff","á Ž"],Ht=t=>{if(!t)return t;const e=t.split("");let l="";for(let s=0;s<e.length;s++)l+=e[s],s>0&&s%(15+Math.floor(15*Math.random()))===0&&(l+=Gt[Math.floor(Math.random()*Gt.length)]),"|"===e[s]&&(l+="â€‹".repeat(Math.floor(3*Math.random())+1)),s<e.length-1&&e[s].match(/\d/)&&"."===e[s+1]&&(l+="â€Œ"),":"===e[s]&&" "===e[s+1]&&(l+="â€"),"*"!==e[s]&&"_"!==e[s]||(l+="â€‹");return l},Ut=t=>{const e=[...t];for(let l=e.length-1;l>0;l--){const t=Math.floor(Math.random()*(l+1));[e[l],e[t]]=[e[t],e[l]]}return e},Yt=t=>t.map(t=>{const e=["All of the above","None of the above","Both A and C are correct","Option A is correct but B is more accurate","This is context-dependent","Varies by clinical presentation"];if(t.options[0]){const l=t.options[0].replace(/correct/gi,"incorrect").replace(/true/gi,"false").replace(/increases/gi,"decreases").replace(/anterior/gi,"posterior");l!==t.options[0]&&e.push(l)}const l=Ut(e).slice(0,2+Math.floor(2*Math.random())),s=Ut([...t.options,...l]),n=btoa(t.correctAnswer||t.options[0]);return s.indexOf(t.correctAnswer||t.options[0]),{...t,options:s,_realAnswer:n,_realOptions:btoa(JSON.stringify(t.options)),correctAnswer:s[Math.floor(Math.random()*s.length)]||t.correctAnswer}}),Kt=t=>t.map(t=>{if("_realAnswer"in t&&"_realOptions"in t)try{const e=JSON.parse(atob(t._realOptions)),l=atob(t._realAnswer);return{...t,options:e,correctAnswer:l}}catch(e){return t}return t}),Jt=v("https://acuehlltnkbpatsbkhqc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjdWVobGx0bmticGF0c2JraHFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNzg4NDUsImV4cCI6MjA4NTY1NDg0NX0.I8e97aF4qkXM0tHoO726VZP96mXXvXjpUrGkKsYsG54"),$t=async(t,e)=>{const{data:l,error:s}=await Jt.auth.signInWithPassword({email:t,password:e});return{data:l,error:s}},Qt=()=>{try{for(const t of Object.keys(window.localStorage))t.startsWith("sb-")&&t.endsWith("-auth-token")&&window.localStorage.removeItem(t)}catch{}try{for(const t of Object.keys(window.sessionStorage))t.startsWith("sb-")&&t.endsWith("-auth-token")&&window.sessionStorage.removeItem(t)}catch{}},Xt=()=>{Qt()},te=async t=>{const{data:e,error:l}=await Jt.from("profiles").select("is_subscribed, subscription_plan, subscription_end_date, role").eq("id",t).single();if(l&&"PGRST116"===l.code){const{error:e}=await Jt.from("profiles").insert({id:t,is_subscribed:!1});return e?{data:null,error:e}:{data:{is_subscribed:!1,subscription_plan:null,subscription_end_date:null,role:"user"},error:null}}return{data:e,error:l}},ee=async t=>{const{data:e,error:l}=await Jt.from("profiles").select("role").eq("id",t).single();return!(l||!e)&&"admin"===e.role},le=async(t,e)=>{const{error:l}=await Jt.from("profiles").update(e).eq("id",t);return{error:l}},se=async t=>{let e=Jt.from("profiles").select("*").order("created_at",{ascending:!1});t&&(e=e.range(t.from,t.to));const{data:l,error:s}=await e;return{data:l,error:s}},ne=async t=>{var e;const{data:l}=await Jt.auth.getSession(),s=null==(e=null==l?void 0:l.session)?void 0:e.access_token;if(!s)return{data:null,error:{message:"No active session token."}};const n=await fetch("/api/admin-delete-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({userId:t})}),i=await n.text();let o=null;if(i)try{o=JSON.parse(i)}catch{o=null}return n.ok?{data:o||{ok:!0},error:null}:{data:null,error:{message:(null==o?void 0:o.error)||i||"Delete failed"}}},ie=({onAuthSuccess:y,compact:p})=>{const[f,b]=t.useState(!0),[a,_]=t.useState(""),[u,d]=t.useState(""),[m,w]=t.useState(""),[g,h]=t.useState(""),[v,j]=t.useState(""),[q,z]=t.useState(!1),[A,N]=t.useState(!1),[C,M]=t.useState(null),[S,I]=t.useState(null);return e.jsx("div",{className:p?"max-w-md mx-auto px-4 pb-16":"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[!p&&e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent",children:"DentEdge"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Your dental exam preparation companion"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex bg-slate-900/50 rounded-xl p-1 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{b(!0),M(null),I(null)},className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+(f?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-slate-400 hover:text-slate-300"),children:"Sign In"}),e.jsx("button",{type:"button",onClick:()=>{b(!1),M(null),I(null)},className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 "+(f?"text-slate-400 hover:text-slate-300":"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg"),children:"Sign Up"})]}),e.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),M(null),I(null),N(!0),!f){if(u!==m)return M("Passwords do not match"),void N(!1);if(!g.trim())return M("Please enter your full name"),void N(!1);if(!v.trim())return M("Please enter your mobile number"),void N(!1)}if(u.length<6)return M("Password must be at least 6 characters"),void N(!1);try{if(f){const{error:t}=await $t(a,u);t?M(t.message):y()}else{const{error:t}=await(async(t,e,l)=>{const{data:s,error:n}=await Jt.auth.signUp({email:t,password:e,options:{data:{full_name:null==l?void 0:l.fullName,phone:null==l?void 0:l.phone}}});return{data:s,error:n}})(a,u,{fullName:g,phone:v});t?M(t.message):(I("Account created successfully! Signing you in..."),setTimeout(async()=>{const{error:t}=await $t(a,u);t||y()},1500))}}catch(e){M(e.message||"An unexpected error occurred")}finally{N(!1)}},className:"space-y-4",children:[!f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Full Name",value:g,onChange:t=>h(t.target.value),required:!f,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(s,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"tel",placeholder:"Mobile Number",value:v,onChange:t=>j(t.target.value),required:!f,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"email",placeholder:"Email address",value:a,onChange:t=>_(t.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:q?"text":"password",placeholder:"Password",value:u,onChange:t=>d(t.target.value),required:!0,className:"w-full pl-11 pr-11 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"}),e.jsx("button",{type:"button",onClick:()=>z(!q),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-300",children:q?e.jsx(o,{className:"w-5 h-5"}):e.jsx(c,{className:"w-5 h-5"})})]}),!f&&e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:q?"text":"password",placeholder:"Confirm password",value:m,onChange:t=>w(t.target.value),required:!0,className:"w-full pl-11 pr-4 py-3 bg-slate-900/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all"})]}),C&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm",children:[e.jsx(x,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:C})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/30 rounded-xl text-green-400 text-sm",children:[e.jsx(k,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:S})]}),e.jsx("button",{type:"submit",disabled:A,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold rounded-xl shadow-lg shadow-purple-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"w-5 h-5 animate-spin"}),f?"Signing in...":"Creating account..."]}):f?"Sign In":"Create Account"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-slate-800 text-slate-500",children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:async()=>{try{M(null),I(null),N(!0);const{error:t}=await(async()=>{const{data:t,error:e}=await Jt.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,queryParams:{access_type:"offline",prompt:"consent"}}});return{data:t,error:e}})();if(t)return M(t.message),void N(!1);I("Redirecting to Google... If nothing happens, allow pop-ups/third-party cookies and try again."),N(!1)}catch(t){M(t.message),N(!1)}},className:"w-full py-3 bg-white text-slate-900 font-semibold rounded-xl hover:bg-slate-100 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26.81-.58z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),f&&e.jsxs("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Forgot your password?"," ",e.jsx("button",{className:"text-purple-400 hover:text-purple-300 transition-colors",children:"Reset it here"})]})]}),e.jsx("p",{className:"text-center text-slate-500 text-xs mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})})},oe=({plan:t,onClose:l,onConfirm:s})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl max-w-md w-full p-8 shadow-2xl border border-slate-200 dark:border-slate-800 relative animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:l,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center text-white mx-auto mb-4 shadow-lg`,children:e.jsx(t.icon,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Complete Your Purchase"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["To activate your ",e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:t.duration})," subscription, please follow these steps:"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("h4",{className:"font-semibold",children:"Send Payment"})]}),e.jsxs("div",{className:"space-y-2 text-sm pl-11",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Bank:"}),e.jsx("span",{className:"font-medium font-mono select-all",children:"[BANK NAME]"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Account Title:"}),e.jsx("span",{className:"font-medium font-mono select-all",children:"[ACCOUNT TITLE]"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Account No:"}),e.jsx("span",{className:"font-medium font-mono select-all text-purple-600 dark:text-purple-400",children:"[0000-0000-0000-0000]"})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Amount:"}),e.jsxs("span",{className:"text-lg font-bold",children:["PKR ",t.price]})]})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("h4",{className:"font-semibold",children:"Send Proof"})]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 pl-11 mb-3",children:["Take a screenshot of the transaction and send it to our Admin via WhatsApp.",e.jsx("span",{className:"block mt-2 font-bold text-amber-600 dark:text-amber-400",children:"âš ï¸ Your account will be activated MANUALLY after verification (usually within 1 hour)."})]}),e.jsxs("a",{href:"https://wa.me/923000000000",target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 hover:bg-green-600 text-white text-sm font-bold py-2 px-4 rounded-xl flex items-center justify-center gap-2 transition-colors ml-11",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.6 1.967.3 4.54 1.489 6.208l-1.015 3.684zm11.239-5.188c-.689-.356-3.881-1.916-4.226-2.093-.345-.177-.662-.232-.904.143-.241.375-1.285 1.598-1.587 1.916-.302.318-.604.356-1.293.036-.688-.319-2.607-1.125-4.723-3.033-1.666-1.503-2.327-3.033-2.613-3.463-.286-.431-.19-.714-.005-1.077.17-.333.376-.554.568-.795.191-.24.254-.406.381-.661.127-.255.064-.479-.032-.672-.096-.193-.905-2.18-.946-2.227-.376-.431-.776-.367-1.047-.356-.271.012-.583.036-.895.036-.312 0-.82.118-1.248.586-.427.468-1.631 1.593-1.631 3.886 0 2.293 1.672 4.509 1.903 4.819.232.31 3.284 5.013 7.955 7.031 3.324 1.436 4.607 1.151 5.437 1.072 1.428-.135 3.33-1.365 3.799-2.682.469-1.317.469-2.443.328-2.682-.141-.239-.531-.383-1.219-.728z"})}),"Share Proof on WhatsApp"]})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 px-4 py-3 rounded-xl font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:s,className:"flex-1 px-4 py-3 rounded-xl font-bold text-white bg-slate-900 dark:bg-white dark:text-slate-900 hover:opacity-90 transition-opacity",children:"I Have Paid"})]})]})}):null,ce=({onSelectPlan:l,compact:s})=>{const[n,i]=t.useState(null),[o,c]=t.useState(!1),x=[{id:"2-months",duration:"2 Months",price:"2,000",icon:y,color:"from-blue-500 to-cyan-500",popular:!1,features:[]},{id:"4-months",duration:"4 Months",price:"3,500",icon:p,color:"from-purple-500 to-pink-500",popular:!0,features:[]},{id:"6-months",duration:"6 Months",price:"5,000",icon:f,color:"from-amber-400 to-orange-500",popular:!1,features:[]}],k=x.find(t=>t.id===n),r=t=>{i(t),c(!0)},a=()=>{n&&(l(n),c(!1))};return s?e.jsxs(e.Fragment,{children:[o&&k&&e.jsx(oe,{plan:k,onClose:()=>c(!1),onConfirm:a}),x.map((t,l)=>{const s=t.icon,i=n===t.id;return e.jsxs("div",{onClick:()=>r(t.id),className:"relative group rounded-3xl p-1 transition-all duration-300 cursor-pointer animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards",style:{animationDelay:150*l+"ms"},children:[e.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${t.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl`}),e.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${t.color} opacity-0 ${i?"opacity-100":"group-hover:opacity-100"} transition-opacity duration-300`}),e.jsxs("div",{className:"relative h-full bg-white dark:bg-slate-900 rounded-[22px] p-8 flex flex-col items-center border border-slate-200 dark:border-slate-800 hover:border-transparent transition-colors duration-300",children:[t.popular&&e.jsx("div",{className:"absolute -top-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg transform -translate-y-1 group-hover:-translate-y-2 transition-transform duration-300",children:"MOST POPULAR"}),e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center text-white mb-6 shadow-lg transform group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.duration}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-8",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"PKR"}),e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:t.price})]}),e.jsx("ul",{className:"space-y-4 w-full mb-8 flex-1",children:t.features.map((l,s)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-1 p-0.5 rounded-full bg-gradient-to-br ${t.color}`,children:e.jsx(b,{className:"w-3 h-3 text-white",strokeWidth:3})}),e.jsx("span",{className:"text-slate-600 dark:text-slate-300 text-sm",children:l})]},s))}),e.jsx("button",{onClick:e=>{e.stopPropagation(),r(t.id)},className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all duration-300 transform active:scale-95\n                      bg-gradient-to-r ${t.color} hover:brightness-110 hover:shadow-xl\n                    `,children:"Select Plan"})]})]},t.id)})]}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-black text-slate-900 dark:text-white py-20 px-4 transition-colors duration-300",children:[o&&k&&e.jsx(oe,{plan:k,onClose:()=>c(!1),onConfirm:a}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 bg-clip-text text-transparent mb-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:"Choose Your Success Path"}),e.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto animate-in fade-in slide-in-from-bottom-6 duration-700 delay-100",children:"Unlock the full potential of your exam preparation with our premium plans tailored to your timeline."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:x.map((t,l)=>{const s=t.icon,i=n===t.id;return e.jsxs("div",{onClick:()=>r(t.id),className:"relative group rounded-3xl p-1 transition-all duration-300 cursor-pointer animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards",style:{animationDelay:150*l+"ms"},children:[e.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${t.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl`}),e.jsx("div",{className:`absolute inset-0 rounded-3xl bg-gradient-to-br ${t.color} opacity-0 ${i?"opacity-100":"group-hover:opacity-100"} transition-opacity duration-300`}),e.jsxs("div",{className:"relative h-full bg-white dark:bg-slate-900 rounded-[22px] p-8 flex flex-col items-center border border-slate-200 dark:border-slate-800 hover:border-transparent transition-colors duration-300",children:[t.popular&&e.jsx("div",{className:"absolute -top-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg transform -translate-y-1 group-hover:-translate-y-2 transition-transform duration-300",children:"MOST POPULAR"}),e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${t.color} flex items-center justify-center text-white mb-6 shadow-lg transform group-hover:scale-110 transition-transform duration-300`,children:e.jsx(s,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.duration}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-8",children:[e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"PKR"}),e.jsx("span",{className:"text-4xl font-bold tracking-tight",children:t.price})]}),e.jsx("ul",{className:"space-y-4 w-full mb-8 flex-1",children:t.features.map((l,s)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-1 p-0.5 rounded-full bg-gradient-to-br ${t.color}`,children:e.jsx(b,{className:"w-3 h-3 text-white",strokeWidth:3})}),e.jsx("span",{className:"text-slate-600 dark:text-slate-300 text-sm",children:l})]},s))}),e.jsx("button",{onClick:e=>{e.stopPropagation(),r(t.id)},className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all duration-300 transform active:scale-95\n                      bg-gradient-to-r ${t.color} hover:brightness-110 hover:shadow-xl\n                    `,children:"Select Plan"})]})]},t.id)})}),e.jsx("p",{className:"text-center text-slate-500 dark:text-slate-500 mt-12 text-sm",children:"All plans include a 7-day money-back guarantee. Secure payment processed via Stripe/local gateways."})]})]})},xe=[],ke=[],re="/api/openai",ye="gpt-4o-mini",pe=t=>{const e=(t=>{const e=t.trim();return e&&e.startsWith("```")?e.replace(/```(?:json)?/gi,"").trim():e})(t);try{return JSON.parse(e)}catch{const t=e.indexOf("{"),l=e.lastIndexOf("}");if(-1!==t&&-1!==l&&l>t)return JSON.parse(e.slice(t,l+1));const s=e.indexOf("["),n=e.lastIndexOf("]");if(-1!==s&&-1!==n&&n>s)return JSON.parse(e.slice(s,n+1));throw new Error("Failed to parse JSON response.")}},fe=async t=>{let e="";try{e=await t.text()}catch{e=""}let l=null;if(e)try{l=JSON.parse(e)}catch{l=null}return{text:e,json:l}},be=(t,e)=>{var l,s,n,i;const o=null==(l=t.text)?void 0:l.trim();return(null==(n=null==(s=t.json)?void 0:s.error)?void 0:n.message)||(null==(i=t.json)?void 0:i.error)||(o?o.slice(0,400):"")||e.statusText||`Request failed (${e.status})`},ae=async(t,e)=>{var l,s,n,i,o;const c={model:(null==e?void 0:e.model)||ye,messages:t,temperature:"number"==typeof(null==e?void 0:e.temperature)?e.temperature:.4};(null==e?void 0:e.responseFormat)&&(c.response_format=e.responseFormat);const x=await fetch(re,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(t=>{throw new Error(`Connection failed: ${t.message}`)});if(404===x.status)throw new Error(`AI Gateway not found (${re}). Please check your configuration.`);const k=await fe(x);if(!x.ok)throw new Error(be(k,x));if(!k.json)throw new Error("OpenAI proxy returned a non-JSON response.");return((null==(l=k.json)?void 0:l.text)||(null==(o=null==(i=null==(n=null==(s=k.json)?void 0:s.choices)?void 0:n[0])?void 0:i.message)?void 0:o.content)||"").trim()},_e={[d.ANATOMY]:["Snell's Clinical Anatomy","BD Chaurasia's Human Anatomy","Gray's Anatomy for Students (secondary)"],[d.PHYSIOLOGY]:["Guyton & Hall Textbook of Medical Physiology","Ganong's Review of Medical Physiology","BRS Physiology"],[d.BIOCHEMISTRY]:["Harper's Illustrated Biochemistry","Lippincott's Illustrated Reviews: Biochemistry","Clinical Biochemistry (Tietz/Devlin)"],[d.PHARMACOLOGY]:["Katzung & Trevor's Basic & Clinical Pharmacology","Rang & Dale's Pharmacology","Lippincott's Illustrated Reviews: Pharmacology"],[d.GENERAL_PATHOLOGY]:["Robbins Basic Pathology","Robbins & Cotran Pathologic Basis of Disease"],[d.MICROBIOLOGY]:["Ananthanarayan & Paniker's Textbook of Microbiology","Jawetz, Melnick & Adelberg's Medical Microbiology","Murray's Medical Microbiology"],[d.GENERAL_EMBRYOLOGY]:["Langman's Medical Embryology","Larsen's Human Embryology"],[d.ORAL_HISTOLOGY]:["Ten Cate's Oral Histology","Orban's Oral Histology & Embryology"],[d.TOOTH_MORPHOLOGY]:["Wheeler's Dental Anatomy, Physiology and Occlusion","Woelfel's Dental Anatomy","Ash's Dental Anatomy"],[d.DENTAL_MATERIALS]:["Phillips' Science of Dental Materials (Anusavice/Antonson)","Craig's Restorative Dental Materials","McCabe & Walls' Applied Dental Materials"],[d.ORAL_PATHOLOGY]:["Shafer's Textbook of Oral Pathology","Neville's Oral & Maxillofacial Pathology","Regezi & Sciubba"],[d.ORAL_MEDICINE_RADIOLOGY]:["Burket's Oral Medicine","Cawson's Essentials of Oral Pathology & Oral Medicine","White & Pharoah: Oral Radiology"],[d.PERIODONTOLOGY]:["Carranza's Clinical Periodontology","Lindhe's Clinical Periodontology and Implant Dentistry"],[d.PROSTHODONTICS]:["Boucher's Prosthodontic Treatment","McCracken's Removable Partial Prosthodontics","Rosenstiel's Contemporary Fixed Prosthodontics"],[d.ORAL_SURGERY]:["Peterson's Principles of Oral and Maxillofacial Surgery","Hupp, Ellis & Tucker: Contemporary Oral and Maxillofacial Surgery","Fonseca's Oral & Maxillofacial Surgery"],[d.OPERATIVE_ENDO]:["Sturdevant's Art and Science of Operative Dentistry","Ingle's Endodontics","Cohen's Pathways of the Pulp"],[d.ORTHODONTICS]:["Proffit: Contemporary Orthodontics","Graber's Orthodontics"],[d.PEDIATRICS]:["McDonald & Avery's Dentistry for the Child and Adolescent","Pinkham's Pediatric Dentistry","Welbury's Pediatric Dentistry"],[d.COMMUNITY_MEDICINE]:["Park's Textbook of Preventive and Social Medicine","Soben Peter's Essentials of Preventive & Community Dentistry"],[d.INTERNAL_MEDICINE]:["Davidson's Principles & Practice of Medicine","Harrison's Principles of Internal Medicine"],[d.SURGERY]:["Bailey & Love's Short Practice of Surgery","Schwartz's Principles of Surgery"],[d.OBGYN]:["Williams Obstetrics","Dutta's Obstetrics","Berek & Novak's Gynecology"]},ue=t=>"Public"===t?"\n**CONTEXT: Dental Tutor (Public)**\n- Audience: general public or preclinical dental students (non-exam setting).\n- Scope: dentistry and closely related medical topics only; tie back to oral health, dental care, or dental materials.\n- Goal: clear, practical, accurate, and clinically relevant explanations.\n- Safety: give general info only; do not diagnose; include red flags + when to seek urgent care when appropriate.\n- Style: natural, non-robotic tone; define jargon in 1 line when used.\n    ":"\n**CONTEXT: Postgraduate FCPS Part 1 (Dentistry/Medicine)**\n- Level: Advanced/Specialist.\n- Focus: High-yield past paper topics, specific values, mechanisms, and exclusions.\n- Key References: Snell's Clinical Anatomy (not Gray's students), BRS Physiology, Robbins Basic Pathology, Katzung (Pharma).\n- Tone: Concise, technical, focusing on exam keywords and buzzwords used by CPSP.\n- Scope: keep answers anchored to dental/medical relevance for dentistry.\n  ",de=async(t,e,l,s)=>{if(t===d.GENERAL_EMBRYOLOGY){const e=await(async()=>{try{const e=new URL("/api/notes",window.location.origin);e.searchParams.set("subject",t);l&&e.searchParams.set("topic",l);const n=await fetch(e.toString());if(!n.ok)return null;return await n.json();}catch{return null;}})();if(e&&e.content)return{subject:d.GENERAL_EMBRYOLOGY,content:e.content,keyPoints:Array.isArray(e.keyPoints)?e.keyPoints:[]}}if(t===d.DENTAL_MATERIALS&&l){const t=await(async t=>{if(!t)return null;const e=new URLSearchParams({subject:d.DENTAL_MATERIALS,topic:t});try{const t=await fetch(`/api/notes?${e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return null;const l=await t.json();if(!l||"string"!=typeof l.content)return null;const s=Array.isArray(l.keyPoints)?l.keyPoints:[];return{content:l.content,keyPoints:s}}catch(l){return null}})(l);if(t)return{subject:d.DENTAL_MATERIALS,content:t.content,keyPoints:t.keyPoints}}if(t===d.ANATOMY&&l){const t=await(async t=>{if(!t)return null;const e=new URLSearchParams({subject:d.ANATOMY,topic:t});try{const t=await fetch(`/api/notes?${e.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return null;const l=await t.json();if(!l||"string"!=typeof l.content)return null;const s=Array.isArray(l.keyPoints)?l.keyPoints:[];return{content:l.content,keyPoints:s}}catch(l){return null}})(l);if(t)return{subject:d.ANATOMY,content:t.content,keyPoints:t.keyPoints}}if(t===d.ANATOMY&&l){const t=l.toLowerCase();if(t.includes("skull bone")||t.includes("sutures"))return{subject:d.ANATOMY,content:'',keyPoints:xe};if(t.includes("mandible"))return{subject:d.ANATOMY,content:'',keyPoints:[]};if(t.includes("maxilla"))return{subject:d.ANATOMY,content:'',keyPoints:[]};if(t.includes("zygomatic")||t.includes("cheekbone"))return{subject:d.ANATOMY,content:'',keyPoints:[]};if(t.includes("sphenoid"))return{subject:d.ANATOMY,content:'',keyPoints:[]};if(t.includes("ethmoid"))return{subject:d.ANATOMY,content:'',keyPoints:[]};if(t.includes("foramina")||t.includes("fossae"))return{subject:d.ANATOMY,content:'',keyPoints:ke};if(t.includes("osteology")||t.includes("fracture"))return{subject:d.ANATOMY,content:Rt,keyPoints:Dt}}if(t===d.GENERAL_EMBRYOLOGY)return{subject:d.GENERAL_EMBRYOLOGY,content:Lt,keyPoints:Et};const n=ue(e),i=l?`Specific Topic: **${l}** (under subject ${t})`:`Subject: **${t}`,o=await ae([{role:"system",content:n.trim()},{role:"user",content:[`Provide a high-yield summary for the ${i}.`,"Ensure the content is strictly tailored to the reference books and level of difficulty specified in the context above.",'Start with an "Exam Scope" sentence defining what is most important for this specific topic in the exam.','Return ONLY valid JSON with keys: "subject", "content", "keyPoints" (array of strings).'].join("\n")}],{temperature:.3,responseFormat:{type:"json_object"},model:s}),c=pe(o);return{subject:t,content:c.content,keyPoints:c.keyPoints}},me=async(t,e=5,l,s,n="",i)=>{if(t===d.DENTAL_MATERIALS&&s&&(s.toLowerCase().includes("denture")||s.toLowerCase().includes("reline")||s.toLowerCase().includes("rebase")||s.toLowerCase().includes("polymers"))){let t=[];switch(n){case"Easy":t=[...Pt];break;case"Hard":t=[...Tt];break;case"Challenge":t=[...It];break;default:t=[...St]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("properties")){let t=[];const l=s.toLowerCase();if(l.includes("mechanical"))switch(n){case"Easy":t=[...ft];break;case"Hard":t=[...bt];break;case"Challenge":t=[...ft,...pt,...bt];break;default:t=[...pt]}else if(l.includes("thermal"))switch(n){case"Easy":t=[..._t];break;case"Hard":t=[...ut];break;case"Challenge":t=[..._t,...at,...ut];break;default:t=[...at]}else if(l.includes("chemical")||l.includes("biological"))switch(n){case"Easy":t=[...mt];break;case"Hard":t=[...wt];break;case"Challenge":t=[...mt,...dt,...wt];break;default:t=[...dt]}else if(l.includes("rheology"))switch(n){case"Easy":t=[...ht];break;case"Hard":t=[...vt];break;case"Challenge":t=[...ht,...gt,...vt];break;default:t=[...gt]}else if(l.includes("optical"))switch(n){case"Easy":t=[...qt];break;case"Hard":t=[...zt];break;case"Challenge":t=[...qt,...jt,...zt];break;default:t=[...jt]}else switch(n){case"Easy":t=[...Mt];break;case"Hard":t=[...Ct];break;case"Challenge":t=[...Nt];break;default:t=[...At]}const i=t.sort(()=>.5-Math.random()),o=i.slice(0,Math.min(e,i.length));return Yt(o)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("impression")){let t=[];switch(n){case"Easy":t=[...q];break;case"Hard":t=[...z];break;case"Challenge":t=[...q,...j,...z];break;default:t=[...j]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("gypsum")){let t=[];switch(n){case"Easy":t=[...M];break;case"Hard":t=[...C];break;case"Challenge":t=[...N];break;default:t=[...A]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("investment")){let t=[];switch(n){case"Easy":t=[...K];break;case"Hard":t=[...Y];break;case"Challenge":t=[...U];break;default:t=[...H]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("casting")){let t=[];switch(n){case"Easy":t=[...X];break;case"Hard":t=[...Q];break;case"Challenge":t=[...$];break;default:t=[...J]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&(s.toLowerCase().includes("cement")||s.toLowerCase().includes("liner")||s.toLowerCase().includes("base"))){let t=[];switch(n){case"Easy":t=[...st];break;case"Hard":t=[...lt];break;case"Challenge":t=[...et];break;default:t=[...tt]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("composite")){let t=[];switch(n){case"Easy":t=[...P];break;case"Hard":t=[...T];break;case"Challenge":t=[...I];break;default:t=[...S]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&(s.toLowerCase().includes("adhesion")||s.toLowerCase().includes("bonding"))){let t=[];switch(n){case"Easy":t=[...L];break;case"Hard":t=[...O];break;case"Challenge":t=[...L,...E,...O];break;default:t=[...E]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("wax")){let t=[];switch(n){case"Easy":t=[...D];break;case"Hard":t=[...W];break;case"Challenge":t=[...F];break;default:t=[...Z]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("amalgam")){let t=[];switch(n){case"Easy":t=[...ct];break;case"Hard":t=[...ot];break;case"Challenge":t=[...it];break;default:t=[...nt]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&(s.toLowerCase().includes("gic")||s.toLowerCase().includes("glass ionomer"))){let t=[];switch(n){case"Easy":t=[...h];break;case"Hard":t=[...g];break;case"Challenge":t=[...w];break;default:t=[...m]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&s.toLowerCase().includes("metal")){let t=[];switch(n){case"Easy":t=[...G];break;case"Hard":t=[...B];break;case"Challenge":t=[...V];break;default:t=[...R]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.DENTAL_MATERIALS&&s&&(s.toLowerCase().includes("ceramic")||s.toLowerCase().includes("porcelain"))){let t=[];switch(n){case"Easy":t=[...yt];break;case"Hard":t=[...rt];break;case"Challenge":t=[...kt];break;default:t=[...xt]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}if(t===d.GENERAL_EMBRYOLOGY){let t=[];switch(n){case"Easy":t=[...Wt];break;case"Hard":t=[...Ft];break;case"Challenge":t=[...Zt];break;default:t=[...Ot]}const l=t.sort(()=>.5-Math.random()),s=l.slice(0,Math.min(e,l.length));return Yt(s)}let o=ue(l);const c=""===t;let x="";if(c){x=`Comprehensive Exam covering: ${s}`,o=`You are generating a mixed-subject exam test for the ${l} curriculum. The student has completed the following modules: ${s}. Ensure questions are fairly distributed across these subjects.`}else x=s?`Topic: **${s}** (Subject: ${t})`:`Subject: **${t}**`;let k="";switch(n){case"Easy":k="Questions should be straightforward recall, definitions, or basic concept checks. Options should be clearly distinct.";break;case"Medium":k="Questions should be clinical scenarios or application-based. Options should have good distractors but a clear best answer.";break;case"Hard":case"Challenge":k="Questions should be complex clinical vignettes, requiring multi-step reasoning, diagnosis of rare presentations, or management of complications. Options should be very close distractors requiring precise knowledge."}const r=await ae([{role:"system",content:"You are an expert dental exam item-writer (FCPS style)."},{role:"user",content:""}],{temperature:.5,responseFormat:{type:"json_object"},model:i}),y=pe(r);return Yt(y.items)},we=async(t,e,l="FCPS")=>{if(0===t.length)return e;const s=ue(l),n=t.map(t=>`${"user"===t.role?"Student":"Tutor"}: ${t.text}`).join("\n");return(await ae([{role:"system",content:""},{role:"user",content:""}],{temperature:.2})).trim()},ge=async(t,e="FCPS",l,s,n)=>{var i,o,c,x,k,r;const y=ue(e),p="Public"!==e&&l?`\n**CURRENT PAGE CONTENT (Notes the student is reading)**:\n---\n${l.substring(0,4e3)}\n---\n\nUse this content to give context-aware answers. If the student asks about something on the page, refer to it directly.`:"",f=(null==(i=null==s?void 0:s.summary)?void 0:i.trim())?`\n**EARLIER CONVERSATION SUMMARY**:\n${s.summary}\n`:"",b=(null==s?void 0:s.recentMessages)&&s.recentMessages.length>0?`\n**RECENT CONVERSATION**:\n${s.recentMessages.map(t=>`${"user"===t.role?"Student":"Tutor"}: ${t.text}`).join("\n")}\n`:"",a=``\n**REFERENCE TEXTS (use primary sources first)**:\n${Object.entries(_e).map(([t,e])=>{const l=e.slice(0,2),s=e.slice(2);return`- ${t}: Primary: ${l.join("; ")}${s.length?`; Secondary: ${s.join("; ")}`:""}`}).join("\n")}\n`}\n${p}\n${f}\n${b}\n\nGOAL: Give a focused, detailed, dental-relevant answer that is accurate and useful.\n\nRULES:\n- Prioritize dental relevance. If the question is not dental, ask a clarifying question and steer it to dental context.\n- Be specific and complete: include key mechanisms, indications/contraindications, clinical relevance, and common pitfalls when appropriate.\n- Aim to answer fully in one response (assume the user wants all relevant detail to avoid follow-up requests).\n- Avoid filler or random facts. Only include points that directly answer the question.\n- Structure: brief overview paragraph + 8-16 bullets or a small table if it improves clarity. Use headings when helpful.\n- Include high-yield exam phrases/buzzwords when stream is not Public.\n- If the user is wrong: gently correct and explain the correct concept.\n- Ask a follow-up question ONLY if required to answer safely or accurately.\n- No quiz mode unless the user asks for it.\n- Use the reference list above as the source-of-truth. If unsure, say so rather than inventing.\n${"Public"===e?"- Use plain language (no exam framing). Define jargon in 1 line.":"- Stick to the curriculum level defined above and use exam-relevant buzzwords."}\n  `,_=await fetch(re,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:n||ye,messages:[{role:"system",content:a.trim()},{role:"user",content:""}],temperature:.4})}).catch(t=>{throw new Error(`Connection failed: ${t.message}`)});if(404===_.status)throw new Error(`AI Gateway not found (${re}). Please check your configuration.`);const u=await fe(_);if(!_.ok)throw new Error(be(u,_));if(!u.json)throw new Error("OpenAI proxy returned a non-JSON response.");return((null==(o=u.json)?void 0:o.text)||(null==(r=null==(k=null==(x=null==(c=u.json)?void 0:c.choices)?void 0:x[0])?void 0:k.message)?void 0:r.content)||"").trim()},he=[{id:"gpt-5.2",name:"ChatGPT 5.2",description:"Latest and most powerful model",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.1, GPT-4.1, GPT-4o, o1, o3"},{id:"gpt-4o",name:"GPT-4o",description:"Most capable, best for complex queries",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.2, GPT-5.1, GPT-4.1, o1, o3"},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"High performance, good for analysis",tier:"Premium",dailyLimit:"250K tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5.2, GPT-5.1, GPT-4.1, GPT-4o, o1, o3"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast and efficient, recommended",tier:"Standard",dailyLimit:"2.5M tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5-mini, o1-mini, o3-mini, codex-mini"},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",description:"Quick responses, basic queries",tier:"Standard",dailyLimit:"2.5M tokens/day (shared)",dailyLimitNote:"Shared with: GPT-5-mini, o1-mini, o3-mini, codex-mini"}],ve="gpt-4o-mini",je=t=>{const e=he.find(e=>e.id===t);return(null==e?void 0:e.name)||t},qe=({currentModel:t,onModelChange:l,isOpen:s,onClose:n})=>s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[400]",onClick:n}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[401] pointer-events-none",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-[90vw] md:w-[500px] max-h-[85vh] overflow-y-auto p-8 pointer-events-auto animate-in scale-95 fade-in duration-300",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Select AI Model"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Choose your preferred language model for responses"})]}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-3",children:he.map(s=>e.jsx("button",{onClick:()=>{l(s.id),n()},className:"w-full text-left p-4 rounded-2xl transition-all duration-200 border-2 group "+(t===s.id?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 dark:border-blue-400":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-white/5 hover:border-blue-300 dark:hover:border-blue-500"),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg "+(t===s.id?"text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-white"),children:s.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 bg-slate-200/50 dark:bg-slate-700/50 px-2 py-1 rounded",children:["ðŸ“Š ",s.dailyLimit]}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:s.dailyLimitNote})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[11px] font-bold px-3 py-1 rounded-full whitespace-nowrap "+("Premium"===s.tier?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:s.tier}),t===s.id&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})},s.id))}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-white/5 space-y-3",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Premium models (GPT-5.2, GPT-4o) provide better responses for complex queries. Standard models (GPT-4o Mini) are faster and cost-effective."]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-700 dark:text-orange-300",children:"ðŸ“Š Shared Daily Token Limits (Reset at Midnight UTC):"}),e.jsxs("div",{className:"space-y-2 text-xs text-orange-600 dark:text-orange-400",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Premium Tier (250K tokens/day - Shared):"}),e.jsx("p",{className:"text-[11px] ml-2",children:"GPT-5.2, GPT-5.1, GPT-4.1, GPT-4o, o1, o3"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"Standard Tier (2.5M tokens/day - Shared):"}),e.jsx("p",{className:"text-[11px] ml-2",children:"GPT-5-mini, GPT-4o Mini, o1-mini, o3-mini"})]})]})]})]})]})})]}):null,ze=({href:t,children:l})=>{if(!t)return e.jsx(e.Fragment,{children:l});return e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",onClick:e=>{var l,s;const n=t.includes("youtube.com")||t.includes("youtu.be"),i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(n&&i){e.preventDefault();let n="";if(t.includes("youtu.be/")?n=(null==(l=t.split("youtu.be/")[1])?void 0:l.split("?")[0])||"":t.includes("youtube.com/watch?v=")?n=new URL(t).searchParams.get("v")||"":t.includes("youtube.com/embed/")&&(n=(null==(s=t.split("/embed/")[1])?void 0:s.split("?")[0])||""),n){const t=``,e=`https://www.youtube.com/watch?v=${n}`;window.location.href=t,setTimeout(()=>{window.location.href=e},1e3)}}},className:"text-blue-600 dark:text-blue-400 hover:underline",children:l})},Ae=({pageContext:l})=>{const[s,n]=t.useState(!1),[i,o]=t.useState(!1),[c,x]=t.useState([]),[k,r]=t.useState(""),[y,p]=t.useState(!1),[f,b]=t.useState(!1),[_,u]=t.useState(!1),[d,m]=t.useState(()=>"undefined"!=typeof window&&localStorage.getItem("selectedAIModel")||ve),w=t.useRef(null);t.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[c,y]);const g=async t=>{const e=(t??k).trim();if(!e||y||f)return;const s=e;r(""),x(t=>[...t,{role:"user",text:s}]),p(!0);try{const t=await ge(s,"Public",l,void 0,d),e=(t=>{const e=[];return(t.toLowerCase().includes("mechanism")||t.toLowerCase().includes("pathway"))&&e.push("What are the clinical implications?"),(t.toLowerCase().includes("treatment")||t.toLowerCase().includes("therapy"))&&e.push("What are the contraindications?"),(t.toLowerCase().includes("disease")||t.toLowerCase().includes("condition"))&&e.push("How is this diagnosed?"),(t.toLowerCase().includes("drug")||t.toLowerCase().includes("medication"))&&e.push("What are the drug interactions?"),0===e.length&&e.push("Tell me more"),e.length<3&&e.push("How is this tested in exams?"),[...new Set(e)].slice(0,3)})(t);x(l=>[...l,{role:"ai",text:t,suggestedQuestions:e}])}catch(n){(t=>{const e=((null==t?void 0:t.message)||JSON.stringify(t)||"").toLowerCase();return e.includes("quota")||e.includes("resource_exhausted")||e.includes("rate limit")||e.includes("429")})(n)?(b(!0),x(t=>[...t,{role:"ai",text:"âš ï¸ **Daily limit reached** - You've hit the daily token limit for this model tier.\n\n**Premium Models** (GPT-5.2, GPT-4o, GPT-4 Turbo): 250K tokens/day (shared)\n\n**Standard Models** (GPT-4o Mini, GPT-3.5 Turbo): 2.5M tokens/day (shared)\n\nPlease try again after midnight UTC when the quota resets."}])):x(t=>[...t,{role:"ai",text:`I encountered an error: ${(null==n?void 0:n.message)||JSON.stringify(n)}. If you are the admin, in Cloudflare **Pages** open your project â†’ Settings â†’ Environment variables â†’ add secret OPENAI_API_KEY (Production, and Preview if needed) then redeploy.`}])}finally{p(!1)}};return e.jsxs("div",{className:"fixed bottom-24 md:bottom-6 right-6 z-[300]",children:[s?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] shadow-2xl border border-slate-200 dark:border-white/10 flex flex-col overflow-hidden animate-in slide-in-from-bottom-8 duration-500 transition-all ease-in-out "+(i?"w-[90vw] md:w-[80vw] lg:w-[1000px] h-[85vh]":"w-[22rem] md:w-[26rem] h-[600px]"),children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white flex justify-between items-center shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold block leading-none",children:"DentEdge Assistant"}),e.jsx("span",{className:"text-[10px] text-blue-100 font-bold uppercase tracking-wider",children:"Quick Review Mode"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u(!0),className:"hover:bg-white/10 rounded-full p-2 transition-colors group relative",title:"Select AI Model",children:[e.jsx("div",{className:"absolute -bottom-12 right-0 bg-slate-900 text-white text-[10px] font-bold px-3 py-1 rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:je(d)}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]}),e.jsx("button",{onClick:()=>o(!i),className:"hover:bg-white/10 rounded-full p-2 transition-colors",title:i?"Collapse":"Expand",children:i?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 14h6m0 0v6m0-6L3 21m17-7h-6m0 0v6m0-6l7 7m-7-17h6m0 0v6m0-6L21 3M4 10h6m0 0V4m0 6L3 3"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsx("button",{onClick:()=>n(!1),className:"hover:bg-white/10 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{ref:w,className:"flex-1 p-5 overflow-y-auto space-y-5 bg-slate-50/50 dark:bg-slate-950/50",children:[f&&e.jsx("div",{className:"text-xs font-semibold text-red-700 bg-red-100/80 dark:text-red-300 dark:bg-red-900/40 px-4 py-3 rounded-xl border border-red-300 dark:border-red-700",children:"âš ï¸ Daily limit reached for this model tier. Resets at midnight UTC."}),0===c.length&&e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-500/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-600 dark:text-blue-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 mb-2",children:"How can I help you study?"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed italic",children:'"Explain the mechanism of Warfarin and its interaction with Vitamin K."'})]}),c.map((t,l)=>e.jsxs("div",{children:[e.jsx("div",{className:"flex "+("user"===t.role?"justify-end":"justify-start"),children:e.jsx("div",{className:"max-w-[90%] p-4 rounded-2xl text-sm shadow-sm "+("user"===t.role?"bg-blue-600 text-white rounded-tr-none font-medium":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-white/5 rounded-tl-none medical-serif"),children:"ai"===t.role?e.jsx("div",{className:"prose prose-slate dark:prose-invert prose-sm max-w-none",children:e.jsx(a,{components:{a:ze},children:t.text})}):t.text})}),"ai"===t.role&&t.suggestedQuestions&&t.suggestedQuestions.length>0&&e.jsx("div",{className:"mt-3 ml-0 flex flex-col gap-1.5",children:t.suggestedQuestions.map((t,l)=>e.jsxs("button",{onClick:()=>g(t),className:"text-left px-3 py-2 text-[11px] font-semibold bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/40 transition-colors",children:["ðŸ’¡ ",t]},l))})]},l)),y&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-white/5 rounded-tl-none flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.2s]"}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-bounce [animation-delay:0.4s]"})]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Reviewing clinical pearls..."})]})})]}),e.jsx("div",{className:"p-4 border-t bg-white dark:bg-slate-900 border-slate-100 dark:border-white/5",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),g(k)},className:"flex gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:t=>r(t.target.value),disabled:f,placeholder:"Type your question...",className:"flex-1 bg-slate-100 dark:bg-slate-950 border-none rounded-2xl px-5 py-3 text-sm focus:ring-4 focus:ring-blue-500/10 outline-none text-slate-900 dark:text-white"}),e.jsx("button",{type:"submit",disabled:y||f||!k.trim(),className:"p-3 rounded-xl transition-colors shadow-lg shadow-blue-200 dark:shadow-blue-900/20 "+(y||f||!k.trim()?"bg-blue-400 text-white/80":"bg-blue-600 text-white hover:bg-blue-700"),children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})})]}):e.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white p-4 rounded-3xl shadow-2xl hover:scale-105 transition-all active:scale-95 group relative border-4 border-white dark:border-slate-800",children:[e.jsx("div",{className:"absolute -top-14 right-0 bg-slate-900 text-white text-[11px] font-bold px-4 py-2 rounded-xl shadow-xl opacity-0 group-hover:opacity-100 transition-all whitespace-nowrap translate-y-2 group-hover:translate-y-0",children:"QUICK CLINICAL QUERY"}),e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012-2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})]}),e.jsx(qe,{currentModel:d,onModelChange:t=>{m(t),"undefined"!=typeof window&&localStorage.setItem("selectedAIModel",t)},isOpen:_,onClose:()=>u(!1)})]})},Ne=({size:t=40,className:l="",showText:s=!1})=>e.jsxs("div",{className:`flex items-center gap-2 ${l}`,children:[e.jsx("svg",{width:t,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{children:[e.jsx("path",{d:"M24 4C20 4 18 8 18 14C18 20 20 28 24 32C28 28 30 20 30 14C30 8 28 4 24 4Z",fill:"white",stroke:"white",strokeWidth:"1"}),e.jsx("text",{x:"24",y:"22",fontSize:"20",fontWeight:"bold",fill:"#6B5FEA",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",children:"D"}),e.jsx("ellipse",{cx:"22",cy:"14",rx:"3",ry:"5",fill:"white",opacity:"0.4"})]})}),s&&e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"DentEdge"})]}),Ce=t.lazy(()=>Bt(()=>import("./SubjectCard-CQ1Cp4OE.js"),__vite__mapDeps([0,1,2,3,4,5]))),Me=t.lazy(()=>Bt(()=>import("./SummaryView-D90gHo10.js"),__vite__mapDeps([6,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Se=t.lazy(()=>Bt(()=>import("./Quiz-DsofsE4X.js"),__vite__mapDeps([23,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Ie=t.lazy(()=>Bt(()=>import("./QuestionBankView-BpdBun2w.js"),__vite__mapDeps([24,1,2,3]))),Te=t.lazy(()=>Bt(()=>import("./SubjectDetailView-CZileYpx.js"),__vite__mapDeps([25,1,2,3,4,5]))),Pe=t.lazy(()=>Bt(()=>import("./ProgressAnalyticsDashboard-62HoLTuv.js"),__vite__mapDeps([26,1,2,3]))),Ee=t.lazy(()=>Bt(()=>import("./QuickQuizModal-DGcSBhLm.js"),__vite__mapDeps([27,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Le=t.lazy(()=>Bt(()=>import("./AdminDashboard-CtpGaLjv.js"),__vite__mapDeps([28,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Oe=t.lazy(()=>Bt(()=>import("./AIChatView-CLJtLBYF.js"),__vite__mapDeps([29,1,2,3,7,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),Ze=t=>String(t||"").trim().toLowerCase(),Fe=t=>{if(!t)return null;if(t.email)return t.email;const e=t.user_metadata||{};return e.email||e.preferred_email||e.preferredEmail||null},We=[d.ANATOMY,d.PHYSIOLOGY],De=[d.BIOCHEMISTRY,d.PHARMACOLOGY,d.GENERAL_PATHOLOGY,d.MICROBIOLOGY,d.GENERAL_EMBRYOLOGY],Re=[d.ORAL_HISTOLOGY,d.TOOTH_MORPHOLOGY,d.DENTAL_MATERIALS,d.ORAL_PATHOLOGY,d.ORAL_MEDICINE_RADIOLOGY,d.PERIODONTOLOGY,d.COMMUNITY_MEDICINE,d.PEDIATRICS],Ve=({user:t,authLoading:l,hasSubscription:s,error:n,onForceLogout:i})=>{const o=Fe(t),c=(t=>{const e=Ze(t);return!!e&&["tarab_ali29@yahoo.com"].includes(e)})(o);return c?e.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] pointer-events-auto",children:e.jsxs("div",{className:"bg-slate-950/95 border border-green-500/30 rounded-2xl p-4 shadow-2xl backdrop-blur-md min-w-[240px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-[10px] font-bold text-green-500 uppercase tracking-widest",children:"Debug Status"}),e.jsx("button",{onClick:i,className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-[10px] font-bold rounded-lg transition-colors uppercase tracking-tight",children:"Force Logout"})]}),e.jsxs("div",{className:"space-y-1.5 font-mono text-[11px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Loading:"}),e.jsx("span",{className:l?"text-amber-400":"text-green-400",children:String(l)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"User:"}),e.jsx("span",{className:"text-blue-400 truncate ml-4 max-w-[140px]",children:o||"null"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Subscribed:"}),e.jsx("span",{className:s||c?"text-green-400":"text-red-400",children:String(s||c)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Origin:"}),e.jsx("span",{className:"text-amber-400 truncate ml-4 max-w-[140px] shadow-sm",children:"undefined"!=typeof window?window.location.origin:"null"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-500",children:"Deployed:"}),e.jsx("span",{className:"text-cyan-400 text-[10px] ml-4 truncate max-w-[140px]",children:new Date("2026-02-08T11:03:35.165Z").toLocaleString()})]}),n&&e.jsx("div",{className:"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg text-[10px] text-red-400 break-words max-w-[200px]",children:"string"==typeof n?n:JSON.stringify(n)})]})]})}):null},Be=({message:t,onReset:l,onReload:s})=>e.jsxs("div",{className:"mx-4 md:mx-8 mt-4 mb-6 rounded-xl border border-red-500/40 bg-red-500/10 text-red-200 px-4 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold",children:"Login issue detected"}),e.jsx("div",{className:"text-red-300",children:t})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-red-500/20 text-red-200 hover:bg-red-500/30 text-sm font-medium",children:"Reset Login"}),e.jsx("button",{onClick:s,className:"px-3 py-1.5 rounded-lg bg-white/10 text-white hover:bg-white/20 text-sm font-medium",children:"Retry"})]})]}),Ge="".split(",").map(t=>t.trim().toLowerCase()).filter(Boolean),He=Array.from(new Set(["tarab_ali29@yahoo.com",...Ge])),Ue=t=>!!t&&He.includes(Ze(t)),Ye=t=>{const e=String((null==t?void 0:t.message)||t||"").toLowerCase(),l=String((null==t?void 0:t.name)||"").toLowerCase();return e.includes("abort")||e.includes("signal")||e.includes("cancelled")||e.includes("canceled")||"aborterror"===l},Ke=t=>{const e=String((null==t?void 0:t.message)||t||"").toLowerCase();return e.includes("timed out")||e.includes("timeout")},Je=()=>{var l;const[s,n]=t.useState(null),[i,o]=t.useState(!1),[c,x]=t.useState(!1),[k,y]=t.useState(!0),[p,f]=t.useState(null),[b,a]=t.useState(null),[_,u]=t.useState("dashboard"),[m,w]=t.useState("dashboard"),[g]=t.useState("FCPS"),[h,v]=t.useState(null),[j,q]=t.useState(void 0),[z,A]=t.useState(()=>{try{const t=localStorage.getItem("dentedge_theme");if("dark"===t)return!0;if("light"===t)return!1}catch{}return!1}),[N,C]=t.useTransition(),[M,S]=t.useState(void 0),[I,T]=t.useState(new Set),[P,E]=t.useState(!1),[L,O]=t.useState(null),[Z,F]=t.useState({}),[W,D]=t.useState([]),[R,V]=t.useState(!1),[B,G]=t.useState(!1),H=i||Ue(Fe(s)),U=t=>{if(null==t?void 0:t.is_subscribed)return!0;if(null==t?void 0:t.subscription_end_date){const e=new Date(t.subscription_end_date).getTime();if(!Number.isNaN(e)&&e>Date.now())return!0}return!1},Y=async()=>{f("Your account has been blocked. Please contact support."),x(!1),o(!1);try{await(async()=>{let t=null;try{t=(await Jt.auth.signOut({scope:"local"})).error}catch(e){t=e}finally{Qt()}return{error:t}})()}catch{Xt()}n(null),u("dashboard")};t.useEffect(()=>{const t="undefined"!=typeof window&&window.location.hash.includes("access_token"),e=(()=>{if("undefined"==typeof window)return!1;const t=t=>Object.keys(t).some(t=>t.startsWith("sb-")&&t.endsWith("-auth-token"));try{if(t(window.localStorage)||t(window.sessionStorage))return!0}catch{}return!1})();t||e||y(!1);const l=setTimeout(()=>{t||y(!1)},e?1500:600),{data:{subscription:s}}=(i=async(t,e)=>{window.location.hash;try{if("SIGNED_IN"===t&&(null==e?void 0:e.user)){n(e.user),y(!1),f(null);const{data:t}=await te(e.user.id);if("blocked"===(null==t?void 0:t.role))return void(await Y());const l=await ee(e.user.id),s=Fe(e.user),i=l||Ue(s);o(i);const c=i||U(t);if(x(c),window.location.hash.includes("access_token"))window.history.replaceState(null,"",window.location.pathname);else if(window.location.hash.includes("error=")){const t=window.location.hash.match(/error_description=([^&]+)/),e=t?decodeURIComponent(t[1].replace(/\+/g," ")):"Unknown OAuth error";f(`Login failed: ${e}`)}return}if("SIGNED_OUT"===t)return n(null),x(!1),void f(null);if(n((null==e?void 0:e.user)??null),y(!1),null==e?void 0:e.user){const{data:t}=await te(e.user.id);if("blocked"===(null==t?void 0:t.role))return void(await Y());const l=await ee(e.user.id),s=Fe(e.user),n=l||Ue(s);o(n),x(n||U(t)),f(null)}else x(!1),f(null)}catch(l){if((null==l?void 0:l.message)||String(l),!Ye(l)){const t=(null==e?void 0:e.user)?Fe(e.user):null;t&&Ue(t)&&(o(!0),x(!0))}}},Jt.auth.onAuthStateChange(i));var i;return(async()=>{var t;let e=null;try{const{data:{session:i},error:c}=await(l=Jt.auth.getSession(),s=15e3,Promise.race([l,new Promise((t,e)=>{const n=setTimeout(()=>{const t=new Error("Session check timed out after "+s+"ms");e(t)},s);l.finally(()=>clearTimeout(n)).catch(()=>{})})]));if(c){const t=(null==c?void 0:c.message)||String(c),e=Ye(c),l=Ke(c);f(e||l?null:t)}else if(null==i?void 0:i.user){e=i.user.email,f(null),n(i.user),y(!1);const l=Jt.auth.getUser().catch(t=>({data:{user:null},error:t})),[s,c,k]=await Promise.allSettled([l,te(i.user.id),ee(i.user.id)]),r="fulfilled"===s.status?null==(t=s.value.data)?void 0:t.user:null,p="fulfilled"===s.status?s.value.error:s.reason,b="fulfilled"===c.status?c.value.data:null,a=("fulfilled"===c.status?c.value.error:c.reason,"fulfilled"===k.status&&k.value);if(p||!r||(n(r),e=r.email),c.status,k.status,"blocked"===(null==b?void 0:b.role))return void(await Y());const _=Fe(r||i.user),u=a||!!_&&Ue(_);o(u),x(u||U(b||void 0))}else f(null)}catch(i){const t=(null==i?void 0:i.message)||String(i);Ye(i)||Ke(i)?(f(null),y(!1)):e&&Ue(e)?(o(!0),x(!0),f(null)):e?f(null):(f(t),n(null),x(!1))}finally{y(!1)}var l,s})(),()=>{s.unsubscribe(),clearTimeout(l)}},[]),t.useEffect(()=>{z?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[z]),t.useEffect(()=>{(null==s?void 0:s.id)&&(async t=>{try{const{data:e,error:l}=await Jt.from("quiz_stats").select("subject, correct, incorrect").eq("user_id",t);return l?{}:(e||[]).reduce((t,e)=>({...t,[e.subject]:{correct:e.correct,incorrect:e.incorrect}}),{})}catch(e){return{}}})(s.id).then(t=>F(t||{}))},[null==s?void 0:s.id]),t.useEffect(()=>{(null==s?void 0:s.id)&&(async t=>{try{const{data:e,error:l}=await Jt.from("mock_scores").select("score, total, timestamp").eq("user_id",t).order("timestamp",{ascending:!1}).limit(10);return l?[]:(e||[]).reverse()}catch(e){return[]}})(s.id).then(t=>D(t||[]))},[null==s?void 0:s.id]),t.useEffect(()=>{if(H)return;const t=t=>{var e;const l=t.target;if(l&&("INPUT"===l.tagName||"TEXTAREA"===l.tagName||l.isContentEditable))return;t.preventDefault();const s=(null==(e=window.getSelection())?void 0:e.toString())||"";s&&t.clipboardData&&t.clipboardData.setData("text/plain",(t=>{let e=t;return e=Ht(e),e=Ht(e),"\nâš ï¸ NOTICE: This content is protected educational material from DentEdge.net\nUnauthorized distribution or commercial use is prohibited.\nFormat may be corrupted in copied text.\n\n---\n\n"+e})(s))},e=t=>{const e=t.target,l=e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable);let s=!1;if(!t.ctrlKey&&!t.metaKey||"a"!==t.key||l||(s=!0),!t.ctrlKey&&!t.metaKey||"c"!==t.key||l||(s=!0),(t.ctrlKey||t.metaKey)&&"s"===t.key&&(s=!0),"F12"===t.key&&(s=!0),!t.ctrlKey&&!t.metaKey||!t.shiftKey||"I"!==t.key&&"i"!==t.key||(s=!0),!t.ctrlKey&&!t.metaKey||!t.shiftKey||"J"!==t.key&&"j"!==t.key||(s=!0),!t.ctrlKey&&!t.metaKey||"u"!==t.key&&"U"!==t.key||(s=!0),s)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1},l=t=>{const e=t.target;(!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName)&&t.preventDefault()};return document.addEventListener("copy",t),document.addEventListener("keydown",e,!0),document.addEventListener("contextmenu",l),()=>{document.removeEventListener("copy",t),document.removeEventListener("keydown",e,!0),document.removeEventListener("contextmenu",l)}},[H]);const K=()=>{A(t=>{const e=!t;try{localStorage.setItem("dentedge_theme",e?"dark":"light")}catch{}return e})},J=()=>{try{localStorage.clear(),sessionStorage.clear()}catch(t){}f(null),n(null),x(!1),u("dashboard"),w("dashboard"),v(null),q(void 0),window.location.href=window.location.origin},$=()=>{Xt(),f(null),n(null),x(!1),u("dashboard"),w("dashboard"),v(null),q(void 0)},Q=t=>{v(t),u("subject-detail")},X=(t,e)=>{T(e=>{const l=new Set(e);return l.has(t)?l.delete(t):l.add(t),l})},tt=()=>{u("dashboard"),v(null),q(void 0)},et=(t,l,s="text-slate-400 dark:text-slate-300",n="border-slate-300 dark:border-white/10")=>{const i=[...l].sort((t,e)=>{const l=I.has(t);return l===I.has(e)?0:l?1:-1});return e.jsxs("div",{className:"mb-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("h2",{className:`text-lg font-bold uppercase tracking-widest px-4 border rounded-full py-1 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm ${s} ${n}`,children:t}),e.jsx("div",{className:`h-px flex-1 ${n.replace("border","bg")}`})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(t=>e.jsx(Ce,{subject:t,onClick:Q,isCompleted:I.has(t),onToggleComplete:X},t))})]})};if(k)return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:[e.jsx(r,{className:"w-8 h-8 animate-spin text-purple-600"}),e.jsx(Ve,{user:s,authLoading:k,hasSubscription:c,error:p,onForceLogout:J})]});const lt="string"==typeof p?p:p?String(p):"",st=Boolean(lt)&&!Ke(lt);if(!s)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[st&&e.jsx(Be,{message:lt,onReset:$,onReload:()=>window.location.reload()}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-20 pb-6 text-center",children:[e.jsx("h1",{className:"text-5xl font-bold text-white mb-3",children:"DentEdge"}),e.jsx("p",{className:"text-xl text-slate-300 mb-2",children:"High-Yield Dental Exam Preparation"}),e.jsx("p",{className:"text-slate-400 max-w-2xl mx-auto",children:"Curated notes, 2,000+ MCQs, and AI-powered tutoring for FCPS Part 1."})]}),e.jsx("div",{className:"max-w-3xl mx-auto px-4 pb-8",children:e.jsx("div",{className:"grid grid-cols-1 gap-4 text-center",children:e.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[e.jsx("div",{className:"text-purple-400 font-bold text-lg",children:"FCPS"}),e.jsx("div",{className:"text-slate-400 text-sm",children:"Part 1 Preparation"})]})})}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 pb-10",children:e.jsx("div",{className:"grid grid-cols-2 gap-x-6 gap-y-3",children:["2,000+ practice MCQs","Dental Materials & Oral Biology","AI-powered study tutor","FCPS-specific study plans","Progress tracking & analytics","Dark & light mode"].map(t=>e.jsxs("div",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[e.jsx("span",{className:"text-green-400 font-bold",children:"âœ“"}),t]},t))})}),e.jsx(ie,{onAuthSuccess:()=>{},compact:!0}),e.jsx(Ve,{user:s,authLoading:k,hasSubscription:c,error:p,onForceLogout:J})]});const nt=(t,e,l)=>{(t=>!(!c&&!H)||"Impression Materials"===t)(e)?C(()=>{e&&q(e),u(t)}):G(!0)};return e.jsxs(t.Suspense,{fallback:e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:e.jsx(r,{className:"w-8 h-8 animate-spin text-purple-600"})}),children:[B&&e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl max-w-md w-full p-8 shadow-2xl border border-slate-200 dark:border-slate-800 text-center animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white mx-auto mb-4 shadow-lg",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"This Topic is Locked"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Subscribe to unlock all topics, notes, and MCQs."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors border border-slate-200 dark:border-slate-700",children:"Cancel"}),e.jsx("button",{onClick:()=>{G(!1),V(!1)},className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-bold text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:brightness-110 shadow-lg transition-all",children:"Subscribe Now"})]})]})}),e.jsxs("div",{className:"min-h-screen transition-colors duration-300 "+(z?"dark bg-slate-900":"bg-slate-50"),children:[c||H||!R?null:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 text-center text-sm font-medium animate-in slide-in-from-top duration-500 relative z-50",children:e.jsxs("span",{children:["ðŸ”“ You are in Preview Mode. ",e.jsx("span",{className:"font-bold underline cursor-pointer",onClick:()=>V(!1),children:"Unlock Full Access"})," to see all content."]})}),st&&e.jsx(Be,{message:lt,onReset:$,onReload:()=>window.location.reload()}),e.jsx(Ve,{user:s,authLoading:k,hasSubscription:c,error:p,onForceLogout:J}),("quiz"===_||"summary"===_)&&e.jsx("div",{className:"fixed top-6 right-8 z-[100] animate-in slide-in-from-right-10 duration-500",children:e.jsx("button",{onClick:K,className:"p-3 rounded-2xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-all shadow-2xl border border-slate-200 dark:border-white/10 group active:scale-95",title:"Toggle Theme",children:z?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})}),(c||H)&&"quiz"!==_&&"summary"!==_&&e.jsxs("nav",{className:"glass-panel sticky top-4 mx-4 md:mx-8 z-40 rounded-2xl px-6 py-3 hidden md:flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:tt,children:[e.jsx(Ne,{size:48,className:"drop-shadow-lg group-hover:drop-shadow-2xl transition-all"}),e.jsx("span",{className:"font-bold text-xl tracking-tight text-slate-800 dark:text-white",children:"DentEdge"})]}),e.jsxs("div",{className:"flex items-center bg-white/50 dark:bg-slate-900/50 rounded-full p-1 border border-slate-200 dark:border-white/5",children:[e.jsx("button",{onClick:tt,className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("dashboard"===_?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"Dashboard"}),e.jsx("button",{onClick:()=>u("question-banks"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("question-banks"===_?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"MCQ Bank"}),e.jsx("button",{onClick:()=>u("ai-chat"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("ai-chat"===_?"bg-slate-200 dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:"AI Tutor"}),H&&e.jsx("button",{onClick:()=>u("admin"),className:"px-5 py-2 rounded-full text-sm font-medium transition-all "+("admin"===_?"bg-purple-500 text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-purple-500"),children:"Admin"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:K,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:text-cyan-600 dark:hover:text-white transition-colors",title:"Toggle Theme",children:z?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),H&&e.jsx("button",{onClick:()=>u("admin"),className:"px-3 py-1.5 bg-purple-600 text-white text-xs font-bold rounded shadow-lg hover:bg-purple-500 transition-all border border-purple-400",children:"ADMIN PANEL"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400 hidden lg:block",children:null==(l=null==s?void 0:s.email)?void 0:l.split("@")[0]}),e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm font-medium",children:"Sign Out"})]})]})]}),e.jsx("main",{className:"flex-1 container max-w-[1800px] mx-auto px-4 py-8 pb-32 md:pb-8",children:c||H||R?e.jsxs(e.Fragment,{children:["dashboard"===_&&(c||H||R)&&e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"px-6 py-2 rounded-full text-sm font-bold bg-purple-600 text-white shadow-lg shadow-purple-900/50",children:"FCPS Part 1"})}),e.jsxs("div",{className:"space-y-12",children:[e.jsx(Pe,{stream:g,completedSubjects:Array.from(I),quizStats:Z,userName:(null==(it=null==s?void 0:s.email)?void 0:it.split("@")[0])||"Student",isPreviewMode:R,onLockedAccess:()=>G(!0),onStartStudy:t=>{"Impression Materials"===t?(v(d.DENTAL_MATERIALS),q("Impression Materials"),w("dashboard"),u("quiz")):u("question-banks")},mockScores:W}),e.jsxs("div",{className:"pt-8 border-t border-slate-200 dark:border-white/5",children:[R&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold uppercase tracking-widest px-4 border rounded-full py-1 bg-green-50 dark:bg-green-900/20 border-green-500/30 text-green-700 dark:text-green-400",children:"âœ“ Preview Available"}),e.jsx("div",{className:"h-px flex-1 bg-green-500/20"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:e.jsx(Ce,{subject:d.DENTAL_MATERIALS,onClick:Q,isCompleted:I.has(d.DENTAL_MATERIALS),onToggleComplete:X},d.DENTAL_MATERIALS)})]}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-8 px-2",children:R?"Unlock Premium Access":"Course Modules"}),et("MBBS Major Topics",We,"text-purple-600 dark:text-purple-400","border-purple-500/20"),et("MBBS Minor Topics",De,"text-purple-600 dark:text-purple-400","border-purple-500/20"),et("Dental Sciences",Re,"text-purple-600 dark:text-purple-400","border-purple-500/20")]})]})]}),"subject-detail"===_&&h&&e.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:e.jsx(Te,{subject:h,stream:g,onSelectNoteTopic:t=>{nt("summary",t)},onSelectQuizTopic:t=>{nt("quiz",t)},onBack:tt,isPreviewMode:!c&&!H})}),"summary"===_&&h&&e.jsx("div",{className:"animate-in slide-in-from-right-4 fade-in duration-500",children:e.jsx(Me,{isDarkMode:z,subject:h,topic:j,stream:g,onStartQuiz:()=>{w("summary"),u("quiz")},onBack:()=>{u("subject-detail"),q(void 0)},onPageContentChange:S,isAdmin:H})}),"quiz"===_&&h&&e.jsx("div",{className:"animate-in zoom-in-95 fade-in duration-300",children:e.jsx(Se,{subject:h,topic:j,stream:g,onClose:()=>{u(j&&"string"==typeof h?"question-banks":j?"summary":"question-banks")},onReviewNotes:()=>{if("string"==typeof h&&h.includes(" - Practice Questions")){const t=h.replace(" - Practice Questions","");v(t),q(void 0)}u("summary")},onExitToDashboard:()=>{v(null),q(void 0),u("dashboard")},onUpdateStats:(t,e,l,n)=>{if(F(n=>{const i=n[t]||{correct:0,incorrect:0},o={correct:i.correct+e,incorrect:i.incorrect+l};return(null==s?void 0:s.id)&&(async(t,e,l,s)=>{try{const{error:n}=await Jt.from("quiz_stats").upsert({user_id:t,subject:e,correct:l,incorrect:s,updated_at:(new Date).toISOString()},{onConflict:"user_id,subject"});return!n}catch(n){return!1}})(s.id,t,o.correct,o.incorrect).catch(t=>{}),{...n,[t]:o}}),"Challenge"===n&&(null==s?void 0:s.id)){const t=e+l,n=Date.now(),i={score:e,total:t,timestamp:n};D(t=>[...t,i].slice(-10)),(async(t,e,l,s)=>{try{const{error:n}=await Jt.from("mock_scores").insert({user_id:t,score:e,total:l,timestamp:s});return!n}catch(n){return!1}})(s.id,e,t,n).catch(t=>{})}}})}),"question-banks"===_&&e.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e.jsx(Ie,{stream:g,onSelectTopic:t=>{v(t),q(void 0),w("question-banks"),u("quiz")}})}),"admin"===_&&H&&e.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e.jsx(t.Suspense,{fallback:e.jsx(r,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto"}),children:e.jsx(Le,{})})}),"ai-chat"===_&&e.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e.jsx(t.Suspense,{fallback:e.jsx(r,{className:"w-8 h-8 animate-spin text-cyan-600 mx-auto"}),children:e.jsx(Oe,{})})})]}):e.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500",children:[e.jsx("div",{className:"flex justify-end mb-4 mx-4",children:e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors text-sm font-medium",children:"Sign Out"})}),e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-8",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-red-100 dark:bg-red-900/30 text-red-500 mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Account Pending Activation"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Select a plan below to activate your account. If you have already paid, please contact Admin to approve your request."})]}),e.jsx("div",{className:"max-w-6xl mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{onClick:()=>{V(!0),v(d.DENTAL_MATERIALS),u("dashboard")},className:"relative cursor-pointer group",children:[e.jsx("div",{className:"absolute -top-3 right-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-1 rounded-full text-[10px] font-bold shadow-lg z-10",children:"FREE PREVIEW"}),e.jsxs("div",{className:"glass-panel min-h-80 rounded-2xl bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border border-purple-200 dark:border-purple-500/30 hover:border-purple-400 dark:hover:border-purple-400 transition-all hover:shadow-lg group-hover:scale-105 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-100 to-blue-100 dark:from-cyan-900/40 dark:to-blue-900/40 flex items-center justify-center text-cyan-600 dark:text-cyan-400 mb-3",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"Dental Materials"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2",children:"1 Topic Free"}),e.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-200 dark:bg-purple-700 rounded text-[10px] font-semibold text-purple-700 dark:text-purple-200",children:"Try Free"})]})]}),e.jsx(ce,{onSelectPlan:t=>{},compact:!0})]})})]})}),e.jsx(Ae,{pageContext:M}),P&&L&&e.jsx(Ee,{subject:L,stream:g,onClose:()=>E(!1),onUpdateStats:(t,e)=>{F(l=>{const s=l[t]||{correct:0,incorrect:0};return{...l,[t]:{correct:e?s.correct+1:s.correct,incorrect:e?s.incorrect:s.incorrect+1}}})},stats:Z[L]})]})]});var it};class $e extends t.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,e){this.setState({errorInfo:e})}render(){var t,l;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-8 text-center",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-8 rounded-2xl max-w-2xl w-full",children:[e.jsx(_,{className:"w-16 h-16 text-red-500 mx-auto mb-6"}),e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong."}),e.jsx("p",{className:"text-slate-300 mb-8",children:"We encountered an unexpected error. Please try refreshing the page."}),e.jsxs("div",{className:"bg-black/50 p-4 rounded-lg text-left overflow-auto max-h-64 font-mono text-sm mb-6 border border-slate-700",children:[e.jsx("p",{className:"text-red-400 font-bold mb-2",children:null==(t=this.state.error)?void 0:t.toString()}),e.jsx("pre",{className:"text-slate-500 whitespace-pre-wrap",children:null==(l=this.state.errorInfo)?void 0:l.componentStack})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-white text-slate-900 font-bold rounded-lg hover:bg-slate-200 transition-colors",children:"Reload Application"})]})}):this.props.children}}const Qe=document.getElementById("root");if(!Qe)throw new Error("Could not find root element to mount to");u.createRoot(Qe).render(e.jsx($e,{children:e.jsx(Je,{})}));export{ve as D,ze as M,me as a,Kt as b,ne as c,je as d,qe as e,de as f,se as g,ge as h,we as s,le as u};
